const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WorkspaceManager-BgxfzS8r.js","assets/WorkspaceManager-BTcLwpcs.css","assets/OrderList-BeDSpks6.js","assets/OrderList-D-y8lpON.css","assets/OrderCreate-_vKvCVxe.js","assets/OrderCreate-D6WSAjid.css","assets/OrderDetails-DVgBcoUi.js","assets/CommodityFlowSummaryModal-BowMhHdn.js","assets/CommodityFlowSummaryModal-CdgDRX5c.css","assets/OrderDetails--4kEcyk-.css","assets/JobForm-D691dwyr.js","assets/JobForm-DzGom0YV.css","assets/JobDetails-DIsPz3iW.js","assets/commodityService-_7iYQTpz.js","assets/JobDetails-BESbXzjc.css","assets/SiteManagement-B_6BKGO3.js","assets/SiteManagement-B6QYVnZT.css","assets/LedgerTable-DQ3fiWRS.js","assets/LedgerTable-BMQLEb5R.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function yi(e){const t=Object.create(null);for(const o of e.split(","))t[o]=1;return o=>o in t}const At=Object.freeze({}),pr=Object.freeze([]),Po=()=>{},m_=()=>!1,Cl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Uc=e=>e.startsWith("onUpdate:"),ro=Object.assign,Qf=(e,t)=>{const o=e.indexOf(t);o>-1&&e.splice(o,1)},v_=Object.prototype.hasOwnProperty,Lt=(e,t)=>v_.call(e,t),at=Array.isArray,ms=e=>bl(e)==="[object Map]",zr=e=>bl(e)==="[object Set]",jg=e=>bl(e)==="[object Date]",mt=e=>typeof e=="function",to=e=>typeof e=="string",jn=e=>typeof e=="symbol",Ht=e=>e!==null&&typeof e=="object",Yf=e=>(Ht(e)||mt(e))&&mt(e.then)&&mt(e.catch),AC=Object.prototype.toString,bl=e=>AC.call(e),Jf=e=>bl(e).slice(8,-1),IC=e=>bl(e)==="[object Object]",Zf=e=>to(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Fa=yi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),y_=yi("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),Mu=e=>{const t=Object.create(null);return o=>t[o]||(t[o]=e(o))},C_=/-(\w)/g,Fo=Mu(e=>e.replace(C_,(t,o)=>o?o.toUpperCase():"")),b_=/\B([A-Z])/g,fi=Mu(e=>e.replace(b_,"-$1").toLowerCase()),ks=Mu(e=>e.charAt(0).toUpperCase()+e.slice(1)),cs=Mu(e=>e?`on${ks(e)}`:""),Vo=(e,t)=>!Object.is(e,t),ar=(e,...t)=>{for(let o=0;o<e.length;o++)e[o](...t)},$c=(e,t,o,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:o})},jc=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Kg;const wl=()=>Kg||(Kg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Sl(e){if(at(e)){const t={};for(let o=0;o<e.length;o++){const n=e[o],i=to(n)?R_(n):Sl(n);if(i)for(const s in i)t[s]=i[s]}return t}else if(to(e)||Ht(e))return e}const w_=/;(?![^(]*\))/g,S_=/:([^]+)/,x_=/\/\*[^]*?\*\//g;function R_(e){const t={};return e.replace(x_,"").split(w_).forEach(o=>{if(o){const n=o.split(S_);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ft(e){let t="";if(to(e))t=e;else if(at(e))for(let o=0;o<e.length;o++){const n=Ft(e[o]);n&&(t+=n+" ")}else if(Ht(e))for(const o in e)e[o]&&(t+=o+" ");return t.trim()}const __="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",E_="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",P_="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",F_=yi(__),D_=yi(E_),T_=yi(P_),k_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",A_=yi(k_);function MC(e){return!!e||e===""}function I_(e,t){if(e.length!==t.length)return!1;let o=!0;for(let n=0;o&&n<e.length;n++)o=As(e[n],t[n]);return o}function As(e,t){if(e===t)return!0;let o=jg(e),n=jg(t);if(o||n)return o&&n?e.getTime()===t.getTime():!1;if(o=jn(e),n=jn(t),o||n)return e===t;if(o=at(e),n=at(t),o||n)return o&&n?I_(e,t):!1;if(o=Ht(e),n=Ht(t),o||n){if(!o||!n)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const r in e){const a=e.hasOwnProperty(r),l=t.hasOwnProperty(r);if(a&&!l||!a&&l||!As(e[r],t[r]))return!1}}return String(e)===String(t)}function Xf(e,t){return e.findIndex(o=>As(o,t))}const OC=e=>!!(e&&e.__v_isRef===!0),ye=e=>to(e)?e:e==null?"":at(e)||Ht(e)&&(e.toString===AC||!mt(e.toString))?OC(e)?ye(e.value):JSON.stringify(e,LC,2):String(e),LC=(e,t)=>OC(t)?LC(e,t.value):ms(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((o,[n,i],s)=>(o[Vd(n,s)+" =>"]=i,o),{})}:zr(t)?{[`Set(${t.size})`]:[...t.values()].map(o=>Vd(o))}:jn(t)?Vd(t):Ht(t)&&!at(t)&&!IC(t)?String(t):t,Vd=(e,t="")=>{var o;return jn(e)?`Symbol(${(o=e.description)!=null?o:t})`:e};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function un(e,...t){console.warn(`[Vue warn] ${e}`,...t)}let Ro;class BC{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ro,!t&&Ro&&(this.index=(Ro.scopes||(Ro.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].pause();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].resume();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].resume()}}run(t){if(this._active){const o=Ro;try{return Ro=this,t()}finally{Ro=o}}else un("cannot run an inactive effect scope.")}on(){++this._on===1&&(this.prevScope=Ro,Ro=this)}off(){this._on>0&&--this._on===0&&(Ro=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let o,n;for(o=0,n=this.effects.length;o<n;o++)this.effects[o].stop();for(this.effects.length=0,o=0,n=this.cleanups.length;o<n;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,n=this.scopes.length;o<n;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function NC(e){return new BC(e)}function HC(){return Ro}function M_(e,t=!1){Ro?Ro.cleanups.push(e):t||un("onScopeDispose() is called when there is no active effect scope to be associated with.")}let zt;const zd=new WeakSet;class GC{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ro&&Ro.active&&Ro.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zd.has(this)&&(zd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||zC(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,qg(this),WC(this);const t=zt,o=Cn;zt=this,Cn=!0;try{return this.fn()}finally{zt!==this&&un("Active effect was not restored correctly - this is likely a Vue internal bug."),UC(this),zt=t,Cn=o,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)op(t);this.deps=this.depsTail=void 0,qg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Bh(this)&&this.run()}get dirty(){return Bh(this)}}let VC=0,Da,Ta;function zC(e,t=!1){if(e.flags|=8,t){e.next=Ta,Ta=e;return}e.next=Da,Da=e}function ep(){VC++}function tp(){if(--VC>0)return;if(Ta){let t=Ta;for(Ta=void 0;t;){const o=t.next;t.next=void 0,t.flags&=-9,t=o}}let e;for(;Da;){let t=Da;for(Da=void 0;t;){const o=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=o}}if(e)throw e}function WC(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function UC(e){let t,o=e.depsTail,n=o;for(;n;){const i=n.prevDep;n.version===-1?(n===o&&(o=i),op(n),O_(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=o}function Bh(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&($C(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function $C(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ya)||(e.globalVersion=Ya,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Bh(e))))return;e.flags|=2;const t=e.dep,o=zt,n=Cn;zt=e,Cn=!0;try{WC(e);const i=e.fn(e._value);(t.version===0||Vo(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{zt=o,Cn=n,UC(e),e.flags&=-3}}function op(e,t=!1){const{dep:o,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),o.subsHead===e&&(o.subsHead=i),o.subs===e&&(o.subs=n,!n&&o.computed)){o.computed.flags&=-5;for(let s=o.computed.deps;s;s=s.nextDep)op(s,!0)}!t&&!--o.sc&&o.map&&o.map.delete(o.key)}function O_(e){const{prevDep:t,nextDep:o}=e;t&&(t.nextDep=o,e.prevDep=void 0),o&&(o.prevDep=t,e.nextDep=void 0)}let Cn=!0;const jC=[];function Sn(){jC.push(Cn),Cn=!1}function xn(){const e=jC.pop();Cn=e===void 0?!0:e}function qg(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const o=zt;zt=void 0;try{t()}finally{zt=o}}}let Ya=0;class L_{constructor(t,o){this.sub=t,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ou{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.subsHead=void 0}track(t){if(!zt||!Cn||zt===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==zt)o=this.activeLink=new L_(zt,this),zt.deps?(o.prevDep=zt.depsTail,zt.depsTail.nextDep=o,zt.depsTail=o):zt.deps=zt.depsTail=o,KC(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const n=o.nextDep;n.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=n),o.prevDep=zt.depsTail,o.nextDep=void 0,zt.depsTail.nextDep=o,zt.depsTail=o,zt.deps===o&&(zt.deps=n)}return zt.onTrack&&zt.onTrack(ro({effect:zt},t)),o}trigger(t){this.version++,Ya++,this.notify(t)}notify(t){ep();try{for(let o=this.subsHead;o;o=o.nextSub)o.sub.onTrigger&&!(o.sub.flags&8)&&o.sub.onTrigger(ro({effect:o.sub},t));for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{tp()}}}function KC(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)KC(n)}const o=e.dep.subs;o!==e&&(e.prevSub=o,o&&(o.nextSub=e)),e.dep.subsHead===void 0&&(e.dep.subsHead=e),e.dep.subs=e}}const Kc=new WeakMap,vs=Symbol("Object iterate"),Nh=Symbol("Map keys iterate"),Ja=Symbol("Array iterate");function po(e,t,o){if(Cn&&zt){let n=Kc.get(e);n||Kc.set(e,n=new Map);let i=n.get(o);i||(n.set(o,i=new Ou),i.map=n,i.key=o),i.track({target:e,type:t,key:o})}}function On(e,t,o,n,i,s){const r=Kc.get(e);if(!r){Ya++;return}const a=l=>{l&&l.trigger({target:e,type:t,key:o,newValue:n,oldValue:i,oldTarget:s})};if(ep(),t==="clear")r.forEach(a);else{const l=at(e),c=l&&Zf(o);if(l&&o==="length"){const u=Number(n);r.forEach((d,h)=>{(h==="length"||h===Ja||!jn(h)&&h>=u)&&a(d)})}else switch((o!==void 0||r.has(void 0))&&a(r.get(o)),c&&a(r.get(Ja)),t){case"add":l?c&&a(r.get("length")):(a(r.get(vs)),ms(e)&&a(r.get(Nh)));break;case"delete":l||(a(r.get(vs)),ms(e)&&a(r.get(Nh)));break;case"set":ms(e)&&a(r.get(vs));break}}tp()}function B_(e,t){const o=Kc.get(e);return o&&o.get(t)}function er(e){const t=yt(e);return t===e?t:(po(t,"iterate",Ja),Bo(e)?t:t.map(yo))}function Lu(e){return po(e=yt(e),"iterate",Ja),e}const N_={__proto__:null,[Symbol.iterator](){return Wd(this,Symbol.iterator,yo)},concat(...e){return er(this).concat(...e.map(t=>at(t)?er(t):t))},entries(){return Wd(this,"entries",e=>(e[1]=yo(e[1]),e))},every(e,t){return Xn(this,"every",e,t,void 0,arguments)},filter(e,t){return Xn(this,"filter",e,t,o=>o.map(yo),arguments)},find(e,t){return Xn(this,"find",e,t,yo,arguments)},findIndex(e,t){return Xn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Xn(this,"findLast",e,t,yo,arguments)},findLastIndex(e,t){return Xn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Xn(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ud(this,"includes",e)},indexOf(...e){return Ud(this,"indexOf",e)},join(e){return er(this).join(e)},lastIndexOf(...e){return Ud(this,"lastIndexOf",e)},map(e,t){return Xn(this,"map",e,t,void 0,arguments)},pop(){return ca(this,"pop")},push(...e){return ca(this,"push",e)},reduce(e,...t){return Qg(this,"reduce",e,t)},reduceRight(e,...t){return Qg(this,"reduceRight",e,t)},shift(){return ca(this,"shift")},some(e,t){return Xn(this,"some",e,t,void 0,arguments)},splice(...e){return ca(this,"splice",e)},toReversed(){return er(this).toReversed()},toSorted(e){return er(this).toSorted(e)},toSpliced(...e){return er(this).toSpliced(...e)},unshift(...e){return ca(this,"unshift",e)},values(){return Wd(this,"values",yo)}};function Wd(e,t,o){const n=Lu(e),i=n[t]();return n!==e&&!Bo(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=o(s.value)),s}),i}const H_=Array.prototype;function Xn(e,t,o,n,i,s){const r=Lu(e),a=r!==e&&!Bo(e),l=r[t];if(l!==H_[t]){const d=l.apply(e,s);return a?yo(d):d}let c=o;r!==e&&(a?c=function(d,h){return o.call(this,yo(d),h,e)}:o.length>2&&(c=function(d,h){return o.call(this,d,h,e)}));const u=l.call(r,c,n);return a&&i?i(u):u}function Qg(e,t,o,n){const i=Lu(e);let s=o;return i!==e&&(Bo(e)?o.length>3&&(s=function(r,a,l){return o.call(this,r,a,l,e)}):s=function(r,a,l){return o.call(this,r,yo(a),l,e)}),i[t](s,...n)}function Ud(e,t,o){const n=yt(e);po(n,"iterate",Ja);const i=n[t](...o);return(i===-1||i===!1)&&Er(o[0])?(o[0]=yt(o[0]),n[t](...o)):i}function ca(e,t,o=[]){Sn(),ep();const n=yt(e)[t].apply(e,o);return tp(),xn(),n}const G_=yi("__proto__,__v_isRef,__isVue"),qC=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(jn));function V_(e){jn(e)||(e=String(e));const t=yt(this);return po(t,"has",e),t.hasOwnProperty(e)}class QC{constructor(t=!1,o=!1){this._isReadonly=t,this._isShallow=o}get(t,o,n){if(o==="__v_skip")return t.__v_skip;const i=this._isReadonly,s=this._isShallow;if(o==="__v_isReactive")return!i;if(o==="__v_isReadonly")return i;if(o==="__v_isShallow")return s;if(o==="__v_raw")return n===(i?s?tb:eb:s?XC:ZC).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=at(t);if(!i){let l;if(r&&(l=N_[o]))return l;if(o==="hasOwnProperty")return V_}const a=Reflect.get(t,o,Wt(t)?t:n);return(jn(o)?qC.has(o):G_(o))||(i||po(t,"get",o),s)?a:Wt(a)?r&&Zf(o)?a:a.value:Ht(a)?i?np(a):xl(a):a}}class YC extends QC{constructor(t=!1){super(!1,t)}set(t,o,n,i){let s=t[o];if(!this._isShallow){const l=Kn(s);if(!Bo(n)&&!Kn(n)&&(s=yt(s),n=yt(n)),!at(t)&&Wt(s)&&!Wt(n))return l?!1:(s.value=n,!0)}const r=at(t)&&Zf(o)?Number(o)<t.length:Lt(t,o),a=Reflect.set(t,o,n,Wt(t)?t:i);return t===yt(i)&&(r?Vo(n,s)&&On(t,"set",o,n,s):On(t,"add",o,n)),a}deleteProperty(t,o){const n=Lt(t,o),i=t[o],s=Reflect.deleteProperty(t,o);return s&&n&&On(t,"delete",o,void 0,i),s}has(t,o){const n=Reflect.has(t,o);return(!jn(o)||!qC.has(o))&&po(t,"has",o),n}ownKeys(t){return po(t,"iterate",at(t)?"length":vs),Reflect.ownKeys(t)}}class JC extends QC{constructor(t=!1){super(!0,t)}set(t,o){return un(`Set operation on key "${String(o)}" failed: target is readonly.`,t),!0}deleteProperty(t,o){return un(`Delete operation on key "${String(o)}" failed: target is readonly.`,t),!0}}const z_=new YC,W_=new JC,U_=new YC(!0),$_=new JC(!0),Hh=e=>e,ic=e=>Reflect.getPrototypeOf(e);function j_(e,t,o){return function(...n){const i=this.__v_raw,s=yt(i),r=ms(s),a=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,c=i[e](...n),u=o?Hh:t?qc:yo;return!t&&po(s,"iterate",l?Nh:vs),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function sc(e){return function(...t){{const o=t[0]?`on key "${t[0]}" `:"";un(`${ks(e)} operation ${o}failed: target is readonly.`,yt(this))}return e==="delete"?!1:e==="clear"?void 0:this}}function K_(e,t){const o={get(i){const s=this.__v_raw,r=yt(s),a=yt(i);e||(Vo(i,a)&&po(r,"get",i),po(r,"get",a));const{has:l}=ic(r),c=t?Hh:e?qc:yo;if(l.call(r,i))return c(s.get(i));if(l.call(r,a))return c(s.get(a));s!==r&&s.get(i)},get size(){const i=this.__v_raw;return!e&&po(yt(i),"iterate",vs),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,r=yt(s),a=yt(i);return e||(Vo(i,a)&&po(r,"has",i),po(r,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const r=this,a=r.__v_raw,l=yt(a),c=t?Hh:e?qc:yo;return!e&&po(l,"iterate",vs),a.forEach((u,d)=>i.call(s,c(u),c(d),r))}};return ro(o,e?{add:sc("add"),set:sc("set"),delete:sc("delete"),clear:sc("clear")}:{add(i){!t&&!Bo(i)&&!Kn(i)&&(i=yt(i));const s=yt(this);return ic(s).has.call(s,i)||(s.add(i),On(s,"add",i,i)),this},set(i,s){!t&&!Bo(s)&&!Kn(s)&&(s=yt(s));const r=yt(this),{has:a,get:l}=ic(r);let c=a.call(r,i);c?Yg(r,a,i):(i=yt(i),c=a.call(r,i));const u=l.call(r,i);return r.set(i,s),c?Vo(s,u)&&On(r,"set",i,s,u):On(r,"add",i,s),this},delete(i){const s=yt(this),{has:r,get:a}=ic(s);let l=r.call(s,i);l?Yg(s,r,i):(i=yt(i),l=r.call(s,i));const c=a?a.call(s,i):void 0,u=s.delete(i);return l&&On(s,"delete",i,void 0,c),u},clear(){const i=yt(this),s=i.size!==0,r=ms(i)?new Map(i):new Set(i),a=i.clear();return s&&On(i,"clear",void 0,void 0,r),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{o[i]=j_(i,e,t)}),o}function Bu(e,t){const o=K_(e,t);return(n,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(Lt(o,i)&&i in n?o:n,i,s)}const q_={get:Bu(!1,!1)},Q_={get:Bu(!1,!0)},Y_={get:Bu(!0,!1)},J_={get:Bu(!0,!0)};function Yg(e,t,o){const n=yt(o);if(n!==o&&t.call(e,n)){const i=Jf(e);un(`Reactive ${i} contains both the raw and reactive versions of the same object${i==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const ZC=new WeakMap,XC=new WeakMap,eb=new WeakMap,tb=new WeakMap;function Z_(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function X_(e){return e.__v_skip||!Object.isExtensible(e)?0:Z_(Jf(e))}function xl(e){return Kn(e)?e:Nu(e,!1,z_,q_,ZC)}function ob(e){return Nu(e,!1,U_,Q_,XC)}function np(e){return Nu(e,!0,W_,Y_,eb)}function Nn(e){return Nu(e,!0,$_,J_,tb)}function Nu(e,t,o,n,i){if(!Ht(e))return un(`value cannot be made ${t?"readonly":"reactive"}: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=X_(e);if(s===0)return e;const r=i.get(e);if(r)return r;const a=new Proxy(e,s===2?n:o);return i.set(e,a),a}function bn(e){return Kn(e)?bn(e.__v_raw):!!(e&&e.__v_isReactive)}function Kn(e){return!!(e&&e.__v_isReadonly)}function Bo(e){return!!(e&&e.__v_isShallow)}function Er(e){return e?!!e.__v_raw:!1}function yt(e){const t=e&&e.__v_raw;return t?yt(t):e}function li(e){return!Lt(e,"__v_skip")&&Object.isExtensible(e)&&$c(e,"__v_skip",!0),e}const yo=e=>Ht(e)?xl(e):e,qc=e=>Ht(e)?np(e):e;function Wt(e){return e?e.__v_isRef===!0:!1}function De(e){return ib(e,!1)}function nb(e){return ib(e,!0)}function ib(e,t){return Wt(e)?e:new eE(e,t)}class eE{constructor(t,o){this.dep=new Ou,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?t:yt(t),this._value=o?t:yo(t),this.__v_isShallow=o}get value(){return this.dep.track({target:this,type:"get",key:"value"}),this._value}set value(t){const o=this._rawValue,n=this.__v_isShallow||Bo(t)||Kn(t);t=n?t:yt(t),Vo(t,o)&&(this._rawValue=t,this._value=n?t:yo(t),this.dep.trigger({target:this,type:"set",key:"value",newValue:t,oldValue:o}))}}function zi(e){return Wt(e)?e.value:e}const tE={get:(e,t,o)=>t==="__v_raw"?e:zi(Reflect.get(e,t,o)),set:(e,t,o,n)=>{const i=e[t];return Wt(i)&&!Wt(o)?(i.value=o,!0):Reflect.set(e,t,o,n)}};function sb(e){return bn(e)?e:new Proxy(e,tE)}class oE{constructor(t){this.__v_isRef=!0,this._value=void 0;const o=this.dep=new Ou,{get:n,set:i}=t(o.track.bind(o),o.trigger.bind(o));this._get=n,this._set=i}get value(){return this._value=this._get()}set value(t){this._set(t)}}function nE(e){return new oE(e)}function Gh(e){Er(e)||un("toRefs() expects a reactive object but received a plain one.");const t=at(e)?new Array(e.length):{};for(const o in e)t[o]=rb(e,o);return t}class iE{constructor(t,o,n){this._object=t,this._key=o,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return B_(yt(this._object),this._key)}}class sE{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function $d(e,t,o){return Wt(e)?e:mt(e)?new sE(e):Ht(e)&&arguments.length>1?rb(e,t,o):De(e)}function rb(e,t,o){const n=e[t];return Wt(n)?n:new iE(e,t,o)}class rE{constructor(t,o,n){this.fn=t,this.setter=o,this._value=void 0,this.dep=new Ou(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ya-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&zt!==this)return zC(this,!0),!0}get value(){const t=this.dep.track({target:this,type:"get",key:"value"});return $C(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter?this.setter(t):un("Write operation failed: computed value is readonly")}}function aE(e,t,o=!1){let n,i;mt(e)?n=e:(n=e.get,i=e.set);const s=new rE(n,i,o);return t&&!o&&(s.onTrack=t.onTrack,s.onTrigger=t.onTrigger),s}const rc={},Qc=new WeakMap;let us;function lE(e,t=!1,o=us){if(o){let n=Qc.get(o);n||Qc.set(o,n=[]),n.push(e)}else t||un("onWatcherCleanup() was called when there was no active watcher to associate with.")}function cE(e,t,o=At){const{immediate:n,deep:i,once:s,scheduler:r,augmentJob:a,call:l}=o,c=I=>{(o.onWarn||un)("Invalid watch source: ",I,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},u=I=>i?I:Bo(I)||i===!1||i===0?ri(I,1):ri(I);let d,h,f,v,m=!1,b=!1;if(Wt(e)?(h=()=>e.value,m=Bo(e)):bn(e)?(h=()=>u(e),m=!0):at(e)?(b=!0,m=e.some(I=>bn(I)||Bo(I)),h=()=>e.map(I=>{if(Wt(I))return I.value;if(bn(I))return u(I);if(mt(I))return l?l(I,2):I();c(I)})):mt(e)?t?h=l?()=>l(e,2):e:h=()=>{if(f){Sn();try{f()}finally{xn()}}const I=us;us=d;try{return l?l(e,3,[v]):e(v)}finally{us=I}}:(h=Po,c(e)),t&&i){const I=h,W=i===!0?1/0:i;h=()=>ri(I(),W)}const S=HC(),R=()=>{d.stop(),S&&S.active&&Qf(S.effects,d)};if(s&&t){const I=t;t=(...W)=>{I(...W),R()}}let _=b?new Array(e.length).fill(rc):rc;const M=I=>{if(!(!(d.flags&1)||!d.dirty&&!I))if(t){const W=d.run();if(i||m||(b?W.some((z,de)=>Vo(z,_[de])):Vo(W,_))){f&&f();const z=us;us=d;try{const de=[W,_===rc?void 0:b&&_[0]===rc?[]:_,v];l?l(t,3,de):t(...de),_=W}finally{us=z}}}else d.run()};return a&&a(M),d=new GC(h),d.scheduler=r?()=>r(M,!1):M,v=I=>lE(I,!1,d),f=d.onStop=()=>{const I=Qc.get(d);if(I){if(l)l(I,4);else for(const W of I)W();Qc.delete(d)}},d.onTrack=o.onTrack,d.onTrigger=o.onTrigger,t?n?M(!0):_=d.run():r?r(M.bind(null,!0),!0):d.run(),R.pause=d.pause.bind(d),R.resume=d.resume.bind(d),R.stop=R,R}function ri(e,t=1/0,o){if(t<=0||!Ht(e)||e.__v_skip||(o=o||new Set,o.has(e)))return e;if(o.add(e),t--,Wt(e))ri(e.value,t,o);else if(at(e))for(let n=0;n<e.length;n++)ri(e[n],t,o);else if(zr(e)||ms(e))e.forEach(n=>{ri(n,t,o)});else if(IC(e)){for(const n in e)ri(e[n],t,o);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&ri(e[n],t,o)}return e}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ys=[];function Sc(e){ys.push(e)}function xc(){ys.pop()}let jd=!1;function je(e,...t){if(jd)return;jd=!0,Sn();const o=ys.length?ys[ys.length-1].component:null,n=o&&o.appContext.config.warnHandler,i=uE();if(n)Wr(n,o,11,[e+t.map(s=>{var r,a;return(a=(r=s.toString)==null?void 0:r.call(s))!=null?a:JSON.stringify(s)}).join(""),o&&o.proxy,i.map(({vnode:s})=>`at <${Uu(o,s.type)}>`).join(`
`),i]);else{const s=[`[Vue warn]: ${e}`,...t];i.length&&s.push(`
`,...dE(i)),console.warn(...s)}xn(),jd=!1}function uE(){let e=ys[ys.length-1];if(!e)return[];const t=[];for(;e;){const o=t[0];o&&o.vnode===e?o.recurseCount++:t.push({vnode:e,recurseCount:0});const n=e.component&&e.component.parent;e=n&&n.vnode}return t}function dE(e){const t=[];return e.forEach((o,n)=>{t.push(...n===0?[]:[`
`],...hE(o))}),t}function hE({vnode:e,recurseCount:t}){const o=t>0?`... (${t} recursive calls)`:"",n=e.component?e.component.parent==null:!1,i=` at <${Uu(e.component,e.type,n)}`,s=">"+o;return e.props?[i,...fE(e.props),s]:[i+s]}function fE(e){const t=[],o=Object.keys(e);return o.slice(0,3).forEach(n=>{t.push(...ab(n,e[n]))}),o.length>3&&t.push(" ..."),t}function ab(e,t,o){return to(t)?(t=JSON.stringify(t),o?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?o?t:[`${e}=${t}`]:Wt(t)?(t=ab(e,yt(t.value),!0),o?t:[`${e}=Ref<`,t,">"]):mt(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=yt(t),o?t:[`${e}=`,t])}const ip={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Wr(e,t,o,n){try{return n?e(...n):e()}catch(i){Rl(i,t,o)}}function qn(e,t,o,n){if(mt(e)){const i=Wr(e,t,o,n);return i&&Yf(i)&&i.catch(s=>{Rl(s,t,o)}),i}if(at(e)){const i=[];for(let s=0;s<e.length;s++)i.push(qn(e[s],t,o,n));return i}else je(`Invalid value type passed to callWithAsyncErrorHandling(): ${typeof e}`)}function Rl(e,t,o,n=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||At;if(t){let a=t.parent;const l=t.proxy,c=ip[o];for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,l,c)===!1)return}a=a.parent}if(s){Sn(),Wr(s,null,10,[e,l,c]),xn();return}}pE(e,o,i,n,r)}function pE(e,t,o,n=!0,i=!1){{const s=ip[t];if(o&&Sc(o),je(`Unhandled error${s?` during execution of ${s}`:""}`),o&&xc(),n)throw e;console.error(e)}}const Mo=[];let In=-1;const gr=[];let Li=null,lr=0;const lb=Promise.resolve();let Yc=null;const gE=100;function Pr(e){const t=Yc||lb;return e?t.then(this?e.bind(this):e):t}function mE(e){let t=In+1,o=Mo.length;for(;t<o;){const n=t+o>>>1,i=Mo[n],s=Za(i);s<e||s===e&&i.flags&2?t=n+1:o=n}return t}function Hu(e){if(!(e.flags&1)){const t=Za(e),o=Mo[Mo.length-1];!o||!(e.flags&2)&&t>=Za(o)?Mo.push(e):Mo.splice(mE(t),0,e),e.flags|=1,cb()}}function cb(){Yc||(Yc=lb.then(hb))}function ub(e){at(e)?gr.push(...e):Li&&e.id===-1?Li.splice(lr+1,0,e):e.flags&1||(gr.push(e),e.flags|=1),cb()}function Jg(e,t,o=In+1){for(t=t||new Map;o<Mo.length;o++){const n=Mo[o];if(n&&n.flags&2){if(e&&n.id!==e.uid||sp(t,n))continue;Mo.splice(o,1),o--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function db(e){if(gr.length){const t=[...new Set(gr)].sort((o,n)=>Za(o)-Za(n));if(gr.length=0,Li){Li.push(...t);return}for(Li=t,e=e||new Map,lr=0;lr<Li.length;lr++){const o=Li[lr];sp(e,o)||(o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2)}Li=null,lr=0}}const Za=e=>e.id==null?e.flags&2?-1:1/0:e.id;function hb(e){e=e||new Map;const t=o=>sp(e,o);try{for(In=0;In<Mo.length;In++){const o=Mo[In];if(o&&!(o.flags&8)){if(t(o))continue;o.flags&4&&(o.flags&=-2),Wr(o,o.i,o.i?15:14),o.flags&4||(o.flags&=-2)}}}finally{for(;In<Mo.length;In++){const o=Mo[In];o&&(o.flags&=-2)}In=-1,Mo.length=0,db(e),Yc=null,(Mo.length||gr.length)&&hb(e)}}function sp(e,t){const o=e.get(t)||0;if(o>gE){const n=t.i,i=n&&pp(n.type);return Rl(`Maximum recursive updates exceeded${i?` in component <${i}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`,null,10),!0}return e.set(t,o+1),!1}let vn=!1;const Rc=new Map;wl().__VUE_HMR_RUNTIME__={createRecord:Kd(fb),rerender:Kd(CE),reload:Kd(bE)};const Is=new Map;function vE(e){const t=e.type.__hmrId;let o=Is.get(t);o||(fb(t,e.type),o=Is.get(t)),o.instances.add(e)}function yE(e){Is.get(e.type.__hmrId).instances.delete(e)}function fb(e,t){return Is.has(e)?!1:(Is.set(e,{initialDef:Jc(t),instances:new Set}),!0)}function Jc(e){return qb(e)?e.__vccOpts:e}function CE(e,t){const o=Is.get(e);o&&(o.initialDef.render=t,[...o.instances].forEach(n=>{t&&(n.render=t,Jc(n.type).render=t),n.renderCache=[],vn=!0,n.update(),vn=!1}))}function bE(e,t){const o=Is.get(e);if(!o)return;t=Jc(t),Zg(o.initialDef,t);const n=[...o.instances];for(let i=0;i<n.length;i++){const s=n[i],r=Jc(s.type);let a=Rc.get(r);a||(r!==o.initialDef&&Zg(r,t),Rc.set(r,a=new Set)),a.add(s),s.appContext.propsCache.delete(s.type),s.appContext.emitsCache.delete(s.type),s.appContext.optionsCache.delete(s.type),s.ceReload?(a.add(s),s.ceReload(t.styles),a.delete(s)):s.parent?Hu(()=>{vn=!0,s.parent.update(),vn=!1,a.delete(s)}):s.appContext.reload?s.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required."),s.root.ce&&s!==s.root&&s.root.ce._removeChildStyle(r)}ub(()=>{Rc.clear()})}function Zg(e,t){ro(e,t);for(const o in e)o!=="__file"&&!(o in t)&&delete e[o]}function Kd(e){return(t,o)=>{try{return e(t,o)}catch(n){console.error(n),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let Ln,wa=[],Vh=!1;function _l(e,...t){Ln?Ln.emit(e,...t):Vh||wa.push({event:e,args:t})}function pb(e,t){var o,n;Ln=e,Ln?(Ln.enabled=!0,wa.forEach(({event:i,args:s})=>Ln.emit(i,...s)),wa=[]):typeof window<"u"&&window.HTMLElement&&!((n=(o=window.navigator)==null?void 0:o.userAgent)!=null&&n.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{pb(s,t)}),setTimeout(()=>{Ln||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Vh=!0,wa=[])},3e3)):(Vh=!0,wa=[])}function wE(e,t){_l("app:init",e,t,{Fragment:Ct,Text:Pl,Comment:Yo,Static:Ia})}function SE(e){_l("app:unmount",e)}const xE=rp("component:added"),gb=rp("component:updated"),RE=rp("component:removed"),_E=e=>{Ln&&typeof Ln.cleanupBuffer=="function"&&!Ln.cleanupBuffer(e)&&RE(e)};/*! #__NO_SIDE_EFFECTS__ */function rp(e){return t=>{_l(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}const EE=mb("perf:start"),PE=mb("perf:end");function mb(e){return(t,o,n)=>{_l(e,t.appContext.app,t.uid,t,o,n)}}function FE(e,t,o){_l("component:emit",e.appContext.app,e,t,o)}let mo=null,vb=null;function Zc(e){const t=mo;return mo=e,vb=e&&e.type.__scopeId||null,t}function ka(e,t=mo,o){if(!t||e._n)return e;const n=(...i)=>{n._d&&pm(-1);const s=Zc(t);let r;try{r=e(...i)}finally{Zc(s),n._d&&pm(1)}return gb(t),r};return n._n=!0,n._c=!0,n._d=!0,n}function yb(e){y_(e)&&je("Do not use built-in directive ids as custom directive id: "+e)}function Xe(e,t){if(mo===null)return je("withDirectives can only be used inside render functions."),e;const o=Wu(mo),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,r,a,l=At]=t[i];s&&(mt(s)&&(s={mounted:s,updated:s}),s.deep&&ri(r),n.push({dir:s,instance:o,value:r,oldValue:void 0,arg:a,modifiers:l}))}return e}function rs(e,t,o,n){const i=e.dirs,s=t&&t.dirs;for(let r=0;r<i.length;r++){const a=i[r];s&&(a.oldValue=s[r].value);let l=a.dir[n];l&&(Sn(),qn(l,o,8,[e.el,a,e,t]),xn())}}const Cb=Symbol("_vte"),DE=e=>e.__isTeleport,Cs=e=>e&&(e.disabled||e.disabled===""),Xg=e=>e&&(e.defer||e.defer===""),em=e=>typeof SVGElement<"u"&&e instanceof SVGElement,tm=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,zh=(e,t)=>{const o=e&&e.to;if(to(o))if(t){const n=t(o);return!n&&!Cs(e)&&je(`Failed to locate Teleport target with selector "${o}". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`),n}else return je("Current renderer does not support string target for Teleports. (missing querySelector renderer option)"),null;else return!o&&!Cs(e)&&je(`Invalid Teleport target: ${o}`),o},bb={name:"Teleport",__isTeleport:!0,process(e,t,o,n,i,s,r,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:v,createText:m,createComment:b}}=c,S=Cs(t.props);let{shapeFlag:R,children:_,dynamicChildren:M}=t;if(vn&&(l=!1,M=null),e==null){const I=t.el=b("teleport start"),W=t.anchor=b("teleport end");f(I,o,n),f(W,o,n);const z=(K,O)=>{R&16&&(i&&i.isCE&&(i.ce._teleportTarget=K),u(_,K,O,i,s,r,a,l))},de=()=>{const K=t.target=zh(t.props,v),O=wb(K,t,m,f);K?(r!=="svg"&&em(K)?r="svg":r!=="mathml"&&tm(K)&&(r="mathml"),S||(z(K,O),_c(t,!1))):S||je("Invalid Teleport target on mount:",K,`(${typeof K})`)};S&&(z(o,W),_c(t,!0)),Xg(t.props)?Io(()=>{de(),t.el.__isMounted=!0},s):de()}else{if(Xg(t.props)&&!e.el.__isMounted){Io(()=>{bb.process(e,t,o,n,i,s,r,a,l,c),delete e.el.__isMounted},s);return}t.el=e.el,t.targetStart=e.targetStart;const I=t.anchor=e.anchor,W=t.target=e.target,z=t.targetAnchor=e.targetAnchor,de=Cs(e.props),K=de?o:W,O=de?I:z;if(r==="svg"||em(W)?r="svg":(r==="mathml"||tm(W))&&(r="mathml"),M?(h(e.dynamicChildren,M,K,i,s,r,a),ou(e,t,!1)):l||d(e,t,K,O,i,s,r,a,!1),S)de?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):ac(t,o,I,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ie=t.target=zh(t.props,v);ie?ac(t,ie,null,c,0):je("Invalid Teleport target on update:",W,`(${typeof W})`)}else de&&ac(t,W,z,c,1);_c(t,S)}},remove(e,t,o,{um:n,o:{remove:i}},s){const{shapeFlag:r,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:h}=e;if(d&&(i(c),i(u)),s&&i(l),r&16){const f=s||!Cs(h);for(let v=0;v<a.length;v++){const m=a[v];n(m,t,o,f,!!m.dynamicChildren)}}},move:ac,hydrate:TE};function ac(e,t,o,{o:{insert:n},m:i},s=2){s===0&&n(e.targetAnchor,t,o);const{el:r,anchor:a,shapeFlag:l,children:c,props:u}=e,d=s===2;if(d&&n(r,t,o),(!d||Cs(u))&&l&16)for(let h=0;h<c.length;h++)i(c[h],t,o,2);d&&n(a,t,o)}function TE(e,t,o,n,i,s,{o:{nextSibling:r,parentNode:a,querySelector:l,insert:c,createText:u}},d){const h=t.target=zh(t.props,l);if(h){const f=Cs(t.props),v=h._lpa||h.firstChild;if(t.shapeFlag&16)if(f)t.anchor=d(r(e),t,a(e),o,n,i,s),t.targetStart=v,t.targetAnchor=v&&r(v);else{t.anchor=r(e);let m=v;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")t.targetStart=m;else if(m.data==="teleport anchor"){t.targetAnchor=m,h._lpa=t.targetAnchor&&r(t.targetAnchor);break}}m=r(m)}t.targetAnchor||wb(h,t,u,c),d(v&&r(v),t,h,o,n,i,s)}_c(t,f)}return t.anchor&&r(t.anchor)}const ZZ=bb;function _c(e,t){const o=e.ctx;if(o&&o.ut){let n,i;for(t?(n=e.el,i=e.anchor):(n=e.targetStart,i=e.targetAnchor);n&&n!==i;)n.nodeType===1&&n.setAttribute("data-v-owner",o.uid),n=n.nextSibling;o.ut()}}function wb(e,t,o,n){const i=t.targetStart=o(""),s=t.targetAnchor=o("");return i[Cb]=s,e&&(n(i,e),n(s,e)),s}function ap(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ap(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function El(e,t){return mt(e)?ro({name:e.name},t,{setup:e}):e}function Sb(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const xb=new WeakSet;function kE(e){const t=Gn(),o=nb(null);if(t){const i=t.refs===At?t.refs={}:t.refs;let s;(s=Object.getOwnPropertyDescriptor(i,e))&&!s.configurable?je(`useTemplateRef('${e}') already exists.`):Object.defineProperty(i,e,{enumerable:!0,get:()=>o.value,set:r=>o.value=r})}else je("useTemplateRef() is called when there is no active component instance to be associated with.");const n=np(o);return xb.add(n),n}function Xc(e,t,o,n,i=!1){if(at(e)){e.forEach((v,m)=>Xc(v,t&&(at(t)?t[m]:t),o,n,i));return}if(Aa(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Xc(e,t,o,n.component.subTree);return}const s=n.shapeFlag&4?Wu(n.component):n.el,r=i?null:s,{i:a,r:l}=e;if(!a){je("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const c=t&&t.r,u=a.refs===At?a.refs={}:a.refs,d=a.setupState,h=yt(d),f=d===At?()=>!1:v=>(Lt(h,v)&&!Wt(h[v])&&je(`Template ref "${v}" used on a non-ref value. It will not work in the production build.`),xb.has(h[v])?!1:Lt(h,v));if(c!=null&&c!==l&&(to(c)?(u[c]=null,f(c)&&(d[c]=null)):Wt(c)&&(c.value=null)),mt(l))Wr(l,a,12,[r,u]);else{const v=to(l),m=Wt(l);if(v||m){const b=()=>{if(e.f){const S=v?f(l)?d[l]:u[l]:l.value;i?at(S)&&Qf(S,s):at(S)?S.includes(s)||S.push(s):v?(u[l]=[s],f(l)&&(d[l]=u[l])):(l.value=[s],e.k&&(u[e.k]=l.value))}else v?(u[l]=r,f(l)&&(d[l]=r)):m?(l.value=r,e.k&&(u[e.k]=r)):je("Invalid template ref type:",l,`(${typeof l})`)};r?(b.id=-1,Io(b,o)):b()}else je("Invalid template ref type:",l,`(${typeof l})`)}}wl().requestIdleCallback;wl().cancelIdleCallback;const Aa=e=>!!e.type.__asyncLoader,lp=e=>e.type.__isKeepAlive;function AE(e,t){Rb(e,"a",t)}function IE(e,t){Rb(e,"da",t)}function Rb(e,t,o=lo){const n=e.__wdc||(e.__wdc=()=>{let i=o;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Gu(t,n,o),o){let i=o.parent;for(;i&&i.parent;)lp(i.parent.vnode)&&ME(n,t,o,i),i=i.parent}}function ME(e,t,o,n){const i=Gu(t,e,n,!0);Rn(()=>{Qf(n[t],i)},o)}function Gu(e,t,o=lo,n=!1){if(o){const i=o[e]||(o[e]=[]),s=t.__weh||(t.__weh=(...r)=>{Sn();const a=Fl(o),l=qn(t,o,e,r);return a(),xn(),l});return n?i.unshift(s):i.push(s),s}else{const i=cs(ip[e].replace(/ hook$/,""));je(`${i} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const Ci=e=>(t,o=lo)=>{(!tl||e==="sp")&&Gu(e,(...n)=>t(...n),o)},OE=Ci("bm"),Xt=Ci("m"),LE=Ci("bu"),BE=Ci("u"),NE=Ci("bum"),Rn=Ci("um"),HE=Ci("sp"),GE=Ci("rtg"),VE=Ci("rtc");function zE(e,t=lo){Gu("ec",e,t)}const WE="components";function Wh(e,t){return $E(WE,e,!0,t)||e}const UE=Symbol.for("v-ndc");function $E(e,t,o=!0,n=!1){const i=mo||lo;if(i){const s=i.type;{const a=pp(s,!1);if(a&&(a===t||a===Fo(t)||a===ks(Fo(t))))return s}const r=om(i[e]||s[e],t)||om(i.appContext[e],t);return!r&&n?s:(o&&!r&&je(`Failed to resolve ${e.slice(0,-1)}: ${t}
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`),r)}else je(`resolve${ks(e.slice(0,-1))} can only be used in render() or setup().`)}function om(e,t){return e&&(e[t]||e[Fo(t)]||e[ks(Fo(t))])}function Tt(e,t,o,n){let i;const s=o,r=at(e);if(r||to(e)){const a=r&&bn(e);let l=!1,c=!1;a&&(l=!Bo(e),c=Kn(e),e=Lu(e)),i=new Array(e.length);for(let u=0,d=e.length;u<d;u++)i[u]=t(l?c?qc(yo(e[u])):yo(e[u]):e[u],u,void 0,s)}else if(typeof e=="number"){Number.isInteger(e)||je(`The v-for range expect an integer value but got ${e}.`),i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s)}else if(Ht(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,s));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=t(e[u],u,l,s)}}else i=[];return i}const Uh=e=>e?jb(e)?Wu(e):Uh(e.parent):null,bs=ro(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>Nn(e.props),$attrs:e=>Nn(e.attrs),$slots:e=>Nn(e.slots),$refs:e=>Nn(e.refs),$parent:e=>Uh(e.parent),$root:e=>Uh(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Pb(e),$forceUpdate:e=>e.f||(e.f=()=>{Hu(e.update)}),$nextTick:e=>e.n||(e.n=Pr.bind(e.proxy)),$watch:e=>P1.bind(e)}),cp=e=>e==="_"||e==="$",qd=(e,t)=>e!==At&&!e.__isScriptSetup&&Lt(e,t),_b={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:o,setupState:n,data:i,props:s,accessCache:r,type:a,appContext:l}=e;if(t==="__isVue")return!0;let c;if(t[0]!=="$"){const f=r[t];if(f!==void 0)switch(f){case 1:return n[t];case 2:return i[t];case 4:return o[t];case 3:return s[t]}else{if(qd(n,t))return r[t]=1,n[t];if(i!==At&&Lt(i,t))return r[t]=2,i[t];if((c=e.propsOptions[0])&&Lt(c,t))return r[t]=3,s[t];if(o!==At&&Lt(o,t))return r[t]=4,o[t];$h&&(r[t]=0)}}const u=bs[t];let d,h;if(u)return t==="$attrs"?(po(e.attrs,"get",""),nu()):t==="$slots"&&po(e,"get",t),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(o!==At&&Lt(o,t))return r[t]=4,o[t];if(h=l.config.globalProperties,Lt(h,t))return h[t];mo&&(!to(t)||t.indexOf("__v")!==0)&&(i!==At&&cp(t[0])&&Lt(i,t)?je(`Property ${JSON.stringify(t)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):e===mo&&je(`Property ${JSON.stringify(t)} was accessed during render but is not defined on instance.`))},set({_:e},t,o){const{data:n,setupState:i,ctx:s}=e;return qd(i,t)?(i[t]=o,!0):i.__isScriptSetup&&Lt(i,t)?(je(`Cannot mutate <script setup> binding "${t}" from Options API.`),!1):n!==At&&Lt(n,t)?(n[t]=o,!0):Lt(e.props,t)?(je(`Attempting to mutate prop "${t}". Props are readonly.`),!1):t[0]==="$"&&t.slice(1)in e?(je(`Attempting to mutate public property "${t}". Properties starting with $ are reserved and readonly.`),!1):(t in e.appContext.config.globalProperties?Object.defineProperty(s,t,{enumerable:!0,configurable:!0,value:o}):s[t]=o,!0)},has({_:{data:e,setupState:t,accessCache:o,ctx:n,appContext:i,propsOptions:s}},r){let a;return!!o[r]||e!==At&&Lt(e,r)||qd(t,r)||(a=s[0])&&Lt(a,r)||Lt(n,r)||Lt(bs,r)||Lt(i.config.globalProperties,r)},defineProperty(e,t,o){return o.get!=null?e._.accessCache[t]=0:Lt(o,"value")&&this.set(e,t,o.value,null),Reflect.defineProperty(e,t,o)}};_b.ownKeys=e=>(je("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(e));function jE(e){const t={};return Object.defineProperty(t,"_",{configurable:!0,enumerable:!1,get:()=>e}),Object.keys(bs).forEach(o=>{Object.defineProperty(t,o,{configurable:!0,enumerable:!1,get:()=>bs[o](e),set:Po})}),t}function KE(e){const{ctx:t,propsOptions:[o]}=e;o&&Object.keys(o).forEach(n=>{Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>e.props[n],set:Po})})}function qE(e){const{ctx:t,setupState:o}=e;Object.keys(yt(o)).forEach(n=>{if(!o.__isScriptSetup){if(cp(n[0])){je(`setup() return property ${JSON.stringify(n)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o[n],set:Po})}})}function Xa(e){return at(e)?e.reduce((t,o)=>(t[o]=null,t),{}):e}function QE(e,t){const o=Xa(e);for(const n in t){if(n.startsWith("__skip"))continue;let i=o[n];i?at(i)||mt(i)?i=o[n]={type:i,default:t[n]}:i.default=t[n]:i===null?i=o[n]={default:t[n]}:je(`props default key "${n}" has no corresponding declaration.`),i&&t[`__skip_${n}`]&&(i.skipFactory=!0)}return o}function nm(e,t){return!e||!t?e||t:at(e)&&at(t)?e.concat(t):ro({},Xa(e),Xa(t))}function YE(){const e=Object.create(null);return(t,o)=>{e[o]?je(`${t} property "${o}" is already defined in ${e[o]}.`):e[o]=t}}let $h=!0;function JE(e){const t=Pb(e),o=e.proxy,n=e.ctx;$h=!1,t.beforeCreate&&im(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:v,activated:m,deactivated:b,beforeDestroy:S,beforeUnmount:R,destroyed:_,unmounted:M,render:I,renderTracked:W,renderTriggered:z,errorCaptured:de,serverPrefetch:K,expose:O,inheritAttrs:ie,components:N,directives:oe,filters:F}=t,Y=YE();{const[L]=e.propsOptions;if(L)for(const ce in L)Y("Props",ce)}if(c&&ZE(c,n,Y),r)for(const L in r){const ce=r[L];mt(ce)?(Object.defineProperty(n,L,{value:ce.bind(o),configurable:!0,enumerable:!0,writable:!0}),Y("Methods",L)):je(`Method "${L}" has type "${typeof ce}" in the component definition. Did you reference the function correctly?`)}if(i){mt(i)||je("The data option must be a function. Plain object usage is no longer supported.");const L=i.call(o,o);if(Yf(L)&&je("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!Ht(L))je("data() should return an object.");else{e.data=xl(L);for(const ce in L)Y("Data",ce),cp(ce[0])||Object.defineProperty(n,ce,{configurable:!0,enumerable:!0,get:()=>L[ce],set:Po})}}if($h=!0,s)for(const L in s){const ce=s[L],U=mt(ce)?ce.bind(o,o):mt(ce.get)?ce.get.bind(o,o):Po;U===Po&&je(`Computed property "${L}" has no getter.`);const le=!mt(ce)&&mt(ce.set)?ce.set.bind(o):()=>{je(`Write operation failed: computed property "${L}" is readonly.`)},q=Ze({get:U,set:le});Object.defineProperty(n,L,{enumerable:!0,configurable:!0,get:()=>q.value,set:se=>q.value=se}),Y("Computed",L)}if(a)for(const L in a)Eb(a[L],n,o,L);if(l){const L=mt(l)?l.call(o):l;Reflect.ownKeys(L).forEach(ce=>{Ec(ce,L[ce])})}u&&im(u,e,"c");function J(L,ce){at(ce)?ce.forEach(U=>L(U.bind(o))):ce&&L(ce.bind(o))}if(J(OE,d),J(Xt,h),J(LE,f),J(BE,v),J(AE,m),J(IE,b),J(zE,de),J(VE,W),J(GE,z),J(NE,R),J(Rn,M),J(HE,K),at(O))if(O.length){const L=e.exposed||(e.exposed={});O.forEach(ce=>{Object.defineProperty(L,ce,{get:()=>o[ce],set:U=>o[ce]=U})})}else e.exposed||(e.exposed={});I&&e.render===Po&&(e.render=I),ie!=null&&(e.inheritAttrs=ie),N&&(e.components=N),oe&&(e.directives=oe),K&&Sb(e)}function ZE(e,t,o=Po){at(e)&&(e=jh(e));for(const n in e){const i=e[n];let s;Ht(i)?"default"in i?s=rn(i.from||n,i.default,!0):s=rn(i.from||n):s=rn(i),Wt(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:r=>s.value=r}):t[n]=s,o("Inject",n)}}function im(e,t,o){qn(at(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,o)}function Eb(e,t,o,n){let i=n.includes(".")?Nb(o,n):()=>o[n];if(to(e)){const s=t[e];mt(s)?eo(i,s):je(`Invalid watch handler specified by key "${e}"`,s)}else if(mt(e))eo(i,e.bind(o));else if(Ht(e))if(at(e))e.forEach(s=>Eb(s,t,o,n));else{const s=mt(e.handler)?e.handler.bind(o):t[e.handler];mt(s)?eo(i,s,e):je(`Invalid watch handler specified by key "${e.handler}"`,s)}else je(`Invalid watch option: "${n}"`,e)}function Pb(e){const t=e.type,{mixins:o,extends:n}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:r}}=e.appContext,a=s.get(t);let l;return a?l=a:!i.length&&!o&&!n?l=t:(l={},i.length&&i.forEach(c=>eu(l,c,r,!0)),eu(l,t,r)),Ht(t)&&s.set(t,l),l}function eu(e,t,o,n=!1){const{mixins:i,extends:s}=t;s&&eu(e,s,o,!0),i&&i.forEach(r=>eu(e,r,o,!0));for(const r in t)if(n&&r==="expose")je('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const a=XE[r]||o&&o[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const XE={data:sm,props:rm,emits:rm,methods:Sa,computed:Sa,beforeCreate:Ao,created:Ao,beforeMount:Ao,mounted:Ao,beforeUpdate:Ao,updated:Ao,beforeDestroy:Ao,beforeUnmount:Ao,destroyed:Ao,unmounted:Ao,activated:Ao,deactivated:Ao,errorCaptured:Ao,serverPrefetch:Ao,components:Sa,directives:Sa,watch:t1,provide:sm,inject:e1};function sm(e,t){return t?e?function(){return ro(mt(e)?e.call(this,this):e,mt(t)?t.call(this,this):t)}:t:e}function e1(e,t){return Sa(jh(e),jh(t))}function jh(e){if(at(e)){const t={};for(let o=0;o<e.length;o++)t[e[o]]=e[o];return t}return e}function Ao(e,t){return e?[...new Set([].concat(e,t))]:t}function Sa(e,t){return e?ro(Object.create(null),e,t):t}function rm(e,t){return e?at(e)&&at(t)?[...new Set([...e,...t])]:ro(Object.create(null),Xa(e),Xa(t??{})):t}function t1(e,t){if(!e)return t;if(!t)return e;const o=ro(Object.create(null),e);for(const n in t)o[n]=Ao(e[n],t[n]);return o}function Fb(){return{app:null,config:{isNativeTag:m_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let o1=0;function n1(e,t){return function(n,i=null){mt(n)||(n=ro({},n)),i!=null&&!Ht(i)&&(je("root props passed to app.mount() must be an object."),i=null);const s=Fb(),r=new WeakSet,a=[];let l=!1;const c=s.app={_uid:o1++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:vm,get config(){return s.config},set config(u){je("app.config cannot be replaced. Modify individual options instead.")},use(u,...d){return r.has(u)?je("Plugin has already been applied to target app."):u&&mt(u.install)?(r.add(u),u.install(c,...d)):mt(u)?(r.add(u),u(c,...d)):je('A plugin must either be a function or an object with an "install" function.'),c},mixin(u){return s.mixins.includes(u)?je("Mixin has already been applied to target app"+(u.name?`: ${u.name}`:"")):s.mixins.push(u),c},component(u,d){return Jh(u,s.config),d?(s.components[u]&&je(`Component "${u}" has already been registered in target app.`),s.components[u]=d,c):s.components[u]},directive(u,d){return yb(u),d?(s.directives[u]&&je(`Directive "${u}" has already been registered in target app.`),s.directives[u]=d,c):s.directives[u]},mount(u,d,h){if(l)je("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{u.__vue_app__&&je("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const f=c._ceVNode||jt(n,i);return f.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),s.reload=()=>{const v=$i(f);v.el=null,e(v,u,h)},e(f,u,h),l=!0,c._container=u,u.__vue_app__=c,c._instance=f.component,wE(c,vm),Wu(f.component)}},onUnmount(u){typeof u!="function"&&je(`Expected function as first argument to app.onUnmount(), but got ${typeof u}`),a.push(u)},unmount(){l?(qn(a,c._instance,16),e(null,c._container),c._instance=null,SE(c),delete c._container.__vue_app__):je("Cannot unmount an app that is not mounted.")},provide(u,d){return u in s.provides&&je(`App already provides property with key "${String(u)}". It will be overwritten with the new value.`),s.provides[u]=d,c},runWithContext(u){const d=ws;ws=c;try{return u()}finally{ws=d}}};return c}}let ws=null;function Ec(e,t){if(!lo)je("provide() can only be used inside setup().");else{let o=lo.provides;const n=lo.parent&&lo.parent.provides;n===o&&(o=lo.provides=Object.create(n)),o[e]=t}}function rn(e,t,o=!1){const n=lo||mo;if(n||ws){const i=ws?ws._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return o&&mt(t)?t.call(n&&n.proxy):t;je(`injection "${String(e)}" not found.`)}else je("inject() can only be used inside setup() or functional components.")}function i1(){return!!(lo||mo||ws)}const Db={},Tb=()=>Object.create(Db),kb=e=>Object.getPrototypeOf(e)===Db;function s1(e,t,o,n=!1){const i={},s=Tb();e.propsDefaults=Object.create(null),Ab(e,t,i,s);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);Mb(t||{},i,e),o?e.props=n?i:ob(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function r1(e){for(;e;){if(e.type.__hmrId)return!0;e=e.parent}}function a1(e,t,o,n){const{props:i,attrs:s,vnode:{patchFlag:r}}=e,a=yt(i),[l]=e.propsOptions;let c=!1;if(!r1(e)&&(n||r>0)&&!(r&16)){if(r&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(zu(e.emitsOptions,h))continue;const f=t[h];if(l)if(Lt(s,h))f!==s[h]&&(s[h]=f,c=!0);else{const v=Fo(h);i[v]=Kh(l,a,v,f,e,!1)}else f!==s[h]&&(s[h]=f,c=!0)}}}else{Ab(e,t,i,s)&&(c=!0);let u;for(const d in a)(!t||!Lt(t,d)&&((u=fi(d))===d||!Lt(t,u)))&&(l?o&&(o[d]!==void 0||o[u]!==void 0)&&(i[d]=Kh(l,a,d,void 0,e,!0)):delete i[d]);if(s!==a)for(const d in s)(!t||!Lt(t,d))&&(delete s[d],c=!0)}c&&On(e.attrs,"set",""),Mb(t||{},i,e)}function Ab(e,t,o,n){const[i,s]=e.propsOptions;let r=!1,a;if(t)for(let l in t){if(Fa(l))continue;const c=t[l];let u;i&&Lt(i,u=Fo(l))?!s||!s.includes(u)?o[u]=c:(a||(a={}))[u]=c:zu(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(s){const l=yt(o),c=a||At;for(let u=0;u<s.length;u++){const d=s[u];o[d]=Kh(i,l,d,c[d],e,!Lt(c,d))}}return r}function Kh(e,t,o,n,i,s){const r=e[o];if(r!=null){const a=Lt(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&mt(l)){const{propsDefaults:c}=i;if(o in c)n=c[o];else{const u=Fl(i);n=c[o]=l.call(null,t),u()}}else n=l;i.ce&&i.ce._setProp(o,n)}r[0]&&(s&&!a?n=!1:r[1]&&(n===""||n===fi(o))&&(n=!0))}return n}const l1=new WeakMap;function Ib(e,t,o=!1){const n=o?l1:t.propsCache,i=n.get(e);if(i)return i;const s=e.props,r={},a=[];let l=!1;if(!mt(e)){const u=d=>{l=!0;const[h,f]=Ib(d,t,!0);ro(r,h),f&&a.push(...f)};!o&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return Ht(e)&&n.set(e,pr),pr;if(at(s))for(let u=0;u<s.length;u++){to(s[u])||je("props must be strings when using array syntax.",s[u]);const d=Fo(s[u]);am(d)&&(r[d]=At)}else if(s){Ht(s)||je("invalid props options",s);for(const u in s){const d=Fo(u);if(am(d)){const h=s[u],f=r[d]=at(h)||mt(h)?{type:h}:ro({},h),v=f.type;let m=!1,b=!0;if(at(v))for(let S=0;S<v.length;++S){const R=v[S],_=mt(R)&&R.name;if(_==="Boolean"){m=!0;break}else _==="String"&&(b=!1)}else m=mt(v)&&v.name==="Boolean";f[0]=m,f[1]=b,(m||Lt(f,"default"))&&a.push(d)}}}const c=[r,a];return Ht(e)&&n.set(e,c),c}function am(e){return e[0]!=="$"&&!Fa(e)?!0:(je(`Invalid prop name: "${e}" is a reserved property.`),!1)}function c1(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Mb(e,t,o){const n=yt(t),i=o.propsOptions[0],s=Object.keys(e).map(r=>Fo(r));for(const r in i){let a=i[r];a!=null&&u1(r,n[r],a,Nn(n),!s.includes(r))}}function u1(e,t,o,n,i){const{type:s,required:r,validator:a,skipCheck:l}=o;if(r&&i){je('Missing required prop: "'+e+'"');return}if(!(t==null&&!r)){if(s!=null&&s!==!0&&!l){let c=!1;const u=at(s)?s:[s],d=[];for(let h=0;h<u.length&&!c;h++){const{valid:f,expectedType:v}=h1(t,u[h]);d.push(v||""),c=f}if(!c){je(f1(e,t,d));return}}a&&!a(t,n)&&je('Invalid prop: custom validator check failed for prop "'+e+'".')}}const d1=yi("String,Number,Boolean,Function,Symbol,BigInt");function h1(e,t){let o;const n=c1(t);if(n==="null")o=e===null;else if(d1(n)){const i=typeof e;o=i===n.toLowerCase(),!o&&i==="object"&&(o=e instanceof t)}else n==="Object"?o=Ht(e):n==="Array"?o=at(e):o=e instanceof t;return{valid:o,expectedType:n}}function f1(e,t,o){if(o.length===0)return`Prop type [] for prop "${e}" won't match anything. Did you mean to use type Array instead?`;let n=`Invalid prop: type check failed for prop "${e}". Expected ${o.map(ks).join(" | ")}`;const i=o[0],s=Jf(t),r=lm(t,i),a=lm(t,s);return o.length===1&&cm(i)&&!p1(i,s)&&(n+=` with value ${r}`),n+=`, got ${s} `,cm(s)&&(n+=`with value ${a}.`),n}function lm(e,t){return t==="String"?`"${e}"`:t==="Number"?`${Number(e)}`:`${e}`}function cm(e){return["string","number","boolean"].some(o=>e.toLowerCase()===o)}function p1(...e){return e.some(t=>t.toLowerCase()==="boolean")}const up=e=>e[0]==="_"||e==="$stable",dp=e=>at(e)?e.map(gn):[gn(e)],g1=(e,t,o)=>{if(t._n)return t;const n=ka((...i)=>(lo&&!(o===null&&mo)&&!(o&&o.root!==lo.root)&&je(`Slot "${e}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),dp(t(...i))),o);return n._c=!1,n},Ob=(e,t,o)=>{const n=e._ctx;for(const i in e){if(up(i))continue;const s=e[i];if(mt(s))t[i]=g1(i,s,n);else if(s!=null){je(`Non-function value encountered for slot "${i}". Prefer function slots for better performance.`);const r=dp(s);t[i]=()=>r}}},Lb=(e,t)=>{lp(e.vnode)||je("Non-function value encountered for default slot. Prefer function slots for better performance.");const o=dp(t);e.slots.default=()=>o},qh=(e,t,o)=>{for(const n in t)(o||!up(n))&&(e[n]=t[n])},m1=(e,t,o)=>{const n=e.slots=Tb();if(e.vnode.shapeFlag&32){const i=t._;i?(qh(n,t,o),o&&$c(n,"_",i,!0)):Ob(t,n)}else t&&Lb(e,t)},v1=(e,t,o)=>{const{vnode:n,slots:i}=e;let s=!0,r=At;if(n.shapeFlag&32){const a=t._;a?vn?(qh(i,t,o),On(e,"set","$slots")):o&&a===1?s=!1:qh(i,t,o):(s=!t.$stable,Ob(t,i)),r=t}else t&&(Lb(e,t),r={default:1});if(s)for(const a in i)!up(a)&&r[a]==null&&delete i[a]};let ua,Gi;function tr(e,t){e.appContext.config.performance&&tu()&&Gi.mark(`vue-${t}-${e.uid}`),EE(e,t,tu()?Gi.now():Date.now())}function or(e,t){if(e.appContext.config.performance&&tu()){const o=`vue-${t}-${e.uid}`,n=o+":end";Gi.mark(n),Gi.measure(`<${Uu(e,e.type)}> ${t}`,o,n),Gi.clearMarks(o),Gi.clearMarks(n)}PE(e,t,tu()?Gi.now():Date.now())}function tu(){return ua!==void 0||(typeof window<"u"&&window.performance?(ua=!0,Gi=window.performance):ua=!1),ua}function y1(){const e=[];if(e.length){const t=e.length>1;console.warn(`Feature flag${t?"s":""} ${e.join(", ")} ${t?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const Io=M1;function C1(e){return b1(e)}function b1(e,t){y1();const o=wl();o.__VUE__=!0,pb(o.__VUE_DEVTOOLS_GLOBAL_HOOK__,o);const{insert:n,remove:i,patchProp:s,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=Po,insertStaticContent:v}=e,m=(H,w,Q,re=null,A=null,k=null,T=void 0,G=null,ee=vn?!1:!!w.dynamicChildren)=>{if(H===w)return;H&&!da(H,w)&&(re=pe(H),be(H,A,k,!0),H=null),w.patchFlag===-2&&(ee=!1,w.dynamicChildren=null);const{type:P,ref:B,shapeFlag:V}=w;switch(P){case Pl:b(H,w,Q,re);break;case Yo:S(H,w,Q,re);break;case Ia:H==null?R(w,Q,re,T):_(H,w,Q,T);break;case Ct:oe(H,w,Q,re,A,k,T,G,ee);break;default:V&1?W(H,w,Q,re,A,k,T,G,ee):V&6?F(H,w,Q,re,A,k,T,G,ee):V&64||V&128?P.process(H,w,Q,re,A,k,T,G,ee,Le):je("Invalid VNode type:",P,`(${typeof P})`)}B!=null&&A&&Xc(B,H&&H.ref,k,w||H,!w)},b=(H,w,Q,re)=>{if(H==null)n(w.el=a(w.children),Q,re);else{const A=w.el=H.el;w.children!==H.children&&c(A,w.children)}},S=(H,w,Q,re)=>{H==null?n(w.el=l(w.children||""),Q,re):w.el=H.el},R=(H,w,Q,re)=>{[H.el,H.anchor]=v(H.children,w,Q,re,H.el,H.anchor)},_=(H,w,Q,re)=>{if(w.children!==H.children){const A=h(H.anchor);I(H),[w.el,w.anchor]=v(w.children,Q,A,re)}else w.el=H.el,w.anchor=H.anchor},M=({el:H,anchor:w},Q,re)=>{let A;for(;H&&H!==w;)A=h(H),n(H,Q,re),H=A;n(w,Q,re)},I=({el:H,anchor:w})=>{let Q;for(;H&&H!==w;)Q=h(H),i(H),H=Q;i(w)},W=(H,w,Q,re,A,k,T,G,ee)=>{w.type==="svg"?T="svg":w.type==="math"&&(T="mathml"),H==null?z(w,Q,re,A,k,T,G,ee):O(H,w,A,k,T,G,ee)},z=(H,w,Q,re,A,k,T,G)=>{let ee,P;const{props:B,shapeFlag:V,transition:X,dirs:fe}=H;if(ee=H.el=r(H.type,k,B&&B.is,B),V&8?u(ee,H.children):V&16&&K(H.children,ee,null,re,A,Qd(H,k),T,G),fe&&rs(H,null,re,"created"),de(ee,H,H.scopeId,T,re),B){for(const ke in B)ke!=="value"&&!Fa(ke)&&s(ee,ke,null,B[ke],k,re);"value"in B&&s(ee,"value",null,B.value,k),(P=B.onVnodeBeforeMount)&&Dn(P,re,H)}$c(ee,"__vnode",H,!0),$c(ee,"__vueParentComponent",re,!0),fe&&rs(H,null,re,"beforeMount");const Se=w1(A,X);Se&&X.beforeEnter(ee),n(ee,w,Q),((P=B&&B.onVnodeMounted)||Se||fe)&&Io(()=>{P&&Dn(P,re,H),Se&&X.enter(ee),fe&&rs(H,null,re,"mounted")},A)},de=(H,w,Q,re,A)=>{if(Q&&f(H,Q),re)for(let k=0;k<re.length;k++)f(H,re[k]);if(A){let k=A.subTree;if(k.patchFlag>0&&k.patchFlag&2048&&(k=hp(k.children)||k),w===k||zb(k.type)&&(k.ssContent===w||k.ssFallback===w)){const T=A.vnode;de(H,T,T.scopeId,T.slotScopeIds,A.parent)}}},K=(H,w,Q,re,A,k,T,G,ee=0)=>{for(let P=ee;P<H.length;P++){const B=H[P]=G?Bi(H[P]):gn(H[P]);m(null,B,w,Q,re,A,k,T,G)}},O=(H,w,Q,re,A,k,T)=>{const G=w.el=H.el;G.__vnode=w;let{patchFlag:ee,dynamicChildren:P,dirs:B}=w;ee|=H.patchFlag&16;const V=H.props||At,X=w.props||At;let fe;if(Q&&as(Q,!1),(fe=X.onVnodeBeforeUpdate)&&Dn(fe,Q,w,H),B&&rs(w,H,Q,"beforeUpdate"),Q&&as(Q,!0),vn&&(ee=0,T=!1,P=null),(V.innerHTML&&X.innerHTML==null||V.textContent&&X.textContent==null)&&u(G,""),P?(ie(H.dynamicChildren,P,G,Q,re,Qd(w,A),k),ou(H,w)):T||U(H,w,G,null,Q,re,Qd(w,A),k,!1),ee>0){if(ee&16)N(G,V,X,Q,A);else if(ee&2&&V.class!==X.class&&s(G,"class",null,X.class,A),ee&4&&s(G,"style",V.style,X.style,A),ee&8){const Se=w.dynamicProps;for(let ke=0;ke<Se.length;ke++){const Ne=Se[ke],xt=V[Ne],bt=X[Ne];(bt!==xt||Ne==="value")&&s(G,Ne,xt,bt,A,Q)}}ee&1&&H.children!==w.children&&u(G,w.children)}else!T&&P==null&&N(G,V,X,Q,A);((fe=X.onVnodeUpdated)||B)&&Io(()=>{fe&&Dn(fe,Q,w,H),B&&rs(w,H,Q,"updated")},re)},ie=(H,w,Q,re,A,k,T)=>{for(let G=0;G<w.length;G++){const ee=H[G],P=w[G],B=ee.el&&(ee.type===Ct||!da(ee,P)||ee.shapeFlag&70)?d(ee.el):Q;m(ee,P,B,null,re,A,k,T,!0)}},N=(H,w,Q,re,A)=>{if(w!==Q){if(w!==At)for(const k in w)!Fa(k)&&!(k in Q)&&s(H,k,w[k],null,A,re);for(const k in Q){if(Fa(k))continue;const T=Q[k],G=w[k];T!==G&&k!=="value"&&s(H,k,G,T,A,re)}"value"in Q&&s(H,"value",w.value,Q.value,A)}},oe=(H,w,Q,re,A,k,T,G,ee)=>{const P=w.el=H?H.el:a(""),B=w.anchor=H?H.anchor:a("");let{patchFlag:V,dynamicChildren:X,slotScopeIds:fe}=w;(vn||V&2048)&&(V=0,ee=!1,X=null),fe&&(G=G?G.concat(fe):fe),H==null?(n(P,Q,re),n(B,Q,re),K(w.children||[],Q,B,A,k,T,G,ee)):V>0&&V&64&&X&&H.dynamicChildren?(ie(H.dynamicChildren,X,Q,A,k,T,G),ou(H,w)):U(H,w,Q,B,A,k,T,G,ee)},F=(H,w,Q,re,A,k,T,G,ee)=>{w.slotScopeIds=G,H==null?w.shapeFlag&512?A.ctx.activate(w,Q,re,T,ee):Y(w,Q,re,A,k,T,ee):J(H,w,ee)},Y=(H,w,Q,re,A,k,T)=>{const G=H.component=z1(H,re,A);if(G.type.__hmrId&&vE(G),Sc(H),tr(G,"mount"),lp(H)&&(G.ctx.renderer=Le),tr(G,"init"),U1(G,!1,T),or(G,"init"),vn&&(H.el=null),G.asyncDep){if(A&&A.registerDep(G,L,T),!H.el){const ee=G.subTree=jt(Yo);S(null,ee,w,Q)}}else L(G,H,w,Q,A,k,T);xc(),or(G,"mount")},J=(H,w,Q)=>{const re=w.component=H.component;if(A1(H,w,Q))if(re.asyncDep&&!re.asyncResolved){Sc(w),ce(re,w,Q),xc();return}else re.next=w,re.update();else w.el=H.el,re.vnode=w},L=(H,w,Q,re,A,k,T)=>{const G=()=>{if(H.isMounted){let{next:V,bu:X,u:fe,parent:Se,vnode:ke}=H;{const lt=Bb(H);if(lt){V&&(V.el=ke.el,ce(H,V,T)),lt.asyncDep.then(()=>{H.isUnmounted||G()});return}}let Ne=V,xt;Sc(V||H.vnode),as(H,!1),V?(V.el=ke.el,ce(H,V,T)):V=ke,X&&ar(X),(xt=V.props&&V.props.onVnodeBeforeUpdate)&&Dn(xt,Se,V,ke),as(H,!0),tr(H,"render");const bt=dm(H);or(H,"render");const Ot=H.subTree;H.subTree=bt,tr(H,"patch"),m(Ot,bt,d(Ot.el),pe(Ot),H,A,k),or(H,"patch"),V.el=bt.el,Ne===null&&I1(H,bt.el),fe&&Io(fe,A),(xt=V.props&&V.props.onVnodeUpdated)&&Io(()=>Dn(xt,Se,V,ke),A),gb(H),xc()}else{let V;const{el:X,props:fe}=w,{bm:Se,m:ke,parent:Ne,root:xt,type:bt}=H,Ot=Aa(w);as(H,!1),Se&&ar(Se),!Ot&&(V=fe&&fe.onVnodeBeforeMount)&&Dn(V,Ne,w),as(H,!0);{xt.ce&&xt.ce._injectChildStyle(bt),tr(H,"render");const lt=H.subTree=dm(H);or(H,"render"),tr(H,"patch"),m(null,lt,Q,re,H,A,k),or(H,"patch"),w.el=lt.el}if(ke&&Io(ke,A),!Ot&&(V=fe&&fe.onVnodeMounted)){const lt=w;Io(()=>Dn(V,Ne,lt),A)}(w.shapeFlag&256||Ne&&Aa(Ne.vnode)&&Ne.vnode.shapeFlag&256)&&H.a&&Io(H.a,A),H.isMounted=!0,xE(H),w=Q=re=null}};H.scope.on();const ee=H.effect=new GC(G);H.scope.off();const P=H.update=ee.run.bind(ee),B=H.job=ee.runIfDirty.bind(ee);B.i=H,B.id=H.uid,ee.scheduler=()=>Hu(B),as(H,!0),ee.onTrack=H.rtc?V=>ar(H.rtc,V):void 0,ee.onTrigger=H.rtg?V=>ar(H.rtg,V):void 0,P()},ce=(H,w,Q)=>{w.component=H;const re=H.vnode.props;H.vnode=w,H.next=null,a1(H,w.props,re,Q),v1(H,w.children,Q),Sn(),Jg(H),xn()},U=(H,w,Q,re,A,k,T,G,ee=!1)=>{const P=H&&H.children,B=H?H.shapeFlag:0,V=w.children,{patchFlag:X,shapeFlag:fe}=w;if(X>0){if(X&128){q(P,V,Q,re,A,k,T,G,ee);return}else if(X&256){le(P,V,Q,re,A,k,T,G,ee);return}}fe&8?(B&16&&ne(P,A,k),V!==P&&u(Q,V)):B&16?fe&16?q(P,V,Q,re,A,k,T,G,ee):ne(P,A,k,!0):(B&8&&u(Q,""),fe&16&&K(V,Q,re,A,k,T,G,ee))},le=(H,w,Q,re,A,k,T,G,ee)=>{H=H||pr,w=w||pr;const P=H.length,B=w.length,V=Math.min(P,B);let X;for(X=0;X<V;X++){const fe=w[X]=ee?Bi(w[X]):gn(w[X]);m(H[X],fe,Q,null,A,k,T,G,ee)}P>B?ne(H,A,k,!0,!1,V):K(w,Q,re,A,k,T,G,ee,V)},q=(H,w,Q,re,A,k,T,G,ee)=>{let P=0;const B=w.length;let V=H.length-1,X=B-1;for(;P<=V&&P<=X;){const fe=H[P],Se=w[P]=ee?Bi(w[P]):gn(w[P]);if(da(fe,Se))m(fe,Se,Q,null,A,k,T,G,ee);else break;P++}for(;P<=V&&P<=X;){const fe=H[V],Se=w[X]=ee?Bi(w[X]):gn(w[X]);if(da(fe,Se))m(fe,Se,Q,null,A,k,T,G,ee);else break;V--,X--}if(P>V){if(P<=X){const fe=X+1,Se=fe<B?w[fe].el:re;for(;P<=X;)m(null,w[P]=ee?Bi(w[P]):gn(w[P]),Q,Se,A,k,T,G,ee),P++}}else if(P>X)for(;P<=V;)be(H[P],A,k,!0),P++;else{const fe=P,Se=P,ke=new Map;for(P=Se;P<=X;P++){const Dt=w[P]=ee?Bi(w[P]):gn(w[P]);Dt.key!=null&&(ke.has(Dt.key)&&je("Duplicate keys found during update:",JSON.stringify(Dt.key),"Make sure keys are unique."),ke.set(Dt.key,P))}let Ne,xt=0;const bt=X-Se+1;let Ot=!1,lt=0;const oo=new Array(bt);for(P=0;P<bt;P++)oo[P]=0;for(P=fe;P<=V;P++){const Dt=H[P];if(xt>=bt){be(Dt,A,k,!0);continue}let $t;if(Dt.key!=null)$t=ke.get(Dt.key);else for(Ne=Se;Ne<=X;Ne++)if(oo[Ne-Se]===0&&da(Dt,w[Ne])){$t=Ne;break}$t===void 0?be(Dt,A,k,!0):(oo[$t-Se]=P+1,$t>=lt?lt=$t:Ot=!0,m(Dt,w[$t],Q,null,A,k,T,G,ee),xt++)}const co=Ot?S1(oo):pr;for(Ne=co.length-1,P=bt-1;P>=0;P--){const Dt=Se+P,$t=w[Dt],St=Dt+1<B?w[Dt+1].el:re;oo[P]===0?m(null,$t,Q,St,A,k,T,G,ee):Ot&&(Ne<0||P!==co[Ne]?se($t,Q,St,2):Ne--)}}},se=(H,w,Q,re,A=null)=>{const{el:k,type:T,transition:G,children:ee,shapeFlag:P}=H;if(P&6){se(H.component.subTree,w,Q,re);return}if(P&128){H.suspense.move(w,Q,re);return}if(P&64){T.move(H,w,Q,Le);return}if(T===Ct){n(k,w,Q);for(let V=0;V<ee.length;V++)se(ee[V],w,Q,re);n(H.anchor,w,Q);return}if(T===Ia){M(H,w,Q);return}if(re!==2&&P&1&&G)if(re===0)G.beforeEnter(k),n(k,w,Q),Io(()=>G.enter(k),A);else{const{leave:V,delayLeave:X,afterLeave:fe}=G,Se=()=>{H.ctx.isUnmounted?i(k):n(k,w,Q)},ke=()=>{V(k,()=>{Se(),fe&&fe()})};X?X(k,Se,ke):ke()}else n(k,w,Q)},be=(H,w,Q,re=!1,A=!1)=>{const{type:k,props:T,ref:G,children:ee,dynamicChildren:P,shapeFlag:B,patchFlag:V,dirs:X,cacheIndex:fe}=H;if(V===-2&&(A=!1),G!=null&&(Sn(),Xc(G,null,Q,H,!0),xn()),fe!=null&&(w.renderCache[fe]=void 0),B&256){w.ctx.deactivate(H);return}const Se=B&1&&X,ke=!Aa(H);let Ne;if(ke&&(Ne=T&&T.onVnodeBeforeUnmount)&&Dn(Ne,w,H),B&6)Ee(H.component,Q,re);else{if(B&128){H.suspense.unmount(Q,re);return}Se&&rs(H,null,w,"beforeUnmount"),B&64?H.type.remove(H,w,Q,Le,re):P&&!P.hasOnce&&(k!==Ct||V>0&&V&64)?ne(P,w,Q,!1,!0):(k===Ct&&V&384||!A&&B&16)&&ne(ee,w,Q),re&&ue(H)}(ke&&(Ne=T&&T.onVnodeUnmounted)||Se)&&Io(()=>{Ne&&Dn(Ne,w,H),Se&&rs(H,null,w,"unmounted")},Q)},ue=H=>{const{type:w,el:Q,anchor:re,transition:A}=H;if(w===Ct){H.patchFlag>0&&H.patchFlag&2048&&A&&!A.persisted?H.children.forEach(T=>{T.type===Yo?i(T.el):ue(T)}):j(Q,re);return}if(w===Ia){I(H);return}const k=()=>{i(Q),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(H.shapeFlag&1&&A&&!A.persisted){const{leave:T,delayLeave:G}=A,ee=()=>T(Q,k);G?G(H.el,k,ee):ee()}else k()},j=(H,w)=>{let Q;for(;H!==w;)Q=h(H),i(H),H=Q;i(w)},Ee=(H,w,Q)=>{H.type.__hmrId&&yE(H);const{bum:re,scope:A,job:k,subTree:T,um:G,m:ee,a:P,parent:B,slots:{__:V}}=H;um(ee),um(P),re&&ar(re),B&&at(V)&&V.forEach(X=>{B.renderCache[X]=void 0}),A.stop(),k&&(k.flags|=8,be(T,H,w,Q)),G&&Io(G,w),Io(()=>{H.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&H.asyncDep&&!H.asyncResolved&&H.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve()),_E(H)},ne=(H,w,Q,re=!1,A=!1,k=0)=>{for(let T=k;T<H.length;T++)be(H[T],w,Q,re,A)},pe=H=>{if(H.shapeFlag&6)return pe(H.component.subTree);if(H.shapeFlag&128)return H.suspense.next();const w=h(H.anchor||H.el),Q=w&&w[Cb];return Q?h(Q):w};let ae=!1;const xe=(H,w,Q)=>{H==null?w._vnode&&be(w._vnode,null,null,!0):m(w._vnode||null,H,w,null,null,null,Q),w._vnode=H,ae||(ae=!0,Jg(),db(),ae=!1)},Le={p:m,um:be,m:se,r:ue,mt:Y,mc:K,pc:U,pbc:ie,n:pe,o:e};return{render:xe,hydrate:void 0,createApp:n1(xe)}}function Qd({type:e,props:t},o){return o==="svg"&&e==="foreignObject"||o==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:o}function as({effect:e,job:t},o){o?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function w1(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ou(e,t,o=!1){const n=e.children,i=t.children;if(at(n)&&at(i))for(let s=0;s<n.length;s++){const r=n[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Bi(i[s]),a.el=r.el),!o&&a.patchFlag!==-2&&ou(r,a)),a.type===Pl&&(a.el=r.el),a.type===Yo&&!a.el&&(a.el=r.el),a.el&&(a.el.__vnode=a)}}function S1(e){const t=e.slice(),o=[0];let n,i,s,r,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(i=o[o.length-1],e[i]<c){t[n]=i,o.push(n);continue}for(s=0,r=o.length-1;s<r;)a=s+r>>1,e[o[a]]<c?s=a+1:r=a;c<e[o[s]]&&(s>0&&(t[n]=o[s-1]),o[s]=n)}}for(s=o.length,r=o[s-1];s-- >0;)o[s]=r,r=t[r];return o}function Bb(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Bb(t)}function um(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const x1=Symbol.for("v-scx"),R1=()=>{{const e=rn(x1);return e||je("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function _1(e,t){return Vu(e,null,t)}function E1(e,t){return Vu(e,null,ro({},t,{flush:"sync"}))}function eo(e,t,o){return mt(t)||je("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),Vu(e,t,o)}function Vu(e,t,o=At){const{immediate:n,deep:i,flush:s,once:r}=o;t||(n!==void 0&&je('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),i!==void 0&&je('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'),r!==void 0&&je('watch() "once" option is only respected when using the watch(source, callback, options?) signature.'));const a=ro({},o);a.onWarn=je;const l=t&&n||!t&&s!=="post";let c;if(tl){if(s==="sync"){const f=R1();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Po,f.resume=Po,f.pause=Po,f}}const u=lo;a.call=(f,v,m)=>qn(f,u,v,m);let d=!1;s==="post"?a.scheduler=f=>{Io(f,u&&u.suspense)}:s!=="sync"&&(d=!0,a.scheduler=(f,v)=>{v?f():Hu(f)}),a.augmentJob=f=>{t&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=cE(e,t,a);return tl&&(c?c.push(h):l&&h()),h}function P1(e,t,o){const n=this.proxy,i=to(e)?e.includes(".")?Nb(n,e):()=>n[e]:e.bind(n,n);let s;mt(t)?s=t:(s=t.handler,o=t);const r=Fl(this),a=Vu(i,s.bind(n),o);return r(),a}function Nb(e,t){const o=t.split(".");return()=>{let n=e;for(let i=0;i<o.length&&n;i++)n=n[o[i]];return n}}function F1(e,t,o=At){const n=Gn();if(!n)return je("useModel() called without active instance."),De();const i=Fo(t);if(!n.propsOptions[0][i])return je(`useModel() called with prop "${t}" which is not declared.`),De();const s=fi(t),r=Hb(e,i),a=nE((l,c)=>{let u,d=At,h;return E1(()=>{const f=e[i];Vo(u,f)&&(u=f,c())}),{get(){return l(),o.get?o.get(u):u},set(f){const v=o.set?o.set(f):f;if(!Vo(v,u)&&!(d!==At&&Vo(f,d)))return;const m=n.vnode.props;m&&(t in m||i in m||s in m)&&(`onUpdate:${t}`in m||`onUpdate:${i}`in m||`onUpdate:${s}`in m)||(u=f,c()),n.emit(`update:${t}`,v),Vo(f,v)&&Vo(f,d)&&!Vo(v,h)&&c(),d=f,h=v}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?r||At:a,done:!1}:{done:!0}}}},a}const Hb=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Fo(t)}Modifiers`]||e[`${fi(t)}Modifiers`];function D1(e,t,...o){if(e.isUnmounted)return;const n=e.vnode.props||At;{const{emitsOptions:u,propsOptions:[d]}=e;if(u)if(!(t in u))(!d||!(cs(Fo(t))in d))&&je(`Component emitted event "${t}" but it is neither declared in the emits option nor as an "${cs(Fo(t))}" prop.`);else{const h=u[t];mt(h)&&(h(...o)||je(`Invalid event arguments: event validation failed for event "${t}".`))}}let i=o;const s=t.startsWith("update:"),r=s&&Hb(n,t.slice(7));r&&(r.trim&&(i=o.map(u=>to(u)?u.trim():u)),r.number&&(i=o.map(jc))),FE(e,t,i);{const u=t.toLowerCase();u!==t&&n[cs(u)]&&je(`Event "${u}" is emitted in component ${Uu(e,e.type)} but the handler is registered for "${t}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${fi(t)}" instead of "${t}".`)}let a,l=n[a=cs(t)]||n[a=cs(Fo(t))];!l&&s&&(l=n[a=cs(fi(t))]),l&&qn(l,e,6,i);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,qn(c,e,6,i)}}function Gb(e,t,o=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const s=e.emits;let r={},a=!1;if(!mt(e)){const l=c=>{const u=Gb(c,t,!0);u&&(a=!0,ro(r,u))};!o&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(Ht(e)&&n.set(e,null),null):(at(s)?s.forEach(l=>r[l]=null):ro(r,s),Ht(e)&&n.set(e,r),r)}function zu(e,t){return!e||!Cl(t)?!1:(t=t.slice(2).replace(/Once$/,""),Lt(e,t[0].toLowerCase()+t.slice(1))||Lt(e,fi(t))||Lt(e,t))}let Qh=!1;function nu(){Qh=!0}function dm(e){const{type:t,vnode:o,proxy:n,withProxy:i,propsOptions:[s],slots:r,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:v,inheritAttrs:m}=e,b=Zc(e);let S,R;Qh=!1;try{if(o.shapeFlag&4){const I=i||n,W=f.__isScriptSetup?new Proxy(I,{get(z,de,K){return je(`Property '${String(de)}' was accessed via 'this'. Avoid using 'this' in templates.`),Reflect.get(z,de,K)}}):I;S=gn(c.call(W,I,u,Nn(d),f,h,v)),R=a}else{const I=t;a===d&&nu(),S=gn(I.length>1?I(Nn(d),{get attrs(){return nu(),Nn(a)},slots:r,emit:l}):I(Nn(d),null)),R=t.props?a:T1(a)}}catch(I){Ma.length=0,Rl(I,e,1),S=jt(Yo)}let _=S,M;if(S.patchFlag>0&&S.patchFlag&2048&&([_,M]=Vb(S)),R&&m!==!1){const I=Object.keys(R),{shapeFlag:W}=_;if(I.length){if(W&7)s&&I.some(Uc)&&(R=k1(R,s)),_=$i(_,R,!1,!0);else if(!Qh&&_.type!==Yo){const z=Object.keys(a),de=[],K=[];for(let O=0,ie=z.length;O<ie;O++){const N=z[O];Cl(N)?Uc(N)||de.push(N[2].toLowerCase()+N.slice(3)):K.push(N)}K.length&&je(`Extraneous non-props attributes (${K.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text or teleport root nodes.`),de.length&&je(`Extraneous non-emits event listeners (${de.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return o.dirs&&(hm(_)||je("Runtime directive used on component with non-element root node. The directives will not function as intended."),_=$i(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(o.dirs):o.dirs),o.transition&&(hm(_)||je("Component inside <Transition> renders non-element root node that cannot be animated."),ap(_,o.transition)),M?M(_):S=_,Zc(b),S}const Vb=e=>{const t=e.children,o=e.dynamicChildren,n=hp(t,!1);if(n){if(n.patchFlag>0&&n.patchFlag&2048)return Vb(n)}else return[e,void 0];const i=t.indexOf(n),s=o?o.indexOf(n):-1,r=a=>{t[i]=a,o&&(s>-1?o[s]=a:a.patchFlag>0&&(e.dynamicChildren=[...o,a]))};return[gn(n),r]};function hp(e,t=!0){let o;for(let n=0;n<e.length;n++){const i=e[n];if(Fr(i)){if(i.type!==Yo||i.children==="v-if"){if(o)return;if(o=i,t&&o.patchFlag>0&&o.patchFlag&2048)return hp(o.children)}}else return}return o}const T1=e=>{let t;for(const o in e)(o==="class"||o==="style"||Cl(o))&&((t||(t={}))[o]=e[o]);return t},k1=(e,t)=>{const o={};for(const n in e)(!Uc(n)||!(n.slice(9)in t))&&(o[n]=e[n]);return o},hm=e=>e.shapeFlag&7||e.type===Yo;function A1(e,t,o){const{props:n,children:i,component:s}=e,{props:r,children:a,patchFlag:l}=t,c=s.emitsOptions;if((i||a)&&vn||t.dirs||t.transition)return!0;if(o&&l>=0){if(l&1024)return!0;if(l&16)return n?fm(n,r,c):!!r;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(r[h]!==n[h]&&!zu(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?fm(n,r,c):!0:!!r;return!1}function fm(e,t,o){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(t[s]!==e[s]&&!zu(o,s))return!0}return!1}function I1({vnode:e,parent:t},o){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=o,t=t.parent;else break}}const zb=e=>e.__isSuspense;function M1(e,t){t&&t.pendingBranch?at(e)?t.effects.push(...e):t.effects.push(e):ub(e)}const Ct=Symbol.for("v-fgt"),Pl=Symbol.for("v-txt"),Yo=Symbol.for("v-cmt"),Ia=Symbol.for("v-stc"),Ma=[];let Qo=null;function ge(e=!1){Ma.push(Qo=e?null:[])}function O1(){Ma.pop(),Qo=Ma[Ma.length-1]||null}let el=1;function pm(e,t=!1){el+=e,e<0&&Qo&&t&&(Qo.hasOnce=!0)}function Wb(e){return e.dynamicChildren=el>0?Qo||pr:null,O1(),el>0&&Qo&&Qo.push(e),e}function me(e,t,o,n,i,s){return Wb(y(e,t,o,n,i,s,!0))}function Pc(e,t,o,n,i){return Wb(jt(e,t,o,n,i,!0))}function Fr(e){return e?e.__v_isVNode===!0:!1}function da(e,t){if(t.shapeFlag&6&&e.component){const o=Rc.get(t.type);if(o&&o.has(e.component))return e.shapeFlag&=-257,t.shapeFlag&=-513,!1}return e.type===t.type&&e.key===t.key}const L1=(...e)=>B1(...e),Ub=({key:e})=>e??null,Fc=({ref:e,ref_key:t,ref_for:o})=>(typeof e=="number"&&(e=""+e),e!=null?to(e)||Wt(e)||mt(e)?{i:mo,r:e,k:t,f:!!o}:e:null);function y(e,t=null,o=null,n=0,i=null,s=e===Ct?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ub(t),ref:t&&Fc(t),scopeId:vb,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:mo};return a?(fp(l,o),s&128&&e.normalize(l)):o&&(l.shapeFlag|=to(o)?8:16),l.key!==l.key&&je("VNode created with invalid key (NaN). VNode type:",l.type),el>0&&!r&&Qo&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Qo.push(l),l}const jt=L1;function B1(e,t=null,o=null,n=0,i=null,s=!1){if((!e||e===UE)&&(e||je(`Invalid vnode type when creating vnode: ${e}.`),e=Yo),Fr(e)){const a=$i(e,t,!0);return o&&fp(a,o),el>0&&!s&&Qo&&(a.shapeFlag&6?Qo[Qo.indexOf(e)]=a:Qo.push(a)),a.patchFlag=-2,a}if(qb(e)&&(e=e.__vccOpts),t){t=N1(t);let{class:a,style:l}=t;a&&!to(a)&&(t.class=Ft(a)),Ht(l)&&(Er(l)&&!at(l)&&(l=ro({},l)),t.style=Sl(l))}const r=to(e)?1:zb(e)?128:DE(e)?64:Ht(e)?4:mt(e)?2:0;return r&4&&Er(e)&&(e=yt(e),je("Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,e)),y(e,t,o,n,i,r,s,!0)}function N1(e){return e?Er(e)||kb(e)?ro({},e):e:null}function $i(e,t,o=!1,n=!1){const{props:i,ref:s,patchFlag:r,children:a,transition:l}=e,c=t?H1(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Ub(c),ref:t&&t.ref?o&&s?at(s)?s.concat(Fc(t)):[s,Fc(t)]:Fc(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r===-1&&at(a)?a.map($b):a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ct?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&$i(e.ssContent),ssFallback:e.ssFallback&&$i(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&ap(u,l.clone(u)),u}function $b(e){const t=$i(e);return at(e.children)&&(t.children=e.children.map($b)),t}function so(e=" ",t=0){return jt(Pl,null,e,t)}function Hn(e,t){const o=jt(Ia,null,e);return o.staticCount=t,o}function we(e="",t=!1){return t?(ge(),Pc(Yo,null,e)):jt(Yo,null,e)}function gn(e){return e==null||typeof e=="boolean"?jt(Yo):at(e)?jt(Ct,null,e.slice()):Fr(e)?Bi(e):jt(Pl,null,String(e))}function Bi(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:$i(e)}function fp(e,t){let o=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(at(t))o=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),fp(e,i()),i._c&&(i._d=!0));return}else{o=32;const i=t._;!i&&!kb(t)?t._ctx=mo:i===3&&mo&&(mo.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else mt(t)?(t={default:t,_ctx:mo},o=32):(t=String(t),n&64?(o=16,t=[so(t)]):o=8);e.children=t,e.shapeFlag|=o}function H1(...e){const t={};for(let o=0;o<e.length;o++){const n=e[o];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Ft([t.class,n.class]));else if(i==="style")t.style=Sl([t.style,n.style]);else if(Cl(i)){const s=t[i],r=n[i];r&&s!==r&&!(at(s)&&s.includes(r))&&(t[i]=s?[].concat(s,r):r)}else i!==""&&(t[i]=n[i])}return t}function Dn(e,t,o,n=null){qn(e,t,7,[o,n])}const G1=Fb();let V1=0;function z1(e,t,o){const n=e.type,i=(t?t.appContext:e.appContext)||G1,s={uid:V1++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new BC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ib(n,i),emitsOptions:Gb(n,i),emit:null,emitted:null,propsDefaults:At,inheritAttrs:n.inheritAttrs,ctx:At,data:At,props:At,attrs:At,slots:At,refs:At,setupState:At,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx=jE(s),s.root=t?t.root:s,s.emit=D1.bind(null,s),e.ce&&e.ce(s),s}let lo=null;const Gn=()=>lo||mo;let iu,Yh;{const e=wl(),t=(o,n)=>{let i;return(i=e[o])||(i=e[o]=[]),i.push(n),s=>{i.length>1?i.forEach(r=>r(s)):i[0](s)}};iu=t("__VUE_INSTANCE_SETTERS__",o=>lo=o),Yh=t("__VUE_SSR_SETTERS__",o=>tl=o)}const Fl=e=>{const t=lo;return iu(e),e.scope.on(),()=>{e.scope.off(),iu(t)}},gm=()=>{lo&&lo.scope.off(),iu(null)},W1=yi("slot,component");function Jh(e,{isNativeTag:t}){(W1(e)||t(e))&&je("Do not use built-in or reserved HTML elements as component id: "+e)}function jb(e){return e.vnode.shapeFlag&4}let tl=!1;function U1(e,t=!1,o=!1){t&&Yh(t);const{props:n,children:i}=e.vnode,s=jb(e);s1(e,n,s,t),m1(e,i,o||t);const r=s?$1(e,t):void 0;return t&&Yh(!1),r}function $1(e,t){var o;const n=e.type;{if(n.name&&Jh(n.name,e.appContext.config),n.components){const s=Object.keys(n.components);for(let r=0;r<s.length;r++)Jh(s[r],e.appContext.config)}if(n.directives){const s=Object.keys(n.directives);for(let r=0;r<s.length;r++)yb(s[r])}n.compilerOptions&&j1()&&je('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,_b),KE(e);const{setup:i}=n;if(i){Sn();const s=e.setupContext=i.length>1?Q1(e):null,r=Fl(e),a=Wr(i,e,0,[Nn(e.props),s]),l=Yf(a);if(xn(),r(),(l||e.sp)&&!Aa(e)&&Sb(e),l){if(a.then(gm,gm),t)return a.then(c=>{mm(e,c,t)}).catch(c=>{Rl(c,e,0)});if(e.asyncDep=a,!e.suspense){const c=(o=n.name)!=null?o:"Anonymous";je(`Component <${c}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else mm(e,a,t)}else Kb(e,t)}function mm(e,t,o){mt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ht(t)?(Fr(t)&&je("setup() should not return VNodes directly - return a render function instead."),e.devtoolsRawSetupState=t,e.setupState=sb(t),qE(e)):t!==void 0&&je(`setup() should return an object. Received: ${t===null?"null":typeof t}`),Kb(e,o)}const j1=()=>!0;function Kb(e,t,o){const n=e.type;e.render||(e.render=n.render||Po);{const i=Fl(e);Sn();try{JE(e)}finally{xn(),i()}}!n.render&&e.render===Po&&!t&&(n.template?je('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):je("Component is missing template or render function: ",n))}const K1={get(e,t){return nu(),po(e,"get",""),e[t]},set(){return je("setupContext.attrs is readonly."),!1},deleteProperty(){return je("setupContext.attrs is readonly."),!1}};function q1(e){return new Proxy(e.slots,{get(t,o){return po(e,"get","$slots"),t[o]}})}function Q1(e){const t=o=>{if(e.exposed&&je("expose() should be called only once per setup()."),o!=null){let n=typeof o;n==="object"&&(at(o)?n="array":Wt(o)&&(n="ref")),n!=="object"&&je(`expose() should be passed a plain object, received ${n}.`)}e.exposed=o||{}};{let o,n;return Object.freeze({get attrs(){return o||(o=new Proxy(e.attrs,K1))},get slots(){return n||(n=q1(e))},get emit(){return(i,...s)=>e.emit(i,...s)},expose:t})}}function Wu(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(sb(li(e.exposed)),{get(t,o){if(o in t)return t[o];if(o in bs)return bs[o](e)},has(t,o){return o in t||o in bs}})):e.proxy}const Y1=/(?:^|[-_])(\w)/g,J1=e=>e.replace(Y1,t=>t.toUpperCase()).replace(/[-_]/g,"");function pp(e,t=!0){return mt(e)?e.displayName||e.name:e.name||t&&e.__name}function Uu(e,t,o=!1){let n=pp(t);if(!n&&t.__file){const i=t.__file.match(/([^/\\]+)\.\w+$/);i&&(n=i[1])}if(!n&&e&&e.parent){const i=s=>{for(const r in s)if(s[r]===t)return r};n=i(e.components||e.parent.type.components)||i(e.appContext.components)}return n?J1(n):o?"App":"Anonymous"}function qb(e){return mt(e)&&"__vccOpts"in e}const Ze=(e,t)=>{const o=aE(e,t,tl);{const n=Gn();n&&n.appContext.config.warnRecursiveComputed&&(o._warnRecursive=!0)}return o};function Qb(e,t,o){const n=arguments.length;return n===2?Ht(t)&&!at(t)?Fr(t)?jt(e,null,[t]):jt(e,t):jt(e,null,t):(n>3?o=Array.prototype.slice.call(arguments,2):n===3&&Fr(o)&&(o=[o]),jt(e,t,o))}function Z1(){if(typeof window>"u")return;const e={style:"color:#3ba776"},t={style:"color:#1677ff"},o={style:"color:#f5222d"},n={style:"color:#eb2f96"},i={__vue_custom_formatter:!0,header(d){if(!Ht(d))return null;if(d.__isVue)return["div",e,"VueInstance"];if(Wt(d)){Sn();const h=d.value;return xn(),["div",{},["span",e,u(d)],"<",a(h),">"]}else{if(bn(d))return["div",{},["span",e,Bo(d)?"ShallowReactive":"Reactive"],"<",a(d),`>${Kn(d)?" (readonly)":""}`];if(Kn(d))return["div",{},["span",e,Bo(d)?"ShallowReadonly":"Readonly"],"<",a(d),">"]}return null},hasBody(d){return d&&d.__isVue},body(d){if(d&&d.__isVue)return["div",{},...s(d.$)]}};function s(d){const h=[];d.type.props&&d.props&&h.push(r("props",yt(d.props))),d.setupState!==At&&h.push(r("setup",d.setupState)),d.data!==At&&h.push(r("data",yt(d.data)));const f=l(d,"computed");f&&h.push(r("computed",f));const v=l(d,"inject");return v&&h.push(r("injected",v)),h.push(["div",{},["span",{style:n.style+";opacity:0.66"},"$ (internal): "],["object",{object:d}]]),h}function r(d,h){return h=ro({},h),Object.keys(h).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},d],["div",{style:"padding-left:1.25em"},...Object.keys(h).map(f=>["div",{},["span",n,f+": "],a(h[f],!1)])]]:["span",{}]}function a(d,h=!0){return typeof d=="number"?["span",t,d]:typeof d=="string"?["span",o,JSON.stringify(d)]:typeof d=="boolean"?["span",n,d]:Ht(d)?["object",{object:h?yt(d):d}]:["span",o,String(d)]}function l(d,h){const f=d.type;if(mt(f))return;const v={};for(const m in d.ctx)c(f,m,h)&&(v[m]=d.ctx[m]);return v}function c(d,h,f){const v=d[f];if(at(v)&&v.includes(h)||Ht(v)&&h in v||d.extends&&c(d.extends,h,f)||d.mixins&&d.mixins.some(m=>c(m,h,f)))return!0}function u(d){return Bo(d)?"ShallowRef":d.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(i):window.devtoolsFormatters=[i]}const vm="3.5.14",zn=je;/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zh;const ym=typeof window<"u"&&window.trustedTypes;if(ym)try{Zh=ym.createPolicy("vue",{createHTML:e=>e})}catch(e){zn(`Error creating trusted types policy: ${e}`)}const Yb=Zh?e=>Zh.createHTML(e):e=>e,X1="http://www.w3.org/2000/svg",eP="http://www.w3.org/1998/Math/MathML",ni=typeof document<"u"?document:null,Cm=ni&&ni.createElement("template"),tP={insert:(e,t,o)=>{t.insertBefore(e,o||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,o,n)=>{const i=t==="svg"?ni.createElementNS(X1,e):t==="mathml"?ni.createElementNS(eP,e):o?ni.createElement(e,{is:o}):ni.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>ni.createTextNode(e),createComment:e=>ni.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ni.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,o,n,i,s){const r=o?o.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),o),!(i===s||!(i=i.nextSibling)););else{Cm.innerHTML=Yb(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=Cm.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,o)}return[r?r.nextSibling:t.firstChild,o?o.previousSibling:t.lastChild]}},oP=Symbol("_vtc");function nP(e,t,o){const n=e[oP];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):o?e.setAttribute("class",t):e.className=t}const su=Symbol("_vod"),Jb=Symbol("_vsh"),ru={beforeMount(e,{value:t},{transition:o}){e[su]=e.style.display==="none"?"":e.style.display,o&&t?o.beforeEnter(e):ha(e,t)},mounted(e,{value:t},{transition:o}){o&&t&&o.enter(e)},updated(e,{value:t,oldValue:o},{transition:n}){!t!=!o&&(n?t?(n.beforeEnter(e),ha(e,!0),n.enter(e)):n.leave(e,()=>{ha(e,!1)}):ha(e,t))},beforeUnmount(e,{value:t}){ha(e,t)}};ru.name="show";function ha(e,t){e.style.display=t?e[su]:"none",e[Jb]=!t}const iP=Symbol("CSS_VAR_TEXT"),sP=/(^|;)\s*display\s*:/;function rP(e,t,o){const n=e.style,i=to(o);let s=!1;if(o&&!i){if(t)if(to(t))for(const r of t.split(";")){const a=r.slice(0,r.indexOf(":")).trim();o[a]==null&&Dc(n,a,"")}else for(const r in t)o[r]==null&&Dc(n,r,"");for(const r in o)r==="display"&&(s=!0),Dc(n,r,o[r])}else if(i){if(t!==o){const r=n[iP];r&&(o+=";"+r),n.cssText=o,s=sP.test(o)}}else t&&e.removeAttribute("style");su in e&&(e[su]=s?n.display:"",e[Jb]&&(n.display="none"))}const aP=/[^\\];\s*$/,bm=/\s*!important$/;function Dc(e,t,o){if(at(o))o.forEach(n=>Dc(e,t,n));else if(o==null&&(o=""),aP.test(o)&&zn(`Unexpected semicolon at the end of '${t}' style value: '${o}'`),t.startsWith("--"))e.setProperty(t,o);else{const n=lP(e,t);bm.test(o)?e.setProperty(fi(n),o.replace(bm,""),"important"):e[n]=o}}const wm=["Webkit","Moz","ms"],Yd={};function lP(e,t){const o=Yd[t];if(o)return o;let n=Fo(t);if(n!=="filter"&&n in e)return Yd[t]=n;n=ks(n);for(let i=0;i<wm.length;i++){const s=wm[i]+n;if(s in e)return Yd[t]=s}return t}const Sm="http://www.w3.org/1999/xlink";function xm(e,t,o,n,i,s=A_(t)){n&&t.startsWith("xlink:")?o==null?e.removeAttributeNS(Sm,t.slice(6,t.length)):e.setAttributeNS(Sm,t,o):o==null||s&&!MC(o)?e.removeAttribute(t):e.setAttribute(t,s?"":jn(o)?String(o):o)}function Rm(e,t,o,n,i){if(t==="innerHTML"||t==="textContent"){o!=null&&(e[t]=t==="innerHTML"?Yb(o):o);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,l=o==null?e.type==="checkbox"?"on":"":String(o);(a!==l||!("_value"in e))&&(e.value=l),o==null&&e.removeAttribute(t),e._value=o;return}let r=!1;if(o===""||o==null){const a=typeof e[t];a==="boolean"?o=MC(o):o==null&&a==="string"?(o="",r=!0):a==="number"&&(o=0,r=!0)}try{e[t]=o}catch(a){r||zn(`Failed setting prop "${t}" on <${s.toLowerCase()}>: value ${o} is invalid.`,a)}r&&e.removeAttribute(i||t)}function ai(e,t,o,n){e.addEventListener(t,o,n)}function cP(e,t,o,n){e.removeEventListener(t,o,n)}const _m=Symbol("_vei");function uP(e,t,o,n,i=null){const s=e[_m]||(e[_m]={}),r=s[t];if(n&&r)r.value=Pm(n,t);else{const[a,l]=dP(t);if(n){const c=s[t]=pP(Pm(n,t),i);ai(e,a,c,l)}else r&&(cP(e,a,r,l),s[t]=void 0)}}const Em=/(?:Once|Passive|Capture)$/;function dP(e){let t;if(Em.test(e)){t={};let n;for(;n=e.match(Em);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):fi(e.slice(2)),t]}let Jd=0;const hP=Promise.resolve(),fP=()=>Jd||(hP.then(()=>Jd=0),Jd=Date.now());function pP(e,t){const o=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=o.attached)return;qn(gP(n,o.value),t,5,[n])};return o.value=e,o.attached=fP(),o}function Pm(e,t){return mt(e)||at(e)?e:(zn(`Wrong type passed as event handler to ${t} - did you forget @ or : in front of your prop?
Expected function or array of functions, received type ${typeof e}.`),Po)}function gP(e,t){if(at(t)){const o=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{o.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const Fm=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,mP=(e,t,o,n,i,s)=>{const r=i==="svg";t==="class"?nP(e,n,r):t==="style"?rP(e,o,n):Cl(t)?Uc(t)||uP(e,t,o,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):vP(e,t,n,r))?(Rm(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&xm(e,t,n,r,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!to(n))?Rm(e,Fo(t),n,s,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),xm(e,t,n,r))};function vP(e,t,o,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Fm(t)&&mt(o));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Fm(t)&&to(o)?!1:t in e}const ji=e=>{const t=e.props["onUpdate:modelValue"]||!1;return at(t)?o=>ar(t,o):t};function yP(e){e.target.composing=!0}function Dm(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const an=Symbol("_assign"),dt={created(e,{modifiers:{lazy:t,trim:o,number:n}},i){e[an]=ji(i);const s=n||i.props&&i.props.type==="number";ai(e,t?"change":"input",r=>{if(r.target.composing)return;let a=e.value;o&&(a=a.trim()),s&&(a=jc(a)),e[an](a)}),o&&ai(e,"change",()=>{e.value=e.value.trim()}),t||(ai(e,"compositionstart",yP),ai(e,"compositionend",Dm),ai(e,"change",Dm))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:o,modifiers:{lazy:n,trim:i,number:s}},r){if(e[an]=ji(r),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?jc(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===o||i&&e.value.trim()===l)||(e.value=l))}},Xh={deep:!0,created(e,t,o){e[an]=ji(o),ai(e,"change",()=>{const n=e._modelValue,i=Dr(e),s=e.checked,r=e[an];if(at(n)){const a=Xf(n,i),l=a!==-1;if(s&&!l)r(n.concat(i));else if(!s&&l){const c=[...n];c.splice(a,1),r(c)}}else if(zr(n)){const a=new Set(n);s?a.add(i):a.delete(i),r(a)}else r(Zb(e,s))})},mounted:Tm,beforeUpdate(e,t,o){e[an]=ji(o),Tm(e,t,o)}};function Tm(e,{value:t,oldValue:o},n){e._modelValue=t;let i;if(at(t))i=Xf(t,n.props.value)>-1;else if(zr(t))i=t.has(n.props.value);else{if(t===o)return;i=As(t,Zb(e,!0))}e.checked!==i&&(e.checked=i)}const km={created(e,{value:t},o){e.checked=As(t,o.props.value),e[an]=ji(o),ai(e,"change",()=>{e[an](Dr(e))})},beforeUpdate(e,{value:t,oldValue:o},n){e[an]=ji(n),t!==o&&(e.checked=As(t,n.props.value))}},Wo={deep:!0,created(e,{value:t,modifiers:{number:o}},n){const i=zr(t);ai(e,"change",()=>{const s=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>o?jc(Dr(r)):Dr(r));e[an](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,Pr(()=>{e._assigning=!1})}),e[an]=ji(n)},mounted(e,{value:t}){Am(e,t)},beforeUpdate(e,t,o){e[an]=ji(o)},updated(e,{value:t}){e._assigning||Am(e,t)}};function Am(e,t){const o=e.multiple,n=at(t);if(o&&!n&&!zr(t)){zn(`<select multiple v-model> expects an Array or Set value for its binding, but got ${Object.prototype.toString.call(t).slice(8,-1)}.`);return}for(let i=0,s=e.options.length;i<s;i++){const r=e.options[i],a=Dr(r);if(o)if(n){const l=typeof a;l==="string"||l==="number"?r.selected=t.some(c=>String(c)===String(a)):r.selected=Xf(t,a)>-1}else r.selected=t.has(a);else if(As(Dr(r),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!o&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}function Dr(e){return"_value"in e?e._value:e.value}function Zb(e,t){const o=t?"_trueValue":"_falseValue";return o in e?e[o]:t}const CP=["ctrl","shift","alt","meta"],bP={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>CP.some(o=>e[`${o}Key`]&&!t.includes(o))},Qt=(e,t)=>{const o=e._withMods||(e._withMods={}),n=t.join(".");return o[n]||(o[n]=(i,...s)=>{for(let r=0;r<t.length;r++){const a=bP[t[r]];if(a&&a(i,t))return}return e(i,...s)})},wP=ro({patchProp:mP},tP);let Im;function Xb(){return Im||(Im=C1(wP))}const Mm=(...e)=>{Xb().render(...e)},SP=(...e)=>{const t=Xb().createApp(...e);RP(t),_P(t);const{mount:o}=t;return t.mount=n=>{const i=EP(n);if(!i)return;const s=t._component;!mt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const r=o(i,!1,xP(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},t};function xP(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function RP(e){Object.defineProperty(e.config,"isNativeTag",{value:t=>F_(t)||D_(t)||T_(t),writable:!1})}function _P(e){{const t=e.config.isCustomElement;Object.defineProperty(e.config,"isCustomElement",{get(){return t},set(){zn("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const o=e.config.compilerOptions,n='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-sfc';Object.defineProperty(e.config,"compilerOptions",{get(){return zn(n),o},set(){zn(n)}})}}function EP(e){if(to(e)){const t=document.querySelector(e);return t||zn(`Failed to mount app: mount target selector "${e}" returned null.`),t}return window.ShadowRoot&&e instanceof window.ShadowRoot&&e.mode==="closed"&&zn('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),e}/**
* vue v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function PP(){Z1()}PP();function FP(){return ew().__VUE_DEVTOOLS_GLOBAL_HOOK__}function ew(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const DP=typeof Proxy=="function",TP="devtools-plugin:setup",kP="plugin:settings:set";let nr,ef;function AP(){var e;return nr!==void 0||(typeof window<"u"&&window.performance?(nr=!0,ef=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(nr=!0,ef=globalThis.perf_hooks.performance):nr=!1),nr}function IP(){return AP()?ef.now():Date.now()}class MP{constructor(t,o){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=o;const n={};if(t.settings)for(const r in t.settings){const a=t.settings[r];n[r]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let s=Object.assign({},n);try{const r=localStorage.getItem(i),a=JSON.parse(r);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(r){try{localStorage.setItem(i,JSON.stringify(r))}catch{}s=r},now(){return IP()}},o&&o.on(kP,(r,a)=>{r===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(r,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(r,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(t){this.target=t;for(const o of this.onQueue)this.target.on[o.method](...o.args);for(const o of this.targetQueue)o.resolve(await this.target[o.method](...o.args))}}function OP(e,t){const o=e,n=ew(),i=FP(),s=DP&&o.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))i.emit(TP,e,t);else{const r=s?new MP(o,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:o,setupFn:t,proxy:r}),r&&t(r.proxiedTarget)}}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ii=typeof document<"u";function tw(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function LP(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&tw(e.default)}const Gt=Object.assign;function Zd(e,t){const o={};for(const n in t){const i=t[n];o[n]=Jo(i)?i.map(e):e(i)}return o}const Oa=()=>{},Jo=Array.isArray;function Pt(e){const t=Array.from(arguments).slice(1);console.warn.apply(console,["[Vue Router warn]: "+e].concat(t))}const ow=/#/g,BP=/&/g,NP=/\//g,HP=/=/g,GP=/\?/g,nw=/\+/g,VP=/%5B/g,zP=/%5D/g,iw=/%5E/g,WP=/%60/g,sw=/%7B/g,UP=/%7C/g,rw=/%7D/g,$P=/%20/g;function gp(e){return encodeURI(""+e).replace(UP,"|").replace(VP,"[").replace(zP,"]")}function jP(e){return gp(e).replace(sw,"{").replace(rw,"}").replace(iw,"^")}function tf(e){return gp(e).replace(nw,"%2B").replace($P,"+").replace(ow,"%23").replace(BP,"%26").replace(WP,"`").replace(sw,"{").replace(rw,"}").replace(iw,"^")}function KP(e){return tf(e).replace(HP,"%3D")}function qP(e){return gp(e).replace(ow,"%23").replace(GP,"%3F")}function QP(e){return e==null?"":qP(e).replace(NP,"%2F")}function Tr(e){try{return decodeURIComponent(""+e)}catch{Pt(`Error decoding "${e}". Using original value`)}return""+e}const YP=/\/$/,JP=e=>e.replace(YP,"");function Xd(e,t,o="/"){let n,i={},s="",r="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),i=e(s)),a>-1&&(n=n||t.slice(0,a),r=t.slice(a,t.length)),n=eF(n??t,o),{fullPath:n+(s&&"?")+s+r,path:n,query:i,hash:Tr(r)}}function ZP(e,t){const o=t.query?e(t.query):"";return t.path+(o&&"?")+o+(t.hash||"")}function Om(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Lm(e,t,o){const n=t.matched.length-1,i=o.matched.length-1;return n>-1&&n===i&&Ki(t.matched[n],o.matched[i])&&aw(t.params,o.params)&&e(t.query)===e(o.query)&&t.hash===o.hash}function Ki(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function aw(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const o in e)if(!XP(e[o],t[o]))return!1;return!0}function XP(e,t){return Jo(e)?Bm(e,t):Jo(t)?Bm(t,e):e===t}function Bm(e,t){return Jo(t)?e.length===t.length&&e.every((o,n)=>o===t[n]):e.length===1&&e[0]===t}function eF(e,t){if(e.startsWith("/"))return e;if(!t.startsWith("/"))return Pt(`Cannot resolve a relative location without an absolute path. Trying to resolve "${e}" from "${t}". It should look like "/${t}".`),e;if(!e)return t;const o=t.split("/"),n=e.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let s=o.length-1,r,a;for(r=0;r<n.length;r++)if(a=n[r],a!==".")if(a==="..")s>1&&s--;else break;return o.slice(0,s).join("/")+"/"+n.slice(r).join("/")}const Ii={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ol;(function(e){e.pop="pop",e.push="push"})(ol||(ol={}));var La;(function(e){e.back="back",e.forward="forward",e.unknown=""})(La||(La={}));function tF(e){if(!e)if(ii){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),JP(e)}const oF=/^[^#]+#/;function nF(e,t){return e.replace(oF,"#")+t}function iF(e,t){const o=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-o.left-(t.left||0),top:n.top-o.top-(t.top||0)}}const $u=()=>({left:window.scrollX,top:window.scrollY});function sF(e){let t;if("el"in e){const o=e.el,n=typeof o=="string"&&o.startsWith("#");if(typeof e.el=="string"&&(!n||!document.getElementById(e.el.slice(1))))try{const s=document.querySelector(e.el);if(n&&s){Pt(`The selector "${e.el}" should be passed as "el: document.querySelector('${e.el}')" because it starts with "#".`);return}}catch{Pt(`The selector "${e.el}" is invalid. If you are using an id selector, make sure to escape it. You can find more information about escaping characters in selectors at https://mathiasbynens.be/notes/css-escapes or use CSS.escape (https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape).`);return}const i=typeof o=="string"?n?document.getElementById(o.slice(1)):document.querySelector(o):o;if(!i){Pt(`Couldn't find element using selector "${e.el}" returned by scrollBehavior.`);return}t=iF(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Nm(e,t){return(history.state?history.state.position-t:-1)+e}const of=new Map;function rF(e,t){of.set(e,t)}function aF(e){const t=of.get(e);return of.delete(e),t}let lF=()=>location.protocol+"//"+location.host;function lw(e,t){const{pathname:o,search:n,hash:i}=t,s=e.indexOf("#");if(s>-1){let a=i.includes(e.slice(s))?e.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Om(l,"")}return Om(o,e)+n+i}function cF(e,t,o,n){let i=[],s=[],r=null;const a=({state:h})=>{const f=lw(e,location),v=o.value,m=t.value;let b=0;if(h){if(o.value=f,t.value=h,r&&r===v){r=null;return}b=m?h.position-m.position:0}else n(f);i.forEach(S=>{S(o.value,v,{delta:b,type:ol.pop,direction:b?b>0?La.forward:La.back:La.unknown})})};function l(){r=o.value}function c(h){i.push(h);const f=()=>{const v=i.indexOf(h);v>-1&&i.splice(v,1)};return s.push(f),f}function u(){const{history:h}=window;h.state&&h.replaceState(Gt({},h.state,{scroll:$u()}),"")}function d(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function Hm(e,t,o,n=!1,i=!1){return{back:e,current:t,forward:o,replaced:n,position:window.history.length,scroll:i?$u():null}}function uF(e){const{history:t,location:o}=window,n={value:lw(e,o)},i={value:t.state};i.value||s(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const d=e.indexOf("#"),h=d>-1?(o.host&&document.querySelector("base")?e:e.slice(d))+l:lF()+e+l;try{t[u?"replaceState":"pushState"](c,"",h),i.value=c}catch(f){Pt("Error with push/replace State",f),o[u?"replace":"assign"](h)}}function r(l,c){const u=Gt({},t.state,Hm(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,u,!0),n.value=l}function a(l,c){const u=Gt({},i.value,t.state,{forward:l,scroll:$u()});t.state||Pt(`history.state seems to have been manually replaced without preserving the necessary values. Make sure to preserve existing history state if you are manually calling history.replaceState:

history.replaceState(history.state, '', url)

You can find more information at https://router.vuejs.org/guide/migration/#Usage-of-history-state`),s(u.current,u,!0);const d=Gt({},Hm(n.value,l,null),{position:u.position+1},c);s(l,d,!1),n.value=l}return{location:n,state:i,push:a,replace:r}}function dF(e){e=tF(e);const t=uF(e),o=cF(e,t.state,t.location,t.replace);function n(s,r=!0){r||o.pauseListeners(),history.go(s)}const i=Gt({location:"",base:e,go:n,createHref:nF.bind(null,e)},t,o);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function hF(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),!e.endsWith("#/")&&!e.endsWith("#")&&Pt(`A hash base must end with a "#":
"${e}" should be "${e.replace(/#.*$/,"#")}".`),dF(e)}function au(e){return typeof e=="string"||e&&typeof e=="object"}function cw(e){return typeof e=="string"||typeof e=="symbol"}const uw=Symbol("navigation failure");var Gm;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Gm||(Gm={}));const fF={1({location:e,currentLocation:t}){return`No match for
 ${JSON.stringify(e)}${t?`
while being at
`+JSON.stringify(t):""}`},2({from:e,to:t}){return`Redirected from "${e.fullPath}" to "${gF(t)}" via a navigation guard.`},4({from:e,to:t}){return`Navigation aborted from "${e.fullPath}" to "${t.fullPath}" via a navigation guard.`},8({from:e,to:t}){return`Navigation cancelled from "${e.fullPath}" to "${t.fullPath}" with a new navigation.`},16({from:e,to:t}){return`Avoided redundant navigation to current location: "${e.fullPath}".`}};function kr(e,t){return Gt(new Error(fF[e](t)),{type:e,[uw]:!0},t)}function ei(e,t){return e instanceof Error&&uw in e&&(t==null||!!(e.type&t))}const pF=["params","query","hash"];function gF(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const o of pF)o in e&&(t[o]=e[o]);return JSON.stringify(t,null,2)}const Vm="[^/]+?",mF={sensitive:!1,strict:!1,start:!0,end:!0},vF=/[.+*?^${}()[\]/\\]/g;function yF(e,t){const o=Gt({},mF,t),n=[];let i=o.start?"^":"";const s=[];for(const c of e){const u=c.length?[]:[90];o.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const h=c[d];let f=40+(o.sensitive?.25:0);if(h.type===0)d||(i+="/"),i+=h.value.replace(vF,"\\$&"),f+=40;else if(h.type===1){const{value:v,repeatable:m,optional:b,regexp:S}=h;s.push({name:v,repeatable:m,optional:b});const R=S||Vm;if(R!==Vm){f+=10;try{new RegExp(`(${R})`)}catch(M){throw new Error(`Invalid custom RegExp for param "${v}" (${R}): `+M.message)}}let _=m?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;d||(_=b&&c.length<2?`(?:/${_})`:"/"+_),b&&(_+="?"),i+=_,f+=20,b&&(f+=-8),m&&(f+=-20),R===".*"&&(f+=-50)}u.push(f)}n.push(u)}if(o.strict&&o.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}o.strict||(i+="/?"),o.end?i+="$":o.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const r=new RegExp(i,o.sensitive?"":"i");function a(c){const u=c.match(r),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",v=s[h-1];d[v.name]=f&&v.repeatable?f.split("/"):f}return d}function l(c){let u="",d=!1;for(const h of e){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===0)u+=f.value;else if(f.type===1){const{value:v,repeatable:m,optional:b}=f,S=v in c?c[v]:"";if(Jo(S)&&!m)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const R=Jo(S)?S.join("/"):S;if(!R)if(b)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${v}"`);u+=R}}return u||"/"}return{re:r,score:n,keys:s,parse:a,stringify:l}}function CF(e,t){let o=0;for(;o<e.length&&o<t.length;){const n=t[o]-e[o];if(n)return n;o++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function dw(e,t){let o=0;const n=e.score,i=t.score;for(;o<n.length&&o<i.length;){const s=CF(n[o],i[o]);if(s)return s;o++}if(Math.abs(i.length-n.length)===1){if(zm(n))return 1;if(zm(i))return-1}return i.length-n.length}function zm(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const bF={type:0,value:""},wF=/[a-zA-Z0-9_]/;function SF(e){if(!e)return[[]];if(e==="/")return[[bF]];if(!e.startsWith("/"))throw new Error(`Route paths should start with a "/": "${e}" should be "/${e}".`);function t(f){throw new Error(`ERR (${o})/"${c}": ${f}`)}let o=0,n=o;const i=[];let s;function r(){s&&i.push(s),s=[]}let a=0,l,c="",u="";function d(){c&&(o===0?s.push({type:0,value:c}):o===1||o===2||o===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&o!==2){n=o,o=4;continue}switch(o){case 0:l==="/"?(c&&d(),r()):l===":"?(d(),o=1):h();break;case 4:h(),o=n;break;case 1:l==="("?o=2:wF.test(l)?h():(d(),o=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:o=3:u+=l;break;case 3:d(),o=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return o===2&&t(`Unfinished custom RegExp for param "${c}"`),d(),r(),i}function xF(e,t,o){const n=yF(SF(e.path),o);{const s=new Set;for(const r of n.keys)s.has(r.name)&&Pt(`Found duplicated params with name "${r.name}" for path "${e.path}". Only the last one will be available on "$route.params".`),s.add(r.name)}const i=Gt(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function RF(e,t){const o=[],n=new Map;t=jm({strict:!1,end:!0,sensitive:!1},t);function i(d){return n.get(d)}function s(d,h,f){const v=!f,m=Um(d);FF(m,h),m.aliasOf=f&&f.record;const b=jm(t,d),S=[m];if("alias"in d){const M=typeof d.alias=="string"?[d.alias]:d.alias;for(const I of M)S.push(Um(Gt({},m,{components:f?f.record.components:m.components,path:I,aliasOf:f?f.record:m})))}let R,_;for(const M of S){const{path:I}=M;if(h&&I[0]!=="/"){const W=h.record.path,z=W[W.length-1]==="/"?"":"/";M.path=h.record.path+(I&&z+I)}if(M.path==="*")throw new Error(`Catch all routes ("*") must now be defined using a param with a custom regexp.
See more at https://router.vuejs.org/guide/migration/#Removed-star-or-catch-all-routes.`);if(R=xF(M,h,b),h&&I[0]==="/"&&TF(R,h),f?(f.alias.push(R),PF(f,R)):(_=_||R,_!==R&&_.alias.push(R),v&&d.name&&!$m(R)&&(DF(d,h),r(d.name))),hw(R)&&l(R),m.children){const W=m.children;for(let z=0;z<W.length;z++)s(W[z],R,f&&f.children[z])}f=f||R}return _?()=>{r(_)}:Oa}function r(d){if(cw(d)){const h=n.get(d);h&&(n.delete(d),o.splice(o.indexOf(h),1),h.children.forEach(r),h.alias.forEach(r))}else{const h=o.indexOf(d);h>-1&&(o.splice(h,1),d.record.name&&n.delete(d.record.name),d.children.forEach(r),d.alias.forEach(r))}}function a(){return o}function l(d){const h=kF(d,o);o.splice(h,0,d),d.record.name&&!$m(d)&&n.set(d.record.name,d)}function c(d,h){let f,v={},m,b;if("name"in d&&d.name){if(f=n.get(d.name),!f)throw kr(1,{location:d});{const _=Object.keys(d.params||{}).filter(M=>!f.keys.find(I=>I.name===M));_.length&&Pt(`Discarded invalid param(s) "${_.join('", "')}" when navigating. See https://github.com/vuejs/router/blob/main/packages/router/CHANGELOG.md#414-2022-08-22 for more details.`)}b=f.record.name,v=Gt(Wm(h.params,f.keys.filter(_=>!_.optional).concat(f.parent?f.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),d.params&&Wm(d.params,f.keys.map(_=>_.name))),m=f.stringify(v)}else if(d.path!=null)m=d.path,m.startsWith("/")||Pt(`The Matcher cannot resolve relative paths but received "${m}". Unless you directly called \`matcher.resolve("${m}")\`, this is probably a bug in vue-router. Please open an issue at https://github.com/vuejs/router/issues/new/choose.`),f=o.find(_=>_.re.test(m)),f&&(v=f.parse(m),b=f.record.name);else{if(f=h.name?n.get(h.name):o.find(_=>_.re.test(h.path)),!f)throw kr(1,{location:d,currentLocation:h});b=f.record.name,v=Gt({},h.params,d.params),m=f.stringify(v)}const S=[];let R=f;for(;R;)S.unshift(R.record),R=R.parent;return{name:b,path:m,params:v,matched:S,meta:EF(S)}}e.forEach(d=>s(d));function u(){o.length=0,n.clear()}return{addRoute:s,resolve:c,removeRoute:r,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function Wm(e,t){const o={};for(const n of t)n in e&&(o[n]=e[n]);return o}function Um(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:_F(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function _F(e){const t={},o=e.props||!1;if("component"in e)t.default=o;else for(const n in e.components)t[n]=typeof o=="object"?o[n]:o;return t}function $m(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function EF(e){return e.reduce((t,o)=>Gt(t,o.meta),{})}function jm(e,t){const o={};for(const n in e)o[n]=n in t?t[n]:e[n];return o}function nf(e,t){return e.name===t.name&&e.optional===t.optional&&e.repeatable===t.repeatable}function PF(e,t){for(const o of e.keys)if(!o.optional&&!t.keys.find(nf.bind(null,o)))return Pt(`Alias "${t.record.path}" and the original record: "${e.record.path}" must have the exact same param named "${o.name}"`);for(const o of t.keys)if(!o.optional&&!e.keys.find(nf.bind(null,o)))return Pt(`Alias "${t.record.path}" and the original record: "${e.record.path}" must have the exact same param named "${o.name}"`)}function FF(e,t){t&&t.record.name&&!e.name&&!e.path&&Pt(`The route named "${String(t.record.name)}" has a child without a name and an empty path. Using that name won't render the empty path child so you probably want to move the name to the child instead. If this is intentional, add a name to the child route to remove the warning.`)}function DF(e,t){for(let o=t;o;o=o.parent)if(o.record.name===e.name)throw new Error(`A route named "${String(e.name)}" has been added as a ${t===o?"child":"descendant"} of a route with the same name. Route names must be unique and a nested route cannot use the same name as an ancestor.`)}function TF(e,t){for(const o of t.keys)if(!e.keys.find(nf.bind(null,o)))return Pt(`Absolute path "${e.record.path}" must have the exact same param named "${o.name}" as its parent "${t.record.path}".`)}function kF(e,t){let o=0,n=t.length;for(;o!==n;){const s=o+n>>1;dw(e,t[s])<0?n=s:o=s+1}const i=AF(e);return i&&(n=t.lastIndexOf(i,n-1),n<0&&Pt(`Finding ancestor route "${i.record.path}" failed for "${e.record.path}"`)),n}function AF(e){let t=e;for(;t=t.parent;)if(hw(t)&&dw(e,t)===0)return t}function hw({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function IF(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const s=n[i].replace(nw," "),r=s.indexOf("="),a=Tr(r<0?s:s.slice(0,r)),l=r<0?null:Tr(s.slice(r+1));if(a in t){let c=t[a];Jo(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Km(e){let t="";for(let o in e){const n=e[o];if(o=KP(o),n==null){n!==void 0&&(t+=(t.length?"&":"")+o);continue}(Jo(n)?n.map(s=>s&&tf(s)):[n&&tf(n)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+o,s!=null&&(t+="="+s))})}return t}function MF(e){const t={};for(const o in e){const n=e[o];n!==void 0&&(t[o]=Jo(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const OF=Symbol("router view location matched"),qm=Symbol("router view depth"),ju=Symbol("router"),mp=Symbol("route location"),sf=Symbol("router view location");function fa(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function o(){e=[]}return{add:t,list:()=>e.slice(),reset:o}}function Ni(e,t,o,n,i,s=r=>r()){const r=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(kr(4,{from:o,to:t})):h instanceof Error?l(h):au(h)?l(kr(2,{from:t,to:h})):(r&&n.enterCallbacks[i]===r&&typeof h=="function"&&r.push(h),a())},u=s(()=>e.call(n&&n.instances[i],t,o,LF(c,t,o)));let d=Promise.resolve(u);if(e.length<3&&(d=d.then(c)),e.length>2){const h=`The "next" callback was never called inside of ${e.name?'"'+e.name+'"':""}:
${e.toString()}
. If you are returning a value instead of calling "next", make sure to remove the "next" parameter from your function.`;if(typeof u=="object"&&"then"in u)d=d.then(f=>c._called?f:(Pt(h),Promise.reject(new Error("Invalid navigation guard"))));else if(u!==void 0&&!c._called){Pt(h),l(new Error("Invalid navigation guard"));return}}d.catch(h=>l(h))})}function LF(e,t,o){let n=0;return function(){n++===1&&Pt(`The "next" callback was called more than once in one navigation guard when going from "${o.fullPath}" to "${t.fullPath}". It should be called exactly one time in each navigation guard. This will fail in production.`),e._called=!0,n===1&&e.apply(null,arguments)}}function eh(e,t,o,n,i=s=>s()){const s=[];for(const r of e){!r.components&&!r.children.length&&Pt(`Record with path "${r.path}" is either missing a "component(s)" or "children" property.`);for(const a in r.components){let l=r.components[a];{if(!l||typeof l!="object"&&typeof l!="function")throw Pt(`Component "${a}" in record with path "${r.path}" is not a valid component. Received "${String(l)}".`),new Error("Invalid route component");if("then"in l){Pt(`Component "${a}" in record with path "${r.path}" is a Promise instead of a function that returns a Promise. Did you write "import('./MyPage.vue')" instead of "() => import('./MyPage.vue')" ? This will break in production if not fixed.`);const c=l;l=()=>c}else l.__asyncLoader&&!l.__warnedDefineAsync&&(l.__warnedDefineAsync=!0,Pt(`Component "${a}" in record with path "${r.path}" is defined using "defineAsyncComponent()". Write "() => import('./MyPage.vue')" instead of "defineAsyncComponent(() => import('./MyPage.vue'))".`))}if(!(t!=="beforeRouteEnter"&&!r.instances[a]))if(tw(l)){const u=(l.__vccOpts||l)[t];u&&s.push(Ni(u,o,n,r,a,i))}else{let c=l();"catch"in c||(Pt(`Component "${a}" in record with path "${r.path}" is a function that does not return a Promise. If you were passing a functional component, make sure to add a "displayName" to the component. This will break in production if not fixed.`),c=Promise.resolve(c)),s.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${r.path}"`);const d=LP(u)?u.default:u;r.mods[a]=u,r.components[a]=d;const f=(d.__vccOpts||d)[t];return f&&Ni(f,o,n,r,a,i)()}))}}}return s}function Qm(e){const t=rn(ju),o=rn(mp);let n=!1,i=null;const s=Ze(()=>{const u=zi(e.to);return(!n||u!==i)&&(au(u)||(n?Pt(`Invalid value for prop "to" in useLink()
- to:`,u,`
- previous to:`,i,`
- props:`,e):Pt(`Invalid value for prop "to" in useLink()
- to:`,u,`
- props:`,e)),i=u,n=!0),t.resolve(u)}),r=Ze(()=>{const{matched:u}=s.value,{length:d}=u,h=u[d-1],f=o.matched;if(!h||!f.length)return-1;const v=f.findIndex(Ki.bind(null,h));if(v>-1)return v;const m=Ym(u[d-2]);return d>1&&Ym(h)===m&&f[f.length-1].path!==m?f.findIndex(Ki.bind(null,u[d-2])):v}),a=Ze(()=>r.value>-1&&VF(o.params,s.value.params)),l=Ze(()=>r.value>-1&&r.value===o.matched.length-1&&aw(o.params,s.value.params));function c(u={}){if(GF(u)){const d=t[zi(e.replace)?"replace":"push"](zi(e.to)).catch(Oa);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}if(ii){const u=Gn();if(u){const d={route:s.value,isActive:a.value,isExactActive:l.value,error:null};u.__vrl_devtools=u.__vrl_devtools||[],u.__vrl_devtools.push(d),_1(()=>{d.route=s.value,d.isActive=a.value,d.isExactActive=l.value,d.error=au(zi(e.to))?null:'Invalid "to" value'},{flush:"post"})}}return{route:s,href:Ze(()=>s.value.href),isActive:a,isExactActive:l,navigate:c}}function BF(e){return e.length===1?e[0]:e}const NF=El({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Qm,setup(e,{slots:t}){const o=xl(Qm(e)),{options:n}=rn(ju),i=Ze(()=>({[Jm(e.activeClass,n.linkActiveClass,"router-link-active")]:o.isActive,[Jm(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:o.isExactActive}));return()=>{const s=t.default&&BF(t.default(o));return e.custom?s:Qb("a",{"aria-current":o.isExactActive?e.ariaCurrentValue:null,href:o.href,onClick:o.navigate,class:i.value},s)}}}),HF=NF;function GF(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function VF(e,t){for(const o in t){const n=t[o],i=e[o];if(typeof n=="string"){if(n!==i)return!1}else if(!Jo(i)||i.length!==n.length||n.some((s,r)=>s!==i[r]))return!1}return!0}function Ym(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Jm=(e,t,o)=>e??t??o,zF=El({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:o}){UF();const n=rn(sf),i=Ze(()=>e.route||n.value),s=rn(qm,0),r=Ze(()=>{let c=zi(s);const{matched:u}=i.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=Ze(()=>i.value.matched[r.value]);Ec(qm,Ze(()=>r.value+1)),Ec(OF,a),Ec(sf,i);const l=De();return eo(()=>[l.value,a.value,e.name],([c,u,d],[h,f,v])=>{u&&(u.instances[d]=c,f&&f!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Ki(u,f)||!h)&&(u.enterCallbacks[d]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=e.name,d=a.value,h=d&&d.components[u];if(!h)return Zm(o.default,{Component:h,route:c});const f=d.props[u],v=f?f===!0?c.params:typeof f=="function"?f(c):f:null,b=Qb(h,Gt({},v,t,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(d.instances[u]=null)},ref:l}));if(ii&&b.ref){const S={depth:r.value,name:d.name,path:d.path,meta:d.meta};(Jo(b.ref)?b.ref.map(_=>_.i):[b.ref.i]).forEach(_=>{_.__vrv_devtools=S})}return Zm(o.default,{Component:b,route:c})||b}}});function Zm(e,t){if(!e)return null;const o=e(t);return o.length===1?o[0]:o}const WF=zF;function UF(){const e=Gn(),t=e.parent&&e.parent.type.name,o=e.parent&&e.parent.subTree&&e.parent.subTree.type;if(t&&(t==="KeepAlive"||t.includes("Transition"))&&typeof o=="object"&&o.name==="RouterView"){const n=t==="KeepAlive"?"keep-alive":"transition";Pt(`<router-view> can no longer be used directly inside <transition> or <keep-alive>.
Use slot props instead:

<router-view v-slot="{ Component }">
  <${n}>
    <component :is="Component" />
  </${n}>
</router-view>`)}}function pa(e,t){const o=Gt({},e,{matched:e.matched.map(n=>tD(n,["instances","children","aliasOf"]))});return{_custom:{type:null,readOnly:!0,display:e.fullPath,tooltip:t,value:o}}}function lc(e){return{_custom:{display:e}}}let $F=0;function jF(e,t,o){if(t.__hasDevtools)return;t.__hasDevtools=!0;const n=$F++;OP({id:"org.vuejs.router"+(n?"."+n:""),label:"Vue Router",packageName:"vue-router",homepage:"https://router.vuejs.org",logo:"https://router.vuejs.org/logo.png",componentStateTypes:["Routing"],app:e},i=>{typeof i.now!="function"&&console.warn("[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),i.on.inspectComponent((u,d)=>{u.instanceData&&u.instanceData.state.push({type:"Routing",key:"$route",editable:!1,value:pa(t.currentRoute.value,"Current Route")})}),i.on.visitComponentTree(({treeNode:u,componentInstance:d})=>{if(d.__vrv_devtools){const h=d.__vrv_devtools;u.tags.push({label:(h.name?`${h.name.toString()}: `:"")+h.path,textColor:0,tooltip:"This component is rendered by &lt;router-view&gt;",backgroundColor:fw})}Jo(d.__vrl_devtools)&&(d.__devtoolsApi=i,d.__vrl_devtools.forEach(h=>{let f=h.route.path,v=mw,m="",b=0;h.error?(f=h.error,v=JF,b=ZF):h.isExactActive?(v=gw,m="This is exactly active"):h.isActive&&(v=pw,m="This link is active"),u.tags.push({label:f,textColor:b,tooltip:m,backgroundColor:v})}))}),eo(t.currentRoute,()=>{l(),i.notifyComponentUpdate(),i.sendInspectorTree(a),i.sendInspectorState(a)});const s="router:navigations:"+n;i.addTimelineLayer({id:s,label:`Router${n?" "+n:""} Navigations`,color:4237508}),t.onError((u,d)=>{i.addTimelineEvent({layerId:s,event:{title:"Error during Navigation",subtitle:d.fullPath,logType:"error",time:i.now(),data:{error:u},groupId:d.meta.__navigationId}})});let r=0;t.beforeEach((u,d)=>{const h={guard:lc("beforeEach"),from:pa(d,"Current Location during this navigation"),to:pa(u,"Target location")};Object.defineProperty(u.meta,"__navigationId",{value:r++}),i.addTimelineEvent({layerId:s,event:{time:i.now(),title:"Start of navigation",subtitle:u.fullPath,data:h,groupId:u.meta.__navigationId}})}),t.afterEach((u,d,h)=>{const f={guard:lc("afterEach")};h?(f.failure={_custom:{type:Error,readOnly:!0,display:h?h.message:"",tooltip:"Navigation Failure",value:h}},f.status=lc("❌")):f.status=lc("✅"),f.from=pa(d,"Current Location during this navigation"),f.to=pa(u,"Target location"),i.addTimelineEvent({layerId:s,event:{title:"End of navigation",subtitle:u.fullPath,time:i.now(),data:f,logType:h?"warning":"default",groupId:u.meta.__navigationId}})});const a="router-inspector:"+n;i.addInspector({id:a,label:"Routes"+(n?" "+n:""),icon:"book",treeFilterPlaceholder:"Search routes"});function l(){if(!c)return;const u=c;let d=o.getRoutes().filter(h=>!h.parent||!h.parent.record.components);d.forEach(Cw),u.filter&&(d=d.filter(h=>rf(h,u.filter.toLowerCase()))),d.forEach(h=>yw(h,t.currentRoute.value)),u.rootNodes=d.map(vw)}let c;i.on.getInspectorTree(u=>{c=u,u.app===e&&u.inspectorId===a&&l()}),i.on.getInspectorState(u=>{if(u.app===e&&u.inspectorId===a){const h=o.getRoutes().find(f=>f.record.__vd_id===u.nodeId);h&&(u.state={options:qF(h)})}}),i.sendInspectorTree(a),i.sendInspectorState(a)})}function KF(e){return e.optional?e.repeatable?"*":"?":e.repeatable?"+":""}function qF(e){const{record:t}=e,o=[{editable:!1,key:"path",value:t.path}];return t.name!=null&&o.push({editable:!1,key:"name",value:t.name}),o.push({editable:!1,key:"regexp",value:e.re}),e.keys.length&&o.push({editable:!1,key:"keys",value:{_custom:{type:null,readOnly:!0,display:e.keys.map(n=>`${n.name}${KF(n)}`).join(" "),tooltip:"Param keys",value:e.keys}}}),t.redirect!=null&&o.push({editable:!1,key:"redirect",value:t.redirect}),e.alias.length&&o.push({editable:!1,key:"aliases",value:e.alias.map(n=>n.record.path)}),Object.keys(e.record.meta).length&&o.push({editable:!1,key:"meta",value:e.record.meta}),o.push({key:"score",editable:!1,value:{_custom:{type:null,readOnly:!0,display:e.score.map(n=>n.join(", ")).join(" | "),tooltip:"Score used to sort routes",value:e.score}}}),o}const fw=15485081,pw=2450411,gw=8702998,QF=2282478,mw=16486972,YF=6710886,JF=16704226,ZF=12131356;function vw(e){const t=[],{record:o}=e;o.name!=null&&t.push({label:String(o.name),textColor:0,backgroundColor:QF}),o.aliasOf&&t.push({label:"alias",textColor:0,backgroundColor:mw}),e.__vd_match&&t.push({label:"matches",textColor:0,backgroundColor:fw}),e.__vd_exactActive&&t.push({label:"exact",textColor:0,backgroundColor:gw}),e.__vd_active&&t.push({label:"active",textColor:0,backgroundColor:pw}),o.redirect&&t.push({label:typeof o.redirect=="string"?`redirect: ${o.redirect}`:"redirects",textColor:16777215,backgroundColor:YF});let n=o.__vd_id;return n==null&&(n=String(XF++),o.__vd_id=n),{id:n,label:o.path,tags:t,children:e.children.map(vw)}}let XF=0;const eD=/^\/(.*)\/([a-z]*)$/;function yw(e,t){const o=t.matched.length&&Ki(t.matched[t.matched.length-1],e.record);e.__vd_exactActive=e.__vd_active=o,o||(e.__vd_active=t.matched.some(n=>Ki(n,e.record))),e.children.forEach(n=>yw(n,t))}function Cw(e){e.__vd_match=!1,e.children.forEach(Cw)}function rf(e,t){const o=String(e.re).match(eD);if(e.__vd_match=!1,!o||o.length<3)return!1;if(new RegExp(o[1].replace(/\$$/,""),o[2]).test(t))return e.children.forEach(r=>rf(r,t)),e.record.path!=="/"||t==="/"?(e.__vd_match=e.re.test(t),!0):!1;const i=e.record.path.toLowerCase(),s=Tr(i);return!t.startsWith("/")&&(s.includes(t)||i.includes(t))||s.startsWith(t)||i.startsWith(t)||e.record.name&&String(e.record.name).includes(t)?!0:e.children.some(r=>rf(r,t))}function tD(e,t){const o={};for(const n in e)t.includes(n)||(o[n]=e[n]);return o}function oD(e){const t=RF(e.routes,e),o=e.parseQuery||IF,n=e.stringifyQuery||Km,i=e.history;if(!i)throw new Error('Provide the "history" option when calling "createRouter()": https://router.vuejs.org/api/interfaces/RouterOptions.html#history');const s=fa(),r=fa(),a=fa(),l=nb(Ii);let c=Ii;ii&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Zd.bind(null,ne=>""+ne),d=Zd.bind(null,QP),h=Zd.bind(null,Tr);function f(ne,pe){let ae,xe;return cw(ne)?(ae=t.getRecordMatcher(ne),ae||Pt(`Parent route "${String(ne)}" not found when adding child route`,pe),xe=pe):xe=ne,t.addRoute(xe,ae)}function v(ne){const pe=t.getRecordMatcher(ne);pe?t.removeRoute(pe):Pt(`Cannot remove non-existent route "${String(ne)}"`)}function m(){return t.getRoutes().map(ne=>ne.record)}function b(ne){return!!t.getRecordMatcher(ne)}function S(ne,pe){if(pe=Gt({},pe||l.value),typeof ne=="string"){const w=Xd(o,ne,pe.path),Q=t.resolve({path:w.path},pe),re=i.createHref(w.fullPath);return re.startsWith("//")?Pt(`Location "${ne}" resolved to "${re}". A resolved location cannot start with multiple slashes.`):Q.matched.length||Pt(`No match found for location with path "${ne}"`),Gt(w,Q,{params:h(Q.params),hash:Tr(w.hash),redirectedFrom:void 0,href:re})}if(!au(ne))return Pt(`router.resolve() was passed an invalid location. This will fail in production.
- Location:`,ne),S({});let ae;if(ne.path!=null)"params"in ne&&!("name"in ne)&&Object.keys(ne.params).length&&Pt(`Path "${ne.path}" was passed with params but they will be ignored. Use a named route alongside params instead.`),ae=Gt({},ne,{path:Xd(o,ne.path,pe.path).path});else{const w=Gt({},ne.params);for(const Q in w)w[Q]==null&&delete w[Q];ae=Gt({},ne,{params:d(w)}),pe.params=d(pe.params)}const xe=t.resolve(ae,pe),Le=ne.hash||"";Le&&!Le.startsWith("#")&&Pt(`A \`hash\` should always start with the character "#". Replace "${Le}" with "#${Le}".`),xe.params=u(h(xe.params));const nt=ZP(n,Gt({},ne,{hash:jP(Le),path:xe.path})),H=i.createHref(nt);return H.startsWith("//")?Pt(`Location "${ne}" resolved to "${H}". A resolved location cannot start with multiple slashes.`):xe.matched.length||Pt(`No match found for location with path "${ne.path!=null?ne.path:ne}"`),Gt({fullPath:nt,hash:Le,query:n===Km?MF(ne.query):ne.query||{}},xe,{redirectedFrom:void 0,href:H})}function R(ne){return typeof ne=="string"?Xd(o,ne,l.value.path):Gt({},ne)}function _(ne,pe){if(c!==ne)return kr(8,{from:pe,to:ne})}function M(ne){return z(ne)}function I(ne){return M(Gt(R(ne),{replace:!0}))}function W(ne){const pe=ne.matched[ne.matched.length-1];if(pe&&pe.redirect){const{redirect:ae}=pe;let xe=typeof ae=="function"?ae(ne):ae;if(typeof xe=="string"&&(xe=xe.includes("?")||xe.includes("#")?xe=R(xe):{path:xe},xe.params={}),xe.path==null&&!("name"in xe))throw Pt(`Invalid redirect found:
${JSON.stringify(xe,null,2)}
 when navigating to "${ne.fullPath}". A redirect must contain a name or path. This will break in production.`),new Error("Invalid redirect");return Gt({query:ne.query,hash:ne.hash,params:xe.path!=null?{}:ne.params},xe)}}function z(ne,pe){const ae=c=S(ne),xe=l.value,Le=ne.state,nt=ne.force,H=ne.replace===!0,w=W(ae);if(w)return z(Gt(R(w),{state:typeof w=="object"?Gt({},Le,w.state):Le,force:nt,replace:H}),pe||ae);const Q=ae;Q.redirectedFrom=pe;let re;return!nt&&Lm(n,xe,ae)&&(re=kr(16,{to:Q,from:xe}),q(xe,xe,!0,!1)),(re?Promise.resolve(re):O(Q,xe)).catch(A=>ei(A)?ei(A,2)?A:le(A):ce(A,Q,xe)).then(A=>{if(A){if(ei(A,2))return Lm(n,S(A.to),Q)&&pe&&(pe._count=pe._count?pe._count+1:1)>30?(Pt(`Detected a possibly infinite redirection in a navigation guard when going from "${xe.fullPath}" to "${Q.fullPath}". Aborting to avoid a Stack Overflow.
 Are you always returning a new location within a navigation guard? That would lead to this error. Only return when redirecting or aborting, that should fix this. This might break in production if not fixed.`),Promise.reject(new Error("Infinite redirect in navigation guard"))):z(Gt({replace:H},R(A.to),{state:typeof A.to=="object"?Gt({},Le,A.to.state):Le,force:nt}),pe||Q)}else A=N(Q,xe,!0,H,Le);return ie(Q,xe,A),A})}function de(ne,pe){const ae=_(ne,pe);return ae?Promise.reject(ae):Promise.resolve()}function K(ne){const pe=ue.values().next().value;return pe&&typeof pe.runWithContext=="function"?pe.runWithContext(ne):ne()}function O(ne,pe){let ae;const[xe,Le,nt]=nD(ne,pe);ae=eh(xe.reverse(),"beforeRouteLeave",ne,pe);for(const w of xe)w.leaveGuards.forEach(Q=>{ae.push(Ni(Q,ne,pe))});const H=de.bind(null,ne,pe);return ae.push(H),Ee(ae).then(()=>{ae=[];for(const w of s.list())ae.push(Ni(w,ne,pe));return ae.push(H),Ee(ae)}).then(()=>{ae=eh(Le,"beforeRouteUpdate",ne,pe);for(const w of Le)w.updateGuards.forEach(Q=>{ae.push(Ni(Q,ne,pe))});return ae.push(H),Ee(ae)}).then(()=>{ae=[];for(const w of nt)if(w.beforeEnter)if(Jo(w.beforeEnter))for(const Q of w.beforeEnter)ae.push(Ni(Q,ne,pe));else ae.push(Ni(w.beforeEnter,ne,pe));return ae.push(H),Ee(ae)}).then(()=>(ne.matched.forEach(w=>w.enterCallbacks={}),ae=eh(nt,"beforeRouteEnter",ne,pe,K),ae.push(H),Ee(ae))).then(()=>{ae=[];for(const w of r.list())ae.push(Ni(w,ne,pe));return ae.push(H),Ee(ae)}).catch(w=>ei(w,8)?w:Promise.reject(w))}function ie(ne,pe,ae){a.list().forEach(xe=>K(()=>xe(ne,pe,ae)))}function N(ne,pe,ae,xe,Le){const nt=_(ne,pe);if(nt)return nt;const H=pe===Ii,w=ii?history.state:{};ae&&(xe||H?i.replace(ne.fullPath,Gt({scroll:H&&w&&w.scroll},Le)):i.push(ne.fullPath,Le)),l.value=ne,q(ne,pe,ae,H),le()}let oe;function F(){oe||(oe=i.listen((ne,pe,ae)=>{if(!j.listening)return;const xe=S(ne),Le=W(xe);if(Le){z(Gt(Le,{replace:!0,force:!0}),xe).catch(Oa);return}c=xe;const nt=l.value;ii&&rF(Nm(nt.fullPath,ae.delta),$u()),O(xe,nt).catch(H=>ei(H,12)?H:ei(H,2)?(z(Gt(R(H.to),{force:!0}),xe).then(w=>{ei(w,20)&&!ae.delta&&ae.type===ol.pop&&i.go(-1,!1)}).catch(Oa),Promise.reject()):(ae.delta&&i.go(-ae.delta,!1),ce(H,xe,nt))).then(H=>{H=H||N(xe,nt,!1),H&&(ae.delta&&!ei(H,8)?i.go(-ae.delta,!1):ae.type===ol.pop&&ei(H,20)&&i.go(-1,!1)),ie(xe,nt,H)}).catch(Oa)}))}let Y=fa(),J=fa(),L;function ce(ne,pe,ae){le(ne);const xe=J.list();return xe.length?xe.forEach(Le=>Le(ne,pe,ae)):(Pt("uncaught error during route navigation:"),console.error(ne)),Promise.reject(ne)}function U(){return L&&l.value!==Ii?Promise.resolve():new Promise((ne,pe)=>{Y.add([ne,pe])})}function le(ne){return L||(L=!ne,F(),Y.list().forEach(([pe,ae])=>ne?ae(ne):pe()),Y.reset()),ne}function q(ne,pe,ae,xe){const{scrollBehavior:Le}=e;if(!ii||!Le)return Promise.resolve();const nt=!ae&&aF(Nm(ne.fullPath,0))||(xe||!ae)&&history.state&&history.state.scroll||null;return Pr().then(()=>Le(ne,pe,nt)).then(H=>H&&sF(H)).catch(H=>ce(H,ne,pe))}const se=ne=>i.go(ne);let be;const ue=new Set,j={currentRoute:l,listening:!0,addRoute:f,removeRoute:v,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:m,resolve:S,options:e,push:M,replace:I,go:se,back:()=>se(-1),forward:()=>se(1),beforeEach:s.add,beforeResolve:r.add,afterEach:a.add,onError:J.add,isReady:U,install(ne){const pe=this;ne.component("RouterLink",HF),ne.component("RouterView",WF),ne.config.globalProperties.$router=pe,Object.defineProperty(ne.config.globalProperties,"$route",{enumerable:!0,get:()=>zi(l)}),ii&&!be&&l.value===Ii&&(be=!0,M(i.location).catch(Le=>{Pt("Unexpected error when starting the router:",Le)}));const ae={};for(const Le in Ii)Object.defineProperty(ae,Le,{get:()=>l.value[Le],enumerable:!0});ne.provide(ju,pe),ne.provide(mp,ob(ae)),ne.provide(sf,l);const xe=ne.unmount;ue.add(ne),ne.unmount=function(){ue.delete(ne),ue.size<1&&(c=Ii,oe&&oe(),oe=null,l.value=Ii,be=!1,L=!1),xe()},ii&&jF(ne,pe,t)}};function Ee(ne){return ne.reduce((pe,ae)=>pe.then(()=>K(ae)),Promise.resolve())}return j}function nD(e,t){const o=[],n=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let r=0;r<s;r++){const a=t.matched[r];a&&(e.matched.find(c=>Ki(c,a))?n.push(a):o.push(a));const l=e.matched[r];l&&(t.matched.find(c=>Ki(c,l))||i.push(l))}return[o,n,i]}function Ms(){return rn(ju)}function Ar(e){return rn(mp)}var iD=Object.create,bw=Object.defineProperty,sD=Object.getOwnPropertyDescriptor,vp=Object.getOwnPropertyNames,rD=Object.getPrototypeOf,aD=Object.prototype.hasOwnProperty,lD=(e,t)=>function(){return e&&(t=(0,e[vp(e)[0]])(e=0)),t},cD=(e,t)=>function(){return t||(0,e[vp(e)[0]])((t={exports:{}}).exports,t),t.exports},uD=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of vp(t))!aD.call(e,i)&&i!==o&&bw(e,i,{get:()=>t[i],enumerable:!(n=sD(t,i))||n.enumerable});return e},dD=(e,t,o)=>(o=e!=null?iD(rD(e)):{},uD(bw(o,"default",{value:e,enumerable:!0}),e)),Dl=lD({"../../node_modules/.pnpm/tsup@8.4.0_@microsoft+api-extractor@7.51.1_@types+node@22.13.14__jiti@2.4.2_postcss@8.5_96eb05a9d65343021e53791dd83f3773/node_modules/tsup/assets/esm_shims.js"(){}}),hD=cD({"../../node_modules/.pnpm/rfdc@1.4.1/node_modules/rfdc/index.js"(e,t){Dl(),t.exports=n;function o(s){return s instanceof Buffer?Buffer.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}function n(s){if(s=s||{},s.circles)return i(s);const r=new Map;if(r.set(Date,d=>new Date(d)),r.set(Map,(d,h)=>new Map(l(Array.from(d),h))),r.set(Set,(d,h)=>new Set(l(Array.from(d),h))),s.constructorHandlers)for(const d of s.constructorHandlers)r.set(d[0],d[1]);let a=null;return s.proto?u:c;function l(d,h){const f=Object.keys(d),v=new Array(f.length);for(let m=0;m<f.length;m++){const b=f[m],S=d[b];typeof S!="object"||S===null?v[b]=S:S.constructor!==Object&&(a=r.get(S.constructor))?v[b]=a(S,h):ArrayBuffer.isView(S)?v[b]=o(S):v[b]=h(S)}return v}function c(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return l(d,c);if(d.constructor!==Object&&(a=r.get(d.constructor)))return a(d,c);const h={};for(const f in d){if(Object.hasOwnProperty.call(d,f)===!1)continue;const v=d[f];typeof v!="object"||v===null?h[f]=v:v.constructor!==Object&&(a=r.get(v.constructor))?h[f]=a(v,c):ArrayBuffer.isView(v)?h[f]=o(v):h[f]=c(v)}return h}function u(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return l(d,u);if(d.constructor!==Object&&(a=r.get(d.constructor)))return a(d,u);const h={};for(const f in d){const v=d[f];typeof v!="object"||v===null?h[f]=v:v.constructor!==Object&&(a=r.get(v.constructor))?h[f]=a(v,u):ArrayBuffer.isView(v)?h[f]=o(v):h[f]=u(v)}return h}}function i(s){const r=[],a=[],l=new Map;if(l.set(Date,f=>new Date(f)),l.set(Map,(f,v)=>new Map(u(Array.from(f),v))),l.set(Set,(f,v)=>new Set(u(Array.from(f),v))),s.constructorHandlers)for(const f of s.constructorHandlers)l.set(f[0],f[1]);let c=null;return s.proto?h:d;function u(f,v){const m=Object.keys(f),b=new Array(m.length);for(let S=0;S<m.length;S++){const R=m[S],_=f[R];if(typeof _!="object"||_===null)b[R]=_;else if(_.constructor!==Object&&(c=l.get(_.constructor)))b[R]=c(_,v);else if(ArrayBuffer.isView(_))b[R]=o(_);else{const M=r.indexOf(_);M!==-1?b[R]=a[M]:b[R]=v(_)}}return b}function d(f){if(typeof f!="object"||f===null)return f;if(Array.isArray(f))return u(f,d);if(f.constructor!==Object&&(c=l.get(f.constructor)))return c(f,d);const v={};r.push(f),a.push(v);for(const m in f){if(Object.hasOwnProperty.call(f,m)===!1)continue;const b=f[m];if(typeof b!="object"||b===null)v[m]=b;else if(b.constructor!==Object&&(c=l.get(b.constructor)))v[m]=c(b,d);else if(ArrayBuffer.isView(b))v[m]=o(b);else{const S=r.indexOf(b);S!==-1?v[m]=a[S]:v[m]=d(b)}}return r.pop(),a.pop(),v}function h(f){if(typeof f!="object"||f===null)return f;if(Array.isArray(f))return u(f,h);if(f.constructor!==Object&&(c=l.get(f.constructor)))return c(f,h);const v={};r.push(f),a.push(v);for(const m in f){const b=f[m];if(typeof b!="object"||b===null)v[m]=b;else if(b.constructor!==Object&&(c=l.get(b.constructor)))v[m]=c(b,h);else if(ArrayBuffer.isView(b))v[m]=o(b);else{const S=r.indexOf(b);S!==-1?v[m]=a[S]:v[m]=h(b)}}return r.pop(),a.pop(),v}}}});Dl();Dl();Dl();var ww=typeof navigator<"u",rt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof global<"u"?global:{};typeof rt.chrome<"u"&&rt.chrome.devtools;ww&&(rt.self,rt.top);var Xm;typeof navigator<"u"&&((Xm=navigator.userAgent)==null||Xm.toLowerCase().includes("electron"));Dl();var fD=dD(hD()),pD=/(?:^|[-_/])(\w)/g;function gD(e,t){return t?t.toUpperCase():""}function mD(e){return e&&`${e}`.replace(pD,gD)}function vD(e,t){let o=e.replace(/^[a-z]:/i,"").replace(/\\/g,"/");o.endsWith(`index${t}`)&&(o=o.replace(`/index${t}`,t));const n=o.lastIndexOf("/"),i=o.substring(n+1);{const s=i.lastIndexOf(t);return i.substring(0,s)}}var ev=(0,fD.default)({circles:!0});const yD={trailing:!0};function Ir(e,t=25,o={}){if(o={...yD,...o},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let n,i,s=[],r,a;const l=(c,u)=>(r=CD(e,c,u),r.finally(()=>{if(r=null,o.trailing&&a&&!i){const d=l(c,a);return a=null,d}}),r);return function(...c){return r?(o.trailing&&(a=c),r):new Promise(u=>{const d=!i&&o.leading;clearTimeout(i),i=setTimeout(()=>{i=null;const h=o.leading?n:l(this,c);for(const f of s)f(h);s=[]},t),d?(n=l(this,c),u(n)):s.push(u)})}}async function CD(e,t,o){return await e.apply(t,o)}function af(e,t={},o){for(const n in e){const i=e[n],s=o?`${o}:${n}`:n;typeof i=="object"&&i!==null?af(i,t,s):typeof i=="function"&&(t[s]=i)}return t}const bD={run:e=>e()},wD=()=>bD,Sw=typeof console.createTask<"u"?console.createTask:wD;function SD(e,t){const o=t.shift(),n=Sw(o);return e.reduce((i,s)=>i.then(()=>n.run(()=>s(...t))),Promise.resolve())}function xD(e,t){const o=t.shift(),n=Sw(o);return Promise.all(e.map(i=>n.run(()=>i(...t))))}function th(e,t){for(const o of[...e])o(t)}class RD{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,o,n={}){if(!t||typeof o!="function")return()=>{};const i=t;let s;for(;this._deprecatedHooks[t];)s=this._deprecatedHooks[t],t=s.to;if(s&&!n.allowDeprecated){let r=s.message;r||(r=`${i} hook has been deprecated`+(s.to?`, please use ${s.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(r)||(console.warn(r),this._deprecatedMessages.add(r))}if(!o.name)try{Object.defineProperty(o,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(o),()=>{o&&(this.removeHook(t,o),o=void 0)}}hookOnce(t,o){let n,i=(...s)=>(typeof n=="function"&&n(),n=void 0,i=void 0,o(...s));return n=this.hook(t,i),n}removeHook(t,o){if(this._hooks[t]){const n=this._hooks[t].indexOf(o);n!==-1&&this._hooks[t].splice(n,1),this._hooks[t].length===0&&delete this._hooks[t]}}deprecateHook(t,o){this._deprecatedHooks[t]=typeof o=="string"?{to:o}:o;const n=this._hooks[t]||[];delete this._hooks[t];for(const i of n)this.hook(t,i)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const o in t)this.deprecateHook(o,t[o])}addHooks(t){const o=af(t),n=Object.keys(o).map(i=>this.hook(i,o[i]));return()=>{for(const i of n.splice(0,n.length))i()}}removeHooks(t){const o=af(t);for(const n in o)this.removeHook(n,o[n])}removeAllHooks(){for(const t in this._hooks)delete this._hooks[t]}callHook(t,...o){return o.unshift(t),this.callHookWith(SD,t,...o)}callHookParallel(t,...o){return o.unshift(t),this.callHookWith(xD,t,...o)}callHookWith(t,o,...n){const i=this._before||this._after?{name:o,args:n,context:{}}:void 0;this._before&&th(this._before,i);const s=t(o in this._hooks?[...this._hooks[o]]:[],n);return s instanceof Promise?s.finally(()=>{this._after&&i&&th(this._after,i)}):(this._after&&i&&th(this._after,i),s)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const o=this._before.indexOf(t);o!==-1&&this._before.splice(o,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const o=this._after.indexOf(t);o!==-1&&this._after.splice(o,1)}}}}function xw(){return new RD}var _D=Object.create,Rw=Object.defineProperty,ED=Object.getOwnPropertyDescriptor,yp=Object.getOwnPropertyNames,PD=Object.getPrototypeOf,FD=Object.prototype.hasOwnProperty,DD=(e,t)=>function(){return e&&(t=(0,e[yp(e)[0]])(e=0)),t},_w=(e,t)=>function(){return t||(0,e[yp(e)[0]])((t={exports:{}}).exports,t),t.exports},TD=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of yp(t))!FD.call(e,i)&&i!==o&&Rw(e,i,{get:()=>t[i],enumerable:!(n=ED(t,i))||n.enumerable});return e},kD=(e,t,o)=>(o=e!=null?_D(PD(e)):{},TD(Rw(o,"default",{value:e,enumerable:!0}),e)),We=DD({"../../node_modules/.pnpm/tsup@8.4.0_@microsoft+api-extractor@7.51.1_@types+node@22.13.14__jiti@2.4.2_postcss@8.5_96eb05a9d65343021e53791dd83f3773/node_modules/tsup/assets/esm_shims.js"(){}}),AD=_w({"../../node_modules/.pnpm/speakingurl@14.0.1/node_modules/speakingurl/lib/speakingurl.js"(e,t){We(),function(o){var n={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"Ae",Å:"A",Æ:"AE",Ç:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"Oe",Ő:"O",Ø:"O",Ù:"U",Ú:"U",Û:"U",Ü:"Ue",Ű:"U",Ý:"Y",Þ:"TH",ß:"ss",à:"a",á:"a",â:"a",ã:"a",ä:"ae",å:"a",æ:"ae",ç:"c",è:"e",é:"e",ê:"e",ë:"e",ì:"i",í:"i",î:"i",ï:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"oe",ő:"o",ø:"o",ù:"u",ú:"u",û:"u",ü:"ue",ű:"u",ý:"y",þ:"th",ÿ:"y","ẞ":"SS",ا:"a",أ:"a",إ:"i",آ:"aa",ؤ:"u",ئ:"e",ء:"a",ب:"b",ت:"t",ث:"th",ج:"j",ح:"h",خ:"kh",د:"d",ذ:"th",ر:"r",ز:"z",س:"s",ش:"sh",ص:"s",ض:"dh",ط:"t",ظ:"z",ع:"a",غ:"gh",ف:"f",ق:"q",ك:"k",ل:"l",م:"m",ن:"n",ه:"h",و:"w",ي:"y",ى:"a",ة:"h",ﻻ:"la",ﻷ:"laa",ﻹ:"lai",ﻵ:"laa",گ:"g",چ:"ch",پ:"p",ژ:"zh",ک:"k",ی:"y","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9",က:"k",ခ:"kh",ဂ:"g",ဃ:"ga",င:"ng",စ:"s",ဆ:"sa",ဇ:"z","စျ":"za",ည:"ny",ဋ:"t",ဌ:"ta",ဍ:"d",ဎ:"da",ဏ:"na",တ:"t",ထ:"ta",ဒ:"d",ဓ:"da",န:"n",ပ:"p",ဖ:"pa",ဗ:"b",ဘ:"ba",မ:"m",ယ:"y",ရ:"ya",လ:"l",ဝ:"w",သ:"th",ဟ:"h",ဠ:"la",အ:"a","ြ":"y","ျ":"ya","ွ":"w","ြွ":"yw","ျွ":"ywa","ှ":"h",ဧ:"e","၏":"-e",ဣ:"i",ဤ:"-i",ဉ:"u",ဦ:"-u",ဩ:"aw","သြော":"aw",ဪ:"aw","၀":"0","၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","္":"","့":"","း":"",č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z",ހ:"h",ށ:"sh",ނ:"n",ރ:"r",ބ:"b",ޅ:"lh",ކ:"k",އ:"a",ވ:"v",މ:"m",ފ:"f",ދ:"dh",ތ:"th",ލ:"l",ގ:"g",ޏ:"gn",ސ:"s",ޑ:"d",ޒ:"z",ޓ:"t",ޔ:"y",ޕ:"p",ޖ:"j",ޗ:"ch",ޘ:"tt",ޙ:"hh",ޚ:"kh",ޛ:"th",ޜ:"z",ޝ:"sh",ޞ:"s",ޟ:"d",ޠ:"t",ޡ:"z",ޢ:"a",ޣ:"gh",ޤ:"q",ޥ:"w","ަ":"a","ާ":"aa","ި":"i","ީ":"ee","ު":"u","ޫ":"oo","ެ":"e","ޭ":"ey","ޮ":"o","ޯ":"oa","ް":"",ა:"a",ბ:"b",გ:"g",დ:"d",ე:"e",ვ:"v",ზ:"z",თ:"t",ი:"i",კ:"k",ლ:"l",მ:"m",ნ:"n",ო:"o",პ:"p",ჟ:"zh",რ:"r",ს:"s",ტ:"t",უ:"u",ფ:"p",ქ:"k",ღ:"gh",ყ:"q",შ:"sh",ჩ:"ch",ც:"ts",ძ:"dz",წ:"ts",ჭ:"ch",ხ:"kh",ჯ:"j",ჰ:"h",α:"a",β:"v",γ:"g",δ:"d",ε:"e",ζ:"z",η:"i",θ:"th",ι:"i",κ:"k",λ:"l",μ:"m",ν:"n",ξ:"ks",ο:"o",π:"p",ρ:"r",σ:"s",τ:"t",υ:"y",φ:"f",χ:"x",ψ:"ps",ω:"o",ά:"a",έ:"e",ί:"i",ό:"o",ύ:"y",ή:"i",ώ:"o",ς:"s",ϊ:"i",ΰ:"y",ϋ:"y",ΐ:"i",Α:"A",Β:"B",Γ:"G",Δ:"D",Ε:"E",Ζ:"Z",Η:"I",Θ:"TH",Ι:"I",Κ:"K",Λ:"L",Μ:"M",Ν:"N",Ξ:"KS",Ο:"O",Π:"P",Ρ:"R",Σ:"S",Τ:"T",Υ:"Y",Φ:"F",Χ:"X",Ψ:"PS",Ω:"O",Ά:"A",Έ:"E",Ί:"I",Ό:"O",Ύ:"Y",Ή:"I",Ώ:"O",Ϊ:"I",Ϋ:"Y",ā:"a",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",ū:"u",Ā:"A",Ē:"E",Ģ:"G",Ī:"I",Ķ:"k",Ļ:"L",Ņ:"N",Ū:"U",Ќ:"Kj",ќ:"kj",Љ:"Lj",љ:"lj",Њ:"Nj",њ:"nj",Тс:"Ts",тс:"ts",ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"E",Ł:"L",Ń:"N",Ś:"S",Ź:"Z",Ż:"Z",Є:"Ye",І:"I",Ї:"Yi",Ґ:"G",є:"ye",і:"i",ї:"yi",ґ:"g",ă:"a",Ă:"A",ș:"s",Ș:"S",ț:"t",Ț:"T",ţ:"t",Ţ:"T",а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"c",ч:"ch",ш:"sh",щ:"sh",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"I",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"Kh",Ц:"C",Ч:"Ch",Ш:"Sh",Щ:"Sh",Ъ:"",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya",ђ:"dj",ј:"j",ћ:"c",џ:"dz",Ђ:"Dj",Ј:"j",Ћ:"C",Џ:"Dz",ľ:"l",ĺ:"l",ŕ:"r",Ľ:"L",Ĺ:"L",Ŕ:"R",ş:"s",Ş:"S",ı:"i",İ:"I",ğ:"g",Ğ:"G",ả:"a",Ả:"A",ẳ:"a",Ẳ:"A",ẩ:"a",Ẩ:"A",đ:"d",Đ:"D",ẹ:"e",Ẹ:"E",ẽ:"e",Ẽ:"E",ẻ:"e",Ẻ:"E",ế:"e",Ế:"E",ề:"e",Ề:"E",ệ:"e",Ệ:"E",ễ:"e",Ễ:"E",ể:"e",Ể:"E",ỏ:"o",ọ:"o",Ọ:"o",ố:"o",Ố:"O",ồ:"o",Ồ:"O",ổ:"o",Ổ:"O",ộ:"o",Ộ:"O",ỗ:"o",Ỗ:"O",ơ:"o",Ơ:"O",ớ:"o",Ớ:"O",ờ:"o",Ờ:"O",ợ:"o",Ợ:"O",ỡ:"o",Ỡ:"O",Ở:"o",ở:"o",ị:"i",Ị:"I",ĩ:"i",Ĩ:"I",ỉ:"i",Ỉ:"i",ủ:"u",Ủ:"U",ụ:"u",Ụ:"U",ũ:"u",Ũ:"U",ư:"u",Ư:"U",ứ:"u",Ứ:"U",ừ:"u",Ừ:"U",ự:"u",Ự:"U",ữ:"u",Ữ:"U",ử:"u",Ử:"ư",ỷ:"y",Ỷ:"y",ỳ:"y",Ỳ:"Y",ỵ:"y",Ỵ:"Y",ỹ:"y",Ỹ:"Y",ạ:"a",Ạ:"A",ấ:"a",Ấ:"A",ầ:"a",Ầ:"A",ậ:"a",Ậ:"A",ẫ:"a",Ẫ:"A",ắ:"a",Ắ:"A",ằ:"a",Ằ:"A",ặ:"a",Ặ:"A",ẵ:"a",Ẵ:"A","⓪":"0","①":"1","②":"2","③":"3","④":"4","⑤":"5","⑥":"6","⑦":"7","⑧":"8","⑨":"9","⑩":"10","⑪":"11","⑫":"12","⑬":"13","⑭":"14","⑮":"15","⑯":"16","⑰":"17","⑱":"18","⑲":"18","⑳":"18","⓵":"1","⓶":"2","⓷":"3","⓸":"4","⓹":"5","⓺":"6","⓻":"7","⓼":"8","⓽":"9","⓾":"10","⓿":"0","⓫":"11","⓬":"12","⓭":"13","⓮":"14","⓯":"15","⓰":"16","⓱":"17","⓲":"18","⓳":"19","⓴":"20","Ⓐ":"A","Ⓑ":"B","Ⓒ":"C","Ⓓ":"D","Ⓔ":"E","Ⓕ":"F","Ⓖ":"G","Ⓗ":"H","Ⓘ":"I","Ⓙ":"J","Ⓚ":"K","Ⓛ":"L","Ⓜ":"M","Ⓝ":"N","Ⓞ":"O","Ⓟ":"P","Ⓠ":"Q","Ⓡ":"R","Ⓢ":"S","Ⓣ":"T","Ⓤ":"U","Ⓥ":"V","Ⓦ":"W","Ⓧ":"X","Ⓨ":"Y","Ⓩ":"Z","ⓐ":"a","ⓑ":"b","ⓒ":"c","ⓓ":"d","ⓔ":"e","ⓕ":"f","ⓖ":"g","ⓗ":"h","ⓘ":"i","ⓙ":"j","ⓚ":"k","ⓛ":"l","ⓜ":"m","ⓝ":"n","ⓞ":"o","ⓟ":"p","ⓠ":"q","ⓡ":"r","ⓢ":"s","ⓣ":"t","ⓤ":"u","ⓦ":"v","ⓥ":"w","ⓧ":"x","ⓨ":"y","ⓩ":"z","“":'"',"”":'"',"‘":"'","’":"'","∂":"d",ƒ:"f","™":"(TM)","©":"(C)",œ:"oe",Œ:"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o",º:"o",ª:"a","•":"*","၊":",","။":".",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY",元:"CNY",円:"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF","₺":"TRY","؋":"AFN","₼":"AZN",лв:"BGN","៛":"KHR","₡":"CRC","₸":"KZT",ден:"MKD",zł:"PLN","₽":"RUB","₾":"GEL"},i=["်","ް"],s={"ာ":"a","ါ":"a","ေ":"e","ဲ":"e","ိ":"i","ီ":"i","ို":"o","ု":"u","ူ":"u","ေါင်":"aung","ော":"aw","ော်":"aw","ေါ":"aw","ေါ်":"aw","်":"်","က်":"et","ိုက်":"aik","ောက်":"auk","င်":"in","ိုင်":"aing","ောင်":"aung","စ်":"it","ည်":"i","တ်":"at","ိတ်":"eik","ုတ်":"ok","ွတ်":"ut","ေတ်":"it","ဒ်":"d","ိုဒ်":"ok","ုဒ်":"ait","န်":"an","ာန်":"an","ိန်":"ein","ုန်":"on","ွန်":"un","ပ်":"at","ိပ်":"eik","ုပ်":"ok","ွပ်":"ut","န်ုပ်":"nub","မ်":"an","ိမ်":"ein","ုမ်":"on","ွမ်":"un","ယ်":"e","ိုလ်":"ol","ဉ်":"in","ံ":"an","ိံ":"ein","ုံ":"on","ައް":"ah","ަށް":"ah"},r={en:{},az:{ç:"c",ə:"e",ğ:"g",ı:"i",ö:"o",ş:"s",ü:"u",Ç:"C",Ə:"E",Ğ:"G",İ:"I",Ö:"O",Ş:"S",Ü:"U"},cs:{č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z"},fi:{ä:"a",Ä:"A",ö:"o",Ö:"O"},hu:{ä:"a",Ä:"A",ö:"o",Ö:"O",ü:"u",Ü:"U",ű:"u",Ű:"U"},lt:{ą:"a",č:"c",ę:"e",ė:"e",į:"i",š:"s",ų:"u",ū:"u",ž:"z",Ą:"A",Č:"C",Ę:"E",Ė:"E",Į:"I",Š:"S",Ų:"U",Ū:"U"},lv:{ā:"a",č:"c",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",š:"s",ū:"u",ž:"z",Ā:"A",Č:"C",Ē:"E",Ģ:"G",Ī:"i",Ķ:"k",Ļ:"L",Ņ:"N",Š:"S",Ū:"u",Ž:"Z"},pl:{ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ó:"o",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"e",Ł:"L",Ń:"N",Ó:"O",Ś:"S",Ź:"Z",Ż:"Z"},sv:{ä:"a",Ä:"A",ö:"o",Ö:"O"},sk:{ä:"a",Ä:"A"},sr:{љ:"lj",њ:"nj",Љ:"Lj",Њ:"Nj",đ:"dj",Đ:"Dj"},tr:{Ü:"U",Ö:"O",ü:"u",ö:"o"}},a={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},az:{},ca:{"∆":"delta","∞":"infinit","♥":"amor","&":"i","|":"o","<":"menys que",">":"mes que","∑":"suma dels","¤":"moneda"},cs:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"nebo","<":"mensi nez",">":"vetsi nez","∑":"soucet","¤":"mena"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},dv:{"∆":"delta","∞":"kolunulaa","♥":"loabi","&":"aai","|":"noonee","<":"ah vure kuda",">":"ah vure bodu","∑":"jumula","¤":"faisaa"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fa:{"∆":"delta","∞":"bi-nahayat","♥":"eshgh","&":"va","|":"ya","<":"kamtar-az",">":"bishtar-az","∑":"majmooe","¤":"vahed"},fi:{"∆":"delta","∞":"aarettomyys","♥":"rakkaus","&":"ja","|":"tai","<":"pienempi kuin",">":"suurempi kuin","∑":"summa","¤":"valuutta"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},ge:{"∆":"delta","∞":"usasruloba","♥":"siqvaruli","&":"da","|":"an","<":"naklebi",">":"meti","∑":"jami","¤":"valuta"},gr:{},hu:{"∆":"delta","∞":"vegtelen","♥":"szerelem","&":"es","|":"vagy","<":"kisebb mint",">":"nagyobb mint","∑":"szumma","¤":"penznem"},it:{"∆":"delta","∞":"infinito","♥":"amore","&":"e","|":"o","<":"minore di",">":"maggiore di","∑":"somma","¤":"moneta"},lt:{"∆":"delta","∞":"begalybe","♥":"meile","&":"ir","|":"ar","<":"maziau nei",">":"daugiau nei","∑":"suma","¤":"valiuta"},lv:{"∆":"delta","∞":"bezgaliba","♥":"milestiba","&":"un","|":"vai","<":"mazak neka",">":"lielaks neka","∑":"summa","¤":"valuta"},my:{"∆":"kwahkhyaet","∞":"asaonasme","♥":"akhyait","&":"nhin","|":"tho","<":"ngethaw",">":"kyithaw","∑":"paungld","¤":"ngwekye"},mk:{},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},pl:{"∆":"delta","∞":"nieskonczonosc","♥":"milosc","&":"i","|":"lub","<":"mniejsze niz",">":"wieksze niz","∑":"suma","¤":"waluta"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ro:{"∆":"delta","∞":"infinit","♥":"dragoste","&":"si","|":"sau","<":"mai mic ca",">":"mai mare ca","∑":"suma","¤":"valuta"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},sk:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"alebo","<":"menej ako",">":"viac ako","∑":"sucet","¤":"mena"},sr:{},tr:{"∆":"delta","∞":"sonsuzluk","♥":"ask","&":"ve","|":"veya","<":"kucuktur",">":"buyuktur","∑":"toplam","¤":"para birimi"},uk:{"∆":"delta","∞":"bezkinechnist","♥":"lubov","&":"i","|":"abo","<":"menshe",">":"bilshe","∑":"suma","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}},l=[";","?",":","@","&","=","+","$",",","/"].join(""),c=[";","?",":","@","&","=","+","$",","].join(""),u=[".","!","~","*","'","(",")"].join(""),d=function(b,S){var R="-",_="",M="",I=!0,W={},z,de,K,O,ie,N,oe,F,Y,J,L,ce,U,le,q="";if(typeof b!="string")return"";if(typeof S=="string"&&(R=S),oe=a.en,F=r.en,typeof S=="object"){z=S.maintainCase||!1,W=S.custom&&typeof S.custom=="object"?S.custom:W,K=+S.truncate>1&&S.truncate||!1,O=S.uric||!1,ie=S.uricNoSlash||!1,N=S.mark||!1,I=!(S.symbols===!1||S.lang===!1),R=S.separator||R,O&&(q+=l),ie&&(q+=c),N&&(q+=u),oe=S.lang&&a[S.lang]&&I?a[S.lang]:I?a.en:{},F=S.lang&&r[S.lang]?r[S.lang]:S.lang===!1||S.lang===!0?{}:r.en,S.titleCase&&typeof S.titleCase.length=="number"&&Array.prototype.toString.call(S.titleCase)?(S.titleCase.forEach(function(se){W[se+""]=se+""}),de=!0):de=!!S.titleCase,S.custom&&typeof S.custom.length=="number"&&Array.prototype.toString.call(S.custom)&&S.custom.forEach(function(se){W[se+""]=se+""}),Object.keys(W).forEach(function(se){var be;se.length>1?be=new RegExp("\\b"+f(se)+"\\b","gi"):be=new RegExp(f(se),"gi"),b=b.replace(be,W[se])});for(L in W)q+=L}for(q+=R,q=f(q),b=b.replace(/(^\s+|\s+$)/g,""),U=!1,le=!1,J=0,ce=b.length;J<ce;J++)L=b[J],v(L,W)?U=!1:F[L]?(L=U&&F[L].match(/[A-Za-z0-9]/)?" "+F[L]:F[L],U=!1):L in n?(J+1<ce&&i.indexOf(b[J+1])>=0?(M+=L,L=""):le===!0?(L=s[M]+n[L],M=""):L=U&&n[L].match(/[A-Za-z0-9]/)?" "+n[L]:n[L],U=!1,le=!1):L in s?(M+=L,L="",J===ce-1&&(L=s[M]),le=!0):oe[L]&&!(O&&l.indexOf(L)!==-1)&&!(ie&&c.indexOf(L)!==-1)?(L=U||_.substr(-1).match(/[A-Za-z0-9]/)?R+oe[L]:oe[L],L+=b[J+1]!==void 0&&b[J+1].match(/[A-Za-z0-9]/)?R:"",U=!0):(le===!0?(L=s[M]+L,M="",le=!1):U&&(/[A-Za-z0-9]/.test(L)||_.substr(-1).match(/A-Za-z0-9]/))&&(L=" "+L),U=!1),_+=L.replace(new RegExp("[^\\w\\s"+q+"_-]","g"),R);return de&&(_=_.replace(/(\w)(\S*)/g,function(se,be,ue){var j=be.toUpperCase()+(ue!==null?ue:"");return Object.keys(W).indexOf(j.toLowerCase())<0?j:j.toLowerCase()})),_=_.replace(/\s+/g,R).replace(new RegExp("\\"+R+"+","g"),R).replace(new RegExp("(^\\"+R+"+|\\"+R+"+$)","g"),""),K&&_.length>K&&(Y=_.charAt(K)===R,_=_.slice(0,K),Y||(_=_.slice(0,_.lastIndexOf(R)))),!z&&!de&&(_=_.toLowerCase()),_},h=function(b){return function(R){return d(R,b)}},f=function(b){return b.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},v=function(m,b){for(var S in b)if(b[S]===m)return!0};if(typeof t<"u"&&t.exports)t.exports=d,t.exports.createSlug=h;else if(typeof define<"u"&&define.amd)define([],function(){return d});else try{if(o.getSlug||o.createSlug)throw"speakingurl: globals exists /(getSlug|createSlug)/";o.getSlug=d,o.createSlug=h}catch{}}(e)}}),ID=_w({"../../node_modules/.pnpm/speakingurl@14.0.1/node_modules/speakingurl/index.js"(e,t){We(),t.exports=AD()}});We();We();We();We();We();We();We();We();function MD(e){var t;const o=e.name||e._componentTag||e.__VUE_DEVTOOLS_COMPONENT_GUSSED_NAME__||e.__name;return o==="index"&&((t=e.__file)!=null&&t.endsWith("index.vue"))?"":o}function OD(e){const t=e.__file;if(t)return mD(vD(t,".vue"))}function tv(e,t){return e.type.__VUE_DEVTOOLS_COMPONENT_GUSSED_NAME__=t,t}function Cp(e){if(e.__VUE_DEVTOOLS_NEXT_APP_RECORD__)return e.__VUE_DEVTOOLS_NEXT_APP_RECORD__;if(e.root)return e.appContext.app.__VUE_DEVTOOLS_NEXT_APP_RECORD__}function Ew(e){var t,o;const n=(t=e.subTree)==null?void 0:t.type,i=Cp(e);return i?((o=i==null?void 0:i.types)==null?void 0:o.Fragment)===n:!1}function Ku(e){var t,o,n;const i=MD((e==null?void 0:e.type)||{});if(i)return i;if((e==null?void 0:e.root)===e)return"Root";for(const r in(o=(t=e.parent)==null?void 0:t.type)==null?void 0:o.components)if(e.parent.type.components[r]===(e==null?void 0:e.type))return tv(e,r);for(const r in(n=e.appContext)==null?void 0:n.components)if(e.appContext.components[r]===(e==null?void 0:e.type))return tv(e,r);const s=OD((e==null?void 0:e.type)||{});return s||"Anonymous Component"}function LD(e){var t,o,n;const i=(n=(o=(t=e==null?void 0:e.appContext)==null?void 0:t.app)==null?void 0:o.__VUE_DEVTOOLS_NEXT_APP_RECORD_ID__)!=null?n:0,s=e===(e==null?void 0:e.root)?"root":e.uid;return`${i}:${s}`}function lf(e,t){return t=t||`${e.id}:root`,e.instanceMap.get(t)||e.instanceMap.get(":root")}function BD(){const e={top:0,bottom:0,left:0,right:0,get width(){return e.right-e.left},get height(){return e.bottom-e.top}};return e}var cc;function ND(e){return cc||(cc=document.createRange()),cc.selectNode(e),cc.getBoundingClientRect()}function HD(e){const t=BD();if(!e.children)return t;for(let o=0,n=e.children.length;o<n;o++){const i=e.children[o];let s;if(i.component)s=Os(i.component);else if(i.el){const r=i.el;r.nodeType===1||r.getBoundingClientRect?s=r.getBoundingClientRect():r.nodeType===3&&r.data.trim()&&(s=ND(r))}s&&GD(t,s)}return t}function GD(e,t){return(!e.top||t.top<e.top)&&(e.top=t.top),(!e.bottom||t.bottom>e.bottom)&&(e.bottom=t.bottom),(!e.left||t.left<e.left)&&(e.left=t.left),(!e.right||t.right>e.right)&&(e.right=t.right),e}var ov={top:0,left:0,right:0,bottom:0,width:0,height:0};function Os(e){const t=e.subTree.el;return typeof window>"u"?ov:Ew(e)?HD(e.subTree):(t==null?void 0:t.nodeType)===1?t==null?void 0:t.getBoundingClientRect():e.subTree.component?Os(e.subTree.component):ov}We();function bp(e){return Ew(e)?VD(e.subTree):e.subTree?[e.subTree.el]:[]}function VD(e){if(!e.children)return[];const t=[];return e.children.forEach(o=>{o.component?t.push(...bp(o.component)):o!=null&&o.el&&t.push(o.el)}),t}var Pw="__vue-devtools-component-inspector__",Fw="__vue-devtools-component-inspector__card__",Dw="__vue-devtools-component-inspector__name__",Tw="__vue-devtools-component-inspector__indicator__",kw={display:"block",zIndex:2147483640,position:"fixed",backgroundColor:"#42b88325",border:"1px solid #42b88350",borderRadius:"5px",transition:"all 0.1s ease-in",pointerEvents:"none"},zD={fontFamily:"Arial, Helvetica, sans-serif",padding:"5px 8px",borderRadius:"4px",textAlign:"left",position:"absolute",left:0,color:"#e9e9e9",fontSize:"14px",fontWeight:600,lineHeight:"24px",backgroundColor:"#42b883",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)"},WD={display:"inline-block",fontWeight:400,fontStyle:"normal",fontSize:"12px",opacity:.7};function Ur(){return document.getElementById(Pw)}function UD(){return document.getElementById(Fw)}function $D(){return document.getElementById(Tw)}function jD(){return document.getElementById(Dw)}function wp(e){return{left:`${Math.round(e.left*100)/100}px`,top:`${Math.round(e.top*100)/100}px`,width:`${Math.round(e.width*100)/100}px`,height:`${Math.round(e.height*100)/100}px`}}function Sp(e){var t;const o=document.createElement("div");o.id=(t=e.elementId)!=null?t:Pw,Object.assign(o.style,{...kw,...wp(e.bounds),...e.style});const n=document.createElement("span");n.id=Fw,Object.assign(n.style,{...zD,top:e.bounds.top<35?0:"-35px"});const i=document.createElement("span");i.id=Dw,i.innerHTML=`&lt;${e.name}&gt;&nbsp;&nbsp;`;const s=document.createElement("i");return s.id=Tw,s.innerHTML=`${Math.round(e.bounds.width*100)/100} x ${Math.round(e.bounds.height*100)/100}`,Object.assign(s.style,WD),n.appendChild(i),n.appendChild(s),o.appendChild(n),document.body.appendChild(o),o}function xp(e){const t=Ur(),o=UD(),n=jD(),i=$D();t&&(Object.assign(t.style,{...kw,...wp(e.bounds)}),Object.assign(o.style,{top:e.bounds.top<35?0:"-35px"}),n.innerHTML=`&lt;${e.name}&gt;&nbsp;&nbsp;`,i.innerHTML=`${Math.round(e.bounds.width*100)/100} x ${Math.round(e.bounds.height*100)/100}`)}function KD(e){const t=Os(e);if(!t.width&&!t.height)return;const o=Ku(e);Ur()?xp({bounds:t,name:o}):Sp({bounds:t,name:o})}function Aw(){const e=Ur();e&&(e.style.display="none")}var cf=null;function uf(e){const t=e.target;if(t){const o=t.__vueParentComponent;if(o&&(cf=o,o.vnode.el)){const i=Os(o),s=Ku(o);Ur()?xp({bounds:i,name:s}):Sp({bounds:i,name:s})}}}function qD(e,t){if(e.preventDefault(),e.stopPropagation(),cf){const o=LD(cf);t(o)}}var lu=null;function QD(){Aw(),window.removeEventListener("mouseover",uf),window.removeEventListener("click",lu,!0),lu=null}function YD(){return window.addEventListener("mouseover",uf),new Promise(e=>{function t(o){o.preventDefault(),o.stopPropagation(),qD(o,n=>{window.removeEventListener("click",t,!0),lu=null,window.removeEventListener("mouseover",uf);const i=Ur();i&&(i.style.display="none"),e(JSON.stringify({id:n}))})}lu=t,window.addEventListener("click",t,!0)})}function JD(e){const t=lf(Oo.value,e.id);if(t){const[o]=bp(t);if(typeof o.scrollIntoView=="function")o.scrollIntoView({behavior:"smooth"});else{const n=Os(t),i=document.createElement("div"),s={...wp(n),position:"absolute"};Object.assign(i.style,s),document.body.appendChild(i),i.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{document.body.removeChild(i)},2e3)}setTimeout(()=>{const n=Os(t);if(n.width||n.height){const i=Ku(t),s=Ur();s?xp({...e,name:i,bounds:n}):Sp({...e,name:i,bounds:n}),setTimeout(()=>{s&&(s.style.display="none")},1500)}},1200)}}We();var nv,iv;(iv=(nv=rt).__VUE_DEVTOOLS_COMPONENT_INSPECTOR_ENABLED__)!=null||(nv.__VUE_DEVTOOLS_COMPONENT_INSPECTOR_ENABLED__=!0);function ZD(e){let t=0;const o=setInterval(()=>{rt.__VUE_INSPECTOR__&&(clearInterval(o),t+=30,e()),t>=5e3&&clearInterval(o)},30)}function XD(){const e=rt.__VUE_INSPECTOR__,t=e.openInEditor;e.openInEditor=async(...o)=>{e.disable(),t(...o)}}function eT(){return new Promise(e=>{function t(){XD(),e(rt.__VUE_INSPECTOR__)}rt.__VUE_INSPECTOR__?t():ZD(()=>{t()})})}We();We();function tT(e){return!!(e&&e.__v_isReadonly)}function Iw(e){return tT(e)?Iw(e.__v_raw):!!(e&&e.__v_isReactive)}function oh(e){return!!(e&&e.__v_isRef===!0)}function xa(e){const t=e&&e.__v_raw;return t?xa(t):e}var oT=class{constructor(){this.refEditor=new nT}set(e,t,o,n){const i=Array.isArray(t)?t:t.split(".");for(;i.length>1;){const a=i.shift();e instanceof Map?e=e.get(a):e instanceof Set?e=Array.from(e.values())[a]:e=e[a],this.refEditor.isRef(e)&&(e=this.refEditor.get(e))}const s=i[0],r=this.refEditor.get(e)[s];n?n(e,s,o):this.refEditor.isRef(r)?this.refEditor.set(r,o):e[s]=o}get(e,t){const o=Array.isArray(t)?t:t.split(".");for(let n=0;n<o.length;n++)if(e instanceof Map?e=e.get(o[n]):e=e[o[n]],this.refEditor.isRef(e)&&(e=this.refEditor.get(e)),!e)return;return e}has(e,t,o=!1){if(typeof e>"u")return!1;const n=Array.isArray(t)?t.slice():t.split("."),i=o?2:1;for(;e&&n.length>i;){const s=n.shift();e=e[s],this.refEditor.isRef(e)&&(e=this.refEditor.get(e))}return e!=null&&Object.prototype.hasOwnProperty.call(e,n[0])}createDefaultSetCallback(e){return(t,o,n)=>{if((e.remove||e.newKey)&&(Array.isArray(t)?t.splice(o,1):xa(t)instanceof Map?t.delete(o):xa(t)instanceof Set?t.delete(Array.from(t.values())[o]):Reflect.deleteProperty(t,o)),!e.remove){const i=t[e.newKey||o];this.refEditor.isRef(i)?this.refEditor.set(i,n):xa(t)instanceof Map?t.set(e.newKey||o,n):xa(t)instanceof Set?t.add(n):t[e.newKey||o]=n}}}},nT=class{set(e,t){if(oh(e))e.value=t;else{if(e instanceof Set&&Array.isArray(t)){e.clear(),t.forEach(i=>e.add(i));return}const o=Object.keys(t);if(e instanceof Map){const i=new Set(e.keys());o.forEach(s=>{e.set(s,Reflect.get(t,s)),i.delete(s)}),i.forEach(s=>e.delete(s));return}const n=new Set(Object.keys(e));o.forEach(i=>{Reflect.set(e,i,Reflect.get(t,i)),n.delete(i)}),n.forEach(i=>Reflect.deleteProperty(e,i))}}get(e){return oh(e)?e.value:e}isRef(e){return oh(e)||Iw(e)}};We();We();We();var iT="__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS_STATE__";function sT(){if(!ww||typeof localStorage>"u"||localStorage===null)return{recordingState:!1,mouseEventEnabled:!1,keyboardEventEnabled:!1,componentEventEnabled:!1,performanceEventEnabled:!1,selected:""};const e=localStorage.getItem(iT);return e?JSON.parse(e):{recordingState:!1,mouseEventEnabled:!1,keyboardEventEnabled:!1,componentEventEnabled:!1,performanceEventEnabled:!1,selected:""}}We();We();We();var sv,rv;(rv=(sv=rt).__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS)!=null||(sv.__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS=[]);var rT=new Proxy(rt.__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS,{get(e,t,o){return Reflect.get(e,t,o)}});function aT(e,t){uo.timelineLayersState[t.id]=!1,rT.push({...e,descriptorId:t.id,appRecord:Cp(t.app)})}var av,lv;(lv=(av=rt).__VUE_DEVTOOLS_KIT_INSPECTOR__)!=null||(av.__VUE_DEVTOOLS_KIT_INSPECTOR__=[]);var Rp=new Proxy(rt.__VUE_DEVTOOLS_KIT_INSPECTOR__,{get(e,t,o){return Reflect.get(e,t,o)}}),Mw=Ir(()=>{$r.hooks.callHook("sendInspectorToClient",Ow())});function lT(e,t){var o,n;Rp.push({options:e,descriptor:t,treeFilterPlaceholder:(o=e.treeFilterPlaceholder)!=null?o:"Search tree...",stateFilterPlaceholder:(n=e.stateFilterPlaceholder)!=null?n:"Search state...",treeFilter:"",selectedNodeId:"",appRecord:Cp(t.app)}),Mw()}function Ow(){return Rp.filter(e=>e.descriptor.app===Oo.value.app).filter(e=>e.descriptor.id!=="components").map(e=>{var t;const o=e.descriptor,n=e.options;return{id:n.id,label:n.label,logo:o.logo,icon:`custom-ic-baseline-${(t=n==null?void 0:n.icon)==null?void 0:t.replace(/_/g,"-")}`,packageName:o.packageName,homepage:o.homepage,pluginId:o.id}})}function Tc(e,t){return Rp.find(o=>o.options.id===e&&(t?o.descriptor.app===t:!0))}function cT(){const e=xw();e.hook("addInspector",({inspector:n,plugin:i})=>{lT(n,i.descriptor)});const t=Ir(async({inspectorId:n,plugin:i})=>{var s;if(!n||!((s=i==null?void 0:i.descriptor)!=null&&s.app)||uo.highPerfModeEnabled)return;const r=Tc(n,i.descriptor.app),a={app:i.descriptor.app,inspectorId:n,filter:(r==null?void 0:r.treeFilter)||"",rootNodes:[]};await new Promise(l=>{e.callHookWith(async c=>{await Promise.all(c.map(u=>u(a))),l()},"getInspectorTree")}),e.callHookWith(async l=>{await Promise.all(l.map(c=>c({inspectorId:n,rootNodes:a.rootNodes})))},"sendInspectorTreeToClient")},120);e.hook("sendInspectorTree",t);const o=Ir(async({inspectorId:n,plugin:i})=>{var s;if(!n||!((s=i==null?void 0:i.descriptor)!=null&&s.app)||uo.highPerfModeEnabled)return;const r=Tc(n,i.descriptor.app),a={app:i.descriptor.app,inspectorId:n,nodeId:(r==null?void 0:r.selectedNodeId)||"",state:null},l={currentTab:`custom-inspector:${n}`};a.nodeId&&await new Promise(c=>{e.callHookWith(async u=>{await Promise.all(u.map(d=>d(a,l))),c()},"getInspectorState")}),e.callHookWith(async c=>{await Promise.all(c.map(u=>u({inspectorId:n,nodeId:a.nodeId,state:a.state})))},"sendInspectorStateToClient")},120);return e.hook("sendInspectorState",o),e.hook("customInspectorSelectNode",({inspectorId:n,nodeId:i,plugin:s})=>{const r=Tc(n,s.descriptor.app);r&&(r.selectedNodeId=i)}),e.hook("timelineLayerAdded",({options:n,plugin:i})=>{aT(n,i.descriptor)}),e.hook("timelineEventAdded",({options:n,plugin:i})=>{var s;const r=["performance","component-event","keyboard","mouse"];uo.highPerfModeEnabled||!((s=uo.timelineLayersState)!=null&&s[i.descriptor.id])&&!r.includes(n.layerId)||e.callHookWith(async a=>{await Promise.all(a.map(l=>l(n)))},"sendTimelineEventToClient")}),e.hook("getComponentInstances",async({app:n})=>{const i=n.__VUE_DEVTOOLS_NEXT_APP_RECORD__;if(!i)return null;const s=i.id.toString();return[...i.instanceMap].filter(([a])=>a.split(":")[0]===s).map(([,a])=>a)}),e.hook("getComponentBounds",async({instance:n})=>Os(n)),e.hook("getComponentName",({instance:n})=>Ku(n)),e.hook("componentHighlight",({uid:n})=>{const i=Oo.value.instanceMap.get(n);i&&KD(i)}),e.hook("componentUnhighlight",()=>{Aw()}),e}var cv,uv;(uv=(cv=rt).__VUE_DEVTOOLS_KIT_APP_RECORDS__)!=null||(cv.__VUE_DEVTOOLS_KIT_APP_RECORDS__=[]);var dv,hv;(hv=(dv=rt).__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__)!=null||(dv.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__={});var fv,pv;(pv=(fv=rt).__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__)!=null||(fv.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__="");var gv,mv;(mv=(gv=rt).__VUE_DEVTOOLS_KIT_CUSTOM_TABS__)!=null||(gv.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__=[]);var vv,yv;(yv=(vv=rt).__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__)!=null||(vv.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__=[]);var ps="__VUE_DEVTOOLS_KIT_GLOBAL_STATE__";function uT(){return{connected:!1,clientConnected:!1,vitePluginDetected:!0,appRecords:[],activeAppRecordId:"",tabs:[],commands:[],highPerfModeEnabled:!0,devtoolsClientDetected:{},perfUniqueGroupId:0,timelineLayersState:sT()}}var Cv,bv;(bv=(Cv=rt)[ps])!=null||(Cv[ps]=uT());var dT=Ir(e=>{$r.hooks.callHook("devtoolsStateUpdated",{state:e})});Ir((e,t)=>{$r.hooks.callHook("devtoolsConnectedUpdated",{state:e,oldState:t})});var qu=new Proxy(rt.__VUE_DEVTOOLS_KIT_APP_RECORDS__,{get(e,t,o){return t==="value"?rt.__VUE_DEVTOOLS_KIT_APP_RECORDS__:rt.__VUE_DEVTOOLS_KIT_APP_RECORDS__[t]}}),Oo=new Proxy(rt.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__,{get(e,t,o){return t==="value"?rt.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__:t==="id"?rt.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__:rt.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__[t]}});function Lw(){dT({...rt[ps],appRecords:qu.value,activeAppRecordId:Oo.id,tabs:rt.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__,commands:rt.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__})}function hT(e){rt.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__=e,Lw()}function fT(e){rt.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__=e,Lw()}var uo=new Proxy(rt[ps],{get(e,t){return t==="appRecords"?qu:t==="activeAppRecordId"?Oo.id:t==="tabs"?rt.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__:t==="commands"?rt.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__:rt[ps][t]},deleteProperty(e,t){return delete e[t],!0},set(e,t,o){return{...rt[ps]},e[t]=o,rt[ps][t]=o,!0}});function pT(e={}){var t,o,n;const{file:i,host:s,baseUrl:r=window.location.origin,line:a=0,column:l=0}=e;if(i){if(s==="chrome-extension"){const c=i.replace(/\\/g,"\\\\"),u=(o=(t=window.VUE_DEVTOOLS_CONFIG)==null?void 0:t.openInEditorHost)!=null?o:"/";fetch(`${u}__open-in-editor?file=${encodeURI(i)}`).then(d=>{if(!d.ok){const h=`Opening component ${c} failed`;console.log(`%c${h}`,"color:red")}})}else if(uo.vitePluginDetected){const c=(n=rt.__VUE_DEVTOOLS_OPEN_IN_EDITOR_BASE_URL__)!=null?n:r;rt.__VUE_INSPECTOR__.openInEditor(c,i,a,l)}}}We();We();We();We();We();var wv,Sv;(Sv=(wv=rt).__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__)!=null||(wv.__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__=[]);var _p=new Proxy(rt.__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__,{get(e,t,o){return Reflect.get(e,t,o)}});function df(e){const t={};return Object.keys(e).forEach(o=>{t[o]=e[o].defaultValue}),t}function Ep(e){return`__VUE_DEVTOOLS_NEXT_PLUGIN_SETTINGS__${e}__`}function gT(e){var t,o,n;const i=(o=(t=_p.find(s=>{var r;return s[0].id===e&&!!((r=s[0])!=null&&r.settings)}))==null?void 0:t[0])!=null?o:null;return(n=i==null?void 0:i.settings)!=null?n:null}function Bw(e,t){var o,n,i;const s=Ep(e);if(s){const r=localStorage.getItem(s);if(r)return JSON.parse(r)}if(e){const r=(n=(o=_p.find(a=>a[0].id===e))==null?void 0:o[0])!=null?n:null;return df((i=r==null?void 0:r.settings)!=null?i:{})}return df(t)}function mT(e,t){const o=Ep(e);localStorage.getItem(o)||localStorage.setItem(o,JSON.stringify(df(t)))}function vT(e,t,o){const n=Ep(e),i=localStorage.getItem(n),s=JSON.parse(i||"{}"),r={...s,[t]:o};localStorage.setItem(n,JSON.stringify(r)),$r.hooks.callHookWith(a=>{a.forEach(l=>l({pluginId:e,key:t,oldValue:s[t],newValue:o,settings:r}))},"setPluginSettings")}We();We();We();We();We();We();We();We();We();We();We();var xv,Rv,jo=(Rv=(xv=rt).__VUE_DEVTOOLS_HOOK)!=null?Rv:xv.__VUE_DEVTOOLS_HOOK=xw(),yT={vueAppInit(e){jo.hook("app:init",e)},vueAppUnmount(e){jo.hook("app:unmount",e)},vueAppConnected(e){jo.hook("app:connected",e)},componentAdded(e){return jo.hook("component:added",e)},componentEmit(e){return jo.hook("component:emit",e)},componentUpdated(e){return jo.hook("component:updated",e)},componentRemoved(e){return jo.hook("component:removed",e)},setupDevtoolsPlugin(e){jo.hook("devtools-plugin:setup",e)},perfStart(e){return jo.hook("perf:start",e)},perfEnd(e){return jo.hook("perf:end",e)}},Nw={on:yT,setupDevToolsPlugin(e,t){return jo.callHook("devtools-plugin:setup",e,t)}},CT=class{constructor({plugin:e,ctx:t}){this.hooks=t.hooks,this.plugin=e}get on(){return{visitComponentTree:e=>{this.hooks.hook("visitComponentTree",e)},inspectComponent:e=>{this.hooks.hook("inspectComponent",e)},editComponentState:e=>{this.hooks.hook("editComponentState",e)},getInspectorTree:e=>{this.hooks.hook("getInspectorTree",e)},getInspectorState:e=>{this.hooks.hook("getInspectorState",e)},editInspectorState:e=>{this.hooks.hook("editInspectorState",e)},inspectTimelineEvent:e=>{this.hooks.hook("inspectTimelineEvent",e)},timelineCleared:e=>{this.hooks.hook("timelineCleared",e)},setPluginSettings:e=>{this.hooks.hook("setPluginSettings",e)}}}notifyComponentUpdate(e){var t;if(uo.highPerfModeEnabled)return;const o=Ow().find(n=>n.packageName===this.plugin.descriptor.packageName);if(o!=null&&o.id){if(e){const n=[e.appContext.app,e.uid,(t=e.parent)==null?void 0:t.uid,e];jo.callHook("component:updated",...n)}else jo.callHook("component:updated");this.hooks.callHook("sendInspectorState",{inspectorId:o.id,plugin:this.plugin})}}addInspector(e){this.hooks.callHook("addInspector",{inspector:e,plugin:this.plugin}),this.plugin.descriptor.settings&&mT(e.id,this.plugin.descriptor.settings)}sendInspectorTree(e){uo.highPerfModeEnabled||this.hooks.callHook("sendInspectorTree",{inspectorId:e,plugin:this.plugin})}sendInspectorState(e){uo.highPerfModeEnabled||this.hooks.callHook("sendInspectorState",{inspectorId:e,plugin:this.plugin})}selectInspectorNode(e,t){this.hooks.callHook("customInspectorSelectNode",{inspectorId:e,nodeId:t,plugin:this.plugin})}visitComponentTree(e){return this.hooks.callHook("visitComponentTree",e)}now(){return uo.highPerfModeEnabled?0:Date.now()}addTimelineLayer(e){this.hooks.callHook("timelineLayerAdded",{options:e,plugin:this.plugin})}addTimelineEvent(e){uo.highPerfModeEnabled||this.hooks.callHook("timelineEventAdded",{options:e,plugin:this.plugin})}getSettings(e){return Bw(e??this.plugin.descriptor.id,this.plugin.descriptor.settings)}getComponentInstances(e){return this.hooks.callHook("getComponentInstances",{app:e})}getComponentBounds(e){return this.hooks.callHook("getComponentBounds",{instance:e})}getComponentName(e){return this.hooks.callHook("getComponentName",{instance:e})}highlightElement(e){const t=e.__VUE_DEVTOOLS_NEXT_UID__;return this.hooks.callHook("componentHighlight",{uid:t})}unhighlightElement(){return this.hooks.callHook("componentUnhighlight")}},bT=CT;We();We();We();We();var wT="__vue_devtool_undefined__",ST="__vue_devtool_infinity__",xT="__vue_devtool_negative_infinity__",RT="__vue_devtool_nan__";We();We();var _T={[wT]:"undefined",[RT]:"NaN",[ST]:"Infinity",[xT]:"-Infinity"};Object.entries(_T).reduce((e,[t,o])=>(e[o]=t,e),{});We();We();We();We();We();var _v,Ev;(Ev=(_v=rt).__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__)!=null||(_v.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__=new Set);function Hw(e,t){return Nw.setupDevToolsPlugin(e,t)}function ET(e,t){const[o,n]=e;if(o.app!==t)return;const i=new bT({plugin:{setupFn:n,descriptor:o},ctx:$r});o.packageName==="vuex"&&i.on.editInspectorState(s=>{i.sendInspectorState(s.inspectorId)}),n(i)}function Gw(e,t){rt.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__.has(e)||uo.highPerfModeEnabled&&!(t!=null&&t.inspectingComponent)||(rt.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__.add(e),_p.forEach(o=>{ET(o,e)}))}We();We();var nl="__VUE_DEVTOOLS_ROUTER__",Mr="__VUE_DEVTOOLS_ROUTER_INFO__",Pv,Fv;(Fv=(Pv=rt)[Mr])!=null||(Pv[Mr]={currentRoute:null,routes:[]});var Dv,Tv;(Tv=(Dv=rt)[nl])!=null||(Dv[nl]={});new Proxy(rt[Mr],{get(e,t){return rt[Mr][t]}});new Proxy(rt[nl],{get(e,t){if(t==="value")return rt[nl]}});function PT(e){const t=new Map;return((e==null?void 0:e.getRoutes())||[]).filter(o=>!t.has(o.path)&&t.set(o.path,1))}function Pp(e){return e.map(t=>{let{path:o,name:n,children:i,meta:s}=t;return i!=null&&i.length&&(i=Pp(i)),{path:o,name:n,children:i,meta:s}})}function FT(e){if(e){const{fullPath:t,hash:o,href:n,path:i,name:s,matched:r,params:a,query:l}=e;return{fullPath:t,hash:o,href:n,path:i,name:s,params:a,query:l,matched:Pp(r)}}return e}function DT(e,t){function o(){var n;const i=(n=e.app)==null?void 0:n.config.globalProperties.$router,s=FT(i==null?void 0:i.currentRoute.value),r=Pp(PT(i)),a=console.warn;console.warn=()=>{},rt[Mr]={currentRoute:s?ev(s):{},routes:ev(r)},rt[nl]=i,console.warn=a}o(),Nw.on.componentUpdated(Ir(()=>{var n;((n=t.value)==null?void 0:n.app)===e.app&&(o(),!uo.highPerfModeEnabled&&$r.hooks.callHook("routerInfoUpdated",{state:rt[Mr]}))},200))}function TT(e){return{async getInspectorTree(t){const o={...t,app:Oo.value.app,rootNodes:[]};return await new Promise(n=>{e.callHookWith(async i=>{await Promise.all(i.map(s=>s(o))),n()},"getInspectorTree")}),o.rootNodes},async getInspectorState(t){const o={...t,app:Oo.value.app,state:null},n={currentTab:`custom-inspector:${t.inspectorId}`};return await new Promise(i=>{e.callHookWith(async s=>{await Promise.all(s.map(r=>r(o,n))),i()},"getInspectorState")}),o.state},editInspectorState(t){const o=new oT,n={...t,app:Oo.value.app,set:(i,s=t.path,r=t.state.value,a)=>{o.set(i,s,r,a||o.createDefaultSetCallback(t.state))}};e.callHookWith(i=>{i.forEach(s=>s(n))},"editInspectorState")},sendInspectorState(t){const o=Tc(t);e.callHook("sendInspectorState",{inspectorId:t,plugin:{descriptor:o.descriptor,setupFn:()=>({})}})},inspectComponentInspector(){return YD()},cancelInspectComponentInspector(){return QD()},getComponentRenderCode(t){const o=lf(Oo.value,t);if(o)return typeof(o==null?void 0:o.type)!="function"?o.render.toString():o.type.toString()},scrollToComponent(t){return JD({id:t})},openInEditor:pT,getVueInspector:eT,toggleApp(t,o){const n=qu.value.find(i=>i.id===t);n&&(fT(t),hT(n),DT(n,Oo),Mw(),Gw(n.app,o))},inspectDOM(t){const o=lf(Oo.value,t);if(o){const[n]=bp(o);n&&(rt.__VUE_DEVTOOLS_INSPECT_DOM_TARGET__=n)}},updatePluginSettings(t,o,n){vT(t,o,n)},getPluginSettings(t){return{options:gT(t),values:Bw(t)}}}}We();var kv,Av;(Av=(kv=rt).__VUE_DEVTOOLS_ENV__)!=null||(kv.__VUE_DEVTOOLS_ENV__={vitePluginDetected:!1});var Iv=cT(),Mv,Ov;(Ov=(Mv=rt).__VUE_DEVTOOLS_KIT_CONTEXT__)!=null||(Mv.__VUE_DEVTOOLS_KIT_CONTEXT__={hooks:Iv,get state(){return{...uo,activeAppRecordId:Oo.id,activeAppRecord:Oo.value,appRecords:qu.value}},api:TT(Iv)});var $r=rt.__VUE_DEVTOOLS_KIT_CONTEXT__;We();kD(ID());var Lv,Bv;(Bv=(Lv=rt).__VUE_DEVTOOLS_NEXT_APP_RECORD_INFO__)!=null||(Lv.__VUE_DEVTOOLS_NEXT_APP_RECORD_INFO__={id:0,appIds:new Set});We();function kT(e){uo.highPerfModeEnabled=e??!uo.highPerfModeEnabled,!e&&Oo.value&&Gw(Oo.value.app)}We();We();We();function AT(e){uo.devtoolsClientDetected={...uo.devtoolsClientDetected,...e};const t=Object.values(uo.devtoolsClientDetected).some(Boolean);kT(!t)}var Nv,Hv;(Hv=(Nv=rt).__VUE_DEVTOOLS_UPDATE_CLIENT_DETECTED__)!=null||(Nv.__VUE_DEVTOOLS_UPDATE_CLIENT_DETECTED__=AT);We();We();We();We();We();We();We();var IT=class{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,t){this.keyToValue.set(e,t),this.valueToKey.set(t,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}},Vw=class{constructor(t){this.generateIdentifier=t,this.kv=new IT}register(t,o){this.kv.getByValue(t)||(o||(o=this.generateIdentifier(t)),this.kv.set(o,t))}clear(){this.kv.clear()}getIdentifier(t){return this.kv.getByValue(t)}getValue(t){return this.kv.getByKey(t)}},MT=class extends Vw{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,t){typeof t=="object"?(t.allowProps&&this.classToAllowedProps.set(e,t.allowProps),super.register(e,t.identifier)):super.register(e,t)}getAllowedProps(e){return this.classToAllowedProps.get(e)}};We();We();function OT(e){if("values"in Object)return Object.values(e);const t=[];for(const o in e)e.hasOwnProperty(o)&&t.push(e[o]);return t}function LT(e,t){const o=OT(e);if("find"in o)return o.find(t);const n=o;for(let i=0;i<n.length;i++){const s=n[i];if(t(s))return s}}function Or(e,t){Object.entries(e).forEach(([o,n])=>t(n,o))}function kc(e,t){return e.indexOf(t)!==-1}function Gv(e,t){for(let o=0;o<e.length;o++){const n=e[o];if(t(n))return n}}var BT=class{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return LT(this.transfomers,t=>t.isApplicable(e))}findByName(e){return this.transfomers[e]}};We();We();var NT=e=>Object.prototype.toString.call(e).slice(8,-1),zw=e=>typeof e>"u",HT=e=>e===null,il=e=>typeof e!="object"||e===null||e===Object.prototype?!1:Object.getPrototypeOf(e)===null?!0:Object.getPrototypeOf(e)===Object.prototype,hf=e=>il(e)&&Object.keys(e).length===0,qi=e=>Array.isArray(e),GT=e=>typeof e=="string",VT=e=>typeof e=="number"&&!isNaN(e),zT=e=>typeof e=="boolean",WT=e=>e instanceof RegExp,sl=e=>e instanceof Map,rl=e=>e instanceof Set,Ww=e=>NT(e)==="Symbol",UT=e=>e instanceof Date&&!isNaN(e.valueOf()),$T=e=>e instanceof Error,Vv=e=>typeof e=="number"&&isNaN(e),jT=e=>zT(e)||HT(e)||zw(e)||VT(e)||GT(e)||Ww(e),KT=e=>typeof e=="bigint",qT=e=>e===1/0||e===-1/0,QT=e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),YT=e=>e instanceof URL;We();var Uw=e=>e.replace(/\./g,"\\."),nh=e=>e.map(String).map(Uw).join("."),Ba=e=>{const t=[];let o="";for(let i=0;i<e.length;i++){let s=e.charAt(i);if(s==="\\"&&e.charAt(i+1)==="."){o+=".",i++;continue}if(s==="."){t.push(o),o="";continue}o+=s}const n=o;return t.push(n),t};We();function Tn(e,t,o,n){return{isApplicable:e,annotation:t,transform:o,untransform:n}}var $w=[Tn(zw,"undefined",()=>null,()=>{}),Tn(KT,"bigint",e=>e.toString(),e=>typeof BigInt<"u"?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),Tn(UT,"Date",e=>e.toISOString(),e=>new Date(e)),Tn($T,"Error",(e,t)=>{const o={name:e.name,message:e.message};return t.allowedErrorProps.forEach(n=>{o[n]=e[n]}),o},(e,t)=>{const o=new Error(e.message);return o.name=e.name,o.stack=e.stack,t.allowedErrorProps.forEach(n=>{o[n]=e[n]}),o}),Tn(WT,"regexp",e=>""+e,e=>{const t=e.slice(1,e.lastIndexOf("/")),o=e.slice(e.lastIndexOf("/")+1);return new RegExp(t,o)}),Tn(rl,"set",e=>[...e.values()],e=>new Set(e)),Tn(sl,"map",e=>[...e.entries()],e=>new Map(e)),Tn(e=>Vv(e)||qT(e),"number",e=>Vv(e)?"NaN":e>0?"Infinity":"-Infinity",Number),Tn(e=>e===0&&1/e===-1/0,"number",()=>"-0",Number),Tn(YT,"URL",e=>e.toString(),e=>new URL(e))];function Qu(e,t,o,n){return{isApplicable:e,annotation:t,transform:o,untransform:n}}var jw=Qu((e,t)=>Ww(e)?!!t.symbolRegistry.getIdentifier(e):!1,(e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)],e=>e.description,(e,t,o)=>{const n=o.symbolRegistry.getValue(t[1]);if(!n)throw new Error("Trying to deserialize unknown symbol");return n}),JT=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,t)=>(e[t.name]=t,e),{}),Kw=Qu(QT,e=>["typed-array",e.constructor.name],e=>[...e],(e,t)=>{const o=JT[t[1]];if(!o)throw new Error("Trying to deserialize unknown typed array");return new o(e)});function qw(e,t){return e!=null&&e.constructor?!!t.classRegistry.getIdentifier(e.constructor):!1}var Qw=Qu(qw,(e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)],(e,t)=>{const o=t.classRegistry.getAllowedProps(e.constructor);if(!o)return{...e};const n={};return o.forEach(i=>{n[i]=e[i]}),n},(e,t,o)=>{const n=o.classRegistry.getValue(t[1]);if(!n)throw new Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(n.prototype),e)}),Yw=Qu((e,t)=>!!t.customTransformerRegistry.findApplicable(e),(e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name],(e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e),(e,t,o)=>{const n=o.customTransformerRegistry.findByName(t[1]);if(!n)throw new Error("Trying to deserialize unknown custom value");return n.deserialize(e)}),ZT=[Qw,jw,Yw,Kw],zv=(e,t)=>{const o=Gv(ZT,i=>i.isApplicable(e,t));if(o)return{value:o.transform(e,t),type:o.annotation(e,t)};const n=Gv($w,i=>i.isApplicable(e,t));if(n)return{value:n.transform(e,t),type:n.annotation}},Jw={};$w.forEach(e=>{Jw[e.annotation]=e});var XT=(e,t,o)=>{if(qi(t))switch(t[0]){case"symbol":return jw.untransform(e,t,o);case"class":return Qw.untransform(e,t,o);case"custom":return Yw.untransform(e,t,o);case"typed-array":return Kw.untransform(e,t,o);default:throw new Error("Unknown transformation: "+t)}else{const n=Jw[t];if(!n)throw new Error("Unknown transformation: "+t);return n.untransform(e,o)}};We();var cr=(e,t)=>{if(t>e.size)throw new Error("index out of bounds");const o=e.keys();for(;t>0;)o.next(),t--;return o.next().value};function Zw(e){if(kc(e,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(kc(e,"prototype"))throw new Error("prototype is not allowed as a property");if(kc(e,"constructor"))throw new Error("constructor is not allowed as a property")}var ek=(e,t)=>{Zw(t);for(let o=0;o<t.length;o++){const n=t[o];if(rl(e))e=cr(e,+n);else if(sl(e)){const i=+n,s=+t[++o]==0?"key":"value",r=cr(e,i);switch(s){case"key":e=r;break;case"value":e=e.get(r);break}}else e=e[n]}return e},ff=(e,t,o)=>{if(Zw(t),t.length===0)return o(e);let n=e;for(let s=0;s<t.length-1;s++){const r=t[s];if(qi(n)){const a=+r;n=n[a]}else if(il(n))n=n[r];else if(rl(n)){const a=+r;n=cr(n,a)}else if(sl(n)){if(s===t.length-2)break;const l=+r,c=+t[++s]==0?"key":"value",u=cr(n,l);switch(c){case"key":n=u;break;case"value":n=n.get(u);break}}}const i=t[t.length-1];if(qi(n)?n[+i]=o(n[+i]):il(n)&&(n[i]=o(n[i])),rl(n)){const s=cr(n,+i),r=o(s);s!==r&&(n.delete(s),n.add(r))}if(sl(n)){const s=+t[t.length-2],r=cr(n,s);switch(+i==0?"key":"value"){case"key":{const l=o(r);n.set(l,n.get(r)),l!==r&&n.delete(r);break}case"value":{n.set(r,o(n.get(r)));break}}}return e};function pf(e,t,o=[]){if(!e)return;if(!qi(e)){Or(e,(s,r)=>pf(s,t,[...o,...Ba(r)]));return}const[n,i]=e;i&&Or(i,(s,r)=>{pf(s,t,[...o,...Ba(r)])}),t(n,o)}function tk(e,t,o){return pf(t,(n,i)=>{e=ff(e,i,s=>XT(s,n,o))}),e}function ok(e,t){function o(n,i){const s=ek(e,Ba(i));n.map(Ba).forEach(r=>{e=ff(e,r,()=>s)})}if(qi(t)){const[n,i]=t;n.forEach(s=>{e=ff(e,Ba(s),()=>e)}),i&&Or(i,o)}else Or(t,o);return e}var nk=(e,t)=>il(e)||qi(e)||sl(e)||rl(e)||qw(e,t);function ik(e,t,o){const n=o.get(e);n?n.push(t):o.set(e,[t])}function sk(e,t){const o={};let n;return e.forEach(i=>{if(i.length<=1)return;t||(i=i.map(a=>a.map(String)).sort((a,l)=>a.length-l.length));const[s,...r]=i;s.length===0?n=r.map(nh):o[nh(s)]=r.map(nh)}),n?hf(o)?[n]:[n,o]:hf(o)?void 0:o}var Xw=(e,t,o,n,i=[],s=[],r=new Map)=>{var a;const l=jT(e);if(!l){ik(e,i,t);const v=r.get(e);if(v)return n?{transformedValue:null}:v}if(!nk(e,o)){const v=zv(e,o),m=v?{transformedValue:v.value,annotations:[v.type]}:{transformedValue:e};return l||r.set(e,m),m}if(kc(s,e))return{transformedValue:null};const c=zv(e,o),u=(a=c==null?void 0:c.value)!=null?a:e,d=qi(u)?[]:{},h={};Or(u,(v,m)=>{if(m==="__proto__"||m==="constructor"||m==="prototype")throw new Error(`Detected property ${m}. This is a prototype pollution risk, please remove it from your object.`);const b=Xw(v,t,o,n,[...i,m],[...s,e],r);d[m]=b.transformedValue,qi(b.annotations)?h[m]=b.annotations:il(b.annotations)&&Or(b.annotations,(S,R)=>{h[Uw(m)+"."+R]=S})});const f=hf(h)?{transformedValue:d,annotations:c?[c.type]:void 0}:{transformedValue:d,annotations:c?[c.type,h]:h};return l||r.set(e,f),f};We();We();function e0(e){return Object.prototype.toString.call(e).slice(8,-1)}function Wv(e){return e0(e)==="Array"}function rk(e){if(e0(e)!=="Object")return!1;const t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}function ak(e,t,o,n,i){const s={}.propertyIsEnumerable.call(n,t)?"enumerable":"nonenumerable";s==="enumerable"&&(e[t]=o),i&&s==="nonenumerable"&&Object.defineProperty(e,t,{value:o,enumerable:!1,writable:!0,configurable:!0})}function gf(e,t={}){if(Wv(e))return e.map(i=>gf(i,t));if(!rk(e))return e;const o=Object.getOwnPropertyNames(e),n=Object.getOwnPropertySymbols(e);return[...o,...n].reduce((i,s)=>{if(Wv(t.props)&&!t.props.includes(s))return i;const r=e[s],a=gf(r,t);return ak(i,s,a,e,t.nonenumerable),i},{})}var Kt=class{constructor({dedupe:e=!1}={}){this.classRegistry=new MT,this.symbolRegistry=new Vw(t=>{var o;return(o=t.description)!=null?o:""}),this.customTransformerRegistry=new BT,this.allowedErrorProps=[],this.dedupe=e}serialize(e){const t=new Map,o=Xw(e,t,this,this.dedupe),n={json:o.transformedValue};o.annotations&&(n.meta={...n.meta,values:o.annotations});const i=sk(t,this.dedupe);return i&&(n.meta={...n.meta,referentialEqualities:i}),n}deserialize(e){const{json:t,meta:o}=e;let n=gf(t);return o!=null&&o.values&&(n=tk(n,o.values,this)),o!=null&&o.referentialEqualities&&(n=ok(n,o.referentialEqualities)),n}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,t){this.classRegistry.register(e,t)}registerSymbol(e,t){this.symbolRegistry.register(e,t)}registerCustom(e,t){this.customTransformerRegistry.register({name:t,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}};Kt.defaultInstance=new Kt;Kt.serialize=Kt.defaultInstance.serialize.bind(Kt.defaultInstance);Kt.deserialize=Kt.defaultInstance.deserialize.bind(Kt.defaultInstance);Kt.stringify=Kt.defaultInstance.stringify.bind(Kt.defaultInstance);Kt.parse=Kt.defaultInstance.parse.bind(Kt.defaultInstance);Kt.registerClass=Kt.defaultInstance.registerClass.bind(Kt.defaultInstance);Kt.registerSymbol=Kt.defaultInstance.registerSymbol.bind(Kt.defaultInstance);Kt.registerCustom=Kt.defaultInstance.registerCustom.bind(Kt.defaultInstance);Kt.allowErrorProps=Kt.defaultInstance.allowErrorProps.bind(Kt.defaultInstance);We();We();We();We();We();We();We();We();We();We();We();We();We();We();We();We();We();We();We();We();We();We();We();var Uv,$v;($v=(Uv=rt).__VUE_DEVTOOLS_KIT_MESSAGE_CHANNELS__)!=null||(Uv.__VUE_DEVTOOLS_KIT_MESSAGE_CHANNELS__=[]);var jv,Kv;(Kv=(jv=rt).__VUE_DEVTOOLS_KIT_RPC_CLIENT__)!=null||(jv.__VUE_DEVTOOLS_KIT_RPC_CLIENT__=null);var qv,Qv;(Qv=(qv=rt).__VUE_DEVTOOLS_KIT_RPC_SERVER__)!=null||(qv.__VUE_DEVTOOLS_KIT_RPC_SERVER__=null);var Yv,Jv;(Jv=(Yv=rt).__VUE_DEVTOOLS_KIT_VITE_RPC_CLIENT__)!=null||(Yv.__VUE_DEVTOOLS_KIT_VITE_RPC_CLIENT__=null);var Zv,Xv;(Xv=(Zv=rt).__VUE_DEVTOOLS_KIT_VITE_RPC_SERVER__)!=null||(Zv.__VUE_DEVTOOLS_KIT_VITE_RPC_SERVER__=null);var ey,ty;(ty=(ey=rt).__VUE_DEVTOOLS_KIT_BROADCAST_RPC_SERVER__)!=null||(ey.__VUE_DEVTOOLS_KIT_BROADCAST_RPC_SERVER__=null);We();We();We();We();We();We();We();/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let mf;const al=e=>mf=e,t0=Symbol("pinia");function Ls(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Wn;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Wn||(Wn={}));const Ss=typeof window<"u",oy=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null};function lk(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function Fp(e,t,o){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){i0(n.response,t,o)},n.onerror=function(){console.error("could not download file")},n.send()}function o0(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ac(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const o=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,detail:0,screenX:80,screenY:20,clientX:80,clientY:20,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});e.dispatchEvent(o)}}const Ic=typeof navigator=="object"?navigator:{userAgent:""},n0=/Macintosh/.test(Ic.userAgent)&&/AppleWebKit/.test(Ic.userAgent)&&!/Safari/.test(Ic.userAgent),i0=Ss?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!n0?ck:"msSaveOrOpenBlob"in Ic?uk:dk:()=>{};function ck(e,t="download",o){const n=document.createElement("a");n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?o0(n.href)?Fp(e,t,o):(n.target="_blank",Ac(n)):Ac(n)):(n.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(n.href)},4e4),setTimeout(function(){Ac(n)},0))}function uk(e,t="download",o){if(typeof e=="string")if(o0(e))Fp(e,t,o);else{const n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Ac(n)})}else navigator.msSaveOrOpenBlob(lk(e,o),t)}function dk(e,t,o,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return Fp(e,t,o);const i=e.type==="application/octet-stream",s=/constructor/i.test(String(oy.HTMLElement))||"safari"in oy,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||i&&s||n0)&&typeof FileReader<"u"){const a=new FileReader;a.onloadend=function(){let l=a.result;if(typeof l!="string")throw n=null,new Error("Wrong reader.result type");l=r?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location.assign(l),n=null},a.readAsDataURL(e)}else{const a=URL.createObjectURL(e);n?n.location.assign(a):location.href=a,n=null,setTimeout(function(){URL.revokeObjectURL(a)},4e4)}}function fo(e,t){const o="🍍 "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(o,t):t==="error"?console.error(o):t==="warn"?console.warn(o):console.log(o)}function Dp(e){return"_a"in e&&"install"in e}function s0(){if(!("clipboard"in navigator))return fo("Your browser doesn't support the Clipboard API","error"),!0}function r0(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(fo('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function hk(e){if(!s0())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),fo("Global state copied to clipboard.")}catch(t){if(r0(t))return;fo("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function fk(e){if(!s0())try{a0(e,JSON.parse(await navigator.clipboard.readText())),fo("Global state pasted from clipboard.")}catch(t){if(r0(t))return;fo("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function pk(e){try{i0(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){fo("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let ti;function gk(){ti||(ti=document.createElement("input"),ti.type="file",ti.accept=".json");function e(){return new Promise((t,o)=>{ti.onchange=async()=>{const n=ti.files;if(!n)return t(null);const i=n.item(0);return t(i?{text:await i.text(),file:i}:null)},ti.oncancel=()=>t(null),ti.onerror=o,ti.click()})}return e}async function mk(e){try{const o=await gk()();if(!o)return;const{text:n,file:i}=o;a0(e,JSON.parse(n)),fo(`Global state imported from "${i.name}".`)}catch(t){fo("Failed to import the state from JSON. Check the console for more details.","error"),console.error(t)}}function a0(e,t){for(const o in t){const n=e.state.value[o];n?Object.assign(n,t[o]):e.state.value[o]=t[o]}}function pn(e){return{_custom:{display:e}}}const l0="🍍 Pinia (root)",Mc="_root";function vk(e){return Dp(e)?{id:Mc,label:l0}:{id:e.$id,label:e.$id}}function yk(e){if(Dp(e)){const o=Array.from(e._s.keys()),n=e._s;return{state:o.map(s=>({editable:!0,key:s,value:e.state.value[s]})),getters:o.filter(s=>n.get(s)._getters).map(s=>{const r=n.get(s);return{editable:!1,key:s,value:r._getters.reduce((a,l)=>(a[l]=r[l],a),{})}})}}const t={state:Object.keys(e.$state).map(o=>({editable:!0,key:o,value:e.$state[o]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(o=>({editable:!1,key:o,value:e[o]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(o=>({editable:!0,key:o,value:e[o]}))),t}function Ck(e){return e?Array.isArray(e)?e.reduce((t,o)=>(t.keys.push(o.key),t.operations.push(o.type),t.oldValue[o.key]=o.oldValue,t.newValue[o.key]=o.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:pn(e.type),key:pn(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function bk(e){switch(e){case Wn.direct:return"mutation";case Wn.patchFunction:return"$patch";case Wn.patchObject:return"$patch";default:return"unknown"}}let ur=!0;const Oc=[],ds="pinia:mutations",_o="pinia",{assign:wk}=Object,cu=e=>"🍍 "+e;function Sk(e,t){Hw({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Oc,app:e},o=>{typeof o.now!="function"&&fo("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),o.addTimelineLayer({id:ds,label:"Pinia 🍍",color:15064968}),o.addInspector({id:_o,label:"Pinia 🍍",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{hk(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await fk(t),o.sendInspectorTree(_o),o.sendInspectorState(_o)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{pk(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await mk(t),o.sendInspectorTree(_o),o.sendInspectorState(_o)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:'Reset the state (with "$reset")',action:n=>{const i=t._s.get(n);i?typeof i.$reset!="function"?fo(`Cannot reset "${n}" store because it doesn't have a "$reset" method implemented.`,"warn"):(i.$reset(),fo(`Store "${n}" reset.`)):fo(`Cannot reset "${n}" store because it wasn't found.`,"warn")}}]}),o.on.inspectComponent(n=>{const i=n.componentInstance&&n.componentInstance.proxy;if(i&&i._pStores){const s=n.componentInstance.proxy._pStores;Object.values(s).forEach(r=>{n.instanceData.state.push({type:cu(r.$id),key:"state",editable:!0,value:r._isOptionsAPI?{_custom:{value:yt(r.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>r.$reset()}]}}:Object.keys(r.$state).reduce((a,l)=>(a[l]=r.$state[l],a),{})}),r._getters&&r._getters.length&&n.instanceData.state.push({type:cu(r.$id),key:"getters",editable:!1,value:r._getters.reduce((a,l)=>{try{a[l]=r[l]}catch(c){a[l]=c}return a},{})})})}}),o.on.getInspectorTree(n=>{if(n.app===e&&n.inspectorId===_o){let i=[t];i=i.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?i.filter(s=>"$id"in s?s.$id.toLowerCase().includes(n.filter.toLowerCase()):l0.toLowerCase().includes(n.filter.toLowerCase())):i).map(vk)}}),globalThis.$pinia=t,o.on.getInspectorState(n=>{if(n.app===e&&n.inspectorId===_o){const i=n.nodeId===Mc?t:t._s.get(n.nodeId);if(!i)return;i&&(n.nodeId!==Mc&&(globalThis.$store=yt(i)),n.state=yk(i))}}),o.on.editInspectorState(n=>{if(n.app===e&&n.inspectorId===_o){const i=n.nodeId===Mc?t:t._s.get(n.nodeId);if(!i)return fo(`store "${n.nodeId}" not found`,"error");const{path:s}=n;Dp(i)?s.unshift("state"):(s.length!==1||!i._customProperties.has(s[0])||s[0]in i.$state)&&s.unshift("$state"),ur=!1,n.set(i,s,n.state.value),ur=!0}}),o.on.editComponentState(n=>{if(n.type.startsWith("🍍")){const i=n.type.replace(/^🍍\s*/,""),s=t._s.get(i);if(!s)return fo(`store "${i}" not found`,"error");const{path:r}=n;if(r[0]!=="state")return fo(`Invalid path for store "${i}":
${r}
Only state can be modified.`);r[0]="$state",ur=!1,n.set(s,r,n.state.value),ur=!0}})})}function xk(e,t){Oc.includes(cu(t.$id))||Oc.push(cu(t.$id)),Hw({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Oc,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},o=>{const n=typeof o.now=="function"?o.now.bind(o):Date.now;t.$onAction(({after:r,onError:a,name:l,args:c})=>{const u=c0++;o.addTimelineEvent({layerId:ds,event:{time:n(),title:"🛫 "+l,subtitle:"start",data:{store:pn(t.$id),action:pn(l),args:c},groupId:u}}),r(d=>{Wi=void 0,o.addTimelineEvent({layerId:ds,event:{time:n(),title:"🛬 "+l,subtitle:"end",data:{store:pn(t.$id),action:pn(l),args:c,result:d},groupId:u}})}),a(d=>{Wi=void 0,o.addTimelineEvent({layerId:ds,event:{time:n(),logType:"error",title:"💥 "+l,subtitle:"end",data:{store:pn(t.$id),action:pn(l),args:c,error:d},groupId:u}})})},!0),t._customProperties.forEach(r=>{eo(()=>zi(t[r]),(a,l)=>{o.notifyComponentUpdate(),o.sendInspectorState(_o),ur&&o.addTimelineEvent({layerId:ds,event:{time:n(),title:"Change",subtitle:r,data:{newValue:a,oldValue:l},groupId:Wi}})},{deep:!0})}),t.$subscribe(({events:r,type:a},l)=>{if(o.notifyComponentUpdate(),o.sendInspectorState(_o),!ur)return;const c={time:n(),title:bk(a),data:wk({store:pn(t.$id)},Ck(r)),groupId:Wi};a===Wn.patchFunction?c.subtitle="⤵️":a===Wn.patchObject?c.subtitle="🧩":r&&!Array.isArray(r)&&(c.subtitle=r.type),r&&(c.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:r}}),o.addTimelineEvent({layerId:ds,event:c})},{detached:!0,flush:"sync"});const i=t._hotUpdate;t._hotUpdate=li(r=>{i(r),o.addTimelineEvent({layerId:ds,event:{time:n(),title:"🔥 "+t.$id,subtitle:"HMR update",data:{store:pn(t.$id),info:pn("HMR update")}}}),o.notifyComponentUpdate(),o.sendInspectorTree(_o),o.sendInspectorState(_o)});const{$dispose:s}=t;t.$dispose=()=>{s(),o.notifyComponentUpdate(),o.sendInspectorTree(_o),o.sendInspectorState(_o),o.getSettings().logStoreChanges&&fo(`Disposed "${t.$id}" store 🗑`)},o.notifyComponentUpdate(),o.sendInspectorTree(_o),o.sendInspectorState(_o),o.getSettings().logStoreChanges&&fo(`"${t.$id}" store installed 🆕`)})}let c0=0,Wi;function ny(e,t,o){const n=t.reduce((i,s)=>(i[s]=yt(e)[s],i),{});for(const i in n)e[i]=function(){const s=c0,r=o?new Proxy(e,{get(...l){return Wi=s,Reflect.get(...l)},set(...l){return Wi=s,Reflect.set(...l)}}):e;Wi=s;const a=n[i].apply(r,arguments);return Wi=void 0,a}}function Rk({app:e,store:t,options:o}){if(!t.$id.startsWith("__hot:")){if(t._isOptionsAPI=!!o.state,!t._p._testing){ny(t,Object.keys(o.actions),t._isOptionsAPI);const n=t._hotUpdate;yt(t)._hotUpdate=function(i){n.apply(this,arguments),ny(t,Object.keys(i._hmrPayload.actions),!!t._isOptionsAPI)}}xk(e,t)}}function _k(){const e=NC(!0),t=e.run(()=>De({}));let o=[],n=[];const i=li({install(s){al(i),i._a=s,s.provide(t0,i),s.config.globalProperties.$pinia=i,Ss&&Sk(s,i),n.forEach(r=>o.push(r)),n=[]},use(s){return this._a?o.push(s):n.push(s),this},_p:o,_a:null,_e:e,_s:new Map,state:t});return Ss&&typeof Proxy<"u"&&i.use(Rk),i}function u0(e,t){for(const o in t){const n=t[o];if(!(o in e))continue;const i=e[o];Ls(i)&&Ls(n)&&!Wt(n)&&!bn(n)?e[o]=u0(i,n):e[o]=n}return e}const Ek=()=>{};function iy(e,t,o,n=Ek){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),n())};return!o&&HC()&&M_(i),i}function ir(e,...t){e.slice().forEach(o=>{o(...t)})}const Pk=e=>e(),sy=Symbol(),ih=Symbol();function vf(e,t){e instanceof Map&&t instanceof Map?t.forEach((o,n)=>e.set(n,o)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const o in t){if(!t.hasOwnProperty(o))continue;const n=t[o],i=e[o];Ls(i)&&Ls(n)&&e.hasOwnProperty(o)&&!Wt(n)&&!bn(n)?e[o]=vf(i,n):e[o]=n}return e}const Fk=Symbol("pinia:skipHydration");function Dk(e){return!Ls(e)||!Object.prototype.hasOwnProperty.call(e,Fk)}const{assign:en}=Object;function ry(e){return!!(Wt(e)&&e.effect)}function ay(e,t,o,n){const{state:i,actions:s,getters:r}=t,a=o.state.value[e];let l;function c(){!a&&!n&&(o.state.value[e]=i?i():{});const u=Gh(n?De(i?i():{}).value:o.state.value[e]);return en(u,s,Object.keys(r||{}).reduce((d,h)=>(h in u&&console.warn(`[🍍]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${e}".`),d[h]=li(Ze(()=>{al(o);const f=o._s.get(e);return r[h].call(f,f)})),d),{}))}return l=yf(e,c,t,o,n,!0),l}function yf(e,t,o={},n,i,s){let r;const a=en({actions:{}},o);if(!n._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=O=>{c?f=O:c==!1&&!z._hotUpdating&&(Array.isArray(f)?f.push(O):console.error("🍍 debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let c,u,d=[],h=[],f;const v=n.state.value[e];!s&&!v&&!i&&(n.state.value[e]={});const m=De({});let b;function S(O){let ie;c=u=!1,f=[],typeof O=="function"?(O(n.state.value[e]),ie={type:Wn.patchFunction,storeId:e,events:f}):(vf(n.state.value[e],O),ie={type:Wn.patchObject,payload:O,storeId:e,events:f});const N=b=Symbol();Pr().then(()=>{b===N&&(c=!0)}),u=!0,ir(d,ie,n.state.value[e])}const R=s?function(){const{state:ie}=o,N=ie?ie():{};this.$patch(oe=>{en(oe,N)})}:()=>{throw new Error(`🍍: Store "${e}" is built using the setup syntax and does not implement $reset().`)};function _(){r.stop(),d=[],h=[],n._s.delete(e)}const M=(O,ie="")=>{if(sy in O)return O[ih]=ie,O;const N=function(){al(n);const oe=Array.from(arguments),F=[],Y=[];function J(U){F.push(U)}function L(U){Y.push(U)}ir(h,{args:oe,name:N[ih],store:z,after:J,onError:L});let ce;try{ce=O.apply(this&&this.$id===e?this:z,oe)}catch(U){throw ir(Y,U),U}return ce instanceof Promise?ce.then(U=>(ir(F,U),U)).catch(U=>(ir(Y,U),Promise.reject(U))):(ir(F,ce),ce)};return N[sy]=!0,N[ih]=ie,N},I=li({actions:{},getters:{},state:[],hotState:m}),W={_p:n,$id:e,$onAction:iy.bind(null,h),$patch:S,$reset:R,$subscribe(O,ie={}){const N=iy(d,O,ie.detached,()=>oe()),oe=r.run(()=>eo(()=>n.state.value[e],F=>{(ie.flush==="sync"?u:c)&&O({storeId:e,type:Wn.direct,events:f},F)},en({},l,ie)));return N},$dispose:_},z=xl(en({_hmrPayload:I,_customProperties:li(new Set)},W));n._s.set(e,z);const K=(n._a&&n._a.runWithContext||Pk)(()=>n._e.run(()=>(r=NC()).run(()=>t({action:M}))));for(const O in K){const ie=K[O];if(Wt(ie)&&!ry(ie)||bn(ie))i?m.value[O]=$d(K,O):s||(v&&Dk(ie)&&(Wt(ie)?ie.value=v[O]:vf(ie,v[O])),n.state.value[e][O]=ie),I.state.push(O);else if(typeof ie=="function"){const N=i?ie:M(ie,O);K[O]=N,I.actions[O]=ie,a.actions[O]=ie}else ry(ie)&&(I.getters[O]=s?o.getters[O]:ie,Ss&&(K._getters||(K._getters=li([]))).push(O))}if(en(z,K),en(yt(z),K),Object.defineProperty(z,"$state",{get:()=>i?m.value:n.state.value[e],set:O=>{if(i)throw new Error("cannot set hotState");S(ie=>{en(ie,O)})}}),z._hotUpdate=li(O=>{z._hotUpdating=!0,O._hmrPayload.state.forEach(ie=>{if(ie in z.$state){const N=O.$state[ie],oe=z.$state[ie];typeof N=="object"&&Ls(N)&&Ls(oe)?u0(N,oe):O.$state[ie]=oe}z[ie]=$d(O.$state,ie)}),Object.keys(z.$state).forEach(ie=>{ie in O.$state||delete z[ie]}),c=!1,u=!1,n.state.value[e]=$d(O._hmrPayload,"hotState"),u=!0,Pr().then(()=>{c=!0});for(const ie in O._hmrPayload.actions){const N=O[ie];z[ie]=M(N,ie)}for(const ie in O._hmrPayload.getters){const N=O._hmrPayload.getters[ie],oe=s?Ze(()=>(al(n),N.call(z,z))):N;z[ie]=oe}Object.keys(z._hmrPayload.getters).forEach(ie=>{ie in O._hmrPayload.getters||delete z[ie]}),Object.keys(z._hmrPayload.actions).forEach(ie=>{ie in O._hmrPayload.actions||delete z[ie]}),z._hmrPayload=O._hmrPayload,z._getters=O._getters,z._hotUpdating=!1}),Ss){const O={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(ie=>{Object.defineProperty(z,ie,en({value:z[ie]},O))})}return n._p.forEach(O=>{if(Ss){const ie=r.run(()=>O({store:z,app:n._a,pinia:n,options:a}));Object.keys(ie||{}).forEach(N=>z._customProperties.add(N)),en(z,ie)}else en(z,r.run(()=>O({store:z,app:n._a,pinia:n,options:a})))}),z.$state&&typeof z.$state=="object"&&typeof z.$state.constructor=="function"&&!z.$state.constructor.toString().includes("[native code]")&&console.warn(`[🍍]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${z.$id}".`),v&&s&&o.hydrate&&o.hydrate(z.$state,v),c=!0,u=!0,z}/*! #__NO_SIDE_EFFECTS__ */function bi(e,t,o){let n;const i=typeof t=="function";n=i?o:t;function s(r,a){const l=i1();if(r=r||(l?rn(t0,null):null),r&&al(r),!mf)throw new Error(`[🍍]: "getActivePinia()" was called but there was no active Pinia. Are you trying to use a store before calling "app.use(pinia)"?
See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.
This will fail in production.`);r=mf,r._s.has(e)||(i?yf(e,t,n,r):ay(e,n,r),s._pinia=r);const c=r._s.get(e);if(a){const u="__hot:"+e,d=i?yf(u,t,n,r,!0):ay(u,en({},n),r,!0);a._hotUpdate(d),delete r.state.value[u],r._s.delete(u)}if(Ss){const u=Gn();if(u&&u.proxy&&!a){const d=u.proxy,h="_pStores"in d?d._pStores:d._pStores={};h[e]=c}}return c}return s.$id=e,s}const Lr=bi("help",{state:()=>({helpContent:{transferCalculator:{title:"Transfer Calculator Help",content:`
                    <h2>Transfer Calculator</h2>
                    <p>The Transfer Calculator helps you calculate optimal trading rounds for commodity exchanges on fleet carriers.</p>
                    
                    <h3>Key Features</h3>
                    <ul>
                        <li><strong>Payment Direction:</strong> Choose between paying out to haulers or receiving from clients</li>
                        <li><strong>Commodity Selection:</strong> Select the commodity to use for the transfer</li>
                        <li><strong>Cargo Size:</strong> Enter the cargo bay size of the ship</li>
                        <li><strong>Amount:</strong> Enter the total amount to transfer (max 2 billion credits)</li>
                    </ul>

                    <h3>How It Works</h3>
                    <p>The calculator determines the optimal number of trading rounds needed based on:</p>
                    <ul>
                        <li>Maximum transaction limit (2 billion credits)</li>
                        <li>Cargo bay size</li>
                        <li>Commodity price</li>
                        <li>Payment direction</li>
                    </ul>

                    <h3>Results</h3>
                    <p>The calculator will show:</p>
                    <ul>
                        <li>Number of trading rounds needed</li>
                        <li>Units per round</li>
                        <li>Value per round</li>
                        <li>Total units and value</li>
                        <li>Any rounding errors</li>
                    </ul>
                `},jumpCalculator:{title:"Fleet Carrier Jump Calculator Help",content:`
                    <h2>Fleet Carrier Jump Calculator</h2>
                    <p>Calculate optimal jump windows for fleet carriers to coordinate multiple carriers at the same location.</p>
                    
                    <h3>Input Fields</h3>
                    <ul>
                        <li><strong>Server Time:</strong> Current server time in HH:MM:SS format</li>
                        <li><strong>Time Remaining:</strong> Time until jump in HH:MM:SS format</li>
                        <li><strong>Time Type:</strong> Select between jump or cooldown time</li>
                    </ul>

                    <h3>Time Formats</h3>
                    <p>The calculator accepts various time formats:</p>
                    <ul>
                        <li>HH:MM:SS (e.g., 01:30:00)</li>
                        <li>HH:MM (e.g., 01:30)</li>
                        <li>Hours with units (e.g., 1h 30m)</li>
                        <li>Minutes only (e.g., 90)</li>
                    </ul>

                    <h3>Results</h3>
                    <p>The calculator will show:</p>
                    <ul>
                        <li>Exact jump time</li>
                        <li>Window for other carriers to jump</li>
                        <li>Formatted time in UTC</li>
                    </ul>
                `},channelHelper:{title:"Channel Name Helper Help",content:`
                    <h2>Channel Name Helper</h2>
                    <p>Format Discord channel names according to specific rules for different channel types.</p>
                    
                    <h3>Channel Types</h3>
                    <ul>
                        <li><strong>Orders:</strong> {status emoji}{FC Initial}-order-{#}-{customer}</li>
                        <li><strong>FAC:</strong> fac-{FC Initial}-{#}</li>
                        <li><strong>Payouts:</strong> {FC Initial}-ticket-{#}</li>
                    </ul>

                    <h3>Status Emojis</h3>
                    <ul>
                        <li>🟢 - Open</li>
                        <li>🟡 - In Progress</li>
                        <li>🔵 - Assigned</li>
                        <li>✅ - Completed</li>
                        <li>❌ - Cancelled</li>
                    </ul>

                    <h3>Usage</h3>
                    <ol>
                        <li>Select the channel type</li>
                        <li>Enter the required information</li>
                        <li>Click "Generate" to create the channel name</li>
                        <li>Use "Copy" to copy the formatted name to clipboard</li>
                    </ol>
                `},quoteGenerator:{title:"Quote Generator Help",content:`
                    <h2>Quote Generator</h2>
                    <p>Convert order text into formatted quotes with automatic pricing calculations.</p>
                    
                    <h3>Pricing Rules</h3>
                    <ul>
                        <li><strong>Base Price:</strong> Galactic Average + 100k per commodity</li>
                        <li><strong>Distance Surcharge:</strong> 10% per 500 LY from Sol</li>
                        <li><strong>Planetary Site Uplift:</strong> 10% additional for planetary deliveries</li>
                    </ul>

                    <h3>Input Format</h3>
                    <p>Enter order details in the following format:</p>
                    <pre>
Commander: [Name]
System: [System Name]
Destination: [Station/Planet]
Commodities:
- [Quantity] [Commodity Name]
- [Quantity] [Commodity Name]
                    </pre>

                    <h3>Features</h3>
                    <ul>
                        <li>Automatic commodity validation</li>
                        <li>Fuzzy matching for commodity names</li>
                        <li>Price breakdown by commodity</li>
                        <li>Total cost calculation</li>
                        <li>Export to clipboard</li>
                    </ul>
                `},messageTemplate:{title:"Message Template System Help",content:`
                    <h2>Message Template System</h2>
                    <p>Create and manage Discord message templates with dynamic placeholders.</p>
                    
                    <h3>Available Placeholders</h3>
                    <ul>
                        <li><strong>Fleet Carrier:</strong> {{fleetCarrier}}, {{fleetCarrierCommander}}, {{fleetCarrierLocation}}</li>
                        <li><strong>Order Details:</strong> {{amount}}, {{clientCommander}}, {{systemName}}, {{orderNumber}}</li>
                        <li><strong>Operation:</strong> {{operation:Loading|Unloading}}</li>
                        <li><strong>Priority:</strong> {{priority:Low|Medium|High|Urgent}}</li>
                        <li><strong>Status:</strong> {{status:Pending|In Progress|Completed|Cancelled}}</li>
                        <li><strong>Commodity:</strong> {{commodity:option1|option2|...}}</li>
                        <li><strong>Delivery Type:</strong> {{deliveryType:Station|Planetary|Settlement|Outpost}}</li>
                        <li><strong>Payment Status:</strong> {{paymentStatus:Pending|Partial|Complete}}</li>
                    </ul>

                    <h3>Template Management</h3>
                    <ul>
                        <li>Create new templates</li>
                        <li>Edit existing templates</li>
                        <li>Delete templates</li>
                        <li>Preview with current data</li>
                        <li>Copy to clipboard</li>
                    </ul>

                    <h3>Usage</h3>
                    <ol>
                        <li>Click "New Template" to create a template</li>
                        <li>Enter template name and description</li>
                        <li>Add content with placeholders</li>
                        <li>Use the placeholder buttons to insert variables</li>
                        <li>Save the template</li>
                        <li>Use "Copy to Clipboard" to use the template</li>
                    </ol>
                `},orderManager:{title:"Order Management System Help",content:`
                    <h2>Order Management System</h2>
                    <p>Track and manage corporation orders with comprehensive status tracking.</p>
                    
                    <h3>Order Statuses</h3>
                    <ul>
                        <li><strong>Open:</strong> New order awaiting assignment</li>
                        <li><strong>Assigned:</strong> Assigned to a subcontractor</li>
                        <li><strong>In Progress:</strong> Work has begun</li>
                        <li><strong>Completed:</strong> Order finished successfully</li>
                        <li><strong>Cancelled:</strong> Order cancelled</li>
                    </ul>

                    <h3>Features</h3>
                    <ul>
                        <li>Order creation and tracking</li>
                        <li>Task assignment and management</li>
                        <li>Priority levels (Low, Medium, High, Urgent)</li>
                        <li>Subcontractor management</li>
                        <li>Order history tracking</li>
                        <li>Export functionality</li>
                    </ul>

                    <h3>Task Management</h3>
                    <ul>
                        <li>Create subtasks for orders</li>
                        <li>Assign tasks to subcontractors</li>
                        <li>Track task progress</li>
                        <li>Update task status</li>
                        <li>View task history</li>
                    </ul>
                `},deliveryTracker:{title:"Delivery Tracker Help",content:`
                    <h2>Delivery Tracker</h2>
                    <p>Track delivery contributions from log files and manage station data.</p>
                    
                    <h3>Features</h3>
                    <ul>
                        <li>Log file processing</li>
                        <li>Contribution tracking</li>
                        <li>Station name mapping</li>
                        <li>Export to JSON</li>
                        <li>Timestamp formatting</li>
                        <li>Amount formatting</li>
                    </ul>

                    <h3>Usage</h3>
                    <ol>
                        <li>Select log files to process</li>
                        <li>Click "Process Logs" to analyze the files</li>
                        <li>View contribution data</li>
                        <li>Export data as JSON if needed</li>
                    </ol>

                    <h3>Log File Format</h3>
                    <p>The tracker processes Elite Dangerous journal files containing:</p>
                    <ul>
                        <li>Market events</li>
                        <li>Docking events</li>
                        <li>Colonization events</li>
                        <li>Contribution events</li>
                    </ul>
                `},discordManager:{title:"Discord Management Help",content:`
                    <h2>Discord Management</h2>
                    <p>Manage Discord channels, send messages, and track active message status.</p>
                    
                    <h3>Channel Management</h3>
                    <ul>
                        <li><strong>Add Channel:</strong> Configure Discord channels with webhook integration</li>
                        <li><strong>Channel ID:</strong> Right-click on Discord channel and select "Copy Channel ID"</li>
                        <li><strong>Webhook:</strong> Select from configured webhooks for message delivery</li>
                        <li><strong>Enable/Disable:</strong> Toggle channels on/off without deleting configuration</li>
                        <li><strong>Test:</strong> Send test messages to verify webhook functionality</li>
                    </ul>

                    <h3>Message Management</h3>
                    <ul>
                        <li><strong>Manual Messages:</strong> Send custom messages with rich embeds</li>
                        <li><strong>Active Messages:</strong> View list of recently sent messages</li>
                        <li><strong>Message Status:</strong> Periodic checking for message existence</li>
                        <li><strong>Rich Embeds:</strong> Create formatted messages with titles, descriptions, and colors</li>
                    </ul>

                    <h3>Webhook Integration</h3>
                    <ul>
                        <li>Webhooks are stored securely using encrypted localStorage</li>
                        <li>Channel-to-webhook mapping for organized message delivery</li>
                        <li>Support for multiple webhooks per channel configuration</li>
                    </ul>

                    <h3>Features</h3>
                    <ul>
                        <li>Order status notifications</li>
                        <li>Delivery completion alerts</li>
                        <li>Custom message templates</li>
                        <li>Message consistency checking</li>
                        <li>Channel health monitoring</li>
                    </ul>
                `}}}),getters:{getHelpContent:e=>t=>e.helpContent[t]||null}}),To=(e,t)=>{const o=e.__vccOpts||e;for(const[n,i]of t)o[n]=i;return o},Tk={__name:"HelpButton",setup(e,{expose:t}){t();const o=Ar(),n=Lr(),i=De(!1),s=Ze(()=>{const a=o.meta.helpId;return a?n.getHelpContent(a):null}),r={route:o,helpStore:n,showHelp:i,helpContent:s,ref:De,computed:Ze,get useRoute(){return Ar},get useHelpStore(){return Lr}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},kk={class:"relative"},Ak=["title"],Ik={class:"flex justify-between items-center p-6 border-b border-gray-200"},Mk={class:"text-xl font-semibold text-gray-900"},Ok={class:"flex-1 overflow-y-auto p-6"},Lk=["innerHTML"],Bk={key:1,class:"text-gray-500"};function Nk(e,t,o,n,i,s){var r,a,l;return ge(),me("div",kk,[y("button",{onClick:t[0]||(t[0]=c=>n.showHelp=!n.showHelp),class:"p-2 text-white hover:text-gray-200 rounded-full hover:bg-slate-700 transition-colors",title:((r=n.helpContent)==null?void 0:r.title)||"Help"},t[4]||(t[4]=[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor"},[y("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)]),8,Ak),we(" Help Modal "),n.showHelp?(ge(),me("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[3]||(t[3]=c=>n.showHelp=!1)},[y("div",{class:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:t[2]||(t[2]=Qt(()=>{},["stop"]))},[y("div",Ik,[y("h3",Mk,ye(((a=n.helpContent)==null?void 0:a.title)||"Help"),1),y("button",{onClick:t[1]||(t[1]=c=>n.showHelp=!1),class:"text-gray-500 hover:text-gray-700"},t[5]||(t[5]=[y("span",{class:"text-2xl"},"×",-1)]))]),y("div",Ok,[(l=n.helpContent)!=null&&l.content?(ge(),me("div",{key:0,innerHTML:n.helpContent.content,class:"prose prose-sm max-w-none text-gray-900"},null,8,Lk)):(ge(),me("div",Bk,"No help content available for this page."))])])])):we("v-if",!0)])}const d0=To(Tk,[["render",Nk],["__scopeId","data-v-dd42d425"],["__file","/app/src/js/components/HelpButton.vue"]]),pi=bi("secret",{state:()=>({secrets:[],consentModal:{show:!1,secretName:"",purpose:"",resolve:null,reject:null}}),getters:{getSecretMetadata:e=>t=>e.secrets.find(o=>o.name===t),getAllSecretMetadata:e=>e.secrets},actions:{async storeSecret(e,t,o="",n=null){try{const i=await this.encryptSecret(t);localStorage.setItem(`secret_${e}`,i);const s=this.secrets.findIndex(a=>a.name===e),r={name:e,description:o,lastUpdated:new Date().toISOString(),type:n||this.detectSecretType(t)};return s>=0?this.secrets[s]=r:this.secrets.push(r),this.saveSecretMetadata(),{success:!0,message:"Secret stored securely"}}catch(i){return console.error("Error storing secret:",i),{success:!1,message:`Failed to store secret: ${i.message}`}}},async getSecret(e,t){return new Promise((o,n)=>{if(!this.getSecretMetadata(e)){o({success:!1,message:"Secret not found"});return}this.consentModal={show:!0,secretName:e,purpose:t,resolve:s=>{this.consentModal.show=!1,o(s)},reject:s=>{this.consentModal.show=!1,n(s)}}})},async handleConsent(e){const{secretName:t,resolve:o}=this.consentModal;if(!e){o({success:!1,message:"Access denied by user"});return}try{const n=localStorage.getItem(`secret_${t}`);if(!n){o({success:!1,message:"Secret not found in storage"});return}const i=await this.decryptSecret(n);o({success:!0,secret:i})}catch(n){console.error("Error retrieving secret:",n),o({success:!1,message:`Failed to retrieve secret: ${n.message}`})}},async deleteSecret(e){try{return localStorage.removeItem(`secret_${e}`),this.secrets=this.secrets.filter(t=>t.name!==e),this.saveSecretMetadata(),{success:!0,message:"Secret deleted successfully"}}catch(t){return console.error("Error deleting secret:",t),{success:!1,message:`Failed to delete secret: ${t.message}`}}},detectSecretType(e){return e.startsWith("https://discord.com/api/webhooks/")?"discord-webhook":e.startsWith("https://hooks.slack.com/")?"slack-webhook":e.includes("@")&&e.includes(".")?"email":e.startsWith("sk-")||e.startsWith("pk-")?"api-key":"generic"},async encryptSecret(e){try{const t="secret-storage-key",o=new TextEncoder,n=o.encode(e),i=await crypto.subtle.importKey("raw",o.encode(t),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),s=await crypto.subtle.deriveKey({name:"PBKDF2",salt:o.encode("secret-salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),r=crypto.getRandomValues(new Uint8Array(12)),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},s,n),l=new Uint8Array(r.length+a.byteLength);return l.set(r),l.set(new Uint8Array(a),r.length),btoa(String.fromCharCode(...l))}catch(t){throw console.error("Encryption failed:",t),new Error("Failed to encrypt secret")}},async decryptSecret(e){try{const t=new Uint8Array(atob(e).split("").map(u=>u.charCodeAt(0))),o=t.slice(0,12),n=t.slice(12),i="secret-storage-key",s=new TextEncoder,r=await crypto.subtle.importKey("raw",s.encode(i),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),a=await crypto.subtle.deriveKey({name:"PBKDF2",salt:s.encode("secret-salt"),iterations:1e5,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),l=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},a,n);return new TextDecoder().decode(l)}catch(t){throw console.error("Decryption failed:",t),new Error("Failed to decrypt secret")}},loadSecretMetadata(){try{const e=localStorage.getItem("secret-metadata");e&&(this.secrets=JSON.parse(e))}catch(e){console.error("Failed to load secret metadata:",e)}},saveSecretMetadata(){try{localStorage.setItem("secret-metadata",JSON.stringify(this.secrets))}catch(e){console.error("Failed to save secret metadata:",e)}}}}),Hk={__name:"SecretConsentModal",setup(e,{expose:t}){t();const o=pi(),n=Ze(()=>o.consentModal.show),i=Ze(()=>o.consentModal.secretName),s=Ze(()=>o.consentModal.purpose),a={secretStore:o,show:n,secretName:i,purpose:s,handleConsent:l=>{o.handleConsent(l)},computed:Ze,get useSecretStore(){return pi}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},Gk={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Vk={class:"bg-white rounded-lg p-6 max-w-md w-full"},zk={class:"mb-4"},Wk={class:"bg-gray-50 p-3 rounded-md"},Uk={class:"text-sm"},$k={class:"font-medium text-gray-900"},jk={class:"text-gray-600 mt-1"},Kk={class:"flex gap-3"};function qk(e,t,o,n,i,s){return n.show?(ge(),me("div",Gk,[y("div",Vk,[t[3]||(t[3]=Hn('<div class="flex items-center mb-4" data-v-61530088><div class="flex-shrink-0" data-v-61530088><svg class="h-8 w-8 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-61530088><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" data-v-61530088></path></svg></div><div class="ml-3" data-v-61530088><h3 class="text-lg font-medium text-gray-900" data-v-61530088>Secret Access Request</h3></div></div>',1)),y("div",zk,[t[2]||(t[2]=y("p",{class:"text-sm text-gray-600 mb-2"}," An application is requesting access to a stored secret: ",-1)),y("div",Wk,[y("div",Uk,[y("div",$k,"Secret: "+ye(n.secretName),1),y("div",jk,"Purpose: "+ye(n.purpose),1)])])]),t[4]||(t[4]=Hn('<div class="bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-4" data-v-61530088><div class="flex" data-v-61530088><div class="flex-shrink-0" data-v-61530088><svg class="h-5 w-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20" data-v-61530088><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" data-v-61530088></path></svg></div><div class="ml-3" data-v-61530088><p class="text-sm text-yellow-800" data-v-61530088><strong data-v-61530088>Security Notice:</strong> Only grant access if you trust this application and understand what it will do with this secret. </p></div></div></div>',1)),y("div",Kk,[y("button",{onClick:t[0]||(t[0]=r=>n.handleConsent(!1)),class:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors"}," Deny Access "),y("button",{onClick:t[1]||(t[1]=r=>n.handleConsent(!0)),class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Grant Access ")])])])):we("v-if",!0)}const Qk=To(Hk,[["render",qk],["__scopeId","data-v-61530088"],["__file","/app/src/js/components/SecretConsentModal.vue"]]),Yk={__name:"App",setup(e,{expose:t}){t();const o=Ms(),n=Lr(),i=De(!1),s=De(!1),r=Ze(()=>o.options.routes.filter(m=>m.name&&m.path!=="/")),a=["Workspace","Order Management","Jump Calculator","Discord Management"],l=Ze(()=>r.value.filter(m=>a.includes(m.name))),c=Ze(()=>r.value.filter(m=>!a.includes(m.name))),u=m=>{m.target.closest(".relative")||(i.value=!1,s.value=!1)};Xt(()=>{document.addEventListener("click",u)}),Rn(()=>{document.removeEventListener("click",u)});const d={"/transfer":"transferCalculator","/jump":"jumpCalculator","/channel":"channelHelper","/quote":"quoteGenerator","/templates":"messageTemplate","/order":"orderManager","/delivery":"deliveryTracker","/discord":"discordManager"},h=Ze(()=>{var b;const m=d[o.currentRoute.value.path];return m&&((b=n.getHelpContent(m))==null?void 0:b.content)||""}),f=Ze(()=>{var b;const m=d[o.currentRoute.value.path];return m&&((b=n.getHelpContent(m))==null?void 0:b.title)||"Help"}),v={router:o,helpStore:n,showMobileMenu:i,showMoreMenu:s,routes:r,priorityRoutes:a,visibleRoutes:l,hiddenRoutes:c,handleClickOutside:u,routeToHelpId:d,currentHelpContent:h,currentHelpTitle:f,computed:Ze,ref:De,onMounted:Xt,onUnmounted:Rn,get useRouter(){return Ms},get useHelpStore(){return Lr},HelpButton:d0,SecretConsentModal:Qk};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}},Jk={class:"min-h-screen bg-gray-50"},Zk={class:"bg-slate-800 text-white py-4 mb-8 -mx-4 sm:-mx-6 lg:-mx-8"},Xk={class:"px-4 sm:px-6 lg:px-8 flex justify-between items-center"},eA={class:"flex items-center gap-4"},tA={class:"hidden lg:flex gap-2"},oA={class:"lg:hidden relative"},nA={key:0,class:"absolute right-0 top-full mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-50"},iA={class:"py-1"},sA={key:0,class:"hidden lg:block relative"},rA={key:0,class:"absolute right-0 top-full mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-50"},aA={class:"py-1"},lA={class:"px-4 sm:px-6 lg:px-8"};function cA(e,t,o,n,i,s){const r=Wh("router-link"),a=Wh("router-view");return ge(),me("div",Jk,[y("header",Zk,[y("div",Xk,[t[4]||(t[4]=y("h1",{class:"text-2xl font-bold"},"FREIGHTHelper",-1)),y("div",eA,[we(" Desktop Navigation "),y("nav",tA,[(ge(!0),me(Ct,null,Tt(n.visibleRoutes,l=>(ge(),Pc(r,{key:l.path,to:l.path,class:Ft(["px-3 py-2 rounded bg-blue-500 hover:bg-blue-600 transition-colors duration-200 text-sm",{"bg-blue-700 font-semibold":e.$route.path===l.path}])},{default:ka(()=>[so(ye(l.name),1)]),_:2},1032,["to","class"]))),128))]),we(" Mobile/Compact Navigation "),y("div",oA,[y("button",{onClick:t[0]||(t[0]=l=>n.showMobileMenu=!n.showMobileMenu),class:"px-3 py-2 rounded bg-blue-500 hover:bg-blue-600 transition-colors duration-200 text-sm"},ye(n.showMobileMenu?"✕":"☰")+" Menu ",1),we(" Mobile Menu Dropdown "),n.showMobileMenu?(ge(),me("div",nA,[y("div",iA,[(ge(!0),me(Ct,null,Tt(n.routes,l=>(ge(),Pc(r,{key:l.path,to:l.path,onClick:t[1]||(t[1]=c=>n.showMobileMenu=!1),class:Ft(["block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",{"bg-blue-50 text-blue-700 font-semibold":e.$route.path===l.path}])},{default:ka(()=>[so(ye(l.name),1)]),_:2},1032,["to","class"]))),128))])])):we("v-if",!0)]),we(" Desktop More Menu "),n.hiddenRoutes.length>0?(ge(),me("div",sA,[y("button",{onClick:t[2]||(t[2]=l=>n.showMoreMenu=!n.showMoreMenu),class:"px-3 py-2 rounded bg-gray-600 hover:bg-gray-700 transition-colors duration-200 text-sm"}," More ▼ "),we(" More Menu Dropdown "),n.showMoreMenu?(ge(),me("div",rA,[y("div",aA,[(ge(!0),me(Ct,null,Tt(n.hiddenRoutes,l=>(ge(),Pc(r,{key:l.path,to:l.path,onClick:t[3]||(t[3]=c=>n.showMoreMenu=!1),class:Ft(["block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",{"bg-blue-50 text-blue-700 font-semibold":e.$route.path===l.path}])},{default:ka(()=>[so(ye(l.name),1)]),_:2},1032,["to","class"]))),128))])])):we("v-if",!0)])):we("v-if",!0),jt(n.HelpButton)])])]),y("main",lA,[jt(a,{class:"bg-white rounded-lg shadow-md p-8 mb-8"})]),we(" Global Secret Consent Modal "),jt(n.SecretConsentModal)])}const uA=To(Yk,[["render",cA],["__file","/app/src/js/App.vue"]]),dA=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,hA=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,fA=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function pA(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){gA(e);return}return t}function gA(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function mA(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const o=e.trim();if(o.length<=9)switch(o.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!fA.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(dA.test(e)||hA.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,pA)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}function vA(e,t){if(e==null)return;let o=e;for(let n=0;n<t.length;n++){if(o==null||o[t[n]]==null)return;o=o[t[n]]}return o}function Tp(e,t,o){if(o.length===0)return t;const n=o[0];return o.length>1&&(t=Tp(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,n)?Number.isInteger(Number(o[1]))?[]:{}:e[n],t,Array.prototype.slice.call(o,1))),Number.isInteger(Number(n))&&Array.isArray(e)?e.slice()[n]:Object.assign({},e,{[n]:t})}function h0(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const o={};for(const n in e)o[n]=e[n];return delete o[t[0]],o}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const o={};for(const n in e)o[n]=e[n];return o}return Tp(e,h0(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function f0(e,t){return t.map(o=>o.split(".")).map(o=>[o,vA(e,o)]).filter(o=>o[1]!==void 0).reduce((o,n)=>Tp(o,n[1],n[0]),{})}function p0(e,t){return t.map(o=>o.split(".")).reduce((o,n)=>h0(o,n),e)}function ly(e,{storage:t,serializer:o,key:n,debug:i,pick:s,omit:r,beforeHydrate:a,afterHydrate:l},c,u=!0){try{u&&(a==null||a(c));const d=t.getItem(n);if(d){const h=o.deserialize(d),f=s?f0(h,s):h,v=r?p0(f,r):f;e.$patch(v)}u&&(l==null||l(c))}catch(d){i&&console.error("[pinia-plugin-persistedstate]",d)}}function cy(e,{storage:t,serializer:o,key:n,debug:i,pick:s,omit:r}){try{const a=s?f0(e,s):e,l=r?p0(a,r):a,c=o.serialize(l);t.setItem(n,c)}catch(a){i&&console.error("[pinia-plugin-persistedstate]",a)}}function yA(e,t,o){const{pinia:n,store:i,options:{persist:s=o}}=e;if(!s)return;if(!(i.$id in n.state.value)){const l=n._s.get(i.$id.replace("__hot:",""));l&&Promise.resolve().then(()=>l.$persist());return}const a=(Array.isArray(s)?s:s===!0?[{}]:[s]).map(t);i.$hydrate=({runHooks:l=!0}={})=>{a.forEach(c=>{ly(i,c,e,l)})},i.$persist=()=>{a.forEach(l=>{cy(i.$state,l)})},a.forEach(l=>{ly(i,l,e),i.$subscribe((c,u)=>cy(u,l),{detached:!0})})}function CA(e={}){return function(t){yA(t,o=>({key:(e.key?e.key:n=>n)(o.key??t.store.$id),debug:o.debug??e.debug??!1,serializer:o.serializer??e.serializer??{serialize:n=>JSON.stringify(n),deserialize:n=>mA(n)},storage:o.storage??e.storage??window.localStorage,beforeHydrate:o.beforeHydrate,afterHydrate:o.afterHydrate,pick:o.pick,omit:o.omit}),e.auto??!1)}}var bA=CA();const wA="modulepreload",SA=function(e){return"/FreightHelper/"+e},uy={},oi=function(t,o,n){let i=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(o.map(l=>{if(l=SA(l),l in uy)return;uy[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":wA,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return i.then(r=>{for(const a of r||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var Bs=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,o){const n=t?this.allAsyncListeners:this.allSyncListeners;let i=n.get(e);return!i&&o&&(i=new Set,n.set(e,i)),i}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,o=!1){this.getListeners(e,o,!0).add(t)}removeEventListener(e,t,o=!1){const n=this.getListeners(e,o,!1);n&&(n.delete(t),n.size===0&&(o?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const o=e.type;if(t&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const{frameworkOverrides:n}=this,i=a=>{const l=n?()=>n.wrapIncoming(a):a;t?this.dispatchAsync(l):l()},s=this.getListeners(o,t,!1);if(((s==null?void 0:s.size)??0)>0){const a=new Set(s);for(const l of a)s!=null&&s.has(l)&&i(()=>l(e))}const r=this.getGlobalListeners(t);if(r.size>0){const a=new Set(r);for(const l of a)i(()=>l(o,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};function xA(e,t){return t}function g0(e){return(e==null?void 0:e.getLocaleTextFunc())??xA}function wi(e,t,o){o==null||typeof o=="string"&&o==""?m0(e,t):hn(e,t,o)}function hn(e,t,o){e.setAttribute(v0(t),o.toString())}function m0(e,t){e.removeAttribute(v0(t))}function v0(e){return`aria-${e}`}function Qi(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function RA(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function _A(e){return e.getAttribute("aria-label")}function Yu(e,t){wi(e,"label",t)}function Cf(e,t){wi(e,"labelledby",t)}function y0(e,t){wi(e,"live",t)}function EA(e,t){wi(e,"atomic",t)}function PA(e,t){wi(e,"relevant",t)}function FA(e,t){wi(e,"disabled",t)}function C0(e,t){wi(e,"hidden",t)}function bf(e,t){hn(e,"expanded",t)}function DA(e,t){hn(e,"setsize",t)}function TA(e,t){hn(e,"posinset",t)}function kA(e,t){hn(e,"multiselectable",t)}function AA(e,t){hn(e,"rowcount",t)}function kp(e,t){hn(e,"rowindex",t)}function IA(e,t){hn(e,"rowspan",t)}function MA(e,t){hn(e,"colcount",t)}function b0(e,t){hn(e,"colindex",t)}function OA(e,t){hn(e,"colspan",t)}function LA(e,t){hn(e,"sort",t)}function BA(e){m0(e,"sort")}function wf(e,t){wi(e,"selected",t)}function NA(e,t){wi(e,"controls",t.id),Cf(t,e.id)}function Ap(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var sh,rh,ah,lh,Sf,xf,ch;function zs(){return sh===void 0&&(sh=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),sh}function w0(){return rh===void 0&&(rh=/(firefox)/i.test(navigator.userAgent)),rh}function S0(){return ah===void 0&&(ah=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),ah}function xs(){return lh===void 0&&(lh=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),lh}function Rf(e){if(!e)return null;const t=e.tabIndex,o=e.getAttribute("tabIndex");return t===-1&&(o===null||o===""&&!w0())?null:t.toString()}function HA(){if(ch!==void 0)return ch;if(!document.body)return-1;let e=1e6;const t=w0()?6e6:1e9,o=document.createElement("div");for(document.body.appendChild(o);;){const n=e*2;if(o.style.height=n+"px",n>t||o.clientHeight!==n)break;e=n}return document.body.removeChild(o),ch=e,e}function GA(){return xf==null&&x0(),xf}function x0(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let o=t.offsetWidth-t.clientWidth;o===0&&t.clientWidth===0&&(o=null),t.parentNode&&t.parentNode.removeChild(t),o!=null&&(xf=o,Sf=o===0)}function R0(){return Sf==null&&x0(),Sf}var VA="[tabindex], input, select, button, textarea, [href]",_0="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Ip(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,n=t.call(e,"input, select, button, textarea"),i=t.call(e,_0),s=_n(e);return n&&!i&&s}function Yt(e,t,o={}){const{skipAriaHidden:n}=o;e.classList.toggle("ag-hidden",!t),n||C0(e,!t)}function zA(e,t,o={}){const{skipAriaHidden:n}=o;e.classList.toggle("ag-invisible",!t),n||C0(e,!t)}function ll(e,t){const o="disabled",n=t?s=>s.setAttribute(o,""):s=>s.removeAttribute(o);n(e);const i=e.querySelectorAll("input")??[];for(const s of i)n(s)}function Rs(e,t,o){let n=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof o=="number"){if(++n>o)break}else if(e===o)break}return!1}function Ws(e){const{height:t,width:o,borderTopWidth:n,borderRightWidth:i,borderBottomWidth:s,borderLeftWidth:r,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:d,marginRight:h,marginBottom:f,marginLeft:v,boxSizing:m}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(o||"0"),borderTopWidth:parseFloat(n||"0"),borderRightWidth:parseFloat(i||"0"),borderBottomWidth:parseFloat(s||"0"),borderLeftWidth:parseFloat(r||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(f||"0"),marginLeft:parseFloat(v||"0"),boxSizing:m}}function Mp(e){const t=Ws(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function cl(e){const t=Ws(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function E0(e){const{height:t,marginBottom:o,marginTop:n}=Ws(e);return Math.floor(t+o+n)}function uu(e){const{width:t,marginLeft:o,marginRight:n}=Ws(e);return Math.floor(t+o+n)}function P0(e){const t=e.getBoundingClientRect(),{borderTopWidth:o,borderLeftWidth:n,borderRightWidth:i,borderBottomWidth:s}=Ws(e);return{top:t.top+(o||0),left:t.left+(n||0),right:t.right+(i||0),bottom:t.bottom+(s||0)}}function du(e,t){let o=e.scrollLeft;return t&&(o=Math.abs(o)),o}function hu(e,t,o){o&&(t*=-1),e.scrollLeft=t}function Do(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function nn(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function F0(e){return!!e.offsetParent}function _n(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!F0(e)||window.getComputedStyle(e).visibility!=="visible")}function Op(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function D0(e,t,o){o&&o.nextSibling===t||(e.firstChild?o?o.nextSibling?e.insertBefore(t,o.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t):e.appendChild(t))}function T0(e,t){for(let o=0;o<t.length;o++){const n=t[o],i=e.children[o];i!==n&&e.insertBefore(n,i)}}function WA(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}function Tl(e,t){if(t)for(const o of Object.keys(t)){const n=t[o];if(!o||!o.length||n==null)continue;const i=WA(o),s=n.toString(),r=s.replace(/\s*!important/g,""),a=r.length!=s.length?"important":void 0;e.style.setProperty(i,r,a)}}function UA(e){return e.clientWidth<e.scrollWidth}function $A(e){return e.clientHeight<e.scrollHeight}function fu(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Un(e,t)}function Un(e,t){t=Lp(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function Na(e,t){t=Lp(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function Lp(e){return typeof e=="number"?`${e}px`:e}function Bp(e){return e instanceof Node||e instanceof HTMLElement}function ln(e,t,o){o==null||o===""?e.removeAttribute(t):e.setAttribute(t,o.toString())}function Zi(e,t,o){const i=H0(e).ResizeObserver,s=i?new i(o):null;return s==null||s.observe(t),()=>s==null?void 0:s.disconnect()}function Si(e,t){const o=H0(e);o.requestAnimationFrame?o.requestAnimationFrame(t):o.webkitRequestAnimationFrame?o.webkitRequestAnimationFrame(t):o.setTimeout(t,0)}var k0="data-ref",uh;function dy(){return uh??(uh=document.createTextNode(" ")),uh.cloneNode()}function Ut(e){const{attrs:t,children:o,cls:n,ref:i,role:s,tag:r}=e,a=document.createElement(r);if(n&&(a.className=n),i&&a.setAttribute(k0,i),s&&a.setAttribute("role",s),t)for(const l of Object.keys(t))a.setAttribute(l,t[l]);if(o)if(typeof o=="string")a.textContent=o;else{let l=!0;for(const c of o)c&&(typeof c=="string"?(a.appendChild(document.createTextNode(c)),l=!1):(l&&(a.appendChild(dy()),l=!1),a.append(Ut(c)),a.appendChild(dy())))}return a}var hy={};function Np(e,t){hy[t]||(e(),hy[t]=!0)}function Yi(e,t,...o){e.get("debug")&&console.log("AG Grid: "+t,...o)}function Ha(e,...t){Np(()=>console.warn("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function mr(e,...t){Np(()=>console.error("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}var jA={pending:!1,funcs:[]},KA={pending:!1,funcs:[]};function _f(e,t="setTimeout",o){const n=t==="raf"?KA:jA;if(n.funcs.push(e),n.pending)return;n.pending=!0;const i=()=>{const s=n.funcs.slice();n.funcs.length=0,n.pending=!1,s.forEach(r=>r())};t==="raf"?Si(o,i):window.setTimeout(i,0)}function bo(e,t,o){let n;return function(...i){const s=this;window.clearTimeout(n),n=window.setTimeout(function(){e.isAlive()&&t.apply(s,i)},o)}}function fy(e,t){let o=0;return function(...n){const i=this,s=Date.now();s-o<t||(o=s,e.apply(i,n))}}function qA(e,t,o=100,n){const i=Date.now();let s=null,r=!1;const a=()=>{const l=Date.now()-i>o;(e()||l)&&(t(),r=!0,s!=null&&(window.clearInterval(s),s=null))};a(),r||(s=window.setInterval(a,10))}function ci(e){return e==null||e===""?null:e}function Ye(e){return e!=null&&e!==""}function qt(e){return!Ye(e)}function Ef(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function ul(e,t){const o=e?JSON.stringify(e):null,n=t?JSON.stringify(t):null;return o===n}function QA(e,t,o=!1){const n=e==null,i=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),n&&i)return 0;if(n)return-1;if(i)return 1;function s(r,a){return r>a?1:r<a?-1:0}if(typeof e!="string"||!o)return s(e,t);try{return e.localeCompare(t)}catch{return s(e,t)}}var A0="https://www.ag-grid.com",Je="33.3.1",py=2e3,gy=100,I0="_version_",Lc=null,vr=`${A0}/javascript-data-grid`;function YA(e){Lc=e}function JA(e){vr=e}function M0(e,t,o){return(Lc==null?void 0:Lc.getConsoleMessage(e,t))??[tI(e,t,o)]}function Hp(e,t,o,n){e(`error #${t}`,...M0(t,o,n))}function ZA(e){if(!e)return String(e);const t={};for(const o of Object.keys(e))typeof e[o]!="object"&&typeof e[o]!="function"&&(t[o]=e[o]);return JSON.stringify(t)}function XA(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=ZA(e)),t}function pu(e){return e===void 0?"undefined":e===null?"null":e}function Pf(e,t){return`${e}?${t.toString()}`}function eI(e,t,o){const n=Array.from(t.entries()).sort((s,r)=>r[1].length-s[1].length);let i=Pf(e,t);for(const[s,r]of n){if(s===I0)continue;const a=i.length-o;if(a<=0)break;const l="...",c=a+l.length,u=r.length-c>gy?r.slice(0,r.length-c)+l:r.slice(0,gy)+l;t.set(s,u),i=Pf(e,t)}return i}function O0(e,t){const o=new URLSearchParams;if(o.append(I0,Je),t)for(const s of Object.keys(t))o.append(s,XA(t[s]));const n=`${vr}/errors/${e}`,i=Pf(n,o);return i.length<=py?i:eI(n,o,py)}var tI=(e,t,o)=>{const n=O0(e,t);return`${o?o+` 
`:""}Visit ${n}${o?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function Ue(...e){Hp(Ha,e[0],e[1])}function Nt(...e){Hp(mr,e[0],e[1])}function Ra(e,t,o){Hp(mr,e,t,o)}function oI(e,t){const o=t[0];return`error #${o} `+M0(o,t[1],e).join(" ")}function Ui(...e){return oI(void 0,e)}function L0(e,t){return e.get("rowModelType")===t}function Co(e,t){return L0(e,"clientSide")}function jr(e,t){return L0(e,"serverSide")}function wo(e,t){return e.get("domLayout")===t}function _s(e){return mu(e)!==void 0}function B0(e){return typeof e.get("getRowHeight")=="function"}function nI(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function Ji(e,t,o=!1,n){const{gos:i,environment:s}=e;if(n==null&&(n=s.getDefaultRowHeight()),B0(i)){if(o)return{height:n,estimated:!0};const l={node:t,data:t.data},c=i.getCallback("getRowHeight")(l);if(Ff(c))return c===0&&Ue(23),{height:Math.max(1,c),estimated:!1}}if(t.detail&&i.get("masterDetail"))return iI(i);const r=i.get("rowHeight");return{height:r&&Ff(r)?r:n,estimated:!1}}function iI(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return Ff(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function Es(e){const{environment:t,gos:o}=e,n=o.get("rowHeight");if(!n||qt(n))return t.getDefaultRowHeight();const i=t.refreshRowHeightVariable();return i!==-1?i:(Ue(24),t.getDefaultRowHeight())}function Ff(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function N0(e,t,o){const n=t[e.getDomDataKey()];return n?n[o]:void 0}function Ns(e,t,o,n){const i=e.getDomDataKey();let s=t[i];qt(s)&&(s={},t[i]=s),s[o]=n}function go(e){const{gos:t,eGridDiv:o}=e;let n=null;const i=t.get("getDocument");return i&&Ye(i)?n=i():o&&(n=o.ownerDocument),n&&Ye(n)?n:document}function H0(e){return go(e).defaultView||window}function dl(e){return e.eGridDiv.getRootNode()}function Jt(e){return dl(e).activeElement}function Gp(e){let t=null,o=null;try{t=go(e).fullscreenElement}catch{}finally{t||(t=dl(e));const n=t.querySelector("body");n?o=n:t instanceof ShadowRoot?o=t:t instanceof Document?o=t==null?void 0:t.documentElement:o=t}return o}function sI(e){const t=Gp(e);return(t==null?void 0:t.clientWidth)??(window.innerHeight||-1)}function rI(e){const t=Gp(e);return(t==null?void 0:t.clientHeight)??(window.innerHeight||-1)}function aI(e,t,o){const i=e.getBoundingClientRect().height,s=sI(o)-2,r=rI(o)-2;if(!e.offsetParent)return;const l=P0(e.offsetParent),{clientY:c,clientX:u}=t;let d=c-l.top-i/2,h=u-l.left-10;const f=go(o),v=f.defaultView||window,m=v.pageYOffset||f.documentElement.scrollTop,b=v.pageXOffset||f.documentElement.scrollLeft;s>0&&h+e.clientWidth>s+b&&(h=s+b-e.clientWidth),h<0&&(h=0),r>0&&d+e.clientHeight>r+m&&(d=r+m-e.clientHeight),d<0&&(d=0),e.style.left=`${h}px`,e.style.top=`${d}px`}function G0(e){const t=Jt(e);return t===null||t===go(e).body}function yr(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function V0(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||wo(e,"print"))}function Bn(e){const t=e.get("autoGroupColumnDef");return!(t!=null&&t.comparator)&&!e.get("treeData")}function Df(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function z0(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function W0(e,t,o){return!!t.group&&!t.footer&&z0(e,o)}function Br(e){const t=e.getCallback("getRowId");return t===void 0?t:o=>{let n=t(o);return typeof n!="string"&&(Np(()=>Ue(25,{id:n}),"getRowIdString"),n=String(n)),n}}function lI(e,t){const o=e.get("groupHideParentOfSingleChild");return!!(o===!0||o==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function cI(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function Cr(e){return(e==null?void 0:e.checkboxes)??!0}function Bc(e){return(e==null?void 0:e.mode)==="multiRow"&&(e.headerCheckbox??!0)}function gu(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function dh(e){return(e==null?void 0:e.hideDisabledCheckboxes)??!1}function uI(e){return typeof e.get("rowSelection")!="string"}function gi(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function U0(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const o=e.get("suppressRowClickSelection"),n=e.get("suppressRowDeselection");return o&&n?!1:o?"enableDeselection":n?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function dI(e){const t=U0(e);return t===!0||t==="enableSelection"}function hI(e){const t=U0(e);return t===!0||t==="enableDeselection"}function Tf(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t==null?void 0:t.isRowSelectable}function mu(e){const t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t==null?void 0:t.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function hl(e){return mu(e)==="multiRow"}function fI(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):(t==null?void 0:t.enableSelectionWithoutKeys)??!1}function vu(e){const t=e.get("rowSelection");if(typeof t=="string"){const o=e.get("groupSelectsChildren"),n=e.get("groupSelectsFiltered");return o&&n?"filteredDescendants":o?"descendants":"self"}return(t==null?void 0:t.mode)==="multiRow"?t.groupSelects:void 0}function $0(e,t=!0){const o=e.get("rowSelection");return typeof o!="object"?t?"all":void 0:o.mode==="multiRow"?o.selectAll:"all"}function fl(e){const t=vu(e);return t==="descendants"||t==="filteredDescendants"}function my(e){const t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function hh(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function Ko(e){return e.get("columnMenu")==="legacy"}function pI(e){return!Ko(e)}function Vp(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function gI(e,t,o){typeof e!="object"&&(e={});const n={...e};return o.forEach(i=>{const s=t[i];typeof s<"u"&&(n[i]=s)}),n}function mI(e,t){if(!e)return;const o={};let n=!1;if(Object.keys(e).forEach(r=>{o[r]=e[r],n=!0}),!n)return;const i={type:"gridOptionsChanged",options:o};t.dispatchEvent(i);const s={type:"componentStateChanged",...o};t.dispatchEvent(s)}function pt(e,t){return e.addGridCommonParams(t)}function vI(e){return e.get("treeData")?e.get("treeDataParentIdField")?"treeSelfRef":e.get("treeDataChildrenField")?"treeNested":"treePath":"group"}var j0="__ag_Grid_Stop_Propagation",yI=["touchstart","touchend","touchmove","touchcancel","scroll"],CI=["wheel"],fh={};function Hs(e){e[j0]=!0}function ui(e){return e[j0]===!0}var K0=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return o=>{if(typeof fh[o]=="boolean")return fh[o];const n=document.createElement(e[o]||"div");return o="on"+o,fh[o]=o in n}})();function q0(e,t,o){let n=t;for(;n;){const i=N0(e,n,o);if(i)return i;n=n.parentElement}return null}function bI(e,t){return!t||!e?!1:SI(t).indexOf(e)>=0}function wI(e){const t=[];let o=e.target;for(;o;)t.push(o),o=o.parentElement;return t}function SI(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():wI(t)}function xI(e,t,o,n){const i=Q0(o);let s;i!=null&&(s={passive:i}),e&&e.addEventListener&&e.addEventListener(t,o,n,s)}var Q0=e=>{const t=yI.includes(e),o=CI.includes(e);if(t)return!0;if(o)return!1},Ie=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,o){this.localEventService||(this.localEventService=new Bs),this.localEventService.addEventListener(e,t,o)}removeEventListener(e,t,o){var n;(n=this.localEventService)==null||n.removeEventListener(e,t,o)}dispatchLocalEvent(e){var t;(t=this.localEventService)==null||t.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const o=[];for(const n of Object.keys(t)){const i=t[n];i&&o.push(this._setupListener(e,n,i))}return o}_setupListener(e,t,o){if(this.destroyed)return()=>null;let n;return RI(e)?(e.__addEventListener(t,o),n=()=>(e.__removeEventListener(t,o),null)):(e instanceof HTMLElement?xI(this.beans.frameworkOverrides,e,t,o):e.addEventListener(t,o),n=()=>(e.removeEventListener(t,o),null)),this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==n),null)}setupGridOptionListener(e,t){const{gos:o}=this;o.addPropertyEventListener(e,t);const n=()=>(o.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==n),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const o=e.join("-")+this.propertyListenerId++,n=i=>{if(i.changeSet){if(i.changeSet&&i.changeSet.id===this.lastChangeSetIdLookup[o])return;this.lastChangeSetIdLookup[o]=i.changeSet.id}const s={type:"gridPropertyChanged",changeSet:i.changeSet,source:i.source};t(s)};e.forEach(i=>this.setupGridOptionListener(i,n))}getLocaleTextFunc(){return g0(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const o=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),o}createBean(e,t,o){return(t||this.stubContext).createBean(e,o)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function RI(e){return e.__addEventListener!==void 0}var Y0=new Set(["__proto__","constructor","prototype"]);function _I(e,t){if(e!=null){if(Array.isArray(e)){for(let o=0;o<e.length;o++)t(o.toString(),e[o]);return}for(const o of Object.keys(e))t(o,e[o])}}function No(e,t,o=!0,n=!1){Ye(t)&&_I(t,(i,s)=>{if(Y0.has(i))return;let r=e[i];r!==s&&(n&&r==null&&s!=null&&typeof s=="object"&&s.constructor===Object&&(r={},e[i]=r),vy(s)&&vy(r)&&!Array.isArray(r)?No(r,s,o,n):(o||s!==void 0)&&(e[i]=s))})}function Ga(e,t,o){if(!t||!e)return;if(!o)return e[t];const n=t.split(".");let i=e;for(let s=0;s<n.length;s++){if(i==null)return;i=i[n[s]]}return i}function vy(e){return typeof e=="object"&&e!==null}var EI=/[&<>"']/g,PI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Kr(e){return(e==null?void 0:e.toString().toString())??null}function Nc(e){var t;return((t=Kr(e))==null?void 0:t.replace(EI,o=>PI[o]))??null}var FI={resizable:!0,sortable:!0},DI=0;function J0(){return DI++}function mi(e){return e instanceof Ju}var Ju=class extends Ie{constructor(e,t,o,n){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=o,this.primary=n,this.isColumn=!0,this.instanceId=J0(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new Bs,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=Nc(o)}destroy(){var e;super.destroy(),(e=this.beans.rowSpanSvc)==null||e.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:o,colFlex:n}}=this;t==null||t.initCol(this);const i=e.hide;i!==void 0?this.visible=!i:this.visible=!e.initialHide,o==null||o.initCol(this),n==null||n.initCol(this)}setColDef(e,t,o){var i;const n=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),n&&((i=this.beans.rowSpanSvc)==null||i.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",o)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:o}}=this,n=e.get("suppressFieldDotNotation");this.fieldContainsDots=Ye(t)&&t.indexOf(".")>=0&&!n,this.tooltipFieldContainsDots=Ye(o)&&o.indexOf(".")>=0&&!n}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){var e;(e=this.beans.tooltipSvc)==null||e.initCol(this)}initRowSpan(){var e;this.colDef.spanRows&&((e=this.beans.rowSpanSvc)==null||e.register(this))}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const o=e.width,n=e.initialWidth;return o!=null?t=o:n!=null?t=n:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){var t;return((t=this.beans.showRowGroupCols)==null?void 0:t.isRowGroupDisplayed(this,e))??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){var n,i,s;this.frameworkEventListenerService=(i=(n=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:i.call(n,this.frameworkEventListenerService,this.colEventSvc);const o=((s=this.frameworkEventListenerService)==null?void 0:s.wrap(e,t))??t;this.colEventSvc.addEventListener(e,o)}removeEventListener(e,t){var n;const o=((n=this.frameworkEventListenerService)==null?void 0:n.unwrap(e,t))??t;this.colEventSvc.removeEventListener(e,o)}createColumnFunctionCallbackParams(e){return pt(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){var t;return((t=this.beans.cellNavigation)==null?void 0:t.isSuppressNavigable(this,e))??!1}isCellEditable(e){var t;return((t=this.beans.editSvc)==null?void 0:t.isCellEditable(this,e))??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){var t;return((t=this.beans.selectionSvc)==null?void 0:t.isCellCheckboxSelection(this,e))??!1}isSuppressPaste(e){var t;return this.isColumnFunc(e,((t=this.colDef)==null?void 0:t.suppressPaste)??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??FI[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const o=this.createColumnFunctionCallbackParams(e);return t(o)}return!1}createColumnEvent(e,t){return pt(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return qt(this.sort)}isSorting(){return Ye(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){var e;return Ue(261),!!((e=this.beans.colHover)!=null&&e.isHovered(this))}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const o=e===!0;this.visible!==o&&(this.visible=o,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let o=!0;for(;e;){if(!e.isPadding()){o=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:o}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return pt(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(qt(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),o=this.colDef.colSpan(t);return Math.max(o,1)}getRowSpan(e){if(qt(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),o=this.colDef.rowSpan(t);return Math.max(o,1)}setActualWidth(e,t,o=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),o||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(e,t,o){const n=this.createColumnEvent(e,t);o&&No(n,o),this.colEventSvc.dispatchEvent(n)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function Eo(e){return e instanceof Hc}var Hc=class extends Ie{constructor(e,t,o,n){super(),this.colGroupDef=e,this.groupId=t,this.padding=o,this.level=n,this.isColumn=!1,this.expandable=!1,this.instanceId=J0(),this.expandableListenerRemoveCallback=null,this.expanded=!!(e!=null&&e.openByDefault)}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)mi(t)?e(t):Eo(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){this.children&&this.children.forEach(t=>{mi(t)?e.push(t):Eo(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.__addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.__removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,o=!1;const n=this.findChildrenRemovingPadding();for(let s=0,r=n.length;s<r;s++){const a=n[s];if(!a.isVisible())continue;const l=a.getColumnGroupShow();l==="open"?(e=!0,o=!0):l==="closed"?(t=!0,o=!0):(e=!0,t=!0)}const i=e&&t&&o;this.expandable!==i&&(this.expandable=i,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=o=>{o.forEach(n=>{Eo(n)&&n.isPadding()?t(n.children):e.push(n)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},TI={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function yy(e,t,o){const n={},i=e.gos;return Object.assign(n,i.get("defaultColGroupDef")),Object.assign(n,t),i.validateColDef(n,o),n}var kI=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Ef(e);let o=0;for(;;){let n=e??t;if(n?o!==0&&(n+="_"+o):n=o,!this.existingKeys[n]){const i=String(n);return e&&o>0&&Ue(273,{providedId:e,usedId:i}),this.existingKeys[i]=!0,i}o++}}},Cy=Object.freeze([]);function Vt(e){if(e!=null&&e.length)return e[e.length-1]}function Us(e,t,o){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((n,i)=>o?o(n,t[i]):t[i]===n)}function uc(e,t){if(e)for(const o of e)t(o)}function dn(e,t){const o=e.indexOf(t);o>=0&&e.splice(o,1)}function by(e,t,o){for(let n=0;n<t.length;n++)dn(e,t[n]);for(let n=t.length-1;n>=0;n--)e.splice(o,0,t[n])}var Zu="ag-Grid-AutoColumn",Z0="ag-Grid-SelectionColumn",X0="ag-Grid-RowNumbersColumn";function eS(e){const t=[],o=n=>{for(let i=0;i<n.length;i++){const s=n[i];mi(s)?t.push(s):Eo(s)&&o(s.getChildren())}};return o(e),t}function si(e){return e.reduce((t,o)=>t+o.getActualWidth(),0)}function yu(e,t,o){const n={};if(!t)return;di(null,t,s=>{n[s.getInstanceId()]=s}),o&&di(null,o,s=>{n[s.getInstanceId()]=null});const i=Object.values(n).filter(s=>s!=null);e.context.destroyBeans(i)}function zp(e){return e.getId().startsWith(Zu)}function qr(e){const t=typeof e=="string"?e:"getColId"in e?e.getColId():e.colId;return(t==null?void 0:t.startsWith(Z0))??!1}function Ps(e){const t=typeof e=="string"?e:"getColId"in e?e.getColId():e.colId;return(t==null?void 0:t.startsWith(X0))??!1}function Cu(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function AI(e,t){return Us(e,t,(o,n)=>o.getColId()===n.getColId())}function II(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function br(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function tS(e,t){const o=e===t,n=e.getColDef()===t,i=e.getColId()==t;return o||n||i}var MI=(e,t)=>(o,n)=>{const i={value1:void 0,value2:void 0};let s=!1;return e&&(e[o]!==void 0&&(i.value1=e[o],s=!0),Ye(n)&&e[n]!==void 0&&(i.value2=e[n],s=!0)),!s&&t&&(t[o]!==void 0&&(i.value1=t[o]),Ye(n)&&t[n]!==void 0&&(i.value2=t[n])),i};function OI(e,t=null,o,n,i){const s=new kI,{existingCols:r,existingGroups:a,existingColKeys:l}=LI(n);s.addExistingKeys(l);const c=oS(e,t,0,o,r,s,a,i),{colGroupSvc:u}=e,d=(u==null?void 0:u.findMaxDepth(c,0))??0,h=u?u.balanceColumnTree(c,0,d,s):c;return di(null,h,(v,m)=>{Eo(v)&&v.setupExpandable(),v.originalParent=m}),{columnTree:h,treeDepth:d}}function LI(e){const t=[],o=[],n=[];return e&&di(null,e,i=>{if(Eo(i)){const s=i;o.push(s)}else{const s=i;n.push(s.getId()),t.push(s)}}),{existingCols:t,existingGroups:o,existingColKeys:n}}function oS(e,t,o,n,i,s,r,a){if(!t)return[];const{colGroupSvc:l}=e,c=new Array(t.length);for(let u=0;u<c.length;u++){const d=t[u];l&&zI(d)?c[u]=l.createProvidedColumnGroup(n,d,o,i,s,r,a):c[u]=BI(e,n,d,i,s,a)}return c}function BI(e,t,o,n,i,s){var l;const r=HI(o,n);r&&(n==null||n.splice(r.idx,1));let a=r==null?void 0:r.column;if(a){const c=kf(e,o,a.getColId());a.setColDef(c,o,s),NI(e,a,c,s)}else{const c=i.getUniqueKey(o.colId,o.field),u=kf(e,o,c);a=new Ju(u,o,c,t),e.context.createBean(a)}return(l=e.dataTypeSvc)==null||l.addColumnListeners(a),a}function nS(e,t,o,n,i,s,r,a){const{sortSvc:l,pinnedCols:c,colFlex:u}=e;o!==void 0&&t.setVisible(!o,a),l&&(l.updateColSort(t,n,a),i!==void 0&&l.setColSortIndex(t,i)),s!==void 0&&(c==null||c.setColPinned(t,s)),r!==void 0&&(u==null||u.setColFlex(t,r))}function NI(e,t,o,n){nS(e,t,o.hide,o.sort,o.sortIndex,o.pinned,o.flex,n);const i=t.getFlex();if(!(i!=null&&i>0))if(o.width!=null)t.setActualWidth(o.width,n);else{const s=t.getActualWidth();t.setActualWidth(s,n)}}function HI(e,t){if(t)for(let o=0;o<t.length;o++){const n=t[o].getUserProvidedColDef();if(!n)continue;if(e.colId!=null){if(t[o].getId()===e.colId)return{idx:o,column:t[o]};continue}if(e.field!=null){if(n.field===e.field)return{idx:o,column:t[o]};continue}if(n===e)return{idx:o,column:t[o]}}}function kf(e,t,o,n){const{gos:i,dataTypeSvc:s}=e,r={},a=i.get("defaultColDef");No(r,a,!1,!0);const l=GI(e,r,t,o);l&&VI(e,l,r),No(r,t,!1,!0);const c=i.get("autoGroupColumnDef"),u=Bn(i);return t.rowGroup&&c&&u&&No(r,{sort:c.sort,initialSort:c.initialSort},!1,!0),s==null||s.validateColDef(r),i.validateColDef(r,o,n),r}function GI(e,t,o,n){var r;const i=(r=e.dataTypeSvc)==null?void 0:r.updateColDefAndGetColumnType(t,o,n),s=o.type??i??t.type;return t.type=s,s?Cu(s):void 0}function VI(e,t,o){if(!t.length)return;const n=Object.assign({},TI),i=e.gos.get("columnTypes")||{};for(const s of Object.keys(i)){const r=i[s];s in n?Ue(34,{key:s}):(r.type&&Ue(35),n[s]=r)}t.forEach(s=>{const r=n[s.trim()];r?No(o,r,!1,!0):Ue(36,{t:s})})}function zI(e){return e.children!==void 0}function di(e,t,o){if(t)for(let n=0;n<t.length;n++){const i=t[n];Eo(i)&&di(i,i.getChildren(),o),o(i,e)}}function iS(e,t){const o=[],n=[],i=[];return e.forEach(r=>{const a=r.getColDef().lockPosition;a==="right"?i.push(r):a==="left"||a===!0?o.push(r):n.push(r)}),t.get("enableRtl")?[...i,...n,...o]:[...o,...n,...i]}function sS(e,t){let o=!0;return di(null,t,n=>{if(!Eo(n))return;const i=n,s=i.getColGroupDef();if(!(s&&s.marryChildren))return;const a=[];i.getLeafColumns().forEach(h=>{const f=e.indexOf(h);a.push(f)});const l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),u=l-c,d=i.getLeafColumns().length-1;u>d&&(o=!1)}),o}function rS(e,t){if(!e||e.length==0)return;const o=t(e[0]);for(let n=1;n<e.length;n++)if(o!==t(e[n]))return;return o}function aS(e,t,o){if(!t.length)return;const n=t.length===1?t[0]:null,i=rS(t,s=>s.getPinned());e.dispatchEvent({type:"columnPinned",pinned:i??null,columns:t,column:n,source:o})}function WI(e,t,o){if(!t.length)return;const n=t.length===1?t[0]:null,i=rS(t,s=>s.isVisible());e.dispatchEvent({type:"columnVisible",visible:i,columns:t,column:n,source:o})}function UI(e,t,o,n){e.dispatchEvent({type:t,columns:o,column:o&&o.length==1?o[0]:null,source:n})}function Nr(e,t,o,n,i=null){t!=null&&t.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:i,finished:o,source:n})}function wn(e,t,o){var I;const{colModel:n,rowGroupColsSvc:i,pivotColsSvc:s,autoColSvc:r,selectionColSvc:a,colAnimation:l,visibleCols:c,pivotResultCols:u,environment:d,valueColsSvc:h,eventSvc:f,gos:v}=e,m=n.getColDefCols()??[],b=a==null?void 0:a.getColumns();if(!(m!=null&&m.length)&&!(b!=null&&b.length))return!1;if(t!=null&&t.state&&!t.state.forEach)return Ue(32),!1;const S=(W,z,de,K,O)=>{if(!W)return;const ie=MI(z,t.defaultState),N=ie("flex").value1;if(nS(e,W,ie("hide").value1,ie("sort").value1,ie("sortIndex").value1,ie("pinned").value1,N,o),N==null){const oe=ie("width").value1;if(oe!=null){const F=W.getColDef().minWidth??d.getDefaultColumnMinWidth();F!=null&&oe>=F&&W.setActualWidth(oe,o)}}O||!W.isPrimary()||(h==null||h.syncColumnWithState(W,o,ie),i==null||i.syncColumnWithState(W,o,ie,de),s==null||s.syncColumnWithState(W,o,ie,K))},R=(W,z,de)=>{var q,se;const K=lS(e,o),O=z.slice(),ie={},N={},oe=[],F=[],Y=[];let J=0;const L=(i==null?void 0:i.columns.slice())??[],ce=(s==null?void 0:s.columns.slice())??[];W.forEach(be=>{const ue=be.colId;if(ue.startsWith(Zu)){oe.push(be),Y.push(be);return}if(qr(ue)){F.push(be),Y.push(be);return}const Ee=de(ue);Ee?(S(Ee,be,ie,N,!1),dn(O,Ee)):(Y.push(be),J+=1)});const U=be=>S(be,null,ie,N,!1);O.forEach(U),i==null||i.sortColumns(wy.bind(i,ie,L)),s==null||s.sortColumns(wy.bind(s,N,ce)),n.refreshCols(!1);const le=(be,ue,j=[])=>{ue.forEach(Ee=>{const ne=be(Ee.colId);dn(j,ne),S(ne,Ee,null,null,!0)}),j.forEach(U)};return le(be=>(r==null?void 0:r.getColumn(be))??null,oe,(q=r==null?void 0:r.getColumns())==null?void 0:q.slice()),le(be=>(a==null?void 0:a.getColumn(be))??null,F,(se=a==null?void 0:a.getColumns())==null?void 0:se.slice()),jI(t,n,v),c.refresh(o),f.dispatchEvent({type:"columnEverythingChanged",source:o}),K(),{unmatchedAndAutoStates:Y,unmatchedCount:J}};l==null||l.start();let{unmatchedAndAutoStates:_,unmatchedCount:M}=R(t.state||[],m,W=>n.getColDefCol(W));if(_.length>0||Ye(t.defaultState)){const W=((I=u==null?void 0:u.getPivotResultCols())==null?void 0:I.list)??[];M=R(_,W,z=>(u==null?void 0:u.getPivotResultCol(z))??null).unmatchedCount}return l==null||l.finish(),M===0}function $I(e,t){var b,S;const{colModel:o,autoColSvc:n,selectionColSvc:i}=e,s=o.getColDefCols();if(!(s!=null&&s.length))return;const r=o.getColDefColTree(),a=eS(r),l=[];let c=1e3,u=1e3;const d=R=>{const _=cS(R);qt(_.rowGroupIndex)&&_.rowGroup&&(_.rowGroupIndex=c++),qt(_.pivotIndex)&&_.pivot&&(_.pivotIndex=u++),l.push(_)};(b=n==null?void 0:n.getColumns())==null||b.forEach(d),(S=i==null?void 0:i.getColumns())==null||S.forEach(d),a==null||a.forEach(d),wn(e,{state:l},t);const h=(n==null?void 0:n.getColumns())??[],m=[...(i==null?void 0:i.getColumns())??[],...h,...s].map(R=>({colId:R.colId}));wn(e,{state:m,applyOrder:!0},t)}function lS(e,t){const{rowGroupColsSvc:o,pivotColsSvc:n,valueColsSvc:i,colModel:s,sortSvc:r,eventSvc:a}=e,l={rowGroupColumns:(o==null?void 0:o.columns.slice())??[],pivotColumns:(n==null?void 0:n.columns.slice())??[],valueColumns:(i==null?void 0:i.columns.slice())??[]},c=bu(e),u={};return c.forEach(d=>{u[d.colId]=d}),()=>{const d=(W,z,de,K)=>{const O=z.map(K),ie=de.map(K);if(Us(O,ie))return;const oe=new Set(z);de.forEach(Y=>{oe.delete(Y)||oe.add(Y)});const F=[...oe];a.dispatchEvent({type:W,columns:F,column:F.length===1?F[0]:null,source:t})},h=W=>{const z=[];return s.forAllCols(de=>{const K=u[de.getColId()];K&&W(K,de)&&z.push(de)}),z},f=W=>W.getColId();d("columnRowGroupChanged",l.rowGroupColumns,(o==null?void 0:o.columns)??[],f),d("columnPivotChanged",l.pivotColumns,(n==null?void 0:n.columns)??[],f);const m=h((W,z)=>{const de=W.aggFunc!=null,K=de!=z.isValueActive(),O=de&&W.aggFunc!=z.getAggFunc();return K||O});m.length>0&&UI(a,"columnValueChanged",m,t),Nr(a,h((W,z)=>W.width!=z.getActualWidth()),!0,t),aS(a,h((W,z)=>W.pinned!=z.getPinned()),t),WI(a,h((W,z)=>W.hide==z.isVisible()),t);const M=h((W,z)=>W.sort!=z.getSort()||W.sortIndex!=z.getSortIndex());M.length>0&&(r==null||r.dispatchSortChangedEvents(t,M));const I=bu(e);qI(c,I,t,s,a)}}function bu(e){const{colModel:t,rowGroupColsSvc:o,pivotColsSvc:n}=e,i=t.getColDefCols();if(qt(i)||!t.isAlive())return[];const s=o==null?void 0:o.columns,r=n==null?void 0:n.columns,a=[],l=u=>{const d=u.isRowGroupActive()&&s?s.indexOf(u):null,h=u.isPivotActive()&&r?r.indexOf(u):null,f=u.isValueActive()?u.getAggFunc():null,v=u.getSort()!=null?u.getSort():null,m=u.getSortIndex()!=null?u.getSortIndex():null;a.push({colId:u.getColId(),width:u.getActualWidth(),hide:!u.isVisible(),pinned:u.getPinned(),sort:v,sortIndex:m,aggFunc:f,rowGroup:u.isRowGroupActive(),rowGroupIndex:d,pivot:u.isPivotActive(),pivotIndex:h,flex:u.getFlex()??null})};t.forAllCols(u=>l(u));const c=new Map(t.getCols().map((u,d)=>[u.getColId(),d]));return a.sort((u,d)=>{const h=c.has(u.colId)?c.get(u.colId):-1,f=c.has(d.colId)?c.get(d.colId):-1;return h-f}),a}function cS(e){const t=(v,m)=>v??m??null,o=e.getColDef(),n=t(o.sort,o.initialSort),i=t(o.sortIndex,o.initialSortIndex),s=t(o.hide,o.initialHide),r=t(o.pinned,o.initialPinned),a=t(o.width,o.initialWidth),l=t(o.flex,o.initialFlex);let c=t(o.rowGroupIndex,o.initialRowGroupIndex),u=t(o.rowGroup,o.initialRowGroup);c==null&&(u==null||u==!1)&&(c=null,u=null);let d=t(o.pivotIndex,o.initialPivotIndex),h=t(o.pivot,o.initialPivot);d==null&&(h==null||h==!1)&&(d=null,h=null);const f=t(o.aggFunc,o.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:i,hide:s,pinned:r,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:h,pivotIndex:d,aggFunc:f}}function jI(e,t,o){if(!e.applyOrder||!e.state)return;const n=[];e.state.forEach(i=>{i.colId!=null&&n.push(i.colId)}),KI(t.cols,n,t,o)}function KI(e,t,o,n){if(e==null)return;let i=[];const s={};t.forEach(a=>{if(s[a])return;const l=e.map[a];l&&(i.push(l),s[a]=!0)});let r=0;if(e.list.forEach(a=>{const l=a.getColId();if(s[l]!=null)return;l.startsWith(Zu)?i.splice(r++,0,a):i.push(a)}),i=iS(i,n),!sS(i,o.getColTree())){Ue(39);return}e.list=i}function qI(e,t,o,n,i){const s={};t.forEach(u=>s[u.colId]=u);const r={};e.forEach(u=>{s[u.colId]&&(r[u.colId]=!0)});const a=e.filter(u=>r[u.colId]),l=t.filter(u=>r[u.colId]),c=[];l.forEach((u,d)=>{const h=a&&a[d];if(h&&h.colId!==u.colId){const f=n.getCol(h.colId);f&&c.push(f)}}),c.length&&i.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,finished:!0,source:o})}var wy=(e,t,o,n)=>{const i=e[o.getId()],s=e[n.getId()],r=i!=null,a=s!=null;if(r&&a)return i-s;if(r)return-1;if(a)return 1;const l=t.indexOf(o),c=t.indexOf(n),u=l>=0,d=c>=0;return u&&d?l-c:u?-1:1},QI=class extends Ie{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],e=>this.refreshAll(br(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),br(e.source)))}createColsFromColDefs(e){var R,_,M;const{beans:t}=this,{valueCache:o,colAutosize:n,rowGroupColsSvc:i,pivotColsSvc:s,valueColsSvc:r,visibleCols:a,colViewport:l,eventSvc:c}=t,u=this.colDefs?lS(t,e):void 0;o==null||o.expire();const d=(R=this.colDefCols)==null?void 0:R.list,h=(_=this.colDefCols)==null?void 0:_.tree,f=OI(t,this.colDefs,!0,h,e);yu(t,(M=this.colDefCols)==null?void 0:M.tree,f.columnTree);const v=f.columnTree,m=f.treeDepth,b=eS(v),S={};b.forEach(I=>S[I.getId()]=I),this.colDefCols={tree:v,treeDepth:m,list:b,map:S},i==null||i.extractCols(e,d),s==null||s.extractCols(e,d),r==null||r.extractCols(e,d),this.ready=!0,this.refreshCols(!0),a.refresh(e),l.checkViewportColumns(),c.dispatchEvent({type:"columnEverythingChanged",source:e}),u&&(this.changeEventsDispatching=!0,u(),this.changeEventsDispatching=!1),c.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&(n==null||n.applyAutosizeStrategy())}refreshCols(e){var m;if(!this.colDefCols)return;const t=(m=this.cols)==null?void 0:m.tree;this.saveColOrder();const{autoColSvc:o,selectionColSvc:n,rowNumbersSvc:i,quickFilter:s,pivotResultCols:r,showRowGroupCols:a,rowAutoHeight:l,visibleCols:c,colViewport:u,eventSvc:d}=this.beans,h=this.selectCols(r,this.colDefCols);this.createColumnsForService([o,n,i],h);const f=nI(this.gos,this.showingPivotResult);(!e||f)&&this.restoreColOrder(h),this.positionLockedCols(h),a==null||a.refresh(),s==null||s.refreshCols(),this.setColSpanActive(),l==null||l.setAutoHeightActive(h),c.clear(),u.clear(),!Us(t,this.cols.tree)&&d.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t){for(const o of e)o&&(o.createColumns(t,n=>{this.lastOrder=n(this.lastOrder),this.lastPivotOrder=n(this.lastPivotOrder)}),o.addColumns(t))}selectCols(e,t){const o=(e==null?void 0:e.getPivotResultCols())??null;this.showingPivotResult=o!=null;const{map:n,list:i,tree:s,treeDepth:r}=o??t;return this.cols={list:i.slice(),map:{...n},tree:s.slice(),treeDepth:r},o&&(o.list.some(l=>{var c;return((c=this.cols)==null?void 0:c.map[l.getColId()])!==void 0})||(this.lastPivotOrder=null)),this.cols}getColsToShow(){var n;if(!this.cols)return[];const e=this.isPivotMode()&&!this.showingPivotResult,t=(n=this.beans.valueColsSvc)==null?void 0:n.columns;return this.cols.list.filter(i=>{const s=zp(i);if(e){const r=t==null?void 0:t.includes(i);return s||r}else return s||i.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,o){wn(this.beans,{state:e.map(n=>({colId:typeof n=="string"?n:n.getColId(),hide:!t}))},o)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const o=t.filter(d=>e.map[d.getId()]!=null);if(o.length===0)return;if(o.length===e.list.length){e.list=o;return}const n=d=>{const h=d.getOriginalParent();return h?h.getChildren().length>1?!0:n(h):!1};if(!o.some(d=>n(d))){const d=new Set(o);for(const h of e.list)d.has(h)||o.push(h);e.list=o;return}const i=new Map;for(let d=0;d<o.length;d++){const h=o[d];i.set(h,d)}const s=e.list.filter(d=>!i.has(d));if(s.length===0){e.list=o;return}const r=(d,h)=>{const f=h?h.getOriginalParent():d.getOriginalParent();if(!f)return null;let v=null,m=null;for(const b of f.getChildren())if(!(b===h||b===d)){if(b instanceof Ju){const S=i.get(b);if(S==null)continue;(v==null||v<S)&&(v=S,m=b);continue}b.forEachLeafColumn(S=>{const R=i.get(S);R!=null&&(v==null||v<R)&&(v=R,m=S)})}return m??r(d,f)},a=[],l=new Map;for(const d of s){const h=r(d,null);if(h==null){a.push(d);continue}const f=l.get(h);f===void 0?l.set(h,d):Array.isArray(f)?f.push(d):l.set(h,[f,d])}const c=new Array(e.list.length);let u=c.length-1;for(let d=a.length-1;d>=0;d--)c[u--]=a[d];for(let d=o.length-1;d>=0;d--){const h=o[d],f=l.get(h);if(f)if(Array.isArray(f))for(let v=f.length-1;v>=0;v--){const m=f[v];c[u--]=m}else c[u--]=f;c[u--]=h}e.list=c}positionLockedCols(e){e.list=iS(e.list,this.gos)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=((e=this.cols)==null?void 0:e.list)??null:this.lastOrder=((t=this.cols)==null?void 0:t.list)??null}getColumnDefs(){var e,t;return this.colDefCols?(t=this.beans.colDefFactory)==null?void 0:t.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,((e=this.cols)==null?void 0:e.list)??[]):void 0}setColSpanActive(){var e;this.colSpanActive=!!((e=this.cols)!=null&&e.list.some(t=>t.getColDef().colSpan!=null))}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1);const{visibleCols:o,eventSvc:n}=this.beans;o.refresh(t),n.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){var t;const e=(t=this.beans.pivotColsSvc)==null?void 0:t.columns;return this.pivotMode&&!!(e!=null&&e.length)}recreateColumnDefs(e){var o;if(!this.cols)return;(o=this.beans.autoColSvc)==null||o.updateColumns(e);const t=br(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e;yu(this.beans,(e=this.colDefCols)==null?void 0:e.tree),super.destroy()}getColTree(){var e;return((e=this.cols)==null?void 0:e.tree)??[]}getColDefColTree(){var e;return((e=this.colDefCols)==null?void 0:e.tree)??[]}getColDefCols(){var e;return((e=this.colDefCols)==null?void 0:e.list)??null}getCols(){var e;return((e=this.cols)==null?void 0:e.list)??[]}forAllCols(e){var i,s,r,a;const{pivotResultCols:t,autoColSvc:o,selectionColSvc:n}=this.beans;uc((i=this.colDefCols)==null?void 0:i.list,e),uc((s=o==null?void 0:o.columns)==null?void 0:s.list,e),uc((r=n==null?void 0:n.columns)==null?void 0:r.list,e),uc((a=t==null?void 0:t.getPivotResultCols())==null?void 0:a.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){var t;return(t=this.colDefCols)!=null&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){var t;return((t=this.cols)==null?void 0:t.map[e])??null}getColFromCollection(e,t){var i,s;if(t==null)return null;const{map:o,list:n}=t;if(typeof e=="string"&&o[e])return o[e];for(let r=0;r<n.length;r++)if(tS(n[r],e))return n[r];return((i=this.beans.autoColSvc)==null?void 0:i.getColumn(e))??((s=this.beans.selectionColSvc)==null?void 0:s.getColumn(e))??null}},uS=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let o;return typeof t!="number"?o=0:o=t+1,this.existingIds[e]=o,o}};function kl(e,t,o){return o&&e.addDestroyFunc(()=>t.destroyBean(o)),o??e}var dS=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){var n;if(!e)return;if(e.indexOf(" ")>=0){const i=(e||"").split(" ");if(i.length>1){i.forEach(s=>this.toggleCss(s,t));return}}this.cssClassStates[e]!==t&&e.length&&((n=this.getGui())==null||n.classList.toggle(e,t),this.cssClassStates[e]=t)}},YI=0,Qe=null,Bt=class extends Ie{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=YI++,this.cssManager=new dS(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(o=>[o.selector,o])),e&&this.setTemplate(e)}preConstruct(){var t,o,n;this.wireTemplate(this.getGui());const e="component-"+((o=(t=Object.getPrototypeOf(this))==null?void 0:t.constructor)==null?void 0:o.name);(n=this.css)==null||n.forEach(i=>this.beans.environment.addGlobalCSS(i,e))}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(k0):null}applyElementsToComponent(e,t,o,n=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){const i=this[t];if(i===Qe)this[t]=n??e;else{const s=o&&o[t];if(!this.suppressDataRefValidation&&!s)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${i}`)}}}createChildComponentsFromTags(e,t){const o=[];for(const n of e.childNodes??[])o.push(n);o.forEach(n=>{if(!(n instanceof HTMLElement))return;const i=this.createComponentFromElement(n,s=>{const r=s.getGui();if(r)for(const a of n.attributes??[])r.setAttribute(a.name,a.value)},t);if(i){if(i.addItems&&n.children.length){this.createChildComponentsFromTags(n,t);const s=Array.prototype.slice.call(n.children);i.addItems(s)}this.swapComponentForNode(i,e,n)}else n.childNodes&&this.createChildComponentsFromTags(n,t)})}createComponentFromElement(e,t,o){const n=e.nodeName,i=this.getDataRefAttribute(e),s=n.indexOf("AG-")===0,r=s?this.componentSelectors.get(n):null;let a=null;if(r){const l=o&&i?o[i]:void 0;a=new r.component(l),a.setParentComponent(this),this.createBean(a,null,t)}else if(s)throw new Error(`selector: ${n}`);return this.applyElementsToComponent(e,i,o,a),a}swapComponentForNode(e,t,o){const n=e.getGui();t.replaceChild(n,o),t.insertBefore(document.createComment(o.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(o=>o.setAttribute("tabindex",t.toString()))}setTemplate(e,t,o){let n;typeof e=="string"||e==null?n=Op(e):n=Ut(e),this.setTemplateFromElement(n,t,o)}setTemplateFromElement(e,t,o,n=!1){if(this.eGui=e,this.suppressDataRefValidation=n,t)for(let i=0;i<t.length;i++){const s=t[i];this.componentSelectors.set(s.selector,s)}this.wireTemplate(e,o)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let o=t;return e==null?null:(o||(o=this.eGui),Bp(e)?{element:e,parent:o}:{element:e.getGui(),parent:o})}prependChild(e,t){const{element:o,parent:n}=this.getContainerAndElement(e,t)||{};!o||!n||n.insertAdjacentElement("afterbegin",o)}appendChild(e,t){const{element:o,parent:n}=this.getContainerAndElement(e,t)||{};!o||!n||n.appendChild(o)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:o}=t;zA(this.eGui,e,{skipAriaHidden:o})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:o}=t;Yt(this.eGui,e,{skipAriaHidden:o});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,o){this.eGui.addEventListener(e,t,o),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},Lo=class _a{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(o=>this.onDone(o),o=>this.onReject(o))}static all(t){return t.length?new _a(o=>{let n=t.length;const i=new Array(n);t.forEach((s,r)=>{s.then(a=>{i[r]=a,n--,n===0&&o(i)})})}):_a.resolve()}static resolve(t=null){return new _a(o=>o(t))}then(t){return new _a(o=>{this.status===1?o(t(this.resolution)):this.waiters.push(n=>o(t(n)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(o=>o(t))}onReject(t){}};function JI(e){return e?e.prototype&&"getGui"in e.prototype:!1}function hS(e,t,o,n){const{name:i}=o;let s,r,a,l,c,u;if(t){const d=t,h=d[i+"Selector"],f=h?h(n):null,v=m=>{typeof m=="string"?s=m:m!=null&&m!==!0&&(e.isFrameworkComponent(m)?a=m:r=m)};f?(v(f.component),l=f.params,c=f.popup,u=f.popupPosition):v(d[i])}return{compName:s,jsComp:r,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:u}}var ZI=class extends Ie{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,o,n=!1){return this.getCompDetails(this.gridOptions,e,t,o,n)}getCompDetails(e,t,o,n,i=!1){var R;const{name:s,cellRenderer:r}=t;let{compName:a,jsComp:l,fwComp:c,paramsFromSelector:u,popupFromSelector:d,popupPositionFromSelector:h}=hS(this.beans.frameworkOverrides,e,t,n),f;const v=_=>{const M=this.registry.getUserComponent(s,_);M&&(l=M.componentFromFramework?void 0:M.component,c=M.componentFromFramework?M.component:void 0,f=M.params)};if(a!=null&&v(a),l==null&&c==null&&o!=null&&v(o),l&&r&&!JI(l)&&(l=(R=this.agCompUtils)==null?void 0:R.adaptFunction(t,l)),!l&&!c){const{validation:_}=this.beans;i&&(a!==o||!o)?a?_!=null&&_.isProvidedUserComp(a)||Nt(50,{compName:a}):o?_||Nt(260,{...this.gos.getModuleErrorParams(),propName:s,compName:o}):Nt(216,{name:s}):o&&!_&&Nt(146,{comp:o});return}const m=this.mergeParams(e,t,n,u,f),b=l==null,S=l??c;return{componentFromFramework:b,componentClass:S,params:m,type:t,popupFromSelector:d,popupPositionFromSelector:h,newAgStackInstance:()=>this.newAgStackInstance(S,b,m,t)}}newAgStackInstance(e,t,o,n){var a;const i=!t;let s;i?s=new e:s=this.frameworkCompWrapper.wrap(e,n.mandatoryMethods,n.optionalMethods,n),this.createBean(s);const r=(a=s.init)==null?void 0:a.call(s,o);return r==null?Lo.resolve(s):r.then(()=>s)}mergeParams(e,t,o,n=null,i){const s={...o,...i},r=e,a=r&&r[t.name+"Params"];if(typeof a=="function"){const l=a(o);No(s,l)}else typeof a=="object"&&No(s,a);return No(s,n),s}},XI={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},eM={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},tM={name:"headerComponent",optionalMethods:["refresh"]},oM={name:"innerHeaderComponent"},nM={name:"innerHeaderGroupComponent"},iM={name:"headerGroupComponent"},sM={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},rM={name:"loadingCellRenderer",cellRenderer:!0},aM={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},lM={name:"loadingOverlayComponent",optionalMethods:["refresh"]},cM={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},uM={name:"tooltipComponent"},Wp={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},dM={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},hM={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},fM={name:"loadingCellRenderer",cellRenderer:!0},pM={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},gM={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function mM(e,t){return e.getCompDetailsFromGridOptions(eM,"agDragAndDropImage",t,!0)}function vM(e,t,o){return e.getCompDetails(t,tM,"agColumnHeader",o)}function yM(e,t,o){return e.getCompDetails(t,oM,void 0,o)}function CM(e,t){const o=t.columnGroup.getColGroupDef();return e.getCompDetails(o,iM,"agColumnGroupHeader",t)}function bM(e,t,o){return e.getCompDetails(t,nM,void 0,o)}function wM(e,t){return e.getCompDetailsFromGridOptions(hM,void 0,t,!0)}function SM(e,t){return e.getCompDetailsFromGridOptions(fM,"agLoadingCellRenderer",t,!0)}function xM(e,t){return e.getCompDetailsFromGridOptions(pM,"agGroupRowRenderer",t,!0)}function RM(e,t){return e.getCompDetailsFromGridOptions(gM,"agDetailCellRenderer",t,!0)}function Sy(e,t,o){return e.getCompDetails(t,sM,void 0,o)}function _M(e,t,o){return e.getCompDetails(t,rM,"agSkeletonCellRenderer",o,!0)}function xy(e,t,o){return e.getCompDetails(t,aM,"agCellEditor",o,!0)}function EM(e,t,o,n){return e.getCompDetails(t,Wp,n,o,!0)}function PM(e,t,o){return e.getCompDetails(t,XI,"agDateInput",o,!0)}function FM(e,t){return e.getCompDetailsFromGridOptions(lM,"agLoadingOverlay",t,!0)}function DM(e,t){return e.getCompDetailsFromGridOptions(cM,"agNoRowsOverlay",t,!0)}function TM(e,t){return e.getCompDetails(t.colDef,uM,"agTooltipComponent",t,!0)}function kM(e,t,o,n){return e.getCompDetails(t,dM,n,o)}function AM(e,t){return hS(e,t,Wp)}function IM(e,t,o){return e.mergeParams(t,Wp,o)}function pl(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var fS=new Set,wu={},wr={},Gc,pS=!1,gS=!1,MM=!1;function OM(e){const[t,o]=e.version.split(".")||[],[n,i]=Gc.split(".")||[];return t===n&&o===i}function LM(e){Gc||(Gc=e.version);const t=o=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${o} Please update all modules to the same version.`;if(e.version?OM(e)||mr(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${Gc}.`)):mr(t(`'${e.moduleName}' is incompatible.`)),e.validate){const o=e.validate();o.isValid||mr(`${o.message}`)}}function Hr(e,t,o=!1){o||(pS=!0),LM(e);const n=e.rowModels??["all"];fS.add(e);let i;t!==void 0?(gS=!0,wr[t]===void 0&&(wr[t]={}),i=wr[t]):i=wu,n.forEach(s=>{i[s]===void 0&&(i[s]={}),i[s][e.moduleName]=e}),e.dependsOn&&e.dependsOn.forEach(s=>Hr(s,t,o))}function BM(e){delete wr[e]}function Af(e,t,o){const n=i=>{var s,r,a;return!!((s=wu[i])!=null&&s[e])||!!((a=(r=wr[t])==null?void 0:r[i])!=null&&a[e])};return n(o)||n("all")}function Up(){return gS}function NM(e,t){const o=wr[e]??{};return[...Object.values(wu.all??{}),...Object.values(o.all??{}),...Object.values(wu[t]??{}),...Object.values(o[t]??{})]}function HM(){return new Set(fS)}function GM(){return pS}function VM(){return MM}var Ry=class{static register(e){Hr(e,void 0)}static registerModules(e){e.forEach(t=>Hr(t,void 0))}},zM=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){var t;for(const o of Object.keys(e.providedBeanInstances))this.beans[o]=e.providedBeanInstances[o];e.beanClasses.forEach(o=>{const n=new o;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${o.name} is missing beanName`),this.createdBeans.push(n)}),(t=e.derivedBeans)==null||t.forEach(o=>{const{beanName:n,bean:i}=o(this);this.beans[n]=i,this.createdBeans.push(i)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("null bean");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(o=>{var n,i;(n=o.preWireBeans)==null||n.call(o,this.beans),(i=o.wireBeans)==null||i.call(o,this.beans)}),e.forEach(o=>{var n;return(n=o.preConstruct)==null?void 0:n.call(o)}),t&&e.forEach(t),e.forEach(o=>{var n;return(n=o.postConstruct)==null?void 0:n.call(o)})}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){var t;(t=e==null?void 0:e.destroy)==null||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},WM=class extends zM{init(e){this.gridId=e.gridId,this.beans.context=this,this.destroyCallback=e.destroyCallback,super.init(e)}destroy(){var e;super.destroy(),BM(this.gridId),(e=this.destroyCallback)==null||e.call(this)}getGridId(){return this.gridId}},UM="ag-column-first",$M="ag-column-last";function mS(e,t,o,n){return qt(e)?[]:KM(e.headerClass,e,t,o,n)}function vS(e,t,o){e.toggleCss(UM,o.isColAtEdge(t,"first")),e.toggleCss($M,o.isColAtEdge(t,"last"))}function jM(e,t,o,n){return pt(t,{colDef:e,column:o,columnGroup:n})}function KM(e,t,o,n,i){if(qt(e))return[];let s;if(typeof e=="function"){const r=jM(t,o,n,i);s=e(r)}else s=e;return typeof s=="string"?[s]:Array.isArray(s)?[...s]:[]}function Al(e){return!!(e.rowPinned&&e.pinnedSibling)}function tn(e,t,o,n){const i=t==="top";if(!o)return tn(e,t,i?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),n);if(!n){const l=i?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return tn(e,t,o,i?e.getPinnedTopRow(l-1):e.getPinnedBottomRow(l-1))}let s=!1,r=!1;const a=[];return e.forEachPinnedRow(t,l=>{if(l===o&&!s){s=!0,a.push(l);return}if(s&&l===n){r=!0,a.push(l);return}s&&!r&&a.push(l)}),a}var Te={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},If=!1,Su=0;function qM(e){Su>0||(e.addEventListener("keydown",xu),e.addEventListener("mousedown",xu))}function QM(e){Su>0||(e.removeEventListener("keydown",xu),e.removeEventListener("mousedown",xu))}function xu(e){const t=If,o=e.type==="keydown";o&&(e.ctrlKey||e.metaKey||e.altKey)||t!==o&&(If=o)}function YM(e){const t=go(e);return qM(t),Su++,()=>{Su--,QM(t)}}function JM(){return If}function ZM(e,t,o){t.addManagedElementListeners(o,{keydown:n=>{if(!n.defaultPrevented&&n.key===Te.TAB){const i=n.shiftKey;$s(e,o,!1,i)||Gr(e,i)&&n.preventDefault()}}})}function Sr(e,t,o=!1){const n=VA;let i=_0;t&&(i+=", "+t),o&&(i+=', [tabindex="-1"]');const s=Array.prototype.slice.apply(e.querySelectorAll(n)).filter(l=>_n(l)),r=Array.prototype.slice.apply(e.querySelectorAll(i));return r.length?((l,c)=>l.filter(u=>c.indexOf(u)===-1))(s,r):s}function Gs(e,t=!1,o=!1,n=!1){const i=Sr(e,n?".ag-tab-guard":null,o),s=t?Vt(i):i[0];return s?(s.focus({preventScroll:!0}),!0):!1}function $s(e,t,o,n){const i=Sr(t,o?':not([tabindex="-1"])':null),s=Jt(e);let r;o?r=i.findIndex(l=>l.contains(s)):r=i.indexOf(s);const a=r+(n?-1:1);return a<0||a>=i.length?null:i[a]}function yS(e,t=5){let o=0;for(;e&&Rf(e)===null&&++o<=t;)e=e.parentElement;return Rf(e)===null?null:e}function XM(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function Fs(e){var t;return e.gos.get("suppressHeaderFocus")||!!((t=e.overlays)!=null&&t.isExclusive())}function Xu(e){var t;return e.gos.get("suppressCellFocus")||!!((t=e.overlays)!=null&&t.isExclusive())}function Gr(e,t,o=!1){const n=e.ctrlsSvc.get("gridCtrl");return!o&&n.focusNextInnerContainer(t)?!0:((o||!t&&!n.isDetailGrid())&&n.forceFocusOutOfContainer(t),!1)}function eO(e,t=!1){return e===Te.DELETE?!0:!t&&e===Te.BACKSPACE?S0():!1}var tO=class extends Ie{constructor(e,t,o,n){super(),this.cellCtrl=e,this.rowNode=o,this.rowCtrl=n,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case Te.ENTER:this.onEnterKeyDown(e);break;case Te.F2:this.onF2KeyDown(e);break;case Te.ESCAPE:this.onEscapeKeyDown(e);break;case Te.TAB:this.onTabKeyDown(e);break;case Te.BACKSPACE:case Te.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case Te.DOWN:case Te.UP:case Te.RIGHT:case Te.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){var o;if(!this.cellCtrl.editing){if(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const n=this.cellCtrl.getFocusedCellPosition();(o=this.beans.navigation)==null||o.navigateToNextCell(e,t,n,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:o}=this.beans;if(!t)return;const n=t.extendLatestRangeInDirection(e);n&&(o==null||o.ensureCellVisible(n))}onTabKeyDown(e){var t;(t=this.beans.navigation)==null||t.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){var l;const{cellCtrl:o,beans:n,rowNode:i}=this,{gos:s,rangeSvc:r,eventSvc:a}=n;if(!o.editing){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),eO(e,s.get("enableCellEditingOnBackspace"))){if(r&&gi(s))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(o.isCellEditable()){const{column:c}=o,u=this.beans.valueSvc.getDeleteValue(c,i);i.setDataValue(c,u,"cellClear")}}else(l=n.editSvc)==null||l.startRowOrCellEdit(o,e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){var n,i,s;const{cellCtrl:t,beans:o}=this;if(t.editing||this.rowCtrl.editing)(n=this.beans.editSvc)==null||n.stopRowOrCellEdit(t,!1,!1,e.shiftKey);else if(o.gos.get("enterNavigatesVertically")){const r=e.shiftKey?Te.UP:Te.DOWN;(i=o.navigation)==null||i.navigateToNextCell(null,r,t.cellPosition,!1)}else(s=o.editSvc)==null||s.startRowOrCellEdit(t,Te.ENTER,e),t.editing&&e.preventDefault()}onF2KeyDown(e){var n;const{cellCtrl:t,beans:o}=this;t.editing||(n=o.editSvc)==null||n.startRowOrCellEdit(t,Te.F2,e)}onEscapeKeyDown(e){var n;const{cellCtrl:t,beans:o}=this;t.editing&&((n=o.editSvc)==null||n.stopRowOrCellEdit(t,!0))}processCharacter(e){var i;if(e.target!==this.eGui||this.cellCtrl.editing)return;const n=e.key;n===Te.SPACE?this.onSpaceKeyDown(e):(i=this.beans.editSvc)!=null&&i.startRowOrCellEdit(this.cellCtrl,n,e)&&e.preventDefault()}onSpaceKeyDown(e){var o;const{gos:t}=this.beans;!this.cellCtrl.editing&&_s(t)&&((o=this.beans.selectionSvc)==null||o.handleSelectionEvent(e,this.rowNode,"spaceKey")),e.preventDefault()}destroy(){super.destroy()}},oO=class extends Ie{constructor(e,t,o){super(),this.cellCtrl=e,this.column=o,this.beans=t}onMouseEvent(e,t){if(!ui(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){var c;if((c=this.beans.touchSvc)!=null&&c.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:o,gos:n,editSvc:i}=this.beans,s=e.ctrlKey||e.metaKey;o&&s&&o.getCellRangeCount(this.cellCtrl.cellPosition)>1&&o.intersectLastRange(!0);const r=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(r);const a=this.column.getColDef();a.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{a.onCellClicked(r)})},0),(n.get("singleClickEdit")||a.singleClickEdit)&&!n.get("suppressClickEdit")&&!(e.shiftKey&&(o==null?void 0:o.getCellRanges().length)!=0)&&(i==null||i.startRowOrCellEdit(this.cellCtrl,void 0,e))}onCellDoubleClicked(e){const{column:t,beans:o,cellCtrl:n}=this,{eventSvc:i,frameworkOverrides:s,gos:r,editSvc:a}=o,l=t.getColDef(),c=n.createEvent(e,"cellDoubleClicked");i.dispatchEvent(c),typeof l.onCellDoubleClicked=="function"&&window.setTimeout(()=>{s.wrapOutgoing(()=>{l.onCellDoubleClicked(c)})},0),!r.get("singleClickEdit")&&!r.get("suppressClickEdit")&&(a==null||a.startRowOrCellEdit(n,null,e))}onMouseDown(e){const{ctrlKey:t,metaKey:o,shiftKey:n}=e,i=e.target,{cellCtrl:s,beans:r}=this,{eventSvc:a,rangeSvc:l,rowNumbersSvc:c,focusSvc:u,gos:d}=r;if(this.isRightClickInExistingRange(e))return;const h=l&&!l.isEmpty(),f=this.containsWidget(i),{cellPosition:v}=s,m=Ps(v.column);if(c&&m&&!c.handleMouseDownOnCell(v,e)){l&&e.preventDefault(),e.stopImmediatePropagation();return}if(!n||!h){const S=d.get("enableCellTextSelection")&&e.defaultPrevented,R=(zs()||S)&&!s.editing&&!Ip(i)&&!f;s.focusCell(R)}if(n&&h&&!u.isCellFocused(v)){e.preventDefault();const b=u.getFocusedCell();if(b){const{column:S,rowIndex:R,rowPinned:_}=b,M=r.rowRenderer.getRowByPosition({rowIndex:R,rowPinned:_}),I=M==null?void 0:M.getCellCtrl(S);I!=null&&I.editing&&I.stopEditing(),u.setFocusedCell({column:S,rowIndex:R,rowPinned:_,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!f){if(l)if(m&&e.preventDefault(),n)l.extendLatestRangeToCell(v);else{const b=t||o;l.setRangeToCell(v,b)}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const o=t.isCellInAnyRange(this.cellCtrl.cellPosition),n=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(o&&n)return!0}return!1}containsWidget(e){return Rs(e,"ag-selection-checkbox",3)||Rs(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:o}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),o==null||o.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:o}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),o==null||o.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,o=t.contains(e.target),n=t.contains(e.relatedTarget);return o&&n}destroy(){super.destroy()}},nO=class extends Ie{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();Us(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,o=e.getColSpan(t),n=[];if(o===1)n.push(e);else{let i=e;const s=e.getPinned();for(let r=0;i&&r<o&&(n.push(i),i=this.beans.visibleCols.getColAfter(i),!(!i||qt(i)||s!==i.getPinned()));r++);}return n}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=Vt(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;const{visibleCols:t}=this.beans,o=t.getColsLeftWidth();if(this.column.getPinned()==="right"){const n=t.bodyWidth;return o+n+(e||0)}return o+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;const o=Es(this.beans)*this.rowSpan;this.eContent.style.height=`${o}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},iO="ag-cell",sO="ag-cell-auto-height",rO="ag-cell-normal-height",aO="ag-cell-focus",lO="ag-cell-first-right-pinned",cO="ag-cell-last-left-pinned",uO="ag-cell-not-inline-editing",dO="ag-cell-wrap-text",Ru="cellCtrl";function CS(e,t){return q0(e,t,Ru)}var hO=0,Va=class extends Ie{constructor(e,t,o,n){super(),this.column=e,this.rowNode=t,this.rowCtrl=n,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.tooltipFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.beans=o;const{colId:i}=e;this.instanceId=i+"-"+hO++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){var n;const{beans:e}=this;this.positionFeature=new nO(this,e),this.customStyleFeature=(n=e.cellStyles)==null?void 0:n.createCellCustomStyleFeature(this,e),this.mouseListener=new oO(this,e,this.column),this.keyboardListener=new tO(this,e,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature();const{rangeSvc:t}=e;t&&gi(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this)),Ps(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){var o;this.tooltipFeature=(o=this.beans.tooltipSvc)==null?void 0:o.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(e,t,o,n,i,s,r){var a,l,c,u,d,h,f;this.comp=e,this.eGui=t,this.printLayout=i,r??(r=this),this.addDomData(r),this.addFeatures(),r.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n,r),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(a=this.positionFeature)==null||a.init(),(l=this.customStyleFeature)==null||l.setComp(e),(c=this.tooltipFeature)==null||c.refreshTooltip(),(u=this.keyboardListener)==null||u.init(),(d=this.rangeFeature)==null||d.setComp(e),(h=this.rowResizeFeature)==null||h.refreshRowResizer(),s&&this.isCellEditable()?(f=this.beans.editSvc)==null||f.startEditing(this):this.showValue(!1,!0),this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach(v=>v()),this.onCompAttachedFuncs=[])}setupAutoHeight(e,t){var o;this.isAutoHeight=((o=this.beans.rowAutoHeight)==null?void 0:o.setupCellAutoHeight(this,e,t))??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(e,t){var d,h,f;const{beans:o,column:n,rowNode:i,rangeFeature:s}=this,{userCompFactory:r}=o,a=this.getValueToDisplay();let l;const c=i.stub&&((d=i.groupData)==null?void 0:d[n.getId()])==null,u=n.getColDef();if(c||this.isCellRenderer()){const v=this.createCellRendererParams();!c||Ps(n)?l=Sy(r,u,v):l=_M(r,u,v)}if(!l&&!c&&((h=o.findSvc)!=null&&h.isMatch(i,n))){const v=this.createCellRendererParams();l=Sy(r,{...n.getColDef(),cellRenderer:"agFindCellRenderer"},v)}this.comp.setRenderDetails(l,a,e),!t&&s&&Si(o,()=>s==null?void 0:s.refreshHandle()),(f=this.rowResizeFeature)==null||f.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&Al(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:o}=this.beans.gridOptions,n=gu(t),i=qr(this.column);return o==="custom"&&n!=="selectionColumn"&&i?!1:e.checkboxSelection||i&&typeof t=="object"&&Cr(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),o=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),n=this.includeDndSource!=this.isIncludeControl(e.dndSource),i=this.isAutoHeight!=this.column.isAutoHeight();return t||o||n||i}onPopupEditorClosed(){var e;this.editing&&((e=this.beans.editSvc)==null||e.stopRowOrCellEdit(this))}stopEditing(e=!1){var t;return((t=this.beans.editSvc)==null?void 0:t.stopEditing(this,e))??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:o,rowNode:n,comp:i,eGui:s,beans:{valueSvc:r,gos:a}}=this;return pt(a,{value:e,valueFormatted:t,getValue:()=>r.getValueForDisplay(o,n).value,setValue:c=>r.setValue(n,o,c),formatValue:this.formatValue.bind(this),data:n.data,node:n,pinned:o.getPinned(),colDef:o.getColDef(),column:o,refreshCell:this.refreshCell.bind(this),eGridCell:s,eParentOfValue:i.getParentOfValue(),registerRowDragger:(c,u,d,h)=>this.registerRowDragger(c,u,h),setTooltip:(c,u)=>{var d;a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(c,u),(d=this.tooltipFeature)==null||d.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;this.refreshShouldDestroy()?(t=this.rowCtrl)==null||t.recreateCell(this):this.refreshCell(e)}refreshCell(e){var c,u,d,h,f,v;if(this.suppressRefreshCell||this.editing)return;const t=this.column.getColDef(),o=e!=null&&!!e.newData,n=e!=null&&!!e.suppressFlash,i=t.field==null&&t.valueGetter==null&&t.showRowGroup==null,s=e&&e.forceRefresh||i||o,r=!!this.comp,a=this.updateAndFormatValue(r),l=s||a;if(r){if(l){this.showValue(o,!1);const m=(c=this.beans.filterManager)==null?void 0:c.isSuppressFlashingCellsBecauseFiltering();!n&&!m&&t.enableCellChangeFlash&&((u=this.beans.cellFlashSvc)==null||u.flashCell(this)),(d=this.customStyleFeature)==null||d.applyUserStyles(),(h=this.customStyleFeature)==null||h.applyClassesFromColDef()}(f=this.tooltipFeature)==null||f.refreshTooltip(),(v=this.customStyleFeature)==null||v.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,o=this.valueFormatted,{value:n,valueFormatted:i}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=n,this.valueFormatted=i,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=o:!0}valuesAreEqual(e,t){const o=this.column.getColDef();return o.equals?o.equals(e,t):e===t}addDomData(e){const t=this.eGui;Ns(this.beans.gos,t,Ru,this),e.addDestroyFunc(()=>Ns(this.beans.gos,t,Ru,null))}createEvent(e,t){const{rowNode:o,column:n,value:i,beans:s}=this;return pt(s.gos,{type:t,node:o,data:o.data,value:i,column:n,colDef:n.getColDef(),rowPinned:o.rowPinned,event:e,rowIndex:o.rowIndex})}processCharacter(e){var t;(t=this.keyboardListener)==null||t.processCharacter(e)}onKeyDown(e){var t;(t=this.keyboardListener)==null||t.onKeyDown(e)}onMouseEvent(e,t){var o;(o=this.mouseListener)==null||o.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature.getColSpanningList()}onLeftChanged(){var e;this.comp&&((e=this.positionFeature)==null||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:o}=this;vS(e,t,o.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);b0(this.eGui,e)}onWidthChanged(){var e;return(e=this.positionFeature)==null?void 0:e.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){var e;this.comp&&((e=this.rangeFeature)==null||e.updateRangeBordersIfRangeCount())}onCellSelectionChanged(){var e;this.comp&&((e=this.rangeFeature)==null||e.onCellSelectionChanged())}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1){this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e})}restoreFocus(e=!1){if(!this.comp||this.editing||!this.isCellFocused()||!this.beans.focusSvc.shouldTakeFocus())return;const t=()=>{if(!this.isAlive())return;const o=this.comp.getFocusableElement();this.isCellFocused()&&o.focus({preventScroll:!0})};if(e){setTimeout(t,0);return}t()}onRowIndexChanged(){var e,t;this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),(e=this.rangeFeature)==null||e.onCellSelectionChanged(),(t=this.rowResizeFeature)==null||t.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(Ps(this.column)&&(e=!0),ln(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss(lO,e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss(cO,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){var i;const{beans:t}=this;if(Xu(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}const o=this.isCellFocused();if(this.comp.toggleCss(aO,o),o&&e&&e.forceBrowserFocus){let s=this.comp.getFocusableElement();if(this.editing){const r=Sr(s,null,!0);r.length&&(s=r[0])}s.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}const n=t.gos.get("editType")==="fullRow";!o&&!n&&this.editing&&((i=t.editSvc)==null||i.stopRowOrCellEdit(this)),o&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:ci(t),column:this.column}}setInlineEditingCss(){var e;(e=this.beans.editSvc)==null||e.setInlineEditingCss(this.rowCtrl)}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss(iO,!0),e.toggleCss(uO,!0);const t=this.column.isAutoHeight()==!0;e.toggleCss(sO,t),e.toggleCss(rO,!t)}onColumnHover(){var e;(e=this.beans.colHover)==null||e.onCellColumnHover(this.column,this.comp)}onColDefChanged(){var e;this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?(e=this.beans.editSvc)==null||e.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.comp.toggleCss(dO,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),o=this.createEvent(e,"cellContextMenu"),{beans:n}=this;n.eventSvc.dispatchEvent(o),t.onCellContextMenu&&window.setTimeout(()=>{n.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(o)})},0)}getCellRenderer(){var e;return((e=this.comp)==null?void 0:e.getCellRenderer())??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){var e;return((e=this.eGui)==null?void 0:e.contains(Jt(this.beans)))??!1}createSelectionCheckbox(){var t;const e=(t=this.beans.selectionSvc)==null?void 0:t.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,o){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const n=this.createRowDragComp(e,t,o);n&&(this.customRowDragComp=n,this.addDestroyFunc(()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null}))}createRowDragComp(e,t,o){var i;const n=(i=this.beans.rowDragSvc)==null?void 0:i.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,o);if(n)return this.beans.context.createBean(n),n}cellEditorAttached(){this.onEditorAttachedFuncs.forEach(e=>e()),this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}},bS="__ag_grid_instance";function wS(e,t){t[bS]=e.gridInstanceId}function gl(e,t){return SS(e,t.target)}function SS(e,t){let o=t;for(;o;){const n=o[bS];if(Ye(n))return n===e.gridInstanceId;o=o.parentElement}return!1}function fO(e,t){var o;return((o=CS(e,t.target))==null?void 0:o.getFocusedCellPosition())??null}function _y(e,t){const o=wo(e.gos,"normal"),n=t;let i,s;n.clientX!=null||n.clientY!=null?(i=n.clientX,s=n.clientY):(i=n.x,s=n.y);const{pageFirstPixel:r}=e.pageBounds.getCurrentPagePixelRange();if(s+=r,o){const a=e.ctrlsSvc.getScrollFeature(),l=a.getVScrollPosition(),c=a.getHScrollPosition();i+=c.left,s+=l.top}return{x:i,y:s}}var pO=class extends Ie{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.dragSvc=e.dragSvc,this.environment=e.environment,this.userCompFactory=e.userCompFactory}addDragSource(e,t=!1){const o={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:o,dragSource:e}),this.dragSvc.addDragSource(o)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){const{dragSourceAndParamsList:t,dragSvc:o}=this,n=t.find(i=>i.dragSource===e);n&&(o.removeDragSource(n.params),dn(t,n))}destroy(){const{dragSourceAndParamsList:e,dragSvc:t,dropTargets:o}=this;e.forEach(n=>t.removeDragSource(n.params)),e.length=0,o.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){var o;this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=e.getDragItem(),(o=e.onDragStarted)==null||o.call(e),this.createDragAndDropImageComponent()}onDragStop(e){var o,n;(n=(o=this.dragSource)==null?void 0:o.onDragStopped)==null||n.call(o);const{lastDropTarget:t}=this;if(t!=null&&t.onDragStop){const i=this.createDropTargetEvent(t,e,null,null,!1);t.onDragStop(i)}this.clearDragAndDropProperties()}onDragCancel(){var o;const{dragSource:e,lastDropTarget:t}=this;(o=e==null?void 0:e.onDragCancelled)==null||o.call(e),t!=null&&t.onDragCancel&&t.onDragCancel(this.createDropTargetEvent(t,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){var u,d;const o=this.getHorizontalDirection(e),n=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const i=this.dropTargets.filter(h=>this.isMouseOnDropTarget(e,h)),s=this.findCurrentDropTarget(e,i),{lastDropTarget:r,dragSource:a,dragAndDropImageComp:l,dragItem:c}=this;if(s!==r){if(this.leaveLastTargetIfExists(e,o,n,t),r!==null&&s===null&&((u=a==null?void 0:a.onGridExit)==null||u.call(a,c)),r===null&&s!==null&&((d=a==null?void 0:a.onGridEnter)==null||d.call(a,c)),this.enterDragTargetIfExists(s,e,o,n,t),s&&l){const{comp:h,promise:f}=l;h?h.setIcon(s.getIconName?s.getIconName():null,!1):f.then(v=>{v&&v.setIcon(s.getIconName?s.getIconName():null,!1)})}this.lastDropTarget=s}else if(s&&s.onDragging){const h=this.createDropTargetEvent(s,e,o,n,t);s.onDragging(h)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,o=[[e.getContainer()]];return t?o.concat(t):o}isMouseOnDropTarget(e,t){const o=this.getAllContainersFromDropTarget(t);let n=!1;const i=(a,l)=>{for(const c of l){const{width:u,height:d,left:h,right:f,top:v,bottom:m}=c.getBoundingClientRect();if(u===0||d===0)return!1;const b=a.clientX>=h&&a.clientX<f,S=a.clientY>=v&&a.clientY<m;if(!b||!S)return!1}return!0};for(const a of o)if(i(e,a)){n=!0;break}const{eElement:s,type:r}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(s)?!1:n&&t.isInterestedIn(r,s)}findCurrentDropTarget(e,t){const o=t.length;if(o===0)return null;if(o===1)return t[0];const i=dl(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const s of i)for(const r of t)if(this.getAllContainersFromDropTarget(r).flatMap(l=>l).indexOf(s)!==-1)return r;return null}enterDragTargetIfExists(e,t,o,n,i){if(e&&e.onDragEnter){const s=this.createDropTargetEvent(e,t,o,n,i);e.onDragEnter(s)}}leaveLastTargetIfExists(e,t,o,n){const{lastDropTarget:i}=this;if(!i)return;if(i.onDragLeave){const r=this.createDropTargetEvent(i,e,t,o,n);i.onDragLeave(r)}const s=this.getDragAndDropImageComponent();s&&s.setIcon(null,!1)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(o=>o.external).find(o=>o.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){const o=this.ctrlsSvc.getGridBodyCtrl().eGridBody,{dropZoneTarget:n}=e;return o.contains(n)}getHorizontalDirection(e){var n;const t=(n=this.eventLastTime)==null?void 0:n.clientX,o=e.clientX;return t===o?null:t>o?"left":"right"}getVerticalDirection(e){var n;const t=(n=this.eventLastTime)==null?void 0:n.clientY,o=e.clientY;return t===o?null:t>o?"up":"down"}createDropTargetEvent(e,t,o,n,i){const s=e.getContainer(),r=s.getBoundingClientRect(),{dragItem:a,dragSource:l,gos:c}=this,u=t.clientX-r.left,d=t.clientY-r.top;return pt(c,{event:t,x:u,y:d,vDirection:n,hDirection:o,dragSource:l,fromNudge:i,dragItem:a,dropZoneTarget:s})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();t&&aI(t.getGui(),e,this.beans)}removeDragAndDropImageComponent(){var t;const{dragAndDropImageComp:e}=this;if(e){const{comp:o}=e;if(o){const n=o.getGui();(t=this.dragAndDropImageParent)==null||t.removeChild(n),this.destroyBean(o)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e,gos:t,userCompFactory:o}=this;if(!e)return;const n=mM(o,pt(t,{dragSource:e}));if(!n)return;const i=n.newAgStackInstance();this.dragAndDropImageComp={promise:i},i.then(s=>{!s||!this.isAlive()||(this.processDragAndDropImageComponent(s),this.dragAndDropImageComp.comp=s)})}processDragAndDropImageComponent(e){const{dragSource:t,environment:o}=this;if(!t)return;const n=e.getGui();n.style.setProperty("position","absolute"),n.style.setProperty("z-index","9999"),wS(this.gos,n),o.applyThemeClasses(n),e.setIcon(null,!1);let{dragItemName:i}=t;typeof i=="function"&&(i=i()),e.setLabel(i||""),n.style.top="20px",n.style.left="20px";const s=Gp(this.beans);this.dragAndDropImageParent=s,s?s.appendChild(n):Ue(54)}registerGridDropTarget(e,t){const o={getContainer:e,isInterestedIn:n=>n===1||n===0,getIconName:()=>"notAllowed"};this.addDropTarget(o),t.addDestroyFunc(()=>this.removeDropTarget(o))}},gO=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const o=t||this.shouldSkipVerticalScroll();if(o&&this.shouldSkipHorizontalScroll())return;const n=this.scrollContainer.getBoundingClientRect(),i=this.scrollByTick;this.tickLeft=e.clientX<n.left+i,this.tickRight=e.clientX>n.right-i,this.tickUp=e.clientY<n.top+i&&!o,this.tickDown=e.clientY>n.bottom-i&&!o,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};function mO(e){const{rowIndex:t,rowPinned:o,column:n}=e;return`${t}.${o??"null"}.${n.getId()}`}function xS(e,t){const o=e.column===t.column,n=e.rowPinned===t.rowPinned,i=e.rowIndex===t.rowIndex;return o&&n&&i}function vO(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(Ye(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function yO(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function CO(e){let t=0,o;const{pinnedRowModel:n,rowModel:i,pageBounds:s}=e;return n!=null&&n.getPinnedTopRowCount()?o="top":i.getRowCount()?(o=null,t=s.getFirstRow()):n!=null&&n.getPinnedBottomRowCount()&&(o="bottom"),o===void 0?null:{rowIndex:t,rowPinned:o}}function bO(e){let t,o=null;const{pinnedRowModel:n,pageBounds:i}=e,s=n==null?void 0:n.getPinnedBottomRowCount(),r=n==null?void 0:n.getPinnedTopRowCount();return s?(o="bottom",t=s-1):e.rowModel.getRowCount()?(o=null,t=i.getLastRow()):r&&(o="top",t=r-1),t===void 0?null:{rowIndex:t,rowPinned:o}}function _u(e,t){var o,n;switch(t.rowPinned){case"top":return(o=e.pinnedRowModel)==null?void 0:o.getPinnedTopRow(t.rowIndex);case"bottom":return(n=e.pinnedRowModel)==null?void 0:n.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function dr(e,t){var i;const o=(i=e.spannedRowRenderer)==null?void 0:i.getCellByPosition(t);if(o)return o;const n=e.rowRenderer.getRowByPosition(t);return n?n.getCellCtrl(t.column):null}function Eu(e,t){const{rowIndex:o,rowPinned:n}=t,{pageBounds:i,pinnedRowModel:s,rowModel:r}=e;if(o===0)return n==="top"?null:n==="bottom"&&r.isRowsToRender()?{rowIndex:i.getLastRow(),rowPinned:null}:s!=null&&s.isRowsToRender("top")?{rowIndex:s.getPinnedTopRowCount()-1,rowPinned:"top"}:null;const a=n?void 0:r.getRow(o);return RS(e,a,!0)??{rowIndex:o-1,rowPinned:n}}function Ey(e,t){const{rowIndex:o,rowPinned:n}=t,{pageBounds:i,pinnedRowModel:s,rowModel:r}=e;if(wO(e,t))return n==="bottom"?null:n==="top"&&r.isRowsToRender()?{rowIndex:i.getFirstRow(),rowPinned:null}:s!=null&&s.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;const a=n?void 0:r.getRow(o);return RS(e,a)??{rowIndex:o+1,rowPinned:n}}function RS(e,t,o){const{gos:n,rowRenderer:i}=e;if(!(t!=null&&t.sticky)||!V0(n))return;const s=o?i.getStickyTopRowCtrls():i.getStickyBottomRowCtrls();let r;for(let a=0;a<s.length;a++)if(s[a].rowNode.rowIndex===t.rowIndex){r=s[a+(o?-1:1)];break}return r?{rowIndex:r.rowNode.rowIndex,rowPinned:null}:void 0}function wO(e,t){const{rowPinned:o,rowIndex:n}=t,{pinnedRowModel:i,pageBounds:s}=e;return o==="top"?((i==null?void 0:i.getPinnedTopRowCount())??0)-1<=n:o==="bottom"?((i==null?void 0:i.getPinnedBottomRowCount())??0)-1<=n:s.getLastRow()<=n}var ml=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:o,children:n}=e;if(n)for(let i=0;i<n.length;++i)this.depthFirstSearchChangedPath(n[i],t);t(o)}depthFirstSearchEverything(e,t,o){const n=e.childrenAfterGroup;if(n)for(let i=0,s=n.length;i<s;++i){const r=n[i];r.childrenAfterGroup?this.depthFirstSearchEverything(r,t,o):o&&t(r)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,o=!1){this.active&&!o?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,o=0;for(;!this.mapToItems[t.id];){const n={rowNode:t,children:null};this.mapToItems[t.id]=n,o++,t=t.parent}return o}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let o=e;for(;o;)this.nodeIdsToColumns[o.id]||(this.nodeIdsToColumns[o.id]={}),t.forEach(n=>this.nodeIdsToColumns[o.id][n.getId()]=!0),o=o.parent}linkPathItems(e,t){let o=e;for(let n=0;n<t;n++){const i=this.mapToItems[o.id],s=this.mapToItems[o.parent.id];s.children||(s.children=[]),s.children.push(i),o=o.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const o=this.createPathItems(e);this.linkPathItems(e,o),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const o=this.nodeIdsToColumns[e.id];return t.filter(i=>o[i.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const o=this.nodeIdsToColumns[e.id];return t.filter(i=>!o[i.getId()])}},SO=class extends Ie{constructor(e){super(),this.eContainer=e}postConstruct(){const{rowModel:e,gos:t,ctrlsSvc:o}=this.beans;Co(t)&&(this.clientSideRowModel=e),o.whenReady(this,n=>{const i=n.gridBodyCtrl;this.autoScrollService=new gO({scrollContainer:i.eBodyViewport,scrollAxis:"y",getVerticalPosition:()=>i.scrollFeature.getVScrollPosition().top,setVerticalPosition:s=>i.scrollFeature.setVerticalScrollPosition(s),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){const{rowGroupColsSvc:e,filterManager:t,sortSvc:o}=this.beans;return!!(((e==null?void 0:e.columns)??[]).length||(t==null?void 0:t.isAnyFilterPresent())||(o==null?void 0:o.isSortActive()))}getRowNodes(e){var n;if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const i=[...((n=this.beans.selectionSvc)==null?void 0:n.getSelectedNodes())??[]].sort((s,r)=>s.rowIndex==null||r.rowIndex==null?0:this.getRowIndexNumber(s)-this.getRowIndexNumber(r));if(i.indexOf(t)!==-1)return i}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{this.setRowNodeDragging(t,!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e,this.gos.get("rowDragManaged")&&this.doManagedDrag(e),this.autoScrollService.check(e.event)}doManagedDrag(e){const{dragAndDrop:t,gos:o}=this.beans,n=this.isFromThisGrid(e);if(!(o.get("rowDragManaged")&&this.shouldPreventRowMove()))if(o.get("suppressMoveWhenRowDragging")||!n){if(t.isDropZoneWithinThisGrid(e)){const s=this.clientSideRowModel,r=this.getRowsDrop(e),a=r==null?void 0:r.target;a?s.highlightRow(a,r.delta<0?"Above":"Below"):s.clearHighlight()}}else{const s=this.getRowsDrop(e);s&&this.dropRows(s)}}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(Vt(t.split("-")),10)}getRowsDrop(e){const{rowNode:t,rowNodes:o}=e.dragItem,n=o==null?void 0:o.length,i=this.isFromThisGrid(e),s=n&&(t??o[0]),r=_y(this.beans,e).y,a=this.clientSideRowModel,l=a.getRowIndexAtPixel(r);let c=a.getRow(l),u=0;if(!s)return null;if(i){if(!c||c===s)return null;u=l-s.rowIndex,o.includes(c)&&(c=(u<0?this.getPrevOrNext(-1,o[0]):this.getPrevOrNext(1,Vt(o)))??c)}return c&&(!i||u<-1||u>1)&&(u=r-c.rowTop-c.rowHeight/2),{sameGrid:i,delta:u,target:c,rows:o}}getPrevOrNext(e,t){const o=this.clientSideRowModel,n=o.getRowCount();let i=t.rowIndex+e;for(;i>=0&&i<n;){const s=o.getRow(i);if(s.sourceRowIndex>=0)return s;i+=e}}addRowDropZone(e){if(!e.getContainer()){Ue(55);return}const t=this.beans.dragAndDrop;if(t.findExternalZone(e)){Ue(56);return}let o={getContainer:e.getContainer};e.fromGrid?o=e:(e.onDragEnter&&(o.onDragEnter=i=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",i))}),e.onDragLeave&&(o.onDragLeave=i=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",i))}),e.onDragging&&(o.onDragging=i=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",i))}),e.onDragStop&&(o.onDragStop=i=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",i))}),e.onDragCancel&&(o.onDragCancel=i=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",i))}));const n={isInterestedIn:i=>i===2,getIconName:()=>"move",external:!0,...o};t.addDropTarget(n),this.addDestroyFunc(()=>t.removeDropTarget(n))}getRowDropZone(e){const t=this.getContainer.bind(this),o=this.onDragEnter.bind(this),n=this.onDragLeave.bind(this),i=this.onDragging.bind(this),s=this.onDragStop.bind(this),r=this.onDragCancel.bind(this);let a;return e?a={getContainer:t,onDragEnter:e.onDragEnter?l=>{o(l),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",l))}:o,onDragLeave:e.onDragLeave?l=>{n(l),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",l))}:n,onDragging:e.onDragging?l=>{i(l),e.onDragging(this.draggingToRowDragEvent("rowDragMove",l))}:i,onDragStop:e.onDragStop?l=>{s(l),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",l))}:s,onDragCancel:e.onDragCancel?l=>{r(l),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",l))}:r,fromGrid:!0}:a={getContainer:t,onDragEnter:o,onDragLeave:n,onDragging:i,onDragStop:s,onDragCancel:r,fromGrid:!0},a}draggingToRowDragEvent(e,t){const o=this.beans,{pageBounds:n,rowModel:i,gos:s}=o,r=_y(this.beans,t).y,a=r>n.getCurrentPagePixelRange().pageLastPixel;let l=-1,c;return a||(l=i.getRowIndexAtPixel(r),c=i.getRow(l)),pt(s,{type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:l,overNode:c,y:r,vDirection:t.vDirection})}dispatchGridEvent(e,t){const o=this.draggingToRowDragEvent(e,t);this.eventSvc.dispatchEvent(o)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clientSideRowModel.clearHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e);const{dragAndDrop:t,gos:o}=this.beans;if(o.get("rowDragManaged")&&(o.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)){const n=this.getRowsDrop(e);n&&this.dropRows(n),this.clientSideRowModel.clearHighlight()}}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e);const{dragAndDrop:t,gos:o}=this.beans;o.get("rowDragManaged")&&(o.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&t.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.clearHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{this.setRowNodeDragging(t,!1)})}setRowNodeDragging(e,t){e.dragging!==t&&(e.dragging=t,e.dispatchRowEvent("draggingChanged"))}dropRows(e){return e.sameGrid?this.moveRows(e):this.addRows(e)}addRows({delta:e,target:t,rows:o}){const n=Br(this.gos),i=this.clientSideRowModel,s=o.filter(({data:a,rowPinned:l})=>!i.getRowNode((n==null?void 0:n({data:a,level:0,rowPinned:l}))??a.id)).map(({data:a})=>a);if(s.length===0)return!1;const r=t&&t.sourceRowIndex+(e<0?0:1);return i.updateRowData({add:s,addIndex:r}),!0}moveRows({delta:e,target:t,rows:o}){const n=this.getValidRowsToMove(o),i=this.beans.focusSvc,s=i.getFocusedCell(),r=s&&dr(this.beans,s);return this.reorderLeafChildren(n,...this.getMoveRowsBounds(n,t,e))?(this.clientSideRowModel.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new ml(!1,this.clientSideRowModel.rootNode),rowNodesOrderChanged:!0}),r?r.focusCell():i.clearFocusedCell(),!0):!1}getValidRowsToMove(e){const t=this.clientSideRowModel,o=new Set;for(const n of e)n.sourceRowIndex>=0&&(n.rowTop!==null||n===t.getRowNode(n.id))&&o.add(n);return o}getMoveRowsBounds(e,t,o){var a;const n=((a=this.clientSideRowModel.rootNode)==null?void 0:a.allLeafChildren.length)??0;let i=(t==null?void 0:t.sourceRowIndex)??-1;i<0||i>=n?i=n:o>=0&&++i;let s=i,r=Math.min(i,n-1);for(const{sourceRowIndex:l}of e)l<s&&(s=l),l>r&&(r=l);return[s,i,r]}reorderLeafChildren(e,t,o,n){var l;let i=!1;const s=(l=this.clientSideRowModel.rootNode)==null?void 0:l.allLeafChildren;if(!e.size||!s)return!1;let r=t;for(let c=t;c<o;++c){const u=s[c];e.has(u)||(u.sourceRowIndex!==r&&(u.sourceRowIndex=r,s[r]=u,i=!0),++r)}let a=n;for(let c=n;c>=o;--c){const u=s[c];e.has(u)||(u.sourceRowIndex!==a&&(u.sourceRowIndex=a,s[a]=u,i=!0),--a)}for(const c of e)c.sourceRowIndex!==r&&(c.sourceRowIndex=r,s[r]=c,i=!0),++r;return i}};function _S(e,t,o){if(o===0)return!1;const n=Math.abs(e.clientX-t.clientX),i=Math.abs(e.clientY-t.clientY);return Math.max(n,i)<=o}var xO=class extends Ie{constructor(){super(...arguments),this.beanName="dragSvc",this.dragEndFunctions=[],this.dragSources=[]}destroy(){const{dragSources:e}=this;e.forEach(this.removeListener.bind(this)),e.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,o=e.mouseDownListener;if(t.removeEventListener("mousedown",o),e.touchEnabled){const n=e.touchStartListener;t.removeEventListener("touchstart",n,{passive:!0})}}removeDragSource(e){const{dragSources:t}=this,o=t.find(n=>n.dragSource===e);o&&(this.removeListener(o),dn(t,o))}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:o,includeTouch:n,stopPropagationForTouch:i}=e;o.addEventListener("mousedown",t);let s=null;const r=this.gos.get("suppressTouch");n&&!r&&(s=a=>{Ip(a.target)||(i&&a.stopPropagation(),this.onTouchStart(e,a))},o.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:s,touchEnabled:!!n})}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const o=t.touches[0];this.touchLastTime=o,this.touchStart=o;const n=l=>this.onTouchMove(l,e.eElement),i=l=>this.onTouchUp(l,e.eElement),s=l=>{l.cancelable&&l.preventDefault()},r=t.target,a=[{target:dl(this.beans),type:"touchmove",listener:s,options:{passive:!1}},{target:r,type:"touchmove",listener:n,options:{passive:!0}},{target:r,type:"touchend",listener:i,options:{passive:!0}},{target:r,type:"touchcancel",listener:i,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(o,this.touchStart,e.eElement)}onMouseDown(e,t){const o=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||o._alreadyProcessedByDragService||(o._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const n=c=>this.onMouseMove(c,e.eElement),i=c=>this.onMouseUp(c,e.eElement),s=c=>c.preventDefault(),r=c=>{c.key===Te.ESCAPE&&this.cancelDrag(e.eElement)},a=dl(this.beans),l=[{target:a,type:"mousemove",listener:n},{target:a,type:"mouseup",listener:i},{target:a,type:"contextmenu",listener:s},{target:a,type:"keydown",listener:r}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:o,type:n,listener:i,options:s}=t;o.addEventListener(n,i,s)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:o,type:n,listener:i,options:s}=t;o.removeEventListener(n,i,s)})})}isEventNearStartEvent(e,t){const{dragStartPixels:o}=this.currentDragParams,n=Ye(o)?o:4;return _S(e,t,n)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,o){var n;if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:"dragStarted",target:o}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}(n=this.currentDragParams)==null||n.onDragging(e)}onTouchMove(e,t){const o=this.getFirstActiveTouch(e.touches);o&&this.onCommonMove(o,this.touchStart,t)}onMouseMove(e,t){var o;zs()&&((o=go(this.beans).getSelection())==null||o.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const{gos:t}=this,o=t.get("enableCellTextSelection"),n=e.type==="mousemove",i=s=>{const r=s.target,a=r==null?void 0:r.tagName.toLocaleLowerCase();return!!(a!=null&&a.match("^a$|textarea|input|select|button"))};return o&&n&&e.cancelable&&gl(t,e)&&!i(e)}onTouchUp(e,t){let o=this.getFirstActiveTouch(e.changedTouches);o||(o=this.touchLastTime),this.onUpCommon(o,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){var t,o;this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),(o=(t=this.currentDragParams)==null?void 0:t.onDragCancel)==null||o.call(t),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;const{dragEndFunctions:e}=this;e.forEach(t=>t()),e.length=0}};function ES(e,t){return e+"_"+t}function no(e){return e instanceof PS}var PS=class extends Ie{constructor(e,t,o,n){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=o,this.pinned=n,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return ES(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{no(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=Vt(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){var t;let e=0;return(t=this.displayedChildren)==null||t.forEach(o=>{e+=o.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!!((e=this.getColGroupDef())!=null&&e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{mi(t)?e.push(t):no(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{mi(t)?e.push(t):no(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(o=>{if(no(o)&&(!o.displayedChildren||!o.displayedChildren.length))return;switch(o.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(o);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(o);break;default:this.displayedChildren.push(o);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},Mf="row-group-",$p="t-",jp="b-",RO=0,Vs=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=RO++,this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.__selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){var l,c,u;const{valueCache:o,selectionSvc:n,eventSvc:i}=this.beans,s=this.data;this.data=e,o==null||o.onDataChanged(),this.updateDataOnDetailNode(),n==null||n.updateRowSelectable(this),this.resetQuickFilterAggregateText();const r=this.createDataChangedEvent(e,s,t);if((l=this.__localEventService)==null||l.dispatchEvent(r),this.sibling){this.sibling.data=e;const d=this.sibling.createDataChangedEvent(e,s,t);(c=this.sibling.__localEventService)==null||c.dispatchEvent(d)}i.dispatchEvent({type:"rowNodeDataChanged",node:this});const a=this.pinnedSibling;a&&(a.data=e,(u=a.__localEventService)==null||u.dispatchEvent(a.createDataChangedEvent(e,s,t)),i.dispatchEvent({type:"rowNodeDataChanged",node:a}))}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,o){return{type:"dataChanged",node:this,oldData:t,newData:e,update:o}}getRowIndexString(){return this.rowIndex==null?(Nt(13),null):this.rowPinned==="top"?$p+this.rowIndex:this.rowPinned==="bottom"?jp+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){var r,a;const{selectionSvc:o}=this.beans,n=(r=o==null?void 0:o.createDaemonNode)==null?void 0:r.call(o,this),i=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),o&&(o.updateRowSelectable(this),o.syncInRowNode(this,n));const s=this.createDataChangedEvent(e,i,!1);(a=this.__localEventService)==null||a.dispatchEvent(s)}setId(e){var o;const t=Br(this.beans.gos);if(t)if(this.data){const n=((o=this.parent)==null?void 0:o.getRoute())??[];this.id=t({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Mf)&&Nt(14,{groupPrefix:Mf})}else this.id=void 0;else this.id=e}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,o){var n;(n=this.beans.expansionSvc)==null||n.setExpanded(this,e,t,o)}setDataValue(e,t,o){const{colModel:n,valueSvc:i,gos:s,selectionSvc:r}=this.beans,a=typeof e!="string"?e:n.getCol(e)??n.getColDefCol(e);if(!a)return!1;const l=i.getValueForDisplay(a,this).value;if(s.get("readOnlyEdit")){const{beans:{eventSvc:h},data:f,rowIndex:v,rowPinned:m}=this;return h.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:v,rowPinned:m,column:a,colDef:a.colDef,data:f,node:this,oldValue:l,newValue:t,value:t,source:o}),!1}const c=i.setValue(this,a,t,o);this.dispatchCellChangedEvent(a,t,l);const u=r==null?void 0:r.updateRowSelectable(this),d=this.pinnedSibling;return d&&(c&&d.dispatchCellChangedEvent(a,t,l),d.selectable=u??!0),c}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,o){var i;const n={type:"cellChanged",node:this,column:e,newValue:t,oldValue:o};(i=this.__localEventService)==null||i.dispatchEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){var e;return((e=this.beans.expansionSvc)==null?void 0:e.isExpandable(this))??!1}isSelected(){return this.footer?this.sibling.isSelected():this.rowPinned&&this.pinnedSibling?this.pinnedSibling.isSelected():this.__selected}depthFirstSearch(e){var t;(t=this.childrenAfterGroup)==null||t.forEach(o=>o.depthFirstSearch(e)),e(this)}dispatchRowEvent(e){var t;(t=this.__localEventService)==null||t.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,o="api"){var n;(n=this.beans.selectionSvc)==null||n.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:o})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){this.__localEventService||(this.__localEventService=new Bs),this.__localEventService.addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){var n,i,s,r;(n=this.beans.validation)==null||n.checkRowEvents(e),this.__localEventService||(this.__localEventService=new Bs),this.frameworkEventListenerService=(s=(i=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:s.call(i,this.frameworkEventListenerService,this.__localEventService);const o=((r=this.frameworkEventListenerService)==null?void 0:r.wrap(e,t))??t;this.__localEventService.addEventListener(e,o)}removeEventListener(e,t){var n;const o=((n=this.frameworkEventListenerService)==null?void 0:n.unwrap(e,t))??t;this.removeLocalListener(e,o)}removeLocalListener(e,t){var o,n;(o=this.__localEventService)==null||o.removeEventListener(e,t),(n=this.__localEventService)!=null&&n.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if(Ue(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const e=[];let t=this;for(;t&&t.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent("firstChildChanged"))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}};function _O(e,t,o){return pt(t,{type:o,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var EO=new Set(["__localEventService","__objectId","sticky","__autoHeights","__checkAutoHeightsDebounced","childStore"]);function PO(e,t){const o=new Vs(t);return Object.keys(e).forEach(n=>{EO.has(n)||(o[n]=e[n])}),o.oldRowTop=null,o}var FO={tag:"div",cls:"ag-filter"},DO=class extends Bt{constructor(e,t){super(FO),this.column=e,this.source=t,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){var e;return((e=this.filterWrapper)==null?void 0:e.filterPromise)??null}afterInit(){var e,t;return((t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null?void 0:t.then(()=>{}))??Lo.resolve()}afterGuiAttached(e){var t,o;(o=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||o.then(n=>{var i;(i=n==null?void 0:n.afterGuiAttached)==null||i.call(n,e)})}afterGuiDetached(){var e,t;(t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||t.then(o=>{var n;(n=o==null?void 0:o.afterGuiDetached)==null||n.call(o)})}createFilter(e){var n,i;const{column:t,source:o}=this;this.filterWrapper=((n=this.beans.filterManager)==null?void 0:n.getOrCreateFilterWrapper(t))??null,(i=this.filterWrapper)!=null&&i.filterPromise&&this.filterWrapper.filterPromise.then(s=>{const r=s.getGui();Ye(r)||Ue(69,{guiFromFilter:r}),this.appendChild(r),e&&this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:o,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(Do(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},FS="ag-resizer-wrapper",Mi=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),TO={tag:"div",cls:FS,children:[Mi("eTopLeft","topLeft"),Mi("eTop","top"),Mi("eTopRight","topRight"),Mi("eRight","right"),Mi("eBottomRight","bottomRight"),Mi("eBottom","bottom"),Mi("eBottomLeft","bottomLeft"),Mi("eLeft","left")]},kO=class extends Ie{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,o=t/2-this.getWidth()/2,n=e/2-this.getHeight()/2;this.offsetElement(o,n)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:o,width:n,minHeight:i,height:s,x:r,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0;const u=_n(this.element);if(u){const d=this.findBoundaryElement(),h=window.getComputedStyle(d);if(h.minWidth!=null){const f=d.offsetWidth-this.element.offsetWidth;c=parseInt(h.minWidth,10)-f}if(h.minHeight!=null){const f=d.offsetHeight-this.element.offsetHeight;l=parseInt(h.minHeight,10)-f}}if(this.minHeight=i||l,this.minWidth=o||c,n&&this.setWidth(n),s&&this.setHeight(s),(!n||!s)&&this.refreshSize(),e)this.center();else if(r||a)this.offsetElement(r,a);else if(u&&t){let d=this.boundaryEl,h=!0;if(d||(d=this.findBoundaryElement(),h=!1),d){const f=parseFloat(d.style.top),v=parseFloat(d.style.left);h?this.offsetElement(isNaN(v)?0:v,isNaN(f)?0:f):this.setPosition(v,f)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){var n,i;if(!this.config.popup||e===this.movable)return;this.movable=e;const o=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?((n=this.dragSvc)==null||n.addDragSource(o),this.moveElementDragListener=o):((i=this.dragSvc)==null||i.removeDragSource(o),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{var r;const n=!!e[t],i=this.getResizerElement(t),s={dragStartPixels:0,eElement:i,onDragStart:a=>this.onResizeStart(a,t),onDragging:this.onResize.bind(this),onDragStop:a=>this.onResizeEnd(a,t)};(n||!this.isAlive()&&!n)&&(n?((r=this.dragSvc)==null||r.addDragSource(s),this.resizeListeners.push(s),i.style.pointerEvents="all"):i.style.pointerEvents="none",this.resizable[t]=n)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,o=this.element;let n=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Na(o,e),e=E0(o),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const i=this.getAvailableHeight();i&&e>i&&(e=i)}this.getHeight()!==e&&(n?(o.style.maxHeight="unset",o.style.minHeight="unset"):t?Na(o,e):(o.style.height=`${e}px`,o.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:o}=this.offsetParent;if(!o)return null;const n=this.element.getBoundingClientRect(),i=this.offsetParent.getBoundingClientRect(),s=e?this.position.y:n.top,r=e?0:i.top;let a=0;if(t){const c=this.element.parentElement;if(c){const{bottom:u}=c.getBoundingClientRect();a=u-n.bottom}}return o+r-s-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:o}=this.config;let n=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Un(t,e),e=uu(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:i}=this.offsetParent,s=o?this.position.x:this.element.getBoundingClientRect().left;i&&e+s>i&&(e=i-s)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Un(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){var i;const{forcePopupParentAsOffsetParent:o}=this.config,n=o?this.boundaryEl:this.element;n&&((i=this.popupSvc)==null||i.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(n.style.left),parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){var o;if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e&&this.popupSvc?this.resizeObserverSubscriber=Zi(this.beans,(o=this.popupSvc)==null?void 0:o.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:o,isTop:n,anywhereWithin:i,topBuffer:s}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!o,!!i,r)?0:r,c=this.shouldSkipY(t,!!n,s,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,o,n){const i=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:i.left;let l=a<=0&&s.left>=e.clientX||s.right<=e.clientX&&s.right<=r.right;return l?!0:(t?l=n<0&&e.clientX>a+s.left||n>0&&e.clientX<a+s.left:o?l=n<0&&e.clientX>r.right||n>0&&e.clientX<a+s.left:l=n<0&&e.clientX>r.right||n>0&&e.clientX<r.right,l)}shouldSkipY(e,t,o=0,n){const i=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:i.top;let l=a<=0&&s.top>=e.clientY||s.bottom<=e.clientY&&s.bottom<=r.bottom;return l?!0:(t?l=n<0&&e.clientY>a+s.top+o||n>0&&e.clientY<a+s.top:l=n<0&&e.clientY>r.bottom||n>0&&e.clientY<r.bottom,l)}createResizeMap(){const e=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(Ut(TO)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${FS}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:o,forcePopupParentAsOffsetParent:n}=this.config;!o&&!n&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(o=>!o.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,o=0;for(let n=0;n<e.length;n++){const i=e[n],s=!!i.style.flex&&i.style.flex!=="0 0 auto";if(i===this.element)continue;let r=this.minHeight||0,a=this.minWidth||0;if(s){const l=window.getComputedStyle(i);l.minHeight&&(r=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else r=i.offsetHeight,a=i.offsetWidth;t+=r,o+=a}return{height:t,width:o}}applySizeToSiblings(e){let t=null;const o=this.getSiblings();if(o){for(let n=0;n<o.length;n++){const i=o[n];i!==t&&(e?i.style.height=`${i.offsetHeight}px`:i.style.width=`${i.offsetWidth}px`,i.style.flex="0 0 auto",i===this.element&&(t=o[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:o}=this.config,{isTop:n,isRight:i,isBottom:s,isLeft:r}=this.currentResizer,a=i||r,l=s||n,{movementX:c,movementY:u}=this.calculateMouseMovement({e,isLeft:r,isTop:n}),d=this.position.x,h=this.position.y;let f=0,v=0;if(a&&c){const m=r?-1:1,b=this.getWidth(),S=b+c*m;let R=!1;r&&(f=b-S,(d+f<=0||S<=this.minWidth)&&(R=!0,f=0)),R||this.setWidth(S)}if(l&&u){const m=n?-1:1,b=this.getHeight(),S=b+u*m;let R=!1;n?(v=b-S,(h+v<=0||S<=this.minHeight)&&(R=!0,v=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&b<S&&this.getMinSizeOfSiblings().height+S>this.element.parentElement.offsetHeight&&(R=!0),R||this.setHeight(S)}this.updateDragStartPosition(e.clientX,e.clientY),((t||o)&&f||v)&&this.offsetElement(d+f,h+v)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:o}=this.position;let n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());const{movementX:i,movementY:s}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+i,o+s),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){var e;for(;this.resizeListeners.length;){const t=this.resizeListeners.pop();(e=this.dragSvc)==null||e.removeDragSource(t)}}destroy(){var e;super.destroy(),this.moveElementDragListener&&((e=this.dragSvc)==null||e.removeDragSource(this.moveElementDragListener)),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},AO="ag-focus-managed",Qr=class extends Ie{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:o=>{if(o.defaultPrevented)return;const n=$s(this.beans,this.eFocusable,!1,o.shiftKey);n&&(n.focus(),o.preventDefault())},...t}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:o}}=this;e.classList.add(AO),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),o&&this.addManagedElementListeners(e,{focusout:o})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||ui(t))return;const{callbacks:o}=this;if(o.shouldStopEventPropagation(t)){Hs(t);return}t.key===Te.TAB?o.onTabKeyDown(t):o.handleKeyDown&&o.handleKeyDown(t)}})}},DS={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function Kp(e,t){const{debounceMs:o}=e;return Pu(e)?(o!=null&&Ue(71),0):o??t}function Pu(e){var t;return(((t=e.buttons)==null?void 0:t.indexOf("apply"))??-1)>=0}var IO=class extends Bt{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=Qe,this.buttonListeners=[],this.defaultDebounceMs=0}postConstruct(){this.resetTemplate(),this.createManagedBean(new Qr(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new kO(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t==null||t.removeEventListener("submit",this.onFormSubmit);const o={tag:"form",cls:"ag-filter-wrapper",children:[{tag:"div",ref:"eFilterBody",cls:`ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper`,children:[this.createBodyTemplate()]}]};this.setTemplate(o,this.getAgComponents(),e),t=this.getGui(),t==null||t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.params.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.params=e,this.applyActive=Pu(e),this.resetButtonsPanel(e)}updateParams(e){this.params=e,this.applyActive=Pu(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){const{buttons:o,readOnly:n}=t??{},{buttons:i,readOnly:s}=e;if(n===s&&ul(o,i))return;const r=i&&i.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(Do(this.eButtonsPanel),this.buttonListeners.forEach(c=>c()),this.buttonListeners=[]):r&&(this.eButtonsPanel=Ut({tag:"div",cls:"ag-filter-apply-panel"})),!r){this.eButtonsPanel&&nn(this.eButtonsPanel);return}const a=document.createDocumentFragment(),l=c=>{let u;const d=c?this.translate(`${c}Filter`):void 0;switch(c){case"apply":u=v=>this.onBtApply(!1,!1,v);break;case"clear":u=()=>this.onBtClear();break;case"reset":u=()=>this.onBtReset();break;case"cancel":u=v=>{this.onBtCancel(v)};break;default:Ue(75);return}const f=Ut({tag:"button",attrs:{type:c==="apply"?"submit":"button"},ref:`${c}FilterButton`,cls:"ag-button ag-standard-button ag-filter-apply-panel-button",children:d});this.buttonListeners.push(...this.addManagedElementListeners(f,{click:u})),a.append(f)};i.forEach(c=>l(c)),this.eButtonsPanel.append(a),this.getGui().appendChild(this.eButtonsPanel)}setupOnBtApplyDebounce(){const e=Kp(this.params,this.defaultDebounceMs),t=bo(this,this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel??null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.params.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const o=()=>{this.onUiChanged(!1,"prevent"),t==null||t()};e!=null?this.setModelIntoUi(e).then(o):this.resetUiToDefaults().then(o)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const o=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(o,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,o){o&&o.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.params.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});const{closeOnApply:n}=this.params;n&&this.applyActive&&!e&&!t&&this.close(o)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,o=t&&t.key;let n;(o==="Enter"||o==="Space")&&(n={keyboardEvent:t}),this.hidePopup(n),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.params.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const o=this.isModelValid(this.getModelFromUi()),n=this.queryForHtmlElement('[data-ref="applyFilterButton"]');n&&ll(n,!o)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:o}=this;if(!t||e==="toolPanel")return;e==="floatingFilter"||e==="columnFilter"?(t.restoreLastSize(),t.setResizable(o.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){var e;this.checkApplyDebounce(),(e=this.positionableFeature)==null||e.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.params;return this.params=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.getLocaleTextFunc()(e,DS[e])}getCellValue(e){return this.params.getValue(e)}getPositionableElement(){return this.eFilterBody}};function MO(e,t,o){if(t==null)return null;let n=null;const{compName:i,jsComp:s,fwComp:r}=AM(e,t);return i?n={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[i]:s==null&&r==null&&t.filter===!0&&(n=o()),n}var mn={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},qp=class extends Ie{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},o=t.autoHeight?mn.AUTO_HEIGHT:t.print?mn.PRINT:mn.NORMAL;this.view.updateLayoutClasses(o,t)}},Oi="Viewport",Py="fakeVScrollComp",Fy=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],Dy=100,ph=150,OO=class extends Ie{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=bo(this,()=>this.lastScrollSource[1]=null,ph),this.resetLastVScrollDebounced=bo(this,()=>this.lastScrollSource[0]=null,ph)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,o=>{this.centerRowsCtrl=o.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,Oi)});for(const e of Fy){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),o=t?bo(this,this.onVScroll.bind(this,Oi),Dy):this.onVScroll.bind(this,Oi),n=t?bo(this,this.onVScroll.bind(this,Py),Dy):this.onVScroll.bind(this,Py);this.addManagedElementListeners(this.eBodyViewport,{scroll:o}),this.registerScrollPartner(e,n)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Fy,Oi]){if(this.lastScrollSource[1]===t)continue;const o=this.getViewportForSource(t);hu(o,e,this.enableRtl)}}getViewportForSource(e){return e===Oi?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:o}=t;if(this.shouldBlockScrollUpdate(1,o,!0))return;const n=du(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(n),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===Oi?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:o}=this;o==null||o.setScrollTop(t),this.nextScrollTop=t,e===Oi?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,o!=null&&o.active?o.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},ph)}shouldBlockScrollUpdate(e,t,o=!1){return o&&!xs()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=Mp(this.eBodyViewport),{scrollHeight:o}=this.eBodyViewport;return e<0||e+t>o}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:o}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>o}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll(Oi)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const n=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:n:e=Math.min(Math.max(e,0),n)),hu(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:o,lastScrollTop:n}=this;return{top:n,bottom:n+o}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:o}=this.beans,n=o.getRowCount();let i=-1;for(let s=0;s<n;s++){const r=o.getRow(s);if(typeof e=="function"){if(r&&e(r)){i=s;break}}else if(e===r||e===r.data){i=s;break}}i>=0&&this.ensureIndexVisible(i,t)}ensureIndexVisible(e,t,o=0){if(wo(this.gos,"print"))return;const{rowModel:n}=this.beans,i=n.getRowCount();if(typeof e!="number"||e<0||e>=i){Ue(88,{index:e});return}this.clearRetryListeners();const{frameworkOverrides:s,pageBounds:r,rowContainerHeight:a,rowRenderer:l}=this.beans;s.wrapIncoming(()=>{var v,m;const c=this.ctrlsSvc.getGridBodyCtrl(),u=n.getRow(e);let d,h,f=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:b,stickyBottomHeight:S}=c,R=u.rowTop,_=u.rowHeight,M=r.getPixelOffset(),I=u.rowTop-M,W=I+u.rowHeight,z=this.getVScrollPosition(),de=a.divStretchOffset,K=z.top+de,O=z.bottom+de,ie=O-K,N=a.getScrollPositionForPixel(I),oe=a.getScrollPositionForPixel(W-ie),F=Math.min((N+oe)/2,I),Y=K+b>I,J=O-S<W;let L=null;t==="top"?L=N-b:t==="bottom"?L=oe+S:t==="middle"?L=F:Y?L=N-b:J&&(L=oe+S),L!==null&&(this.setVerticalScrollPosition(L),l.redraw({afterScroll:!0})),d=R!==u.rowTop||_!==u.rowHeight,h=b!==c.stickyTopHeight||S!==c.stickyBottomHeight,f++}while((d||h)&&f<10);if((v=this.animationFrameSvc)==null||v.flushAllFrames(),o<10&&(u!=null&&u.stub||!((m=this.beans.rowAutoHeight)!=null&&m.areRowsMeasured()))){const b=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const S=this.getVScrollPosition().top;b!==S&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=n.getRowCount())&&this.ensureIndexVisible(e,t,o+1)}})}})}clearRetryListeners(){this.clearRetryListenerFncs.forEach(e=>e()),this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){const{colModel:o,frameworkOverrides:n}=this.beans,i=o.getCol(e);if(!i||i.isPinned()||!this.visibleCols.isColDisplayed(i))return;const s=this.getPositionedHorizontalScroll(i,t);n.wrapIncoming(()=>{var r;s!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),(r=this.animationFrameSvc)==null||r.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:o,columnAfterEnd:n}=this.isColumnOutsideViewport(e),i=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?o:n)||i,l=r?n:o;t!=="auto"&&(a=t==="start",l=t==="end");const c=t==="middle";if(a||l||c){const{colLeft:u,colMiddle:d,colRight:h}=this.getColumnBounds(e);return c?d-s/2:a?r?h:u:r?u-s:h-s}return null}isColumnOutsideViewport(e){const{start:t,end:o}=this.getViewportBounds(),{colLeft:n,colRight:i}=this.getColumnBounds(e),s=this.enableRtl,r=s?t>i:o<i,a=s?o<n:t>n;return{columnBeforeStart:r,columnAfterEnd:a}}getColumnBounds(e){const t=this.enableRtl,o=this.visibleCols.bodyWidth,n=e.getActualWidth(),i=e.getLeft(),s=t?-1:1,r=t?o-i:i,a=r+n*s,l=r+n/2*s;return{colLeft:r,colMiddle:l,colRight:a}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),o=t,n=e+t;return{start:o,end:n,width:e}}},Qp=class extends Ie{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=wo(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:o}=this.beans,n=t.bodyWidth,i=t.getColsLeftWidth(),s=t.getDisplayedColumnsRightWidth();let r;e?r=n+i+s:(r=n,this.addSpacer&&(this.gos.get("enableRtl")?i:s)===0&&o.verticalScrollShowing&&(r+=o.getScrollbarWidth())),this.callback(r)}},LO=class extends Ie{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:o}=this,n=()=>{Si(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(n),o.registerBodyViewportResizeListener(n)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e==null||e.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const o=this.centerContainerCtrl.getCenterWidth();o!==this.centerWidth&&(this.centerWidth=o,t==null||t.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=Mp(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function Yp(e,t,o,n,i,s){if(o==null&&t==null)return;const r={},a={},l=(c,u)=>{c.split(" ").forEach(d=>{d.trim()!=""&&u(d)})};if(o){const c=Object.keys(o);for(let u=0;u<c.length;u++){const d=c[u],h=o[d];let f;typeof h=="string"?f=e?e.evaluate(h,n):!0:typeof h=="function"&&(f=h(n)),l(d,v=>{f?r[v]=!0:a[v]=!0})}}t&&s&&Object.keys(t).forEach(c=>l(c,u=>{r[u]||(a[u]=!0)})),s&&Object.keys(a).forEach(s),Object.keys(r).forEach(i)}function Ty(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var BO=class extends Ie{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const o=this.gos,n=r=>{typeof r=="string"?e.push(r):Array.isArray(r)&&r.forEach(a=>e.push(a))},i=o.get("rowClass");i&&n(i);const s=o.getCallback("getRowClass");if(s){const r={data:t.data,node:t,rowIndex:t.rowIndex},a=s(r);n(a)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,o=>{e.push(o)},()=>{})}processRowClassRules(e,t,o){const{gos:n,expressionSvc:i}=this.beans,s=pt(n,{data:e.data,node:e,rowIndex:e.rowIndex});Yp(i,void 0,n.get("rowClassRules"),s,t,o)}processStylesFromGridOptions(e){const t=this.gos,o=t.get("rowStyle"),n=t.getCallback("getRowStyle");let i;if(n){const s={data:e.data,node:e,rowIndex:e.rowIndex};i=n(s)}if(i||o)return Object.assign({},o,i)}},NO=0,Fu="renderedRow",Du=class extends Ie{constructor(e,t,o,n,i){var s;super(),this.rowNode=e,this.useAnimationFrameForCreate=n,this.printLayout=i,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=((s=t.pagination)==null?void 0:s.getCurrentPage())??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+NO++,this.rowId=Nc(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=Ty(this.rowNode),this.setRowType(),this.setAnimateFlags(o),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=Nc(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,o,n){var d;const{context:i,focusSvc:s}=this.beans;n=kl(this,i,n);const r={rowComp:e,element:t,containerType:o,compBean:n};this.allRowGuis.push(r),this.updateGui(o,r),this.initialiseRowComp(r);const a=this.rowNode,l=this.rowType==="FullWidthLoading"||a.stub,c=!a.data&&this.beans.rowModel.getType()==="infinite";!l&&!c&&!a.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const u=(d=this.fullWidthGui)==null?void 0:d.element;u&&!this.editing&&s.isRowFocused(a.rowIndex,a.rowPinned)&&s.shouldTakeFocus()&&setTimeout(()=>u.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach(o=>o.element.style.display=t)}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),_s(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const o=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(i=>o.toggleCss(i,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&bf(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(o),this.setRowCompRowBusinessKey(o),Ns(t,e.element,Fu,this),e.compBean.addDestroyFunc(()=>Ns(t,e.element,Fu,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=Nc(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(_f(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(_f(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){var n;const t=(n=this.beans.rowDragSvc)==null?void 0:n.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const o=this.createBean(t,this.beans.context);this.rowDragComps.push(o),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(i=>i!==o),this.destroyBean(o,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),o=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(o)}getFullWidthCellRenderers(){var e,t;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(o=>{var n;return(n=o==null?void 0:o.rowComp)==null?void 0:n.getFullWidthCellRenderer()}):[(t=(e=this.fullWidthGui)==null?void 0:e.rowComp)==null?void 0:t.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:o,beans:{visibleCols:n}}=this,i=!!e||!n.isPinningLeft(),s=!!t,r=!!o||!n.isPinningRight();return i&&s&&r}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),o=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.colModel.isPivotMode(),i=W0(this.gos,this.rowNode,n);e?this.rowType="FullWidthLoading":o?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":i?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:o}=this.beans;if(!(o!=null&&o.active)||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(o.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){var o;if(!((o=this.beans.rowSpanSvc)!=null&&o.isCellSpanning(e,this.rowNode)))return new Va(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){var t;return!((t=this.beans.rowSpanSvc)!=null&&t.isCellSpanning(e.column,this.rowNode))}createCellCtrls(e,t,o=null){const n={list:[],map:{}},i=(c,u,d)=>{d!=null?n.list.splice(d,0,u):n.list.push(u),n.map[c]=u},s=[];for(const c of t){const u=c.getInstanceId();let d=e.map[u];d&&!this.isCorrectCtrlForSpan(d)&&(d.destroy(),d=void 0),d||(d=this.getNewCellCtrl(c)),d&&i(u,d)}for(const c of e.list){const u=c.column.getInstanceId();if(n.map[u]!=null)continue;!this.isCellEligibleToBeRemoved(c,o)?s.push([u,c]):c.destroy()}if(s.length)for(const[c,u]of s){const d=n.list.findIndex(f=>f.column.getLeft()>u.column.getLeft()),h=d===-1?void 0:Math.max(d-1,0);i(c,u,h)}const{focusSvc:r,visibleCols:a}=this.beans,l=r.getFocusedCell();if(l&&l.column.getPinned()==o){const c=l.column.getInstanceId();if(!n.map[c]&&a.allCols.includes(l.column)){const d=this.createFocusedCellCtrl();if(d){const h=n.list.findIndex(v=>v.column.getLeft()>d.column.getLeft()),f=h===-1?void 0:Math.max(h-1,0);i(c,d,f)}}}return n}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,o=e.getFocusedCell();if(!o)return;const n=t==null?void 0:t.getCellSpan(o.column,this.rowNode);if(n){if(n.firstNode!==this.rowNode||!n.doesSpanContain(o))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(o.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(t=>{const o=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(o,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const o=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,o);const n=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const i=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,i,"right")}}isCellEligibleToBeRemoved(e,t){const{column:i}=e;if(i.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;const{editing:s}=e,{visibleCols:r}=this.beans,a=e.isCellFocused();return s||a?!(r.allCols.indexOf(i)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||wo(this.gos,"print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=Ye(this.rowNode.oldRowTop),{visibleCols:o}=this.beans,n=o.isPinningLeft(),i=o.isPinningRight();if(t){const{slideInAnimation:s}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){s.fullWidth=!0;return}s.center=!0,s.left=n,s.right=i}else{const{fadeInAnimation:s}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){s.fullWidth=!0;return}s.center=!0,s.left=n,s.right=i}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(r,a)=>r?r.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(r.element,a).params):!0,t=e(this.fullWidthGui,null),o=e(this.centerGui,null),n=e(this.leftGui,"left"),i=e(this.rightGui,"right");return t&&o&&n&&i}addListeners(){var e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...((e=this.beans.expansionSvc)==null?void 0:e.getRowExpandedListeners(this))??{}}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(this.beans.eventSvc,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.beans.rowSpanSvc&&this.addManagedListeners(this.beans.rowSpanSvc,{spannedCellsUpdated:({pinned:t})=>{t&&!this.rowNode.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(o=>{this.addRowDraggerToRow(o)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())},cellChanged:e=>{this.getAllCellCtrls().forEach(t=>t.onCellChanged(e))}})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(o=>o.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(o=>{this.setRowCompRowId(o.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(o.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach(t=>{const o=e==="Above",n=e==="Below";t.rowComp.toggleCss("ag-row-highlight-above",o),t.rowComp.toggleCss("ag-row-highlight-below",n)})}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach(t=>t.rowComp.toggleCss("ag-row-dragging",e))}onDisplayedColumnsChanged(){var e;this.updateColumnLists(!0),(e=this.beans.rowAutoHeight)==null||e.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:ci(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:o,column:n}=t;if(!(o.element===e.target))return;const r=this.rowNode,{focusSvc:a,navigation:l}=this.beans,c=a.getFocusedCell(),u={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:(c==null?void 0:c.column)??n};l==null||l.navigateToNextCell(e,e.key,u,!0),e.preventDefault()}onTabKeyDown(e){var a;if(e.defaultPrevented||ui(e))return;const t=this.allRowGuis.find(l=>l.element.contains(e.target)),o=t?t.element:null,n=o===e.target,i=Jt(this.beans);let s=!1;o&&i&&(s=o.contains(i)&&i.classList.contains("ag-cell"));let r=null;!n&&!s&&(r=$s(this.beans,o,!1,e.shiftKey)),(this.isFullWidth()&&n||!r)&&((a=this.beans.navigation)==null||a.onTabKeyDown(this,e))}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var t;const e=(t=this.allRowGuis.find(o=>_n(o.element)))==null?void 0:t.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach(o=>{ln(o.element,"tabindex",t)})}onFullWidthRowFocused(e){var i,s,r;const t=this.rowNode,o=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1;let n;if(this.fullWidthGui)n=this.fullWidthGui.element;else{const a=this.beans.colModel.getCol(e==null?void 0:e.column),l=a==null?void 0:a.pinned;l?n=l==="right"?(i=this.rightGui)==null?void 0:i.element:(s=this.leftGui)==null?void 0:s.element:n=(r=this.centerGui)==null?void 0:r.element}n&&(n.classList.toggle("ag-full-width-focus",o),o&&(e!=null&&e.forceBrowserFocus)&&n.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const o={list:[],map:{}};return e.list.forEach(n=>{n!==t&&(o.list.push(n),o.map[n.column.getInstanceId()]=n)}),o}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){const{rowNode:o}=this;return pt(this.gos,{type:e,node:o,data:o.data,rowIndex:o.rowIndex,rowPinned:o.rowPinned,event:t})}createRowEventWithSource(e,t){const o=this.createRowEvent(e,t);return o.source=this,o}onRowDblClick(e){ui(e)||this.beans.eventSvc.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",e))}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),o=this.getColumnForFullWidth(t);if(!(!t||!o))return{rowGui:t,column:o}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e==null?void 0:e.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Rs(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,{rangeSvc:o,focusSvc:n}=this.beans;o==null||o.removeAllCellRanges();const i=this.findFullWidthInfoForEvent(e);if(!i)return;const{rowGui:s,column:r}=i,a=s.element,l=e.target;let c=e.defaultPrevented||zs();a&&a.contains(l)&&Ip(l)&&(c=!1),n.setFocusedCell({rowIndex:t.rowIndex,column:r,rowPinned:t.rowPinned,forceBrowserFocus:c})}onRowClick(e){if(ui(e)||this.lastMouseDownOnDragger)return;const{eventSvc:o,selectionSvc:n}=this.beans;o.dispatchEvent(this.createRowEventWithSource("rowClicked",e)),n==null||n.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){var t;this.rowType==="FullWidthDetail"&&((t=this.beans.masterDetailSvc)==null||t.setupDetailRowAutoHeight(this,e))}createFullWidthCompDetails(e,t){const{gos:o,rowNode:n}=this,i=pt(o,{fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(r,a,l,c)=>this.addFullWidthRowDragging(r,a,l,c),setTooltip:(r,a)=>{o.assertModuleRegistered("Tooltip",3),this.refreshRowTooltip(r,a)}}),s=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return RM(s,i);case"FullWidthGroup":{const{value:r,valueFormatted:a}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return i.value=r,i.valueFormatted=a,xM(s,i)}case"FullWidthLoading":return SM(s,i);default:return wM(s,i)}}refreshRowTooltip(e,t){var o;this.fullWidthGui&&(this.tooltipFeature=(o=this.beans.tooltipSvc)==null?void 0:o.refreshRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,o="",n){const{rowDragSvc:i,context:s}=this.beans;if(!i||!this.isFullWidth())return;const r=i.createRowDragComp(()=>o,this.rowNode,void 0,e,t,n);this.createBean(r,s),this.addDestroyFunc(()=>{this.destroyBean(r,s)})}onUiLevelChanged(){const e=Ty(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,o="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(n=>{n.rowComp.toggleCss(t,!0),n.rowComp.toggleCss(o,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(o=>o.rowComp.toggleCss("ag-row-first",e))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach(o=>o.rowComp.toggleCss("ag-row-last",t)))}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){var t;const e=[];(t=this.beans.rowStyleSvc)==null||t.processClassesFromGridOptions(e,this.rowNode),e.length&&e.forEach(o=>{this.allRowGuis.forEach(n=>n.rowComp.toggleCss(o,!0))})}postProcessRowClassRules(){var e;(e=this.beans.rowStyleSvc)==null||e.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(o=>o.rowComp.toggleCss(t,!0))},t=>{this.allRowGuis.forEach(o=>o.rowComp.toggleCss(t,!1))})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,o=>o.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){var a,l;const t=this.getPinnedForContainer(e),o=this.isFullWidth(),{rowNode:n,beans:i}=this,s=[];s.push("ag-row"),s.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&s.push("ag-opacity-zero"),s.push(n.rowIndex%2===0?"ag-row-even":"ag-row-odd"),n.isRowPinned()&&(s.push("ag-row-pinned"),(a=i.pinnedRowModel)!=null&&a.isManual()&&s.push("ag-row-pinned-manual")),!n.isRowPinned()&&n.pinnedSibling&&s.push("ag-row-pinned-source"),n.isSelected()&&s.push("ag-row-selected"),n.footer&&s.push("ag-row-footer"),s.push("ag-row-level-"+this.rowLevel),n.stub&&s.push("ag-row-loading"),o&&s.push("ag-full-width-row"),(l=i.expansionSvc)==null||l.addExpandedCss(s,n),n.dragging&&s.push("ag-row-dragging");const{rowStyleSvc:r}=i;return r&&(r.processClassesFromGridOptions(s,n),r.preProcessRowClassRules(s,n)),s.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&s.push("ag-row-first"),this.isLastRowOnPage()&&s.push("ag-row-last"),o&&(t==="left"&&s.push("ag-cell-last-left-pinned"),t==="right"&&s.push("ag-cell-first-right-pinned")),s}processStylesFromGridOptions(){var e;return((e=this.beans.rowStyleSvc)==null?void 0:e.processStylesFromGridOptions(this.rowNode))??this.emptyStyle}onRowSelected(e){var t;(t=this.beans.selectionSvc)==null||t.onRowCtrlSelected(this,o=>{(o===this.centerGui||o===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){var e;(e=this.beans.selectionSvc)==null||e.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:o}=e,{rowNode:n,beans:i,gos:s}=this;o.addManagedListeners(t,{mouseenter:()=>n.dispatchRowEvent("mouseEnter"),mouseleave:()=>n.dispatchRowEvent("mouseLeave")}),o.addManagedListeners(n,{mouseEnter:()=>{var r;!((r=i.dragSvc)!=null&&r.dragging)&&!s.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(o=>o.element);for(const o of t)o.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),o=this.applyPaginationOffset(t.top,!0)-100,n=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(o,e),n)}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,o=this.beans.environment.getDefaultRowHeight(),i=B0(this.gos)?Ji(this.beans,this.rowNode).height:void 0,s=i?`${Math.min(o,i)-2}px`:void 0;this.forEachGui(e,r=>{r.element.style.height=`${t}px`,s&&r.element.style.setProperty("--ag-line-height",s)})}destroyFirstPass(e=!1){var n;this.active=!1;const{rowNode:t}=this;if(!e&&yr(this.gos)&&!t.sticky)if(t.rowTop!=null){const s=this.roundRowTopToBounds(t.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(s=>s.rowComp.toggleCss("ag-opacity-zero",!0));(n=this.fullWidthGui)!=null&&n.element.contains(Jt(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);const o=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(o),this.beans.eventSvc.dispatchEvent(o),super.destroy()}destroySecondPass(){var t;this.allRowGuis.length=0,(t=this.beans.editSvc)==null||t.stopRowEditing(this);const e=o=>(o.list.forEach(n=>n.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e,editSvc:t}=this.beans,o=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);o!==this.rowFocused&&(this.rowFocused=o,this.setFocusedClasses()),!o&&this.editing&&(t==null||t.stopRowEditing(this,!1))}onPaginationChanged(){var t;const e=((t=this.beans.pagination)==null?void 0:t.getCurrentPage())??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const o=this.beans.pageBounds.getPixelOffset();return e+o*(t?1:-1)}setRowTop(e){if(!this.printLayout&&Ye(e)){const t=this.applyPaginationOffset(e),i=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(i)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let o;if(t.sticky)o=t.stickyRowTop;else{const n=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,i=this.applyPaginationOffset(n);o=t.isRowPinned()?i:this.beans.rowContainerHeight.getRealPixelPosition(i)}return o+"px"}setRowTopStyle(e){this.allRowGuis.forEach(t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`))}getCellCtrl(e,t=!1){let o=null;return this.getAllCellCtrls().forEach(n=>{n.column==e&&(o=n)}),o!=null||t||this.getAllCellCtrls().forEach(n=>{n.getColSpanningList().indexOf(e)>=0&&(o=n)}),o}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){var s,r;const t=this.rowNode.getRowIndexString();if(t===null)return;const o=(((s=this.beans.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:s.getRowCount())??0)+(((r=this.beans.filterManager)==null?void 0:r.getHeaderRowCount())??0),n=this.rowNode.rowIndex%2===0,i=o+this.rowNode.rowIndex+1;this.forEachGui(e,a=>{a.rowComp.setRowIndex(t),a.rowComp.toggleCss("ag-row-even",n),a.rowComp.toggleCss("ag-row-odd",!n),kp(a.element,i)})}};function TS(e){var o;return e.altKey||e.ctrlKey||e.metaKey?!1:((o=e.key)==null?void 0:o.length)===1}function Of(e,t,o,n,i){const s=n?n.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const r=pt(e,{event:t,editing:i,column:n,node:o,data:o.data,colDef:n.getColDef()});return!!(s&&s(r))}function HO(e){const{pinnedRowModel:t,rowModel:o}=e,[n,i]=[(t==null?void 0:t.isEmpty("top"))??!0,(t==null?void 0:t.isEmpty("bottom"))??!0],s=n?null:"top";let r,a;i?(r=null,a=o.getRowCount()-1):(r="bottom",a=(t==null?void 0:t.getPinnedBottomRowCount())??-1);const{visibleCols:l,rangeSvc:c}=e,u=l.allCols;!c||!(u!=null&&u.length)||c.setCellRange({rowStartIndex:0,rowStartPinned:s,rowEndIndex:a,rowEndPinned:r})}var GO=65,VO=67,zO=86,WO=68,UO=90,$O=89;function jO(e){const{keyCode:t}=e;let o;switch(t){case GO:o=Te.A;break;case VO:o=Te.C;break;case zO:o=Te.V;break;case WO:o=Te.D;break;case UO:o=Te.Z;break;case $O:o=Te.Y;break;default:o=e.code}return o}var KO=class extends Ie{constructor(e){super(),this.element=e}postConstruct(){var e;this.addKeyboardListeners(),this.addMouseListeners(),(e=this.beans.touchSvc)==null||e.mockRowContextMenu(this)}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",K0("touchstart")?"touchstart":"mousedown"].forEach(o=>{const n=this.processMouseEvent.bind(this,o);this.addManagedElementListeners(this.element,{[o]:n})})}processMouseEvent(e,t){var i;if(!gl(this.gos,t)||ui(t))return;const{cellCtrl:o,rowCtrl:n}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(o!=null&&o.column&&o.dispatchCellContextMenuEvent(t),(i=this.beans.contextMenuSvc)==null||i.handleContextMenuMouseEvent(t,void 0,n,o)):(o&&o.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:CS(t,e),rowCtrl:q0(t,e,Fu)}}processKeyboardEvent(e,t){const{cellCtrl:o,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(o?this.processCellKeyboardEvent(o,e,t):n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,o){var a;const{rowNode:n,column:i,editing:s}=e;!Of(this.gos,o,n,i,s)&&t==="keydown"&&(!s&&((a=this.beans.navigation)!=null&&a.handlePageScrollingKey(o))||e.onKeyDown(o),this.doGridOperations(o,e.editing),TS(o)&&e.processCharacter(o)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(o,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,o){const{rowNode:n}=e,{focusSvc:i,navigation:s}=this.beans,r=i.getFocusedCell(),a=r&&r.column;if(!Of(this.gos,o,n,a,!1)){const c=o.key;if(t==="keydown")switch(c){case Te.PAGE_HOME:case Te.PAGE_END:case Te.PAGE_UP:case Te.PAGE_DOWN:s==null||s.handlePageScrollingKey(o,!0);break;case Te.LEFT:case Te.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case Te.UP:case Te.DOWN:e.onKeyboardNavigate(o);break;case Te.TAB:e.onTabKeyDown(o);break}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",o))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!gl(this.gos,e))return;const o=jO(e),{clipboardSvc:n,undoRedo:i}=this.beans;if(o===Te.A)return this.onCtrlAndA(e);if(o===Te.C)return this.onCtrlAndC(n,e);if(o===Te.D)return this.onCtrlAndD(n,e);if(o===Te.V)return this.onCtrlAndV(n,e);if(o===Te.X)return this.onCtrlAndX(n,e);if(o===Te.Y)return this.onCtrlAndY(i);if(o===Te.Z)return this.onCtrlAndZ(i,e)}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:o,selectionSvc:n},gos:i}=this;o&&gi(i)&&t.isRowsToRender()?HO(this.beans):n&&(n==null||n.selectAllRowNodes({source:"keyboardSelectAll",selectAll:$0(i)})),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:o,rowCtrl:n}=this.getControlsForEventTarget(t.target);o!=null&&o.editing||n!=null&&n.editing||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:o,rowCtrl:n}=this.getControlsForEventTarget(t.target);o!=null&&o.editing||n!=null&&n.editing||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){const{cellCtrl:o,rowCtrl:n}=this.getControlsForEventTarget(t.target);o!=null&&o.editing||n!=null&&n.editing||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e==null||e.redo("ui")}},kS=class extends Ie{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,o=t!=null?`${t}px`:"";this.eContainer.style.height=o,this.eViewport&&(this.eViewport.style.height=o)}},dc=e=>e.topRowCtrls,hc=e=>e.getStickyTopRowCtrls(),fc=e=>e.getStickyBottomRowCtrls(),pc=e=>e.bottomRowCtrls,gc=e=>e.allRowCtrls,gh=e=>e.getCtrls("top"),mh=e=>e.getCtrls("center"),vh=e=>e.getCtrls("bottom"),qO={center:{type:"center",name:"center-cols",getRowCtrls:gc,getSpannedRowCtrls:mh},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:gc,getSpannedRowCtrls:mh},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:gc,getSpannedRowCtrls:mh},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:gc},topCenter:{type:"center",name:"floating-top",getRowCtrls:dc,getSpannedRowCtrls:gh},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:dc,getSpannedRowCtrls:gh},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:dc,getSpannedRowCtrls:gh},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:dc},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:hc},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:hc},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:hc},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:hc},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:fc},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:fc},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:fc},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:fc},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:pc,getSpannedRowCtrls:vh},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:pc,getSpannedRowCtrls:vh},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:pc,getSpannedRowCtrls:vh},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:pc}};function AS(e){return`ag-${Il(e).name}-viewport`}function Vc(e){const t=Il(e);return t.container??`ag-${t.name}-container`}function QO(e){return`ag-${Il(e).name}-spanned-cells-container`}function Il(e){return qO[e]}var YO=["topCenter","topLeft","topRight"],JO=["bottomCenter","bottomLeft","bottomRight"],ZO=["center","left","right"],XO=["center","left","right","fullWidth"],eL=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],tL=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],oL=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],IS=["stickyTopCenter","stickyTopLeft","stickyTopRight"],MS=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],nL=[...IS,"stickyTopFullWidth",...MS,"stickyBottomFullWidth"],iL=[...YO,...JO,...ZO,...IS,...MS],sL=class extends Ie{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=Il(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new LO(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,o,n){this.comp=e,this.eContainer=t,this.eSpannedContainer=o,this.eViewport=n,this.createManagedBean(new KO(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:i,rangeSvc:s}=this.beans,r=()=>this.onPinnedWidthChanged();this.forContainers(tL,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(i==null?void 0:i.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:r})}),this.forContainers(oL,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(i==null?void 0:i.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:r})}),this.forContainers(XO,()=>this.createManagedBean(new kS(this.eContainer,this.name==="center"?n:void 0))),s&&this.forContainers(iL,()=>this.createManagedBean(s.createDragListenerFeature(this.eContainer))),this.forContainers(eL,()=>this.createManagedBean(new Qp(a=>this.comp.setContainerWidth(`${a}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,o=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:o,displayedColumnsWidthChanged:o,displayedRowsChanged:n=>this.onDisplayedRowsChanged(n.afterScroll)}),o(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const n=this.options.getSpannedRowCtrls(e);n&&this.comp.setSpannedRowCtrls(n,!1)}})}listenOnDomOrder(){if(nL.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const o=this.gos.get("ensureDomOrder"),n=wo(this.gos,"print");this.comp.setDomOrder(o||n)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=o=>{e.dragging&&o.cancelable&&o.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),o=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,o,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return cl(this.eViewport)}getCenterViewportScrollLeft(){return du(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=Zi(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return F0(this.eViewport)}getViewportScrollLeft(){return du(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||UA(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){hu(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const o=wo(this.gos,"print"),i=this.gos.get("embedFullWidthRows")||o,s=t.filter(r=>{const a=r.isFullWidth();return this.options.fullWidth?!i&&a:i||!a});this.comp.setRowCtrls({rowCtrls:s,useFlushSync:e})}},OS="ag-force-vertical-scroll",rL="ag-selectable",aL="ag-column-moving",lL=class extends Ie{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,o,n,i,s,r){var a,l;this.comp=e,this.eGridBody=t,this.eBodyViewport=o,this.eTop=n,this.eBottom=i,this.eStickyTop=s,this.eStickyBottom=r,this.eCenterColsViewport=o.querySelector(`.${AS("center")}`),this.eFullWidthContainer=o.querySelector(`.${Vc("fullWidth")}`),this.eStickyTopFullWidthContainer=s.querySelector(`.${Vc("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=r.querySelector(`.${Vc("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",c=>this.setCellTextSelection(c.currentValue)),this.createManagedBean(new qp(this.comp)),this.scrollFeature=this.createManagedBean(new OO(o)),(a=this.beans.rowDragSvc)==null||a.setupRowDrag(o,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,o,i,s,r]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(l=this.filterManager)==null||l.setupAdvFilterHeaderComp(n),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),o=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:o,rowResizeEnded:o}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const o=t&&e.getScrollbarWidth()||0,n=R0()?16:0,i=`calc(100% + ${o+n}px)`;Si(this.beans,()=>this.comp.setBodyViewportWidth(i)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let o=this.gos.get("treeData");if(!o){const n=t.isPivotMode();o=(e?e.columns.length:0)>=(n?2:1)}this.comp.setGridRootRole(o?"treegrid":"grid")}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:o=>{const{target:n}=o,i=Rs(n,"ag-root",t);t.classList.toggle("ag-has-focus",!i)},focusout:o=>{const{target:n,relatedTarget:i}=o,s=t.contains(i),r=Rs(i,"ag-root",t);Rs(n,"ag-root",t)||(!s||r)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(aL,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(rL,e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){var e;(e=this.beans.editSvc)==null||e.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){var i,s;const e=(((i=this.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:i.getRowCount())??0)+(((s=this.filterManager)==null?void 0:s.getHeaderRowCount())??0),{rowModel:t}=this.beans,o=t.isLastRowIndexKnown()?t.getRowCount():-1,n=o===-1?-1:e+o;this.comp.setRowCount(n)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?OS:null,o=wo(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||o&&$A(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let o=t.sizesMeasured;const n=()=>{const i=o&&yr(this.gos)&&!e.stretching,s=i?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(s,i)};n(),this.addManagedEventListeners({heightScaleChanged:n}),this.addManagedPropertyListener("animateRows",n),this.addManagedEventListeners({gridStylesChanged:()=>{!o&&t.sizesMeasured&&(o=!0,n())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:o,eTop:n,eBottom:i,beans:{popupSvc:s,touchSvc:r}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),r==null||r.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,s)});const l=this.onStickyWheel.bind(this);for(const u of[t,o,n,i])this.addManagedElementListeners(u,{wheel:l});const c=this.onHorizontalWheel.bind(this);for(const u of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(u).eContainer,{wheel:c});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:o,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(o))&&gl(this.gos,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;e.preventDefault(),this.scrollVertically(t)}onHorizontalWheel(e){const{deltaX:t,deltaY:o,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(o))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:o}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||o})}onBodyViewportContextMenu(e,t,o){var i;if(!e&&!o)return;this.gos.get("preventDefaultOnContextMenu")&&(e||o).preventDefault();const{target:n}=e||t;(n===this.eBodyViewport||n===this.ctrlsSvc.get("center").eViewport)&&((i=this.beans.contextMenuSvc)==null||i.showContextMenu({mouseEvent:e,touchEvent:o,value:null,anchorToElement:this.eGridBody,source:"ui"}))}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e!=null&&e.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,o=e==null?void 0:e.getPinnedTopTotalHeight(),n=e==null?void 0:e.getPinnedBottomTotalHeight(),i=t.getPinnedRowBorderWidth(),s=t.getRowBorderWidth(),r=i-s,a=o?r+o:0,l=n?r+n:0;this.comp.setTopHeight(a),this.comp.setBottomHeight(l),this.comp.setTopInvisible(a<=0),this.comp.setBottomInvisible(l<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){var i,s;const t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(((i=this.filterManager)==null?void 0:i.getHeaderHeight())??0),o=((s=this.pinnedRowModel)==null?void 0:s.getPinnedTopTotalHeight())??0;let n=0;t>0&&(n+=t),o>0&&(n+=o),n>0&&(n+=1),this.comp.setStickyTopTop(`${n}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:o}=this,n=(e==null?void 0:e.getPinnedBottomTotalHeight())??0,s=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,r=n+s;o.setStickyBottomBottom(`${r}px`)}},LS=class extends Bt{constructor(e,t){super(),this.direction=t,this.eViewport=Qe,this.eContainer=Qe,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",S0()||xs())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=R0(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),o=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:o,touchend:o})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),Si(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;qA(()=>_n(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},cL={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},uL=class extends LS{constructor(){super(cL,"horizontal"),this.eLeftSpacer=Qe,this.eRightSpacer=Qe,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new Qp(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){var t;if(!this.invisibleScrollbar)return;const e=((t=this.beans.pinnedRowModel)==null?void 0:t.getPinnedBottomTotalHeight())??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const o=!this.enableRtl&&e,n=this.scrollVisibleSvc.getScrollbarWidth();o&&(t+=n),Un(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=n);let i=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(i+=n),Un(this.eLeftSpacer,i),this.eLeftSpacer.classList.toggle("ag-scroller-corner",i<=n)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,o=this.gos.get("suppressHorizontalScroll"),n=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,s=o?0:n===0&&t?16:n,r=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),Na(this.getGui(),s),Na(this.eViewport,s),Na(this.eContainer,s),s||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(r,100):r()}getScrollPosition(){return du(this.eViewport,this.enableRtl)}setScrollPosition(e){_n(this.eViewport)||this.attemptSettingScrollPosition(e),hu(this.eViewport,e,this.enableRtl)}},dL={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:uL},hL={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},fL=class extends LS{constructor(){super(hL,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new kS(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,o=this.invisibleScrollbar,n=t&&e.getScrollbarWidth()||0,i=n===0&&o?16:n;this.toggleCss("ag-scrollbar-invisible",o),Un(this.getGui(),i),Un(this.eViewport,i),Un(this.eContainer,i),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const o=e.getGridBodyCtrl().eBodyViewport,n=this.getScrollPosition(),i=o.scrollTop;n!=i&&this.setScrollPosition(i,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!_n(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},pL={selector:"AG-FAKE-VERTICAL-SCROLL",component:fL};function gL(e){return e.cols?e.cols.treeDepth+1:-1}function Vn(e){var t;return((t=e.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:t.getRowCount())??0}function Jp(e){const t=[],o=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const n of o){if(!n)continue;const i=n.getGroupRowCount()||0;for(let s=0;s<i;s++){const r=n.getGroupRowCtrlAtIndex(s),a=t[s];if(r){const l=mL(e,r);(a==null||l>a)&&(t[s]=l)}}}return t}function mL(e,t){let n=e.colModel.isPivotMode()?yL(e):NS(e);const i=t.getHeaderCellCtrls();for(const s of i){const{column:r}=s,a=r.getAutoHeaderHeight();a!=null&&a>n&&r.isAutoHeaderHeight()&&(n=a)}return n}function Zp(e){let o=e.colModel.isPivotMode()?vL(e):Ml(e);return e.colModel.forAllCols(n=>{const i=n.getAutoHeaderHeight();i!=null&&i>o&&n.isAutoHeaderHeight()&&(o=i)}),o}function Ml(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function BS(e){return e.gos.get("floatingFiltersHeight")??Ml(e)}function NS(e){return e.gos.get("groupHeaderHeight")??Ml(e)}function vL(e){return e.gos.get("pivotHeaderHeight")??Ml(e)}function yL(e){return e.gos.get("pivotGroupHeaderHeight")??NS(e)}var CL=class extends Ie{setComp(e,t,o){this.comp=e,this.eGui=t;const{beans:n}=this,{headerNavigation:i,touchSvc:s,ctrlsSvc:r}=n;i&&this.createManagedBean(new Qr(o,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,n),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,n)}),this.onPivotModeChanged(n),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),s==null||s.mockHeaderContextMenu(this,a),r.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>Si(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){var s;const{beans:e}=this;let t=0;const o=Jp(e).reduce((r,a)=>r+a,0),n=Zp(e);if((s=e.filterManager)!=null&&s.hasFloatingFilters()&&(t+=BS(e)),t+=o,t+=n,this.headerHeight===t)return;this.headerHeight=t;const i=`${t+1}px`;this.comp.setHeightAndMinHeight(i),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const o=e.visibleCols.allCols.some(n=>n.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",o)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),o=e.shiftKey,n=o!==t?"LEFT":"RIGHT",{beans:i}=this,{headerNavigation:s,focusSvc:r}=i;(s.navigateHorizontally(n,!0,e)||!o&&r.focusOverlay(!1)||Gr(i,o,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:o}=this.beans;switch(e.key){case Te.LEFT:t="LEFT";case Te.RIGHT:{Ye(t)||(t="RIGHT"),o.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case Te.UP:t="UP";case Te.DOWN:{Ye(t)||(t="DOWN"),o.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:o,beans:n}=this;!t&&o.contains(Jt(n))||o.contains(t)||(n.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,o){var r;const{menuSvc:n,ctrlsSvc:i}=this.beans;if(!e&&!o||!(n!=null&&n.isHeaderContextMenuEnabled()))return;const{target:s}=e??t;(s===this.eGui||s===((r=i.getHeaderRowContainerCtrl())==null?void 0:r.eViewport))&&n.showHeaderContextMenu(void 0,e,o)}},Xp=class extends Bt{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},bL={tag:"div",cls:"ag-header-cell",role:"columnheader",children:[{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"},{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"}]},wL=class extends Xp{constructor(e){super(bL,e),this.eResize=Qe,this.eHeaderCompWrapper=Qe,this.headerCompVersion=0}postConstruct(){const e=this.getGui();((i,s)=>{s!=null&&s!=""?e.setAttribute(i,s):e.removeAttribute(i)})("col-id",this.ctrl.column.getColId());const o={setWidth:i=>e.style.width=i,toggleCss:(i,s)=>this.toggleCss(i,s),setUserStyles:i=>Tl(e,i),setAriaSort:i=>i?LA(e,i):BA(e),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(o,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);const n=this.ctrl.getSelectAllGui();n&&this.eResize.insertAdjacentElement("afterend",n)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then(o=>this.afterCompCreated(t,o))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},SL={tag:"div",cls:"ag-header-group-cell",role:"columnheader",children:[{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"},{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"}]},xL=class extends Xp{constructor(e){super(SL,e),this.eResize=Qe,this.eHeaderCompWrapper=Qe}postConstruct(){const e=this.getGui(),t=(n,i)=>i!=null?e.setAttribute(n,i):e.removeAttribute(n);e.setAttribute("col-id",this.ctrl.column.getUniqueId());const o={toggleCss:(n,i)=>this.toggleCss(n,i),setUserStyles:n=>Tl(e,n),setHeaderWrapperHidden:n=>{n?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:n=>{n!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${n}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",n!=null)},setResizableDisplayed:n=>Yt(this.eResize,n),setWidth:n=>e.style.width=n,setAriaExpanded:n=>t("aria-expanded",n),setUserCompDetails:n=>this.setUserCompDetails(n),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(o,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}const o=this.getGui(),n=e.getGui();this.eHeaderCompWrapper.appendChild(n),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(o)}addOrRemoveHeaderWrapperStyle(e,t){const{eHeaderCompWrapper:o}=this;t?o.style.setProperty(e,t):o.style.removeProperty(e)}},RL={tag:"div",cls:"ag-header-cell ag-floating-filter",role:"gridcell",children:[{tag:"div",ref:"eFloatingFilterBody",role:"presentation"},{tag:"div",ref:"eButtonWrapper",cls:"ag-floating-filter-button ag-hidden",role:"presentation",children:[{tag:"button",ref:"eButtonShowMainFilter",cls:"ag-button ag-floating-filter-button-button",attrs:{type:"button",tabindex:"-1"}}]}]},_L=class extends Xp{constructor(e){super(RL,e),this.eFloatingFilterBody=Qe,this.eButtonWrapper=Qe,this.eButtonShowMainFilter=Qe}postConstruct(){const e=this.getGui(),t={toggleCss:(o,n)=>this.toggleCss(o,n),setUserStyles:o=>Tl(e,o),addOrRemoveBodyCssClass:(o,n)=>this.eFloatingFilterBody.classList.toggle(o,n),setButtonWrapperDisplayed:o=>Yt(this.eButtonWrapper,o),setCompDetails:o=>this.setCompDetails(o),getFloatingFilterComp:()=>this.compPromise,setWidth:o=>e.style.width=o,setMenuIcon:o=>this.eButtonShowMainFilter.appendChild(o)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},EL=class extends Bt{constructor(e){super({tag:"div",cls:e.headerRowClass,role:"row"}),this.ctrl=e,this.headerComps={}}postConstruct(){kp(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,o)=>this.setHeaderCtrls(t,o),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;const o=this.headerComps;if(this.headerComps={},e.forEach(n=>{const i=n.instanceId;let s=o[i];delete o[i],s==null&&(s=this.createHeaderComp(n),this.getGui().appendChild(s.getGui())),this.headerComps[i]=s}),Object.values(o).forEach(n=>{this.getGui().removeChild(n.getGui()),this.destroyBean(n)}),t){const n=Object.values(this.headerComps);n.sort((s,r)=>{const a=s.getCtrl().column.getLeft(),l=r.getCtrl().column.getLeft();return a-l});const i=n.map(s=>s.getGui());T0(this.getGui(),i)}}createHeaderComp(e){let t;switch(this.ctrl.type){case"group":t=new xL(e);break;case"filter":t=new _L(e);break;default:t=new wL(e);break}return this.createBean(t),t.setParentComponent(this),t}},eg=class extends Ie{constructor(e,t,o,n){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=n,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=o}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?Vt(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,o=e.get("suppressColumnMoveAnimation"),n=Ye(this.columnOrGroup.getOldLeft());(t==null?void 0:t.isActive())&&n&&!o?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),o=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=o,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===o&&this.setLeft(o)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:o,visibleCols:n}=this.beans;if(!wo(o,"print")||e.getPinned()==="left")return t;const s=n.getColsLeftWidth();if(e.getPinned()==="right"){const r=n.bodyWidth;return s+r+t}return s+t}setLeft(e){if(Ye(e)&&(this.eCell.style.left=`${e}px`),no(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&OA(this.ariaEl,t.length)}}},PL=0,HS="headerCtrl",tg=class extends Ie{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.instanceId=e.getUniqueId()+"-"+PL++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){const{headerRowIndex:t,column:o}=this.beans.focusSvc.focusedHeader,n=o.getDefinition(),i=n&&n.suppressHeaderKeyboardEvent;if(!Ye(i))return!1;const s=pt(this.gos,{colDef:n,column:o,headerRowIndex:t,event:e});return!!i(s)}getWrapperHasFocus(){return Jt(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let o;if(typeof t=="function"){const n=this.getHeaderClassParams();o=t(n)}else o=t;o&&this.comp.setUserStyles(o)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:o,compBean:n}=e,{beans:i}=this,s=d=>{if(!this.isAlive()||!n.isAlive())return;const{paddingTop:h,paddingBottom:f,borderBottomWidth:v,borderTopWidth:m}=Ws(this.eGui),b=h+f+v+m,R=t.offsetHeight+b;if(d<5){const _=go(i),M=!_||!_.contains(t),I=R==0;if(M||I){_f(()=>s(d+1),"raf",i);return}}this.setColHeaderHeight(this.column,R)};let r=!1,a;const l=()=>{const d=this.column.isAutoHeaderHeight();d&&!r&&c(),!d&&r&&u()},c=()=>{r=!0,s(0),this.comp.toggleCss("ag-header-cell-auto-height",!0),a=Zi(this.beans,t,()=>s(0))},u=()=>{r=!1,a&&a(),this.comp.toggleCss("ag-header-cell-auto-height",!1),a=void 0};l(),n.addDestroyFunc(()=>u()),n.addManagedListeners(this.column,{widthChanged:()=>r&&s(0)}),n.addManagedEventListeners({sortChanged:()=>{r&&window.setTimeout(()=>s(0))}}),o&&o(l)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:o,eGui:n}=this;!e||!t||!n||(vS(e,t,o.visibleCols),b0(n,o.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=Fs(this.beans);this.eGui&&ln(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){var s;const t=Jt(this.beans),o=e.key===Te.LEFT||e.key===Te.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||o)&&(e.preventDefault(),e.stopImmediatePropagation()),!o))return;const i=e.key===Te.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const r=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(r,e.shiftKey),(s=this.resizeFeature)==null||s.toggleColumnResizing(!0)}else this.moveHeader(i)}moveHeader(e){var t;(t=this.beans.colMoves)==null||t.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:o}=this.beans;return o?o.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:o}=this;let n=e.key===Te.LEFT!==t.get("enableRtl");const i=o.getPinned(),s=t.get("enableRtl");return i&&s!==(i==="right")&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var e;(e=this.resizeFeature)==null||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case Te.PAGE_DOWN:case Te.PAGE_UP:case Te.PAGE_HOME:case Te.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=HS,{eGui:o,gos:n}=this;Ns(n,o,t,this),e.addDestroyFunc(()=>Ns(n,o,t,null))}focus(e){const{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus(),!0):!1}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){var e;this.dragSource&&((e=this.beans.dragAndDrop)==null||e.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,o){const n=e??t,{menuSvc:i,gos:s}=this.beans;s.get("preventDefaultOnContextMenu")&&n.preventDefault(),i!=null&&i.isHeaderContextMenuEnabled(o)&&i.showHeaderContextMenu(o,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",o)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:o}=this;e.isColumn?o.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):o.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},FL=class extends tg{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}setComp(e,t,o,n,i){this.comp=e;const{rowCtrl:s,column:r,beans:a}=this,{colResize:l,context:c,colHover:u,rangeSvc:d}=a,h=kl(this,c,i);this.setGui(t,h),this.updateState(),this.setupWidth(h),this.setupMovingCss(h),this.setupMenuClass(h),this.setupSortableClass(h),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:n,checkMeasuringCallback:v=>this.setRefreshFunction("measuring",v),compBean:h}),this.addColumnHoverListener(h),this.setupFilterClass(h),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(h),this.setupSelectAll(h),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=h.createManagedBean(l.createResizeFeature(s.pinned,r,o,e,this)):Yt(o,!1),u==null||u.createHoverFeature(h,[r],t),d==null||d.createRangeHighlightFeature(h,r,e),h.createManagedBean(new eg(r,t,a)),h.createManagedBean(new Qr(t,{shouldStopEventPropagation:v=>this.shouldStopEventPropagation(v),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(h),h.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),h.addManagedListeners(r,{colDefChanged:()=>this.refresh()}),h.addManagedListeners(r,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const f=()=>this.checkDisplayName();h.addManagedEventListeners({columnValueChanged:f,columnRowGroupChanged:f,columnPivotChanged:f,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),h.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){var o;(o=this.beans.colResize)==null||o.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,o=e.colDef;return pt(t.gos,{colDef:o,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return vM(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:o,gos:n}=this.beans;return pt(n,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!(e!=null&&e.isHeaderFilterButtonEnabled(this.column)),enableFilterIcon:!!o&&(!this.openFilterEnabled||Ko(this.gos)),showColumnMenu:(s,r)=>{e==null||e.showColumnMenu({column:this.column,buttonElement:s,positionBy:"button",onClosedCallback:r})},showColumnMenuAfterMouseClick:(s,r)=>{e==null||e.showColumnMenu({column:this.column,mouseEvent:s,positionBy:"mouse",onClosedCallback:r})},showFilter:s=>{e==null||e.showFilterMenu({column:this.column,buttonElement:s,containerType:"columnFilter",positionBy:"button"})},progressSort:s=>{t==null||t.progressSort(this.column,!!s,"uiColumnSorted")},setSort:(s,r)=>{t==null||t.setSortForColumn(this.column,s,!!r,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(s,r)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(s,r)}})}setupSelectAll(e){const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature.setComp(this))}getSelectAllGui(){var e;return(e=this.selectAllFeature)==null?void 0:e.getCheckboxGui()}handleKeyDown(e){var t;super.handleKeyDown(e),e.key===Te.SPACE&&((t=this.selectAllFeature)==null||t.onSpaceKeyDown(e)),e.key===Te.ENTER&&this.onEnterKeyDown(e),e.key===Te.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){var t;e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&((t=this.beans.sortSvc)==null||t.progressSort(this.column,e.shiftKey,"uiColumnSorted"))}showMenuOnKeyPress(e,t){const o=this.comp.getUserCompInstance();ky(o)&&o.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),JM()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){var o;this.tooltipFeature=(o=this.beans.tooltipSvc)==null?void 0:o.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),o=mS(t,this.gos,this.column,null),n=this.userHeaderClasses;this.userHeaderClasses=new Set(o),o.forEach(i=>{n.has(i)?n.delete(i):this.comp.toggleCss(i,!0)}),n.forEach(i=>this.comp.toggleCss(i,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){var t;this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=((t=this.beans.colMoves)==null?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!(e!=null&&e.isColumnMenuInHeaderEnabled(this.column)),this.openFilterEnabled=!!(e!=null&&e.isFilterMenuInHeaderEnabled(this.column)),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const o=this.column.getActualWidth();this.comp.setWidth(`${o}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{var o;(o=this.comp)==null||o.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const o=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",o),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,o=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",o)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:o,beans:n}=this,i=Jp(this.beans),s=i.reduce((u,d)=>u+=d,0)===0;if(o.toggleCss("ag-header-parent-hidden",s),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),o.toggleCss("ag-header-span-height",!1),o.toggleCss("ag-header-span-total",!1);return}const{numberOfParents:r,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();o.toggleCss("ag-header-span-height",r>0);const l=Zp(n);if(r===0){o.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${l}px`);return}o.toggleCss("ag-header-span-total",a);let c=0;for(let u=0;u<r;u++)c+=i[i.length-1-u];e.style.setProperty("top",`${-c}px`),e.style.setProperty("height",`${l+c}px`)}refreshAriaSort(){var e;if(this.sortable){const t=this.getLocaleTextFunc(),o=((e=this.beans.sortSvc)==null?void 0:e.getDisplaySortForColumn(this.column))||null;this.comp.setAriaSort(RA(o)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!Ko(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){var t;if(!this.eGui.contains(Jt(this.beans)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((o,n)=>o==="filter"?-1:n.charCodeAt(0)-o.charCodeAt(0)).map(o=>this.ariaDescriptionProperties.get(o)).join(". ");(t=this.beans.ariaAnnounce)==null||t.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){var t;(t=this.beans.colHover)==null||t.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=i=>this.handleMouseOverChange(i.type==="mouseenter"),o=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},n=i=>this.handleContextMenuMouseEvent(i,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:o,contextmenu:n})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return ky(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function ky(e){return typeof(e==null?void 0:e.getAnchorElementForMenu)=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var DL=0,yh=class extends Ie{constructor(e,t,o){super(),this.rowIndex=e,this.pinned=t,this.type=o,this.instanceId=DL++,this.allCtrls=[];const n=o=="group"?"ag-header-row-column-group":o=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${n}`}postConstruct(){this.isPrintLayout=wo(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,o=!0){this.comp=e,t=kl(this,this.beans.context,t),o&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),o=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:o,virtualColumnsChanged:n=>this.onVirtualColumnsChanged(n.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",o),e.addManagedPropertyListener("ensureDomOrder",n=>this.isEnsureDomOrder=n.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=wo(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{filterManager:e}=this.beans,t=[],o=Jp(this.beans),n=Zp(this.beans);t.push(...o),t.push(n),e!=null&&e.hasFloatingFilters()&&t.push(BS(this.beans));let i=0;for(let r=0;r<this.rowIndex;r++)i+=t[r];const s=t[this.rowIndex];return{topOffset:i,rowHeight:s}}onVirtualColumnsChanged(e=!1){const t=this.getUpdatedHeaderCtrls(),o=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,o,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const n of t)this.recycleAndCreateHeaderCtrls(n,this.ctrlsById,e);const o=n=>{const{focusSvc:i,visibleCols:s}=this.beans;return i.isHeaderWrapperFocused(n)?s.isVisible(n.column):!1};if(e)for(const[n,i]of e)o(i)?this.ctrlsById.set(n,i):this.destroyBean(i);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,o){if(e.isEmptyGroup())return;const n=e.getUniqueId();let i;if(o&&(i=o.get(n),o.delete(n)),i&&i.column!=e&&(this.destroyBean(i),i=void 0),i==null)switch(this.type){case"filter":{i=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":i=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:i=this.createBean(new FL(e,this));break}t.set(n,i)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth(),{colViewport:o}=this.beans;return["left",null,"right"].forEach(n=>{const i=o.getHeadersToRender(n,t);e=e.concat(i)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.colViewport.getHeadersToRender(this.pinned,this.getActualDepth())}focusHeader(e,t){const o=this.allCtrls.find(i=>i.column==e);return o?o.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,super.destroy()}},TL=class extends Ie{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:o,ctrlsSvc:n,colModel:i,colMoves:s,filterManager:r}=this.beans;this.setupCenterWidth(),o==null||o.setupHeaderPinnedWidth(this),this.setupDragAndDrop(s,this.eViewport);const a=this.onDisplayedColumnsChanged.bind(this,r);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:a,advancedFilterEnabledChanged:a});const l=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;n.register(l,this),i.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,colModel:o,filterManager:n}=this.beans;let i=0;const s=t.getFocusHeaderToUseAfterRefresh(),r=()=>{const u=gL(o)-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let d=0;d<u;d++){const h=this.createBean(new yh(i++,this.pinned,"group"));this.groupsRowCtrls.push(h)}},a=()=>{const u=i++,d=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.rowIndex!==u);(d||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),d&&(this.columnsRowCtrl=this.createBean(new yh(u,this.pinned,"column")))},l=()=>{this.includeFloatingFilter=!!(n!=null&&n.hasFloatingFilters())&&!this.hidden;const u=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){u();return}const d=i++;if(this.filtersRowCtrl){const h=this.filtersRowCtrl.rowIndex!==d;(!e||h)&&u()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new yh(d,this.pinned,"filter")))};r(),a(),l();const c=this.getAllCtrls();this.comp.setCtrls(c),this.restoreFocusOnHeader(t,s)}getHeaderCtrlForColumn(e){const t=o=>o==null?void 0:o.getHeaderCellCtrls().find(n=>n.column===e);if(mi(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let o=0;o<this.groupsRowCtrls.length;o++){const n=t(this.groupsRowCtrls[o]);if(n)return n}}getHtmlElementForColumnHeader(e){var t;return((t=this.getHeaderCtrlForColumn(e))==null?void 0:t.eGui)??null}getRowType(e){var t;return(t=this.getAllCtrls()[e])==null?void 0:t.type}focusHeader(e,t,o){const i=this.getAllCtrls()[e];return i?i.focusHeader(t,o):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const o=e==null?void 0:e.createBodyDropTarget(this.pinned,t);o&&this.createManagedBean(o)}restoreFocusOnHeader(e,t){if(!t)return;const{column:o}=t;o.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(e){const t=!!(e!=null&&e.hasFloatingFilters())&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new Qp(e=>this.comp.setCenterWidth(`${e}px`),!0))}},kL=class extends Ie{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const{enterpriseMenuFactory:t,filterMenuFactory:o}=this.beans,n=t&&Ko(this.gos)?t:o;this.showColumnMenuCommon(n,e,e.containerType,!0)}showHeaderContextMenu(e,t,o){var n;(n=this.activeMenuFactory)==null||n.showMenuAfterContextMenuEvent(e,t,o)}hidePopupMenu(){var e,t;(e=this.beans.contextMenuSvc)==null||e.hideActiveMenu(),(t=this.activeMenuFactory)==null||t.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){var o;const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!((o=this.activeMenuFactory)!=null&&o.isMenuEnabled(e))&&(Ko(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!!((t=this.beans.filterManager)!=null&&t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&mi(e)?e.getColDef():e==null?void 0:e.getColGroupDef();return!(t!=null&&t.suppressHeaderContextMenu)&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(xs()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!Ko(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!!((t=this.beans.filterManager)!=null&&t.isFilterAllowed(e))&&!Ko(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return Ko(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,o,n){const{positionBy:i,onClosedCallback:s}=t,r=t.column;if(i==="button"){const{buttonElement:a}=t;e==null||e.showMenuAfterButtonClick(r,a,o,s,n)}else if(i==="mouse"){const{mouseEvent:a}=t;e==null||e.showMenuAfterMouseEvent(r,a,o,s,n)}else if(r){const a=this.beans,l=a.ctrlsSvc;l.getScrollFeature().ensureColumnVisible(r,"auto"),Si(a,()=>{var u;const c=(u=l.getHeaderRowContainerCtrl(r.getPinned()))==null?void 0:u.getHeaderCtrlForColumn(r);c&&(e==null||e.showMenuAfterButtonClick(r,c.getAnchorElementForMenu(n),o,s,n))})}}};function Ay(e,t,o){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",o))}var GS=class extends Bt{constructor(){super()}},AL={tag:"span",cls:"ag-overlay-loading-center",attrs:{"aria-live":"polite","aria-atomic":"true"}},IL=class extends GS{init(){var t;const e=ci((t=this.gos.get("overlayLoadingTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??AL),!e){const o=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=o("loadingOoo","Loading...")})}}},ML={tag:"span",cls:"ag-overlay-no-rows-center"},OL=class extends GS{init(){var t;const e=ci((t=this.gos.get("overlayNoRowsTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??ML),!e){const o=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=o("noRowsToShow","No Rows To Show")})}}};function LL(e,t,o){const n=sn(e,t,o);if(n){const{className:s}=n;if(typeof s=="string"&&s.indexOf("ag-icon")>-1||typeof s=="object"&&s["ag-icon"])return n}const i=Ut({tag:"span"});return i.appendChild(n),i}function sn(e,t,o){var s;let n=null;e==="smallDown"?Ue(262):e==="smallLeft"?Ue(263):e==="smallRight"&&Ue(264);const i=o&&o.getColDef().icons;if(i&&(n=i[e]),t.gos&&!n){const r=t.gos.get("icons");r&&(n=r[e])}if(n){let r;if(typeof n=="function")r=n();else if(typeof n=="string")r=n;else{Ue(38,{iconName:e});return}if(typeof r=="string")return Op(r);if(Bp(r))return r;Ue(133,{iconName:e});return}else{const r=t.registry.getIcon(e);return r||(s=t.validation)==null||s.validateIcon(e),Ut({tag:"span",cls:`ag-icon ag-icon-${r??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var BL=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}",NL={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},HL=class extends Bt{constructor(){super(),this.dragSource=null,this.eIcon=Qe,this.eLabel=Qe,this.eGhost=Qe,this.registerCSS(BL)}postConstruct(){const e=t=>LL(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(NL),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eIcon:o,dragSource:n,dropIconMap:i,gos:s}=this;Do(o);let r=null;e||(e=n!=null&&n.getDefaultIconName?n.getDefaultIconName():"notAllowed"),r=i[e],o.classList.toggle("ag-shake-left-to-right",t),!(r===i.hide&&s.get("suppressDragLeaveHidesColumns"))&&r&&o.appendChild(r)}setLabel(e){this.eLabel.textContent=e}},GL=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",VL=class extends Bt{constructor(e,t,o){super(t,o),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(GL)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:o,labelAlignment:n,disabled:i}=this.config;i!=null&&this.setDisabled(i),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),o!=null&&this.setLabelWidth(o),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;Do(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(Yt(t,!1),Qi(t,"presentation")):(Yt(t,!0),Qi(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const o=this.getGui().classList;return o.toggle("ag-label-align-left",e==="left"),o.toggle("ag-label-align-right",e==="right"),o.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(fu(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return ll(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},VS=class extends VL{constructor(e,t,o,n){super(e,t,o),this.className=n}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:o}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),o!=null&&this.onValueChange(o),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),o=this.getLabel();o==null||o==""||_A(e)!==null?Cf(e,""):Cf(e,t??"")}setAriaLabel(e){return Yu(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Un(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function zL(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var gs=class extends VS{constructor(e,t,o="text",n="input"){super(e,(e==null?void 0:e.template)??zL(n),[],t),this.inputType=o,this.displayFieldTag=n,this.eLabel=Qe,this.eWrapper=Qe,this.eInput=Qe}postConstruct(){super.postConstruct(),this.setInputType();const{eLabel:e,eWrapper:t,eInput:o,className:n}=this;e.classList.add(`${n}-label`),t.classList.add(`${n}-input-wrapper`),o.classList.add(`${n}-input`),this.addCss("ag-input-field"),o.id=o.id||`ag-${this.getCompId()}-input`;const{inputName:i,inputWidth:s}=this.config;i!=null&&this.setInputName(i),s!=null&&this.setInputWidth(s),this.addInputListeners(),this.activateTabIndex([o])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return fu(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return ln(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Yu(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return ll(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)ln(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";ln(this.eInput,"autocomplete",t)}return this}},og=class extends gs{constructor(e,t="ag-checkbox",o="checkbox"){super(e,t,o),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;const o=this.eInput;o.checked=e,o.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,o){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:o});const n=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:n.id,name:n.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),o=this.selected=e.target.checked;this.refreshSelectedClass(o),this.dispatchChange(o,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},ng={selector:"AG-CHECKBOX",component:og},WL=".ag-checkbox-cell{height:100%}",UL={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},$L=class extends Bt{constructor(){super(UL,[ng]),this.eCheckbox=Qe,this.registerCSS(WL)}init(e){this.refresh(e);const{eCheckbox:t,beans:o}=this,n=t.getInputElement();n.setAttribute("tabindex","-1"),y0(n,"polite"),this.addManagedListeners(n,{click:i=>{if(Hs(i),t.isDisabled())return;const s=t.getValue();this.onCheckboxChanged(s)},dblclick:i=>{Hs(i)}}),this.addManagedElementListeners(e.eGridCell,{keydown:i=>{if(i.key===Te.SPACE&&!t.isDisabled()){e.eGridCell===Jt(o)&&t.toggle();const s=t.getValue();this.onCheckboxChanged(s),i.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,o=!0;const{value:n,column:i,node:s}=e;if(s.group&&i)if(typeof n=="boolean")t=n;else{const d=i.getColId();d.startsWith(Zu)?t=n==null||n===""?void 0:n==="true":s.aggData&&s.aggData[d]!==void 0?t=n??void 0:o=!1}else t=n??void 0;const{eCheckbox:r}=this;if(!o){r.setDisplayed(!1);return}r.setValue(t);const a=e.disabled??!(i!=null&&i.isCellEditable(s));r.setDisabled(a);const l=this.getLocaleTextFunc(),c=Ap(l,t),u=a?c:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${c})`;r.setInputAriaLabel(u)}onCheckboxChanged(e){const{eventSvc:t,params:o}=this,{column:n,node:i,value:s}=o,r={column:n,colDef:n.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s};t.dispatchEvent({type:"cellEditingStarted",...r});const a=i.setDataValue(n,e,"edit");t.dispatchEvent({type:"cellEditingStopped",...r,oldValue:s,newValue:e,valueChanged:a}),a||this.updateCheckbox(o)}},Iy=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){const{all:t,visible:o,order:n}=this;t.has(e)||(t.add(e),o.add(e),n.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),dn(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(const t of this.visible)if(t.id==e)return t}clear(){const{all:e,visible:t,order:o,queued:n}=this;e.clear(),n.clear(),t.clear(),o.length=0}sort(){const{sortSvc:e,rowNodeSorter:t}=this.beans,o=(e==null?void 0:e.getSortOptions())??[],n=qL(this.order);if(this.order.sort((s,r)=>{var a,l;return(((a=s.pinnedSibling)==null?void 0:a.rowIndex)??0)-(((l=r.pinnedSibling)==null?void 0:l.rowIndex)??0)}),this.order=(t==null?void 0:t.doFullSort(this.order,o))??this.order,!n)return;const i=this.beans.gos.get("grandTotalRow");i==="bottom"||i==="pinnedBottom"?this.order.push(n):this.order.unshift(n)}hide(e){const{all:t,visible:o}=this;t.forEach(n=>e(n)?o.delete(n):o.add(n)),this.order=Array.from(o),this.sort()}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function zS(e){var o;if(e.level===-1)return!0;const t=e.parent;return(o=t==null?void 0:t.childrenAfterSort)!=null&&o.some(n=>n==e)?zS(t):!1}function Ch(e,t){const{gos:o,rowModel:n,filterManager:i}=e;return jr(o)?!n.getRowNode(t.id):i!=null&&i.isAnyFilterPresent()?!zS(t):o.get("pivotMode")?!t.group:!1}function jL(e){return!!e.footer&&e.level===-1}function KL(e){return!!e.pinnedSibling&&jL(e.pinnedSibling)}function qL(e){var o;const t=e.findIndex(KL);if(t>-1)return(o=e.splice(t,1))==null?void 0:o[0]}var QL=class extends Ie{postConstruct(){const{gos:e,beans:t}=this;this.top=new Iy(t,"top"),this.bottom=new Iy(t,"bottom");const o=i=>Ch(t,i.pinnedSibling),n=()=>{const i=e.get("isRowPinned");i&&t.rowModel.forEachNode(s=>this.pinRow(s,i(s)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:()=>{this.tryToEmptyQueues(),this.pinGrandTotalRow(),this.forContainers(i=>i.hide(o)),this.refreshRowPositions(),this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(JL),this.refreshRowPositions()},rowNodeDataChanged:({node:i})=>{const s=e.get("isRowPinnable");((s==null?void 0:s(i))??!0)||this.pinRow(i,null)},firstDataRendered:n}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(i=>i.hide(o)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:i})=>{this._grandTotalPinned=i==="pinnedBottom"?"bottom":i==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",n)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(t=>{const o=[];t.forEach(n=>o.push(n)),o.forEach(n=>this.pinRow(n,null)),t.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,o){var r;if(e.footer&&e.level>-1)return;if(e.footer&&e.level===-1){this._grandTotalPinned=t,Co(this.gos,this.beans.rowModel)&&this.beans.rowModel.refreshModel({step:"map"});return}const n=e.rowPinned??((r=e.pinnedSibling)==null?void 0:r.rowPinned);if(n!=null&&t!=null&&t!=n){const a=e.rowPinned?e:e.pinnedSibling,l=e.rowPinned?e.pinnedSibling:e;this.pinRow(a,null,o),this.pinRow(l,t,o);return}const s=o&&ZL(this.beans,e,o);if(s){s.forEach(a=>this.pinRow(a,t));return}if(t==null){const a=e.rowPinned?e:e.pinnedSibling,l=this.findPinnedRowNode(a);if(!l)return;l.delete(a);const c=a.pinnedSibling;bh(a),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(c)}else{const a=My(this.beans,e,t),l=this.getContainer(t);l.add(a),Ch(this.beans,e)&&l.hide(c=>Ch(this.beans,c.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0;const o=n=>{if(n.rowHeightEstimated){const i=Ji(this.beans,n);n.setRowTop(t),n.setRowHeight(i.height),t+=i.height,e=!0}};return this.bottom.forEach(o),t=0,this.top.forEach(o),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){const e=this.top.size();if(e===0)return 0;const t=this.top.getByIndex(e-1);return t===void 0?0:t.rowTop+t.rowHeight}getPinnedBottomTotalHeight(){const e=this.bottom.size();if(e===0)return 0;const t=this.bottom.getByIndex(e-1);return t===void 0?0:t.rowTop+t.rowHeight}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){const e=t=>{const o=[];return this.forEachPinnedRow(t,n=>o.push(n.pinnedSibling.id)),o};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,o)=>{for(const n of e[o]){const i=this.beans.rowModel.getRowNode(n);i?this.pinRow(i,o):t.queue(n)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{const o=new Set;e.forEachQueued(n=>{const i=this.beans.rowModel.getRowNode(n);i&&o.add(i)});for(const n of o)e.unqueue(n.id),this.pinRow(n,t)})}pinGrandTotalRow(){var s;const e=this.beans.rowModel;if(!Co(this.gos))return;const t=(s=e.rootNode)==null?void 0:s.sibling;if(!t)return;const o=this._grandTotalPinned,n=t.pinnedSibling,i=n&&this.findPinnedRowNode(n);if(o){if(i&&i.floating!==o&&(i.delete(n),bh(n)),!i||i.floating!==o){const r=My(this.beans,t,o);this.getContainer(o).add(r)}}else{if(!i)return;i.delete(n),bh(n)}}onGridStylesChanges(e){if(e.rowHeightChanged){const t=o=>{o.setRowHeight(o.rowHeight,!0)};this.forContainers(o=>o.forEach(t))}}getContainer(e){return e==="top"?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){const t=o=>YL(this.beans,o);return e==null?this.forContainers(t):t(this.getContainer(e))}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e==null||e.dispatchRowEvent("rowPinned")}};function YL(e,t){let o=0;t.forEach((n,i)=>{n.setRowTop(o),(n.rowHeightEstimated||n.rowHeight==null)&&n.setRowHeight(Ji(e,n).height),n.setRowIndex(i),o+=n.rowHeight})}function My(e,t,o){if(t.pinnedSibling)return t.pinnedSibling;const n=PO(t,e);n.setRowTop(null),n.setRowIndex(null),n.rowPinned=o;const i=o==="top"?$p:jp;return n.id=`${i}${o}-${t.id}`,n.pinnedSibling=t,t.pinnedSibling=n,n}function bh(e){if(!e.pinnedSibling)return;e.rowPinned=null,e.setRowTop(null),e.setRowIndex(null);const t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function JL(e){const t=new Set;e.forEach(o=>{o.group&&t.add(o)}),t.forEach(o=>{e.delete(o)})}function ZL(e,t,o){const{rowSpanSvc:n}=e,i=(o&&(n==null?void 0:n.isCellSpanning(o,t)))??!1;if(o&&i){const s=n==null?void 0:n.getCellSpan(o,t);if(s)return Array.from(s.spannedNodes)}}var XL=class extends Ie{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){const t=o=>{o.setRowHeight(o.rowHeight,!0)};ga(this.pinnedBottomRows,t),ga(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0;const o=n=>{if(n.rowHeightEstimated){const i=Ji(this.beans,n);n.setRowTop(t),n.setRowHeight(i.height),t+=i.height,e=!0}};return ga(this.pinnedBottomRows,o),t=0,ga(this.pinnedTopRows,o),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const o=this.getCache(t);if(e===void 0){o.order.length=0,o.cache={};return}const n=Br(this.gos),i=t==="top"?$p:jp,s=new Set(o.order),r=[],a=new Set;let l=0,c=-1;for(const u of e){const d=(n==null?void 0:n({data:u,level:0,rowPinned:t}))??i+this.nextId++;if(a.has(d)){Ue(96,{id:d,data:u});continue}c++,a.add(d),r.push(d);const h=za(o,d);if(h!==void 0)h.data!==u&&h.updateData(u),l+=this.setRowTopAndRowIndex(h,l,c),s.delete(d);else{const f=new Vs(this.beans);f.id=d,f.data=u,f.rowPinned=t,l+=this.setRowTopAndRowIndex(f,l,c),o.cache[d]=f,o.order.push(d)}}s.forEach(u=>{var d;(d=za(o,u))==null||d.clearRowTopAndRowIndex(),delete o.cache[u]}),o.order=r}setRowTopAndRowIndex(e,t,o){return e.setRowTop(t),e.setRowHeight(Ji(this.beans,e).height),e.setRowIndex(o),e.rowHeight}getPinnedTopTotalHeight(){return Oy(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return Oy(this.pinnedBottomRows)}getPinnedTopRowCount(){return Bf(this.pinnedTopRows)}getPinnedBottomRowCount(){return Bf(this.pinnedBottomRows)}getPinnedTopRow(e){return Lf(this.pinnedTopRows,e)}getPinnedBottomRow(e){return Lf(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return za(this.getCache(t),e)}forEachPinnedRow(e,t){return ga(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function Oy(e){const t=Bf(e);if(t===0)return 0;const o=Lf(e,t-1);return o===void 0?0:o.rowTop+o.rowHeight}function za(e,t){return e.cache[t]}function Lf(e,t){return za(e,e.order[t])}function ga(e,t){e.order.forEach((o,n)=>{const i=za(e,o);i&&t(i,n)})}function Bf(e){return e.order.length}var e2=class extends Ie{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){const e=()=>{const t=this.gos.get("enableRowPinning");this.inner&&this.destroyBean(this.inner),this.inner=this.createManagedBean(t?new QL:new XL)};this.addManagedPropertyListener("enableRowPinning",e),e()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,o){return this.inner.pinRow(e,t,o)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}},t2="ROOT_NODE_ID",o2=class extends Ie{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}get treeData(){return!1}getRowNode(e){return this.allNodesMap[e]}extractRowData(){var e,t;return(t=(e=this.rootNode)==null?void 0:e.allLeafChildren)==null?void 0:t.map(o=>o.data)}activate(e){this.rootNode=e,e.group=!0,e.level=-1,e.id=t2,e.allLeafChildren=[],e.childrenAfterGroup=[],e.childrenAfterSort=[],e.childrenAfterAggFilter=[],e.childrenAfterFilter=[],this.updateRootSiblingArrays(e)}deactivate(){this.rootNode&&(this.allNodesMap={},this.rootNode=null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(e){const t=this.rootNode;t&&(this.dispatchRowDataUpdateStartedEvent(e),t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(e),this.updateRootSiblingArrays(t))}updateRootSiblingArrays(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenAfterAggFilter=e.childrenAfterAggFilter,t.childrenAfterSort=e.childrenAfterSort,t.childrenMapped=e.childrenMapped,t.allLeafChildren=e.allLeafChildren)}loadNewRowData(e){this.rootNode.allLeafChildren=(e==null?void 0:e.map((t,o)=>this.createRowNode(t,o)))??[]}setImmutableRowData(e,t){var v;const o=Br(this.gos),n=!this.gos.get("suppressMaintainUnsortedOrder"),i=e.changedRowNodes,s=new Set,r=this.rootNode,a=r.allLeafChildren,l=a.length;let c=!1,u=!1,d=!1,h=!1;for(let m=0,b=-1,S=t.length;m<S;m++){const R=t[m];let _=this.getRowNode(o({data:R,level:0}));if(!_)c=!0,_=this.createRowNode(R,-1),i.add(_);else{if(n){const M=_.sourceRowIndex;h||(h=M<=b||c),b=M}_.data!==R&&(d=!0,_.updateData(R),i.update(_))}s.add(_)}const f=[];for(let m=0;m<l;m++){const b=a[m];s.has(b)||(u=!0,b.isSelected()&&f.push(b),b.pinnedSibling&&((v=this.beans.pinnedRowModel)==null||v.pinRow(b.pinnedSibling,null)),this.rowNodeDeleted(b),i.remove(b))}if(c||u||h){const m=new Array(s.size);let b=0;if(!n)for(let R=0;R<l;++R){const _=a[R];s.delete(_)&&(_.sourceRowIndex=b,m[b++]=_)}for(const R of s)R.sourceRowIndex=b,m[b++]=R;r.allLeafChildren=m;const S=r.sibling;S&&(S.allLeafChildren=m),e.rowNodesOrderChanged||(e.rowNodesOrderChanged=h)}(c||u||h||d)&&(this.deselectNodes(f),e.rowDataUpdated=!0)}rowNodeDeleted(e){e.clearRowTopAndRowIndex();const t=e.id,o=this.allNodesMap;o[t]===e&&delete o[t]}updateRowData(e,t){this.dispatchRowDataUpdateStartedEvent(e.add);const o={changedRowNodes:t,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},n=[],i=Br(this.gos);return this.executeRemove(i,e,o,n),this.executeUpdate(i,e,o,n),this.executeAdd(e,o),this.deselectNodes(n),o}executeAdd(e,t){const o=e.add;if(!(o!=null&&o.length))return;let n=this.rootNode.allLeafChildren,i=n.length;if(typeof e.addIndex=="number"&&(i=this.sanitizeAddIndex(e.addIndex),i>0&&this.gos.get("treeData")&&this.gos.get("getDataPath")))for(let d=0;d<n.length;d++){const h=n[d];if((h==null?void 0:h.rowIndex)==i-1){i=d+1;break}}const s=o.length,r=t.changedRowNodes,a=new Array(s);for(let u=0;u<s;u++){const d=this.createRowNode(o[u],i+u);r.add(d),a[u]=d}const l=this.rootNode;if(i<n.length){const u=n.slice(0,i),d=n.slice(i,n.length),h=u.length+a.length;for(let f=0,v=d.length;f<v;++f)d[f].sourceRowIndex=h+f;n=[...u,...a,...d],t.rowsInserted=!0}else n=n.concat(a);l.allLeafChildren=n;const c=l.sibling;c&&(c.allLeafChildren=n),t.rowNodeTransaction.add=a}executeRemove(e,t,{changedRowNodes:o,rowNodeTransaction:n},i){var c,u;const{remove:s}=t;if(!(s!=null&&s.length))return;const r={};s.forEach(d=>{var f;const h=this.lookupRowNode(e,d);h&&(h.isSelected()&&i.push(h),h.pinnedSibling&&((f=this.beans.pinnedRowModel)==null||f.pinRow(h.pinnedSibling,null)),h.clearRowTopAndRowIndex(),r[h.id]=!0,delete this.allNodesMap[h.id],n.remove.push(h),o.remove(h))});const a=this.rootNode;a.allLeafChildren=((c=a.allLeafChildren)==null?void 0:c.filter(d=>!r[d.id]))??null,(u=a.allLeafChildren)==null||u.forEach((d,h)=>{d.sourceRowIndex=h});const l=a.sibling;l&&(l.allLeafChildren=a.allLeafChildren)}executeUpdate(e,t,{changedRowNodes:o,rowNodeTransaction:n},i){const{update:s}=t;s!=null&&s.length&&s.forEach(r=>{const a=this.lookupRowNode(e,r);a&&(a.updateData(r),!a.selectable&&a.isSelected()&&i.push(a),n.update.push(a),o.update(a))})}dispatchRowDataUpdateStartedEvent(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e!=null&&e.length?e[0]:null})}deselectNodes(e){var i;const t="rowDataChanged",o=this.beans.selectionSvc,n=e.length>0;n&&(o==null||o.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t})),(i=o==null?void 0:o.updateGroupsFromChildrenSelections)==null||i.call(o,t),n&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:(o==null?void 0:o.getSelectedNodes())??null,serverSideState:null})}sanitizeAddIndex(e){var o;const t=((o=this.rootNode.allLeafChildren)==null?void 0:o.length)??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}createRowNode(e,t){const o=new Vs(this.beans);return o.parent=this.rootNode,o.level=0,o.group=!1,o.expanded=!1,o.sourceRowIndex=t,o.setDataAndId(e,String(this.nextId)),this.allNodesMap[o.id]&&Ue(2,{nodeId:o.id}),this.allNodesMap[o.id]=o,this.nextId++,o}lookupRowNode(e,t){var n,i;let o;if(e){const s=e({data:t,level:0});if(o=this.allNodesMap[s],!o)return Nt(4,{id:s}),null}else if(o=(i=(n=this.rootNode)==null?void 0:n.allLeafChildren)==null?void 0:i.find(s=>s.data===t),!o)return Nt(5,{data:t}),null;return o||null}},n2={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},i2=class extends Bt{constructor(){super(n2,[ng]),this.eCheckbox=Qe}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:o}=this,n=t.isSelected(),i=Ap(e,n),[s,r]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(s,r);o.setValue(n,!0),o.setInputAriaLabel(`${a} (${i})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:Hs,click:n=>{var i;Hs(n),(i=this.beans.selectionSvc)==null||i.handleSelectionEvent(n,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:n,previousValue:i})=>{const s=typeof n=="object"?dh(n):void 0,r=typeof i=="object"?dh(i):void 0;s!==r&&this.onSelectableChanged()}),Tf(this.gos)||typeof this.getIsVisible()=="function"){const n=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n}),this.addManagedListeners(this.rowNode,{dataChanged:n,cellChanged:n}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:o,gos:n}=this;let i=t.selectable;const s=this.getIsVisible();if(i)if(typeof s=="function"){const l=o==null?void 0:o.callbackParams;if(!e)i=s({...l,node:t,data:t.data});else{const c=e.createColumnFunctionCallbackParams(t);i=s({...l,...c})}}else i=s??!1;const r=n.get("rowSelection");if(r&&typeof r!="string"?!dh(r):e==null?void 0:e.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!i),this.setVisible(!0),this.setDisplayed(!0);return}if(o!=null&&o.removeHidden){this.setDisplayed(i);return}this.setVisible(i)}getIsVisible(){var o,n;const e=this.overrides;if(e)return e.isVisible;const t=this.gos.get("rowSelection");return t&&typeof t!="string"?Cr(t):(n=(o=this.column)==null?void 0:o.getColDef())==null?void 0:n.checkboxSelection}},s2=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t;const{rowModel:o,pinnedRowModel:n}=this;return t??(t=o.getRowNode(e)),n!=null&&n.isManual()&&(t??(t=n.getPinnedRowById(e,"top")),t??(t=n.getPinnedRowById(e,"bottom"))),t}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const o=t[0].id===this.rootId,n=t.findIndex(i=>i.id===e.id);if(n>-1){const i=t.slice(0,n),s=t.slice(n+1);return this.setEndRange(e),o?{keep:i,discard:s}:{keep:s,discard:i}}else return{keep:t,discard:[]}}extend(e,t=!1){const o=this.getRoot();if(o==null){const i=this.getRange().slice();return t&&e.depthFirstSearch(s=>!s.group&&i.push(s)),i.push(e),this.setRoot(e),{keep:i,discard:[]}}const n=this.getNodesInRange(o,e);if(!n)return this.setRoot(e),{keep:[e],discard:[]};if(n.find(i=>i.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const i=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:i}}}getNodesInRange(e,t){const{pinnedRowModel:o,rowModel:n}=this;if(!(o!=null&&o.isManual()))return n.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&!t.rowPinned)return tn(o,"top",e,void 0).concat(n.getNodesInRangeForSelection(n.getRow(0),t)??[]);if(e.rowPinned==="bottom"&&!t.rowPinned){const i=tn(o,"bottom",void 0,e),s=n.getRowCount(),r=n.getRow(s-1);return(n.getNodesInRangeForSelection(t,r)??[]).concat(i)}if(!e.rowPinned&&!t.rowPinned)return n.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&t.rowPinned==="top")return tn(o,"top",e,t);if(e.rowPinned==="bottom"&&t.rowPinned==="top"){const i=tn(o,"top",t,void 0),s=tn(o,"bottom",void 0,e),r=n.getRow(0),a=n.getRow(n.getRowCount()-1);return i.concat(n.getNodesInRangeForSelection(r,a)??[]).concat(s)}if(!e.rowPinned&&t.rowPinned==="top")return tn(o,"top",t,void 0).concat(n.getNodesInRangeForSelection(n.getRow(0),e)??[]);if(e.rowPinned==="top"&&t.rowPinned==="bottom"){const i=tn(o,"top",e,void 0),s=tn(o,"bottom",void 0,t),r=n.getRow(0),a=n.getRow(n.getRowCount()-1);return i.concat(n.getNodesInRangeForSelection(r,a)??[]).concat(s)}if(e.rowPinned==="bottom"&&t.rowPinned==="bottom")return tn(o,"bottom",e,t);if(!e.rowPinned&&t.rowPinned==="bottom"){const i=tn(o,"bottom",void 0,t),s=n.getRow(n.getRowCount());return(n.getNodesInRangeForSelection(e,s)??[]).concat(i)}return null}},r2=class extends Ie{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Jt(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new og);this.cbSelectAll=t,t.addCss("ag-header-select-all"),Qi(t.getGui(),"presentation"),this.showOrHideSelectAll();const o=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:o,paginationChanged:o,modelUpdated:o}),this.addManagedPropertyListener("rowSelection",({currentValue:n,previousValue:i})=>{const s=r=>typeof r=="string"||!r||r.mode==="singleRow"?void 0:r.selectAll;s(n)!==s(i)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,o=this.cbSelectAll,n=t.getSelectAllState(e);o.setValue(n);const i=t.hasNodesToSelect(e);o.setDisabled(!i),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){const t=this.getLocaleTextFunc(),{headerCellCtrl:o,cbSelectAll:n,cbSelectAllVisible:i}=this,r=n.getValue()?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),a=t("ariaRowSelectAll","Press Space to toggle all rows selection");o.setAriaDescriptionProperty("selectAll",i?`${a} (${r})`:null),n.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||o.announceAriaDescription()}checkSelectionType(e){return hl(this.gos)?!0:(Ue(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:o}=this.beans;return Co(t)||jr(t)?!0:(Ue(129,{feature:e,rowModel:o.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let o="uiSelectAll";t==="currentPage"?o="uiSelectAllCurrentPage":t==="filtered"&&(o="uiSelectAllFiltered");const n={source:o,selectAll:t},i=this.beans.selectionSvc;e?i.selectAllRowNodes(n):i.deselectAllRowNodes(n)}isCheckboxSelection(){var c;const{column:e,gos:t,beans:o}=this,n=t.get("rowSelection"),i=e.getColDef(),{headerCheckboxSelection:s}=i;let r=!1;const a=typeof n=="object";if(a){const u=qr(e),d=zp(e);(gu(n)==="autoGroupColumn"&&d||u&&((c=o.selectionColSvc)!=null&&c.isSelectionColumnEnabled()))&&(r=Bc(n))}else typeof s=="function"?r=s(pt(t,{column:e,colDef:i})):r=!!s;const l=a?"headerCheckbox":"headerCheckboxSelection";return r&&this.checkRightRowModelType(l)&&this.checkSelectionType(l)}getSelectAllMode(){const e=$0(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:o}=this.column.getColDef();return t?"currentPage":o?"filtered":"all"}},a2=class extends Ie{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new s2(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const o=Tf(e);o!==this.isRowSelectable&&(this.isRowSelectable=o,this.updateSelectable())}),this.isRowSelectable=Tf(e)}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new i2}createSelectAllFeature(e){return new r2(e)}isMultiSelect(){return hl(this.gos)}onRowCtrlSelected(e,t,o){const n=!!e.rowNode.isSelected();e.forEachGui(o,i=>{i.rowComp.toggleCss("ag-row-selected",n);const s=i.element;wf(s,n),s.contains(Jt(this.beans))&&t(i)})}announceAriaRowSelection(e){var i;if(this.isRowSelectionBlocked(e))return;const t=e.isSelected();if(!e.selectable)return;const n=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);(i=this.beans.ariaAnnounce)==null||i.announceValue(n,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!Al(e)||!_s(this.gos)}updateRowSelectable(e,t){var n;const o=((n=this.isRowSelectable)==null?void 0:n.call(this,e))??!0;return this.setRowSelectable(e,o,t),o}setRowSelectable(e,t,o){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),o)return;if(fl(this.gos)){const i=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:i??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){var n;let t=!1,o=!1;if(!((n=e.childrenAfterGroup)!=null&&n.length))return e.selectable?e.__selected:null;for(let i=0;i<e.childrenAfterGroup.length;i++){const s=e.childrenAfterGroup[i];let r=s.isSelected();if(!s.selectable){const a=this.calculateSelectedFromChildren(s);if(a===null)continue;r=a}switch(r){case!0:t=!0;break;case!1:o=!0;break;default:return}}if(!(t&&o))return t?!0:o?!1:e.selectable?e.__selected:null}selectRowNode(e,t,o,n="api"){const i=!e.selectable&&t,s=e.__selected===t;if(i||s)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const r=e.sibling;r&&r.footer&&r.__localEventService&&r.dispatchRowEvent("rowSelected");const a=e.pinnedSibling;return a&&a.rowPinned&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({..._O(e,this.gos,"rowSelected"),event:o||null,source:n}),!0}isCellCheckboxSelection(e,t){const o=this.gos.get("rowSelection");if(o&&typeof o!="string"){const n=qr(e)&&Cr(o);return e.isColumnFunc(t,n)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,o,n){const{gos:i,selectionCtx:s}=this,r=e.isSelected(),a=fl(i),l=dI(i),c=hI(i),u=this.isMultiSelect(),d=n==="rowClicked";if(d&&!(l||c))return null;if(t&&o&&u){const h=s.getRoot();if(h)if(h.isSelected()){const f=s.isInRange(e)?s.truncate(e):s.extend(e,a);return{deselect:f.discard,select:f.keep,reset:!1}}else{const f=s.extend(e,a);return{select:[],deselect:f.keep,reset:!1}}else return null}else if(t&&u){const h=s.selectAll?this.beans.rowModel.getRow(0):void 0,f=s.getRoot(h),v=s.isInRange(e)?s.truncate(e):s.extend(e,a);return{select:v.keep,deselect:v.discard,reset:s.selectAll||!!(f&&!f.isSelected())}}else if(o){if(d){const h=!r;return h&&!l||!h&&!c?null:(s.setRoot(e),{node:e,newValue:h,clearSelection:!1})}return s.setRoot(e),{node:e,newValue:!r,clearSelection:!u}}else{s.setRoot(e);const h=fI(i),f=vu(i)==="filteredDescendants",v=d&&(!h||!l);if(f&&r===void 0&&Co(i))return{node:e,newValue:!1,clearSelection:!u||v};if(d){const m=r?!h:l;return m===r&&!v||m&&!l||!m&&!c?null:{node:e,newValue:m,clearSelection:!u||v,keepDescendants:e.group&&a}}return{node:e,newValue:!r,clearSelection:!u||v}}}},l2=class extends og{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},js=class extends gs{constructor(e,t="ag-text-field",o="text"){super(e,t,o)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const o=this.eInput;return o.value!==e&&(o.value=Ye(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=o=>{TS(o)&&o.key&&!e.test(o.key)&&o.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:o=>{var i;const n=(i=o.clipboardData)==null?void 0:i.getData("text");n&&n.split("").some(s=>!e.test(s))&&o.preventDefault()}})}},ed={selector:"AG-INPUT-TEXT-FIELD",component:js},c2=class extends gs{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const o=super.setValue(e,t);return this.eInput.value=e,o}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},u2={selector:"AG-INPUT-TEXT-AREA",component:c2},ig=class extends js{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const s=parseFloat(e.value),r=isNaN(s)?"":this.normalizeValue(s.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:o,max:n,step:i}=this.config;typeof t=="number"&&this.setPrecision(t),typeof o=="number"&&this.setMin(o),typeof n=="number"&&this.setMax(n),typeof i=="number"&&this.setStep(i)}onWheel(e){Jt(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const t=parseFloat(e),{min:o,max:n}=this;return o!=null&&t<o?e=o.toString():n!=null&&t>n&&(e=n.toString()),e}adjustPrecision(e,t){const o=this.precision;if(o==null)return e;if(t){const i=parseFloat(e).toFixed(o);return parseFloat(i).toString()}const n=String(e).split(".");if(n.length>1){if(n[1].length<=o)return e;if(o>0)return`${n[0]}.${n[1].slice(0,o)}`}return n[0]}setMin(e){return this.min===e?this:(this.min=e,ln(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,ln(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,ln(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(o=>super.setValue(o,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,o){if(Ye(o)){let n=this.isScientificNotation(o);if(n&&this.eInput.validity.valid)return e(o);if(!n){o=this.adjustPrecision(o);const i=this.normalizeValue(o);n=o!=i}if(n)return t(o)}return e(o)}getValue(){const e=this.eInput;if(!e.validity.valid)return;const t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},d2={selector:"AG-INPUT-NUMBER-FIELD",component:ig};function Wa(e,t){return e.toString().padStart(t,"0")}function cn(e,t=!0,o="-"){if(!e)return null;let n=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(i=>Wa(i,2)).join(o);return t&&(n+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(i=>Wa(i,2)).join(":")),n}var wh=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function Ua(e,t="YYYY-MM-DD"){const o=Wa(e.getFullYear(),4),n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={YYYY:()=>o.slice(o.length-4,o.length),YY:()=>o.slice(o.length-2,o.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>n[e.getMonth()],MMM:()=>n[e.getMonth()].slice(0,3),MM:()=>Wa(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${wh(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${wh(e.getDate())}`,DD:()=>Wa(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>i[e.getDay()],ddd:()=>i[e.getDay()].slice(0,3),dd:()=>i[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${wh(e.getDay())}`,d:()=>`${e.getDay()}`},r=new RegExp(Object.keys(s).join("|"),"g");return t.replace(r,a=>a in s?s[a]():a)}function zo(e){if(!e)return null;const[t,o]=e.split(" ");if(!t)return null;const n=t.split("-").map(d=>parseInt(d,10));if(n.filter(d=>!isNaN(d)).length!==3)return null;const[i,s,r]=n,a=new Date(i,s-1,r);if(a.getFullYear()!==i||a.getMonth()!==s-1||a.getDate()!==r)return null;if(!o||o==="00:00:00")return a;const[l,c,u]=o.split(":").map(d=>parseInt(d,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),u>=0&&u<60&&a.setSeconds(u),a}var h2=class extends js{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=zs();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Jt(this.beans)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?cn(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,ln(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?cn(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,ln(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,ln(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return zo(this.getValue())??void 0}setDate(e,t){this.setValue(cn(e??null,!1),t)}},WS={selector:"AG-INPUT-DATE-FIELD",component:h2},f2=1e3,p2=1e3,Ly=100,By,mc=!1,g2=class extends Ie{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc,this.userCompFactory=e.userCompFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){var t,o,n,i;return e==="show"?((o=(t=this.tooltipCtrl).getTooltipShowDelayOverride)==null?void 0:o.call(t))??this.getGridOptionsTooltipDelay("tooltipShowDelay"):((i=(n=this.tooltipCtrl).getTooltipHideDelayOverride)==null?void 0:i.call(n))??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!xs()&&(mc?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},Ly):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var i;const t=e.relatedTarget,o=this.tooltipCtrl.getGui(),n=(i=this.tooltipComp)==null?void 0:i.getGui();this.isInteractingWithTooltip||o.contains(t)||this.interactionEnabled&&(n!=null&&n.contains(t))||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||mc)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-By<f2}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){var r,a,l,c,u,d,h;const e=this.getTooltipValue(),t=this.tooltipCtrl;if(!Ye(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}const o=(r=t.getRowNode)==null?void 0:r.call(t),n=pt(this.gos,{location:((a=t.getLocation)==null?void 0:a.call(t))??"UNKNOWN",colDef:(l=t.getColDef)==null?void 0:l.call(t),column:(c=t.getColumn)==null?void 0:c.call(t),rowIndex:(u=t.getRowIndex)==null?void 0:u.call(t),node:o,data:o==null?void 0:o.data,value:e,valueFormatted:(d=t.getValueFormatted)==null?void 0:d.call(t),hideTooltipCallback:()=>this.hideTooltip(!0),...((h=t.getAdditionalParams)==null?void 0:h.call(t))??{}});this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount),s=TM(this.userCompFactory,n);s==null||s.newAgStackInstance().then(i)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),By=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){var r;if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}const n=t.getGui();this.tooltipComp=t,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const i=this.getLocaleTextFunc(),s=(r=this.popupSvc)==null?void 0:r.addPopup({eChild:n,ariaLabel:i("ariaLabelTooltip","Tooltip")});if(s&&(this.tooltipPopupDestroyFunc=s.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const a=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:a,columnMoved:a})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(go(this.beans),{keydown:a=>{n.contains(a==null?void 0:a.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:n,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var o;const e=(o=this.tooltipComp)==null?void 0:o.getGui(),t=Jt(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){var t,o;const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?(t=this.popupSvc)==null||t.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):(o=this.popupSvc)==null||o.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,o=this.tooltipTrigger===0?p2:0;window.setTimeout(()=>{e(),this.destroyBean(t)},o),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){mc=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},Ly)}unlockService(){mc=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};function Sh(e){return e.get("tooltipShowMode")==="whenTruncated"}function zc(e){return()=>{const t=e();return t?t.scrollWidth>t.clientWidth:!0}}var m2=class extends Ie{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e){const t="title",o=this.ctrl.getGui();o&&(e!=null&&e!=""?o.setAttribute(t,e):o.removeAttribute(t))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){this.tooltipManager==null&&(this.tooltipManager=this.createBean(new g2(this.ctrl,()=>this.tooltip),this.beans.context))}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},v2=class extends Bt{constructor(e="default",t=!1){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case Te.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const o=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(o)}break;case Te.DOWN:case Te.UP:e.preventDefault(),this.navigate(t);break;case Te.PAGE_DOWN:case Te.PAGE_UP:case Te.PAGE_HOME:case Te.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){const t=e===Te.DOWN;let o;const{itemEls:n,highlightedEl:i}=this;if(!i)o=n[t?0:n.length-1];else{let r=n.indexOf(i)+(t?1:-1);r=Math.min(Math.max(r,0),n.length-1),o=n[r]}this.highlightItem(o)}navigateToPage(e){const{itemEls:t,highlightedEl:o}=this;if(!o||t.length===0)return;const n=t.indexOf(o),i=this.options.length-1,s=t[0].clientHeight,r=Math.floor(this.getGui().clientHeight/s);let a=-1;e===Te.PAGE_HOME?a=0:e===Te.PAGE_END?a=i:e===Te.PAGE_DOWN?a=Math.min(n+r,i):e===Te.PAGE_UP&&(a=Math.max(n-r,0)),a!==-1&&this.highlightItem(t[a])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:o}=e,n=o??t;return this.options.push({value:t,text:n}),this.renderOption(t,n),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{nn(e)}),this.itemEls=[],this.refreshAriaRole()}refreshAriaRole(){const e=this.getGui();Qi(e,this.options.length===0?"presentation":"listbox")}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");this.refreshAriaRole(),e.forEach((t,o)=>{TA(t,o+1),DA(t,e.length)})}renderOption(e,t){const o=Ut({tag:"div",cls:`ag-list-item ag-${this.cssIdentifier}-list-item`,attrs:{role:"option"}}),n=Ut({tag:"span",children:t});o.appendChild(n),this.unFocusable||(o.tabIndex=-1),this.itemEls.push(o),this.addManagedListeners(o,{mouseover:()=>this.highlightItem(o),mousedown:i=>{i.preventDefault(),i.stopPropagation(),this.setValue(e)}}),this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getTooltipValue:()=>t,getGui:()=>o,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(o)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const o=this.options.findIndex(n=>n.value===e);if(o!==-1){const n=this.options[o];this.value=n.value,this.displayValue=n.text,this.highlightItem(this.itemEls[o]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!_n(e))return;this.clearHighlighted(),this.highlightedEl=e,e.classList.add(this.activeClass),wf(e,!0);const t=this.getGui(),{scrollTop:o,clientHeight:n}=t,{offsetTop:i,offsetHeight:s}=e;(i+s>o+n||i<o)&&e.scrollIntoView({block:"nearest"}),this.unFocusable||e.focus()}clearHighlighted(){const e=this.highlightedEl;!e||!_n(e)||(e.classList.remove(this.activeClass),wf(e,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},y2=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:disabled{opacity:.5}&.ag-picker-has-focus,&:focus-within{background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow)}}",C2={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},b2=class extends VS{constructor(e){if(super(e,(e==null?void 0:e.template)||C2,(e==null?void 0:e.agComponents)||[],e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Qe,this.eWrapper=Qe,this.eDisplayField=Qe,this.eIcon=Qe,this.registerCSS(y2),this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:o,variableWidth:n,minPickerWidth:i,maxPickerWidth:s}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!n,o!=null&&this.setPickerMaxHeight(o),i!=null&&this.setPickerMinWidth(i),s!=null&&this.setPickerMaxWidth(s)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:o,inputWidth:n}=this.config;if(o){const i=sn(o,this.beans);i&&this.eIcon.appendChild(i)}n!=null&&this.setInputWidth(n)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),bf(e,!1),this.ariaRole&&Qi(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case Te.UP:case Te.DOWN:case Te.ENTER:case Te.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case Te.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:o,pickerAriaLabelValue:n,modalPicker:i=!0},maxPickerHeight:s,minPickerWidth:r,maxPickerWidth:a,variableWidth:l,beans:c,eWrapper:u}=this,d={modal:i,eChild:e,closeOnEsc:!0,closedCallback:()=>{const m=G0(c);this.beforeHidePicker(),m&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(o,n),anchorToElement:u};e.style.position="absolute";const h=c.popupSvc,f=h.addPopup(d);l?(r&&(e.style.minWidth=r),e.style.width=Lp(uu(u)),a&&(e.style.maxWidth=a)):fu(e,a??uu(u));const v=s??`${Mp(h.getPopupParent())}px`;return e.style.setProperty("max-height",v),this.alignPickerToComponent(),f.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:o,gos:n},eWrapper:i,pickerComponent:s}=this,r=n.get("enableRtl")?"right":"left";o.positionPopupByComponent({type:t,eventSource:i,ePopup:s.getGui(),position:"under",alignSide:r,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();bf(t,e);const o=this.eWrapper.classList;o.toggle("ag-picker-expanded",e),o.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){var e;(e=this.hideCurrentPicker)==null||e.call(this)}setInputWidth(e){return fu(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},w2=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}",sg=class extends b2{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(w2)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:zc(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:o}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),o&&t==null&&(this.eDisplayField.textContent=o),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new v2("select",!0));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),o=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",o),NA(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:n=>{n==null||n.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){var o;const{key:t}=e;switch(t===Te.TAB&&this.hidePicker(),t){case Te.ENTER:case Te.UP:case Te.DOWN:case Te.PAGE_UP:case Te.PAGE_DOWN:case Te.PAGE_HOME:case Te.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(o=this.listComponent)==null||o.handleKeyDown(e):super.onKeyDown(e);break;case Te.ESCAPE:super.onKeyDown(e);break;case Te.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this.setValue(void 0,!0),this}setValue(e,t,o){const{listComponent:n,config:{placeholder:i},eDisplayField:s,tooltipFeature:r}=this;if(this.value===e||!n)return this;if(o||n.setValue(e,!0),n.getValue()===this.getValue())return this;let l=n.getDisplayValue();return l==null&&i&&(l=i),s.textContent=l,r==null||r.setTooltipAndRefresh(l??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},S2={selector:"AG-SELECT",component:sg},xh={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},x2=class extends Ie{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:o,eBottomGuard:n,focusTrapActive:i,forceFocusOutWhenTabGuardsAreEmpty:s,isFocusableContainer:r,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:d,handleKeyDown:h,isEmpty:f,eFocusableElement:v}=e;this.comp=t,this.eTopGuard=o,this.eBottomGuard=n,this.providedFocusInnerElement=a,this.eFocusableElement=v,this.focusTrapActive=!!i,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.isFocusableContainer=!!r,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=h,this.providedIsEmpty=f}postConstruct(){this.createManagedBean(new Qr(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():Sr(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){var l;const t=go(this.beans),o=Sr(t.body,null,!0),n=o.indexOf(e?this.eTopGuard:this.eBottomGuard);if(n===-1)return;let i,s;e?(i=0,s=n):(i=n+1,s=o.length);const r=o.slice(i,s),a=this.gos.get("tabIndex");r.sort((c,u)=>{const d=parseInt(c.getAttribute("tabindex")||"0"),h=parseInt(u.getAttribute("tabindex")||"0");return h===a?1:d===a?-1:d===0?1:h===0?-1:d-h}),(l=r[e?r.length-1:0])==null||l.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const o=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),o&&(o.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=Sr(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return $s(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},R2=class extends Ie{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:o,eFocusableElement:n}=this,i=[t,o],s={setTabIndex:b=>{i.forEach(S=>b!=null?S.setAttribute("tabindex",b):S.removeAttribute("tabindex"))}};this.addTabGuards(t,o);const{focusTrapActive:r=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:v,isFocusableContainer:m}=e;this.tabGuardCtrl=this.createManagedBean(new x2({comp:s,focusTrapActive:r,eTopGuard:t,eBottomGuard:o,eFocusableElement:n,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:v,isFocusableContainer:m}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=go(this.beans).createElement("div"),o=e==="top"?xh.TAB_GUARD_TOP:xh.TAB_GUARD_BOTTOM;return t.classList.add(xh.TAB_GUARD,o),Qi(t,"presentation"),t}addTabGuards(e,t){const o=this.eFocusableElement;o.insertAdjacentElement("afterbegin",e),o.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];Do(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,o){Bp(t)||(t=t.getGui());const{eBottomGuard:n}=this;n?n.insertAdjacentElement("beforebegin",t):e(t,o)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;nn(e),nn(t),super.destroy()}},US=class extends Bt{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new R2(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},Yr=class extends Bt{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},hs=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new Bs,this.preventMouseClick=t;const o=this.onTouchStart.bind(this),n=this.onTouchMove.bind(this),i=this.onTouchEnd.bind(this);e.addEventListener("touchstart",o,{passive:!0}),e.addEventListener("touchmove",n,{passive:!0}),e.addEventListener("touchend",i,{passive:!1}),this.destroyFuncs.push(()=>{e.removeEventListener("touchstart",o,{passive:!0}),e.removeEventListener("touchmove",n,{passive:!0}),e.removeEventListener("touchend",i,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const o=this.touchStart===t;if(this.touching&&o&&!this.moved){this.moved=!0;const n={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(n)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!_S(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=Date.now();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const o={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(o),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}},$S=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${A0}/${this.frameworkName}-data-grid`,JA(this.baseDocLink)}setInterval(e,t){return new Lo(o=>{o(window.setInterval(e,t))})}addEventListener(e,t,o,n){let i={};if(typeof n=="object"?i=n:typeof n=="boolean"&&(i={capture:n}),i.passive==null){const s=Q0(t);s!=null&&(i.passive=s)}e.addEventListener(t,o,i)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`${this.baseDocLink}${e?`/${e}`:""}`}};function _2(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var E2=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","funcColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],Ny=Object.fromEntries(E2.map((e,t)=>[e,t]));function P2(e,t){const o=(e.beanName?Ny[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,n=(t.beanName?Ny[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return o-n}function F2(e,t){return(e==null?void 0:e.beanName)==="gridDestroySvc"?-1:(t==null?void 0:t.beanName)==="gridDestroySvc"?1:0}var D2={tag:"div",cls:"ag-pinned-left-header",role:"rowgroup"},T2={tag:"div",cls:"ag-pinned-right-header",role:"rowgroup"},k2={tag:"div",cls:"ag-header-viewport",role:"presentation",attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eCenterContainer",cls:"ag-header-container",role:"rowgroup"}]},Rh=class extends Bt{constructor(e){super(),this.eCenterContainer=Qe,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();const e={setDisplayed:o=>this.setDisplayed(o),setCtrls:o=>this.setCtrls(o),setCenterWidth:o=>this.eCenterContainer.style.width=o,setViewportScrollLeft:o=>this.getGui().scrollLeft=o,setPinnedContainerWidth:o=>{const n=this.getGui();n.style.width=o,n.style.maxWidth=o,n.style.minWidth=o}};this.createManagedBean(new TL(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e=this.pinned=="left",t=this.pinned=="right",o=e?D2:t?T2:k2;this.setTemplate(o),this.eRowContainer=this.eCenterContainer!==Qe?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let o;const n=i=>{const s=i.getGui();s.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(s),o&&D0(this.eRowContainer,s,o),o=s};e.forEach(i=>{const s=i.instanceId,r=t[s];delete t[s];const a=r||this.createBean(new EL(i));this.headerRowComps[s]=a,this.rowCompsList.push(a),n(a)}),Object.values(t).forEach(i=>this.destroyRowComp(i))}},A2={tag:"div",cls:"ag-header",role:"presentation"},I2=class extends Bt{constructor(){super(A2)}postConstruct(){const e={toggleCss:(n,i)=>this.toggleCss(n,i),setHeightAndMinHeight:n=>{this.getGui().style.height=n,this.getGui().style.minHeight=n}};this.createManagedBean(new CL).setComp(e,this.getGui(),this.getFocusableElement());const o=n=>{this.createManagedBean(n),this.appendChild(n)};o(new Rh("left")),o(new Rh(null)),o(new Rh("right"))}},M2={selector:"AG-HEADER-ROOT",component:I2},O2=class extends Bt{constructor(e,t,o,n,i){super(),this.cellCtrl=t,this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.column,this.rowNode=t.rowNode,this.eRow=n;const s=Ut({tag:"div",role:t.getCellAriaRole(),attrs:{"comp-id":`${this.getCompId()}`,"col-id":t.column.colIdSanitised}});this.eCell=s;let r;t.isCellSpanning()?(r=Ut({tag:"div",cls:"ag-spanned-cell-wrapper",role:"presentation"}),r.appendChild(s),this.setTemplateFromElement(r)):this.setTemplateFromElement(s),this.cellCssManager=new dS(()=>s),this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);const a={toggleCss:(l,c)=>this.cellCssManager.toggleCss(l,c),setUserStyles:l=>Tl(s,l),getFocusableElement:()=>s,setIncludeSelection:l=>this.includeSelection=l,setIncludeRowDrag:l=>this.includeRowDrag=l,setIncludeDndSource:l=>this.includeDndSource=l,setRenderDetails:(l,c,u)=>this.setRenderDetails(l,c,u),setEditDetails:(l,c,u)=>this.setEditDetails(l,c,u),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(a,s,r,this.eCellWrapper,o,i,void 0)}getParentOfValue(){return this.eCellValue??this.eCellWrapper??this.eCell}setRenderDetails(e,t,o){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const i=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(o||i)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,o){e?this.createCellEditorInstance(e,t,o):this.destroyEditor()}removeControls(){const e=this.beans.context;this.checkboxSelectionComp=e.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=e.destroyBean(this.dndSourceComp),this.rowDraggingComp=e.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,o=t||this.forceWrapper,n=o&&this.eCellWrapper==null;n&&(this.eCellWrapper=Ut({tag:"div",cls:"ag-cell-wrapper",role:"presentation"}),this.eCell.appendChild(this.eCellWrapper));const i=!o&&this.eCellWrapper!=null;i&&(nn(this.eCellWrapper),this.eCellWrapper=void 0),this.cellCssManager.toggleCss("ag-cell-value",!o);const s=!e&&o,r=s&&this.eCellValue==null;r&&(this.eCellValue=Ut({tag:"span",cls:"ag-cell-value",role:"presentation"}),this.eCellWrapper.appendChild(this.eCellValue));const a=!s&&this.eCellValue!=null;a&&(nn(this.eCellValue),this.eCellValue=void 0);const l=n||i||r||a;return l&&this.removeControls(),!e&&t&&this.addControls(),l}addControls(){const{cellCtrl:e,eCellWrapper:t,eCellValue:o,includeRowDrag:n,includeDndSource:i,includeSelection:s}=this,r=a=>{a&&t.insertBefore(a.getGui(),o)};n&&this.rowDraggingComp==null&&(this.rowDraggingComp=e.createRowDragComp(),r(this.rowDraggingComp)),i&&this.dndSourceComp==null&&(this.dndSourceComp=e.createDndSource(),r(this.dndSourceComp)),s&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=e.createSelectionCheckbox(),r(this.checkboxSelectionComp))}createCellEditorInstance(e,t,o){const n=this.editorVersion,i=e.newAgStackInstance(),{params:s}=e;i.then(a=>this.afterCellEditorCreated(n,a,s,t,o)),qt(this.cellEditor)&&s.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();Do(t);const o=Kr(e);o!=null&&(t.textContent=o)}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),nn(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){var o,n;const{context:e}=this.beans;(((o=this.cellEditorPopupWrapper)==null?void 0:o.getGui().contains(Jt(this.beans)))||this.cellCtrl.hasBrowserFocus())&&this.eCell.focus({preventScroll:!0}),(n=this.hideEditorPopup)==null||n.call(this),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),nn(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){var o;if(((o=this.cellRenderer)==null?void 0:o.refresh)==null||this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){const t=this.rendererVersion,{componentClass:o}=e,n=()=>{if(this.rendererVersion!==t||!this.isAlive())return;const r=e.newAgStackInstance(),a=this.afterCellRendererCreated.bind(this,t,o);r==null||r.then(a)},{animationFrameSvc:i}=this.beans;i!=null&&i.active&&this.firstRender?i.createTask(n,this.rowNode.rowIndex,"p2",e.componentFromFramework):n()}afterCellRendererCreated(e,t,o){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(o);return}this.cellRenderer=o,this.cellRendererClass=t;const i=o.getGui();if(this.cellRendererGui=i,i!=null){const s=this.getParentOfValue();Do(s),s.appendChild(i)}}afterCellEditorCreated(e,t,o,n,i){var c;const s=e!==this.editorVersion,{context:r}=this.beans;if(s){r.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){r.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){Ue(97,{colId:this.column.getId()}),r.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();const l=n||t.isPopup!==void 0&&t.isPopup();l?this.addPopupCellEditor(o,i):this.addInCellEditor(),this.refreshEditStyles(!0,l),(c=t.afterGuiAttached)==null||c.call(t),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){const{cellCssManager:o}=this;o.toggleCss("ag-cell-inline-editing",e&&!t),o.toggleCss("ag-cell-popup-editing",e&&!!t),o.toggleCss("ag-cell-not-inline-editing",!e||!!t),this.cellCtrl.setInlineEditingCss()}addInCellEditor(){const{eCell:e}=this;e.contains(Jt(this.beans))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),Do(this.getParentOfValue()),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){var b;const{gos:o,context:n,editSvc:i,popupSvc:s,localeSvc:r}=this.beans;o.get("editType")==="fullRow"&&Ue(98);const a=this.cellEditor;this.cellEditorPopupWrapper=n.createBean(i.createPopupEditorWrapper(e));const l=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&l.appendChild(this.cellEditorGui);const c=o.get("stopEditingWhenCellsLoseFocus"),u=t??((b=a.getPopupPosition)==null?void 0:b.call(a))??"over",d=o.get("enableRtl"),h={ePopup:l,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.eCell,position:u,alignSide:d?"right":"left",keepWithinBounds:!0},f=s.positionPopupByComponent.bind(s,h),v=g0(r),m=s.addPopup({modal:c,eChild:l,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.eCell,positionCallback:f,ariaLabel:v("ariaLabelCellEditor","Cell Editor")});m&&(this.hideEditorPopup=m.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyRenderer(),this.destroyEditor(),this.removeControls(),super.destroy()}},L2=class extends Bt{constructor(e,t,o){super(),this.cellComps=new Map,this.beans=t,this.rowCtrl=e;const n=Ut({tag:"div",role:"row",attrs:{"comp-id":`${this.getCompId()}`}});this.setInitialStyle(n,o),this.setTemplateFromElement(n);const i=n.style;this.domOrder=this.rowCtrl.getDomOrder();const s={setDomOrder:r=>this.domOrder=r,setCellCtrls:r=>this.setCellCtrls(r),showFullWidth:r=>this.showFullWidth(r),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,toggleCss:(r,a)=>this.toggleCss(r,a),setUserStyles:r=>Tl(n,r),setTop:r=>i.top=r,setTransform:r=>i.transform=r,setRowIndex:r=>n.setAttribute("row-index",r),setRowId:r=>n.setAttribute("row-id",r),setRowBusinessKey:r=>n.setAttribute("row-business-key",r),refreshFullWidth:r=>{var a,l;return((l=(a=this.fullWidthCellRenderer)==null?void 0:a.refresh)==null?void 0:l.call(a,r()))??!1}};e.setComp(s,this.getGui(),o,void 0),this.addDestroyFunc(()=>{e.unsetComp(o)})}setInitialStyle(e,t){const o=this.rowCtrl.getInitialTransform(t);if(o)e.style.setProperty("transform",o);else{const n=this.rowCtrl.getInitialRowTop(t);n&&e.style.setProperty("top",n)}}showFullWidth(e){const t=n=>{if(this.isAlive()){const i=n.getGui();this.getGui().appendChild(i),this.rowCtrl.setupDetailRowAutoHeight(i),this.setFullWidthRowComp(n)}else this.beans.context.destroyBean(n)};e.newAgStackInstance().then(t)}setCellCtrls(e){const t=new Map(this.cellComps);for(const o of e){const n=o.instanceId;this.cellComps.has(n)?t.delete(n):this.newCellComp(o)}this.destroyCells(t),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];for(const o of e){const n=this.cellComps.get(o.instanceId);n&&t.push(n.getGui())}T0(this.getGui(),t)}newCellComp(e){const t=new O2(this.beans,e,this.rowCtrl.printLayout,this.getGui(),this.rowCtrl.editing);this.cellComps.set(e.instanceId,t),this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyCells(this.cellComps)}setFullWidthRowComp(e){this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}destroyCells(e){for(const t of e.values()){if(!t)return;const o=t.cellCtrl.instanceId;if(this.cellComps.get(o)!==t)return;t.detach(),t.destroy(),this.cellComps.delete(o)}}};function B2(e,t,o){const n=!!o.gos.get("enableCellSpan")&&!!t.getSpannedRowCtrls,i={tag:"div",ref:"eContainer",cls:Vc(e),role:"rowgroup"};if(t.type==="center"||n){const s={tag:"div",ref:"eSpannedContainer",cls:`ag-spanning-container ${QO(e)}`,role:"rowgroup"};return{tag:"div",ref:"eViewport",cls:`ag-viewport ${AS(e)}`,role:"presentation",children:[i,n?s:null]}}return i}var N2=class extends Bt{constructor(e){super(),this.eViewport=Qe,this.eContainer=Qe,this.eSpannedContainer=Qe,this.rowCompsNoSpan={},this.rowCompsWithSpan={},this.name=e==null?void 0:e.name,this.options=Il(this.name)}postConstruct(){this.setTemplate(B2(this.name,this.options,this.beans));const e={setHorizontalScroll:o=>this.eViewport.scrollLeft=o,setViewportHeight:o=>this.eViewport.style.height=o,setRowCtrls:({rowCtrls:o})=>this.setRowCtrls(o),setSpannedRowCtrls:o=>this.setRowCtrls(o,!0),setDomOrder:o=>{this.domOrder=o},setContainerWidth:o=>{this.eContainer.style.width=o,this.eSpannedContainer&&(this.eSpannedContainer.style.width=o)},setOffsetTop:o=>{const n=`translateY(${o})`;this.eContainer.style.transform=n,this.eSpannedContainer&&(this.eSpannedContainer.style.transform=n)}};this.createManagedBean(new sL(this.name)).setComp(e,this.eContainer,this.eSpannedContainer,this.eViewport)}destroy(){this.setRowCtrls([]),this.setRowCtrls([],!0),super.destroy(),this.lastPlacedElement=null}setRowCtrls(e,t){const{beans:o,options:n}=this,i=t?this.eSpannedContainer:this.eContainer,s=t?{...this.rowCompsWithSpan}:{...this.rowCompsNoSpan},r={};t?this.rowCompsWithSpan=r:this.rowCompsNoSpan=r,this.lastPlacedElement=null;const a=[];for(const l of e){const c=l.instanceId,u=s[c];let d;if(u)d=u,delete s[c];else{if(!l.rowNode.displayed)continue;d=new L2(l,o,n.type)}r[c]=d,a.push([d,!u])}this.removeOldRows(Object.values(s),i),this.addRowNodes(a,i)}addRowNodes(e,t){const{domOrder:o}=this;for(const[n,i]of e){const s=n.getGui();o?this.ensureDomOrder(s,t):i&&t.appendChild(s)}}removeOldRows(e,t){for(const o of e)t.removeChild(o.getGui()),o.destroy()}ensureDomOrder(e,t){D0(t,e,this.lastPlacedElement),this.lastPlacedElement=e}},H2={selector:"AG-ROW-CONTAINER",component:N2};function ma(e,t){return t.map(o=>{const n=`e${o[0].toUpperCase()+o.substring(1)}RowContainer`;return e[n]={name:o},{tag:"ag-row-container",ref:n,attrs:{name:o}}})}function G2(e){const t={},o={tag:"div",ref:"eGridRoot",cls:"ag-root ag-unselectable",children:[{tag:"ag-header-root"},{tag:"div",ref:"eTop",cls:"ag-floating-top",role:"presentation",children:ma(t,["topLeft","topCenter","topRight","topFullWidth"])},{tag:"div",ref:"eBody",cls:"ag-body",role:"presentation",children:[{tag:"div",ref:"eBodyViewport",cls:"ag-body-viewport",role:"presentation",children:ma(t,["left","center","right","fullWidth"])},{tag:"ag-fake-vertical-scroll"}]},{tag:"div",ref:"eStickyTop",cls:"ag-sticky-top",role:"presentation",children:ma(t,["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])},{tag:"div",ref:"eStickyBottom",cls:"ag-sticky-bottom",role:"presentation",children:ma(t,["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])},{tag:"div",ref:"eBottom",cls:"ag-floating-bottom",role:"presentation",children:ma(t,["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])},{tag:"ag-fake-horizontal-scroll"},e?{tag:"ag-overlay-wrapper"}:null]};return{paramsMap:t,elementParams:o}}var V2=class extends Bt{constructor(){super(...arguments),this.eGridRoot=Qe,this.eBodyViewport=Qe,this.eStickyTop=Qe,this.eStickyBottom=Qe,this.eTop=Qe,this.eBottom=Qe,this.eBody=Qe}postConstruct(){const{overlays:e,rangeSvc:t}=this.beans,o=e==null?void 0:e.getOverlayWrapperSelector(),{paramsMap:n,elementParams:i}=G2(!!o);this.setTemplate(i,[...o?[o]:[],dL,pL,M2,H2],n);const s=(a,l)=>{const c=`${a}px`;l.style.minHeight=c,l.style.height=c},r={setRowAnimationCssOnBodyViewport:(a,l)=>this.setRowAnimationCssOnBodyViewport(a,l),setColumnCount:a=>MA(this.getGui(),a),setRowCount:a=>AA(this.getGui(),a),setTopHeight:a=>s(a,this.eTop),setBottomHeight:a=>s(a,this.eBottom),setTopInvisible:a=>this.eTop.classList.toggle("ag-invisible",a),setBottomInvisible:a=>this.eBottom.classList.toggle("ag-invisible",a),setStickyTopHeight:a=>this.eStickyTop.style.height=a,setStickyTopTop:a=>this.eStickyTop.style.top=a,setStickyTopWidth:a=>this.eStickyTop.style.width=a,setStickyBottomHeight:a=>{this.eStickyBottom.style.height=a,this.eStickyBottom.classList.toggle("ag-invisible",a==="0px")},setStickyBottomBottom:a=>this.eStickyBottom.style.bottom=a,setStickyBottomWidth:a=>this.eStickyBottom.style.width=a,setColumnMovingCss:(a,l)=>this.toggleCss(a,l),updateLayoutClasses:(a,l)=>{const c=[this.eBodyViewport.classList,this.eBody.classList];for(const u of c)u.toggle(mn.AUTO_HEIGHT,l.autoHeight),u.toggle(mn.NORMAL,l.normal),u.toggle(mn.PRINT,l.print);this.toggleCss(mn.AUTO_HEIGHT,l.autoHeight),this.toggleCss(mn.NORMAL,l.normal),this.toggleCss(mn.PRINT,l.print)},setAlwaysVerticalScrollClass:(a,l)=>this.eBodyViewport.classList.toggle(OS,l),registerBodyViewportResizeListener:a=>{const l=Zi(this.beans,this.eBodyViewport,a);this.addDestroyFunc(()=>l())},setPinnedTopBottomOverflowY:a=>this.eTop.style.overflowY=this.eBottom.style.overflowY=a,setCellSelectableCss:(a,l)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(c=>c.classList.toggle(a,l))},setBodyViewportWidth:a=>this.eBodyViewport.style.width=a,setGridRootRole:a=>Qi(this.eGridRoot,a)};this.ctrl=this.createManagedBean(new lL),this.ctrl.setComp(r,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(t&&gi(this.gos)||hl(this.gos))&&kA(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){const o=this.eBodyViewport.classList;o.toggle("ag-row-animation",t),o.toggle("ag-row-no-animation",!t)}},z2={selector:"AG-GRID-BODY",component:V2},W2=class extends Ie{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,o){this.view=e,this.eGridHostDiv=t,this.eGui=o,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDrop:n,ctrlsSvc:i}=this.beans;n==null||n.registerGridDropTarget(()=>this.eGui,this),wS(this.gos,t),this.createManagedBean(new qp(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const s=Zi(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>s()),i.register("gridCtrl",this)}isDetailGrid(){var t;const e=yS(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}getOptionalSelectors(){var t,o,n,i;const e=this.beans;return{paginationSelector:(t=e.pagination)==null?void 0:t.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:(o=e.sideBar)==null?void 0:o.getSelector(),statusBarSelector:(n=e.registry)==null?void 0:n.getSelector("AG-STATUS-BAR"),watermarkSelector:(i=e.licenseManager)==null?void 0:i.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:o,nextIndex:n}=this.getNextFocusableIndex(t,e);if(n<0||n>=t.length)return!1;if(n===0){if(o>0){const{visibleCols:i,focusSvc:s}=this.beans,r=i.allCols,a=Vt(r);if(s.focusGridView({column:a,backwards:!0}))return!0}return!1}return this.focusContainer(t[n],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const o=this.getFocusableContainers(),{focusSvc:n,visibleCols:i}=this.beans,s=i.allCols;if(e){if(o.length>1)return this.focusContainer(Vt(o),e);const r=Vt(s);if(n.focusGridView({column:r,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||Fs(this.beans)){if(n.focusGridView({column:s[0],backwards:e}))return!0;for(let r=1;r<o.length;r++)if(Gs(o[r].getGui(),e))return!0;return!1}return n.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var s;const t=this.view.getFocusableContainers(),{nextIndex:o,indexWithFocus:n}=this.getNextFocusableIndex(t,e);if(n===-1||o<0||o>=t.length)return;const i=t[o];(s=i.setAllowFocus)==null||s.call(i,!0),setTimeout(()=>{var r;(r=i.setAllowFocus)==null||r.call(i,!1)})}isFocusable(){var t,o;const e=this.beans;return!Xu(e)||!Fs(e)||!!((o=(t=e.sideBar)==null?void 0:t.comp)!=null&&o.isDisplayed())}getNextFocusableIndex(e,t){const o=Jt(this.beans),n=e.findIndex(s=>s.getGui().contains(o)),i=n+(t?-1:1);return{indexWithFocus:n,nextIndex:i}}focusContainer(e,t){var n,i;(n=e.setAllowFocus)==null||n.call(e,!0);const o=Gs(e.getGui(),t,!1,!0);return(i=e.setAllowFocus)==null||i.call(e,!1),o}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},U2=class extends US{constructor(e){super(),this.gridBody=Qe,this.sideBar=Qe,this.pagination=Qe,this.rootWrapperBody=Qe,this.eGridDiv=e}postConstruct(){const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:s=>this.addCss(s),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:s=>{this.getGui().style.userSelect=s??"",this.getGui().style.webkitUserSelect=s??""},setCursor:s=>{this.getGui().style.cursor=s??""}},t=this.createManagedBean(new W2),o=t.getOptionalSelectors(),n=this.createTemplate(o),i=[z2,...Object.values(o).filter(s=>!!s)];this.setTemplate(n,i),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:s=>t.focusInnerElement(s),forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:()=>!t.isFocusable()})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),Yi(this.gos,"Grid removed from DOM")})}updateLayoutClasses(e,t){const o=this.rootWrapperBody.classList,{AUTO_HEIGHT:n,NORMAL:i,PRINT:s}=mn,{autoHeight:r,normal:a,print:l}=t;o.toggle(n,r),o.toggle(i,a),o.toggle(s,l),this.toggleCss(n,r),this.toggleCss(i,a),this.toggleCss(s,l)}createTemplate(e){const t=e.gridHeaderDropZonesSelector?{tag:"ag-grid-header-drop-zones"}:null,o=e.sideBarSelector?{tag:"ag-side-bar",ref:"sideBar"}:null,n=e.statusBarSelector?{tag:"ag-status-bar"}:null,i=e.watermarkSelector?{tag:"ag-watermark"}:null,s=e.paginationSelector?{tag:"ag-pagination",ref:"pagination"}:null;return{tag:"div",cls:"ag-root-wrapper",role:"presentation",children:[t,{tag:"div",ref:"rootWrapperBody",cls:"ag-root-wrapper-body",role:"presentation",children:[{tag:"ag-grid-body",ref:"gridBody"},o]},n,s,i]}}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){var t;if(!e&&((t=this.pagination)!=null&&t.isDisplayed())){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){const e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(t=>_n(t.getGui()))}},vt=(e,t)=>{for(const o of Object.keys(t))t[o]=e;return t},Hy={dispatchEvent:"CommunityCore",...vt("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...vt("GridState",{getState:0}),...vt("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...vt("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...vt("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...vt("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...vt("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...vt("ValueCache",{expireValueCache:0}),...vt("CellApi",{getCellValue:0}),...vt("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...vt("Sort",{onSortChanged:0}),...vt("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...vt("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...vt("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...vt("HighlightChanges",{flashCells:0}),...vt("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0}),...vt("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...vt("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...vt("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...vt("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...vt("ColumnResize",{setColumnWidths:0}),...vt("ColumnHover",{isColumnHovered:0}),...vt("EditCore",{getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0}),...vt("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...vt("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...vt("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0}),...vt("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...vt("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...vt("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...vt("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0,onRowHeightChanged:0}),...vt("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...vt("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...vt("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...vt("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...vt("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...vt("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...vt("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...vt("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...vt("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...vt("ContextMenu",{showContextMenu:0}),...vt("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...vt("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...vt("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...vt("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...vt("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...vt("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...vt("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...vt("StatusBar",{getStatusPanel:0})},_h={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},$2=(e,t)=>e.eventSvc.dispatchEvent(t),jS=class{};Reflect.defineProperty(jS,"name",{value:"GridApi"});var j2=class extends Ie{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new jS,this.fns={..._h,dispatchEvent:$2},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(Hy))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){var i;const{fns:o,beans:n}=this;o!==_h&&(o[e]=((i=n==null?void 0:n.validation)==null?void 0:i.validateApiFunction(e,t))??t)}makeApi(e){return{[e]:(...t)=>{const{beans:o,fns:{[e]:n}}=this;return n?n(o,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:o,preDestroyLink:n}=this;if(!t)Ue(26,{fnName:e,preDestroyLink:n});else{const i=Hy[e];o.assertModuleRegistered(i,`api.${e}`)&&Ue(27,{fnName:e,module:i})}}destroy(){super.destroy(),this.fns=_h,this.beans=null}};function K2(e){return e.context.getGridId()}function q2(e){e.gridDestroySvc.destroy()}function Q2(e){return e.gridDestroySvc.destroyCalled}function Y2(e,t){return e.gos.get(t)}function J2(e,t,o){KS(e,{[t]:o})}function KS(e,t){e.gos.updateGridOptions({options:t})}function Z2(e,t){const o=t.replace(/Module$/,"");return e.gos.isModuleRegistered(o)}var X2={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},eB=class extends Bt{constructor(e,t,o){super(X2),this.rowNode=e,this.column=t,this.eCell=o}postConstruct(){this.getGui().appendChild(sn("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:o,eCell:n,gos:i}=this,s=o.getColDef().dndSourceOnRowDrag,r=e.dataTransfer;if(r.setDragImage(n,0,0),s){const a=pt(i,{rowNode:t,dragEvent:e});s(a)}else try{const a=JSON.stringify(t.data);r.setData("application/json",a),r.setData("text/plain",a)}catch{}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function tB(e,t){var o,n;(n=(o=e.rowDragSvc)==null?void 0:o.rowDragFeature)==null||n.addRowDropZone(t)}function oB(e,t){var n,i;const o=(n=e.dragAndDrop)==null?void 0:n.findExternalZone(t);o&&((i=e.dragAndDrop)==null||i.removeDropTarget(o))}function nB(e,t){var o,n;return(n=(o=e.rowDragSvc)==null?void 0:o.rowDragFeature)==null?void 0:n.getRowDropZone(t)}var iB=class extends Ie{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:o}=this.beans;return o.addDragSource(t),()=>o.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const o=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(o)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},sB={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},rB=class extends Bt{constructor(e,t,o,n,i,s){super(),this.cellValueFn=e,this.rowNode=t,this.column=o,this.customGui=n,this.dragStartPixels=i,this.suppressVisibilityChange=s,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){const{beans:e,rowNode:t,column:o,gos:n}=this;if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate(sB),this.getGui().appendChild(sn("rowDrag",e,null)),this.addDragSource()),!this.suppressVisibilityChange){const i=n.get("rowDragManaged")?new lB(this,t,o):new aB(this,t,o);this.createManagedBean(i,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){var n;const e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];const o=((n=this.beans.selectionSvc)==null?void 0:n.getSelectedNodes())??[];return o.indexOf(e)!==-1?o:[e]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:n=>{n==null||n.preventDefault()}})[0]);const o=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{var r;const n=this.getDragItem(),i=((r=n.rowNodes)==null?void 0:r.length)||1,s=this.getRowDragText(this.column);return s?s(n,i):i===1?this.cellValueFn():`${i} ${o("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},qS=class extends Ie{constructor(e,t,o){super(),this.parent=e,this.rowNode=t,this.column=o}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let o=!0,n=!1;const{column:i,rowNode:s,parent:r}=this;i&&(o=i.isRowDrag(s)||r.isCustomGui(),n=typeof i.getColDef().rowDrag=="function"),n?(r.setDisplayed(!0,t),r.setVisible(o,t)):(r.setDisplayed(o,t),r.setVisible(!0,t))}}},aB=class extends qS{postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},lB=class extends qS{postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventSvc,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const{rowDragSvc:e,dragAndDrop:t,gos:o}=this.beans,n=e.rowDragFeature,i=n&&n.shouldPreventRowMove(),s=o.get("suppressRowDrag"),r=t.hasExternalDropZones(),a=i&&!r||s;this.setDisplayedOrVisible(a)}},cB=class extends Ie{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){const o=t.createManagedBean(new SO(e)),n=this.beans.dragAndDrop;n.addDropTarget(o),t.addDestroyFunc(()=>n.removeDropTarget(o)),this.rowDragFeature=o}createRowDragComp(e,t,o,n,i,s){return new rB(e,t,o,n,i,s)}createRowDragCompForRow(e,t){if(gi(this.gos))return;const o=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${o("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,o,n,i,s){const r=this.gos;return r.get("rowDragManaged")&&(!Co(r)||r.get("pagination"))?void 0:this.createRowDragComp(o,e,t,n,i,s)}},QS={moduleName:"Drag",version:Je,beans:[xO]},uB={moduleName:"DragAndDrop",version:Je,dynamicBeans:{dndSourceComp:eB},icons:{rowDrag:"grip"}},YS={moduleName:"SharedDragAndDrop",version:Je,beans:[pO],dependsOn:[QS],userComponents:{agDragAndDropImage:HL},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},dB={moduleName:"RowDrag",version:Je,beans:[cB],apiFunctions:{addRowDropZone:tB,removeRowDropZone:oB,getRowDropZoneParams:nB},dependsOn:[YS]},hB={moduleName:"HorizontalResize",version:Je,beans:[iB],dependsOn:[QS]},fB=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",pB=class extends Ie{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:o,executeLaterFuncs:n}=this;if(o.length===0&&n.length===0){e(),t();return}const i=s=>{for(;s.length;){const r=s.pop();r&&r()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),i(o)},0),window.setTimeout(()=>{t(),i(n)},200)})}};function gB(e,t,o){var n;(n=e.colMoves)==null||n.moveColumnByIndex(t,o,"api")}function mB(e,t,o){var n;(n=e.colMoves)==null||n.moveColumns(t,o,"api")}var vB=class extends Ie{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(o=>{o.isPrimary()&&(o.isAnyFunctionActive()||(o.isAllowValue()?this.columnsToAggregate.push(o):o.isAllowRowGroup()?this.columnsToGroup.push(o):o.isAllowPivot()&&this.columnsToPivot.push(o)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:o,pivotColsSvc:n}=this.beans;this.columnsToAggregate.length>0&&(t==null||t.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")),this.columnsToGroup.length>0&&(o==null||o.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")),this.columnsToPivot.length>0&&(n==null||n.addColumns(this.columnsToPivot,"toolPanelDragAndDrop"))}onDragCancel(){this.clearColumnsList()}};function yB(e,t){!t||t.length<=1||t.filter(n=>e.indexOf(n)<0).length>0||t.sort((n,i)=>{const s=e.indexOf(n),r=e.indexOf(i);return s-r})}function JS(e){const{isFromHeader:t,fromLeft:o,xPosition:n,fromEnter:i,fakeEvent:s,pinned:r,gos:a,colModel:l,colMoves:c,visibleCols:u}=e;let{allMovingColumns:d}=e;if(t){const I=[];d.forEach(W=>{var K;let z=null,de=W.getParent();for(;de!=null&&de.getDisplayedLeafColumns().length===1;)z=de,de=de.getParent();z!=null?(!!((K=z.getColGroupDef())!=null&&K.marryChildren)?z.getProvidedColumnGroup().getLeafColumns():z.getLeafColumns()).forEach(N=>{I.includes(N)||I.push(N)}):I.includes(W)||I.push(W)}),d=I}const h=d.slice();yB(l.getCols(),h);const f=SB({movingCols:h,draggingRight:o,xPosition:n,pinned:r,gos:a,colModel:l,visibleCols:u}),v=CB(h,l);if(f.length===0)return;const m=f[0];let b=v!==null&&!i;if(t&&(b=v!==null),b&&!s&&(!o&&m>=v||o&&m<=v))return;const S=u.allCols,R=[];let _=null;for(let I=0;I<f.length;I++){const W=f[I],z=c.getProposedColumnOrder(h,W);if(!c.doesOrderPassRules(z))continue;const de=z.filter(O=>S.includes(O));if(_===null)_=de;else if(!Us(de,_))break;const K=bB(z);R.push({move:W,fragCount:K})}if(R.length===0)return;R.sort((I,W)=>I.fragCount-W.fragCount);const M=R[0].move;if(!(M>l.getCols().length-d.length))return{columns:d,toIndex:M}}function ZS(e){const{columns:t,toIndex:o}=JS(e)||{},{finished:n,colMoves:i}=e;return!t||o==null?null:(i.moveColumns(t,o,"uiColumnMoved",n),n?null:{columns:t,toIndex:o})}function CB(e,t){const o=t.getCols(),n=e.map(l=>o.indexOf(l)).sort((l,c)=>l-c),i=n[0];return Vt(n)-i!==n.length-1?null:i}function bB(e){function t(n){const i=[];let s=n.getOriginalParent();for(;s!=null;)i.push(s),s=s.getOriginalParent();return i}let o=0;for(let n=0;n<e.length-1;n++){let i=t(e[n]),s=t(e[n+1]);[i,s]=i.length>s.length?[i,s]:[s,i],i.forEach(r=>{s.indexOf(r)===-1&&o++})}return o}function wB(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function SB(e){const{movingCols:t,draggingRight:o,xPosition:n,pinned:i,gos:s,colModel:r,visibleCols:a}=e;if(s.get("suppressMovableColumns")||t.some(_=>_.getColDef().suppressMovable))return[];const c=wB(a,i),u=r.getCols(),d=c.filter(_=>t.includes(_)),h=c.filter(_=>!t.includes(_)),f=u.filter(_=>!t.includes(_));let v=0,m=n;if(o){let _=0;d.forEach(M=>_+=M.getActualWidth()),m-=_}if(m>0){for(let _=0;_<h.length;_++){const M=h[_];if(m-=M.getActualWidth(),m<0)break;v++}o&&v++}let b;if(v>0){const _=h[v-1];b=f.indexOf(_)+1}else b=f.indexOf(h[0]),b===-1&&(b=0);const S=[b],R=(_,M)=>_-M;if(o){let _=b+1;const M=u.length-1;for(;_<=M;)S.push(_),_++;S.sort(R)}else{let _=b;const M=u.length-1;let I=u[_];for(;_<=M&&c.indexOf(I)<0;)_++,S.push(_),I=u[_];_=b-1;const W=0;for(;_>=W;)S.push(_),_--;S.sort(R).reverse()}return S}function Nf(e){var c;const{pinned:t,fromKeyboard:o,gos:n,ctrlsSvc:i,useHeaderRow:s,skipScrollPadding:r}=e;let a=(c=i.getHeaderRowContainerCtrl(t))==null?void 0:c.eViewport,{x:l}=e;return a?(o&&(l-=a.getBoundingClientRect().left),n.get("enableRtl")&&(s&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!r&&(l+=i.get("center").getCenterViewportScrollLeft()),l):0}function Eh(e,t){for(const o of e)o.moving=t,o.dispatchColEvent("movingChanged","uiColumnMoved")}var Gy=7,Hf=100,vc=Hf/2,xB=5,RB=100,_B=class extends Ie{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!Ye(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,{dragItem:o}=t||{},n=(o==null?void 0:o.columns)??[];for(const i of n){const s=i.getPinned();if(i.getColDef().lockPinned){if(s==e)return"move";continue}const r=o==null?void 0:o.containerType;if(r===e||!e)return"move";if(e&&(!s||r!==e))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,o=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(o,!0,"uiColumnDragged");else{const i=t.visibleState,s=(o||[]).filter(r=>i[r.getId()]);this.setColumnsVisible(s,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(o,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,o=!1,n=!1){const{gos:i,ctrlsSvc:s}=this.beans,r=i.get("suppressMoveWhenColumnDragging");if(n&&!r){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!n&&qt(e.hDirection))return;const a=Nf({x:e.x,pinned:this.pinned,gos:i,ctrlsSvc:s});t||this.checkCenterForScrolling(a),r?this.handleColumnDragWhileSuppressingMovement(e,t,o,a,n):this.handleColumnDragWhileAllowingMovement(e,t,o,a,n)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,o){if(!e)return;const n=e.filter(i=>!i.getColDef().lockVisible);this.beans.colModel.setColsVisible(n,t,o)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:o}=e;this.beans.colMoves.moveColumns(t,o,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,o,n,i){const s=this.getAllMovingColumns(e,!0);if(i){const r=this.isAttemptingToPin(s);r&&this.attemptToPinColumns(s,void 0,!0);const{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(s,r)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:s,xPosition:l,fromEnter:t,fakeEvent:o,fromLeft:a})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(s,n)}}handleColumnDragWhileAllowingMovement(e,t,o,n,i){const s=this.getAllMovingColumns(e),r=this.normaliseDirection(e.hDirection)==="right",a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:s,isFromHeader:a,xPosition:n,fromLeft:r,fromEnter:t,fakeEvent:o}),c=ZS({...l,finished:i});c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){const o=e.dragSource.getDragItem();let n=null;t?(n=o.columnsInSplit,n||(n=o.columns)):n=o.columns;const i=s=>s.getColDef().lockPinned?s.getPinned()==this.pinned:!0;return n?n.filter(i):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:o,xPosition:n,fromLeft:i,fromEnter:s,fakeEvent:r}=e,{gos:a,colModel:l,colMoves:c,visibleCols:u}=this.beans;return{allMovingColumns:t,isFromHeader:o,fromLeft:i,xPosition:n,pinned:this.pinned,fromEnter:s,fakeEvent:r,gos:a,colModel:l,colMoves:c,visibleCols:u}}highlightHoveredColumn(e,t){var u;const{gos:o,colModel:n}=this.beans,i=o.get("enableRtl"),s=n.getCols().filter(d=>d.isVisible()&&d.getPinned()===this.pinned);let r=null,a=null,l=null;for(const d of s){if(a=d.getActualWidth(),r=this.getNormalisedColumnLeft(d,0,i),r!=null){const h=r+a;if(r<=t&&h>=t){l=d;break}}r=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let d=s.length-1;d>=0;d--){const h=s[d],f=s[d].getParent();if(!f){l=h;break}const v=f==null?void 0:f.getDisplayedLeafColumns();if(v.length){l=Vt(v);break}}if(!l)return;r=this.getNormalisedColumnLeft(l,0,i),a=l.getActualWidth()}if(((u=this.lastHighlightedColumn)==null?void 0:u.column)!==l&&this.clearHighlighted(),l==null||r==null||a==null)return;let c;t-r<a/2!==i?c=0:c=1,Vy(l,c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){const{gos:o,visibleCols:n}=this.beans,i=o.get("enableRtl"),{firstMovingCol:s,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,i);if(!s||!r||a==null)return;const l=n.allCols,c=l.indexOf(s),u=l.indexOf(r),d=a===0!==i,h=c<u||c===u&&!d;let f=0;if(d?h&&(f-=1):h||(f+=1),u+f===c)return;const v=l[u+f];if(!v)return;const m=this.getNormalisedColumnLeft(v,20,i);return{fromLeft:h,xPosition:m}}getColumnMoveAndTargetInfo(e,t,o){const n=this.lastHighlightedColumn||{},{firstMovingCol:i,lastMovingCol:s}=EB(e);if(!i||!s||n.column||!t)return{firstMovingCol:i,...n};const a=this.getPinDirection()==="left";return{firstMovingCol:i,position:a?1:0,column:a!==o?i:s}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,o){const{gos:n,ctrlsSvc:i}=this.beans,s=e.getLeft();if(s==null)return null;const r=e.getActualWidth();return Nf({x:o?s+r-t:s+t,pinned:e.getPinned(),useHeaderRow:o,skipScrollPadding:!0,gos:n,ctrlsSvc:i})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,o=this.failedMoveAttempts>Gy;return t&&o||e.some(n=>n.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:o,fromEnter:n,fakeEvent:i,fromLeft:s}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:o,fromLeft:s,fromEnter:n,fakeEvent:i}),{columns:a,toIndex:l}=JS(r)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(Vy(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),o=t.getCenterViewportScrollLeft(),n=o+t.getCenterWidth();let i,s;this.gos.get("enableRtl")?(i=e<o+vc,s=e>n-vc):(s=e<o+vc,i=e>n-vc),this.needToMoveRight=i,this.needToMoveLeft=s,s||i?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){var e;this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),RB),(e=this.beans.dragAndDrop.getDragAndDropImageComponent())==null||e.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){var e;this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,(e=this.beans.dragAndDrop.getDragAndDropImageComponent())==null||e.setIcon(this.getIconName(),!1))}moveInterval(){var n,i;let e;this.intervalCount++,e=10+this.intervalCount*xB,e>Hf&&(e=Hf);let t=null;const o=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=o.scrollHorizontally(-e):this.needToMoveRight&&(t=o.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:s,dragAndDrop:r,gos:a}=this.beans;if(this.failedMoveAttempts<=Gy+1||!s)return;if((n=r.getDragAndDropImageComponent())==null||n.setIcon("pinned",!1),!a.get("suppressMoveWhenColumnDragging")){const l=(i=this.lastDraggingEvent)==null?void 0:i.dragItem.columns;this.attemptToPinColumns(l,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,o=!1){const n=(e||[]).filter(r=>!r.getColDef().lockPinned);if(!n.length)return 0;o&&(t=this.getPinDirection());const{pinnedCols:i,dragAndDrop:s}=this.beans;return i==null||i.setColsPinned(n,t,"uiColumnDragged"),o&&s.nudge(),n.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function Vy(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function EB(e){const t=e.length;let o,n;for(let i=0;i<t;i++){if(!o){const s=e[i];s.getLeft()!=null&&(o=s)}if(!n){const s=e[t-1-i];s.getLeft()!=null&&(n=s)}if(o&&n)break}return{firstMovingCol:o,lastMovingCol:n}}var PB=class extends Ie{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,o=this.pinned;e.whenReady(this,n=>{let i;const s=n.gridBodyCtrl.eBodyViewport;switch(o){case"left":i=[[s,n.left.eContainer],[n.bottomLeft.eContainer],[n.topLeft.eContainer]];break;case"right":i=[[s,n.right.eContainer],[n.bottomRight.eContainer],[n.topRight.eContainer]];break;default:i=[[s,n.center.eViewport],[n.bottomCenter.eViewport],[n.topCenter.eViewport]];break}this.eSecondaryContainers=i}),this.moveColumnFeature=this.createManagedBean(new _B(o)),this.bodyDropPivotTarget=this.createManagedBean(new vB(o)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},FB=class extends Ie{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,o){const n=this.beans.colModel.getCols();if(!n)return;const i=n[e];this.moveColumns([i],t,o)}moveColumns(e,t,o,n=!0){const{colModel:i,colAnimation:s,visibleCols:r,eventSvc:a}=this.beans,l=i.getCols();if(!l)return;if(t>l.length-e.length){Ue(30,{toIndex:t});return}s==null||s.start();const c=i.getColsForKeys(e);this.doesMovePassRules(c,t)&&(by(i.getCols(),c,t),r.refresh(o),a.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,toIndex:t,finished:n,source:o})),s==null||s.finish()}doesMovePassRules(e,t){const o=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(o)}doesOrderPassRules(e){const{colModel:t,gos:o}=this.beans;return!(!sS(e,t.getColTree())||!(i=>{const s=c=>c?c==="left"||c===!0?-1:1:0,r=o.get("enableRtl");let a=r?1:-1,l=!0;return i.forEach(c=>{const u=s(c.getColDef().lockPosition);r?u>a&&(l=!1):u<a&&(l=!1),a=u}),l})(e))}getProposedColumnOrder(e,t){const n=this.beans.colModel.getCols().slice();return by(n,e,t),n}createBodyDropTarget(e,t){return new PB(e,t)}moveHeader(e,t,o,n,i){const{ctrlsSvc:s,gos:r,colModel:a,visibleCols:l,focusSvc:c}=this.beans,u=t.getBoundingClientRect(),d=u.left,h=no(o),f=h?u.width:o.getActualWidth(),v=e==="left"!==r.get("enableRtl"),m=Nf({x:v?d-20:d+f+20,pinned:n,fromKeyboard:!0,gos:r,ctrlsSvc:s}),b=c.focusedHeader;ZS({allMovingColumns:h?o.getLeafColumns():[o],isFromHeader:!0,fromLeft:e==="right",xPosition:m,pinned:n,fromEnter:!1,fakeEvent:!1,gos:r,colModel:a,colMoves:this,visibleCols:l,finished:!0});let S;if(h){const R=o.getDisplayedLeafColumns();S=v?R[0]:Vt(R)}else S=o;if(s.getScrollFeature().ensureColumnVisible(S,"auto"),(!i.isAlive()||r.get("ensureDomOrder"))&&b){let R;if(h){const _=o.getGroupId(),M=o.getLeafColumns();if(!M.length)return;const I=M[0].getParent();if(!I)return;R=DB(I,_)}else R=o;R&&c.focusHeaderPosition({headerPosition:{...b,column:R}})}}setDragSourceForHeader(e,t,o){const{gos:n,colModel:i,dragAndDrop:s,visibleCols:r}=this.beans;let a=!n.get("suppressDragLeaveHidesColumns");const l=no(t),c=l?t.getProvidedColumnGroup().getLeafColumns():[t],d={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:l?()=>kB(t,r.allCols):()=>TB(t),dragItemName:o,onDragStarted:()=>{a=!n.get("suppressDragLeaveHidesColumns"),Eh(c,!0)},onDragStopped:()=>Eh(c,!1),onDragCancelled:()=>Eh(c,!1),onGridEnter:h=>{if(a){const{columns:f=[],visibleState:v}=h??{},m=l?S=>!v||v[S.getColId()]:()=>!0,b=f.filter(S=>!S.getColDef().lockVisible&&m(S));i.setColsVisible(b,!0,"uiColumnMoved")}},onGridExit:h=>{var f;if(a){const v=((f=h==null?void 0:h.columns)==null?void 0:f.filter(m=>!m.getColDef().lockVisible))||[];i.setColsVisible(v,!1,"uiColumnMoved")}}};return s.addDragSource(d,!0),d}};function DB(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function TB(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function kB(e,t){var a;const o=e.getProvidedColumnGroup().getLeafColumns(),n={};o.forEach(l=>n[l.getId()]=l.isVisible());const i=[];t.forEach(l=>{o.indexOf(l)>=0&&(i.push(l),dn(o,l))}),o.forEach(l=>i.push(l));const s=[],r=e.getLeafColumns();for(const l of i)r.indexOf(l)!==-1&&s.push(l);return{columns:i,columnsInSplit:s,visibleState:n,containerType:(a=s[0])==null?void 0:a.pinned}}var AB={moduleName:"ColumnMove",version:Je,beans:[FB,pB],apiFunctions:{moveColumnByIndex:gB,moveColumns:mB},dependsOn:[YS],css:[fB]},IB=class extends Ie{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const o=this.getHeaderCellForColumn(e);if(!o)return-1;const n=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||n.push(o),this.getPreferredWidthForElements(n)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const o=document.createElement("form");o.style.position="fixed";const n=this.centerRowContainerCtrl.eContainer;e.forEach(s=>this.cloneItemIntoDummy(s,o)),n.appendChild(o);const i=o.offsetWidth;return n.removeChild(o),t=t??this.gos.get("autoSizePadding"),i+t}getHeaderCellForColumn(e){let t=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach(o=>{const n=o.getHtmlElementForColumnHeader(e);n!=null&&(t=n)}),t}cloneItemIntoDummy(e,t){const o=e.cloneNode(!0);o.style.width="",o.style.position="static",o.style.left="";const n=document.createElement("div"),i=n.classList;["ag-header-cell","ag-header-group-cell"].some(a=>o.classList.contains(a))?(i.add("ag-header","ag-header-row"),n.style.position="static"):i.add("ag-row");let r=e.parentElement;for(;r;){if(["ag-header-row","ag-row"].some(l=>r.classList.contains(l))){for(let l=0;l<r.classList.length;l++){const c=r.classList[l];c!="ag-row-position-absolute"&&i.add(c)}break}r=r.parentElement}n.appendChild(o),t.appendChild(n)}},XS={moduleName:"AutoWidth",version:Je,beans:[IB]};function MB(e,t,o=!0,n="api"){var i;(i=e.colResize)==null||i.setColumnWidths(t,!1,o,n)}var OB=class extends Ie{constructor(e,t,o,n){super(),this.comp=e,this.eResize=t,this.pinned=o,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:e,gos:t,colAutosize:o}=this.beans,n=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(n),!t.get("suppressAutoSize")&&o&&this.addDestroyFunc(o.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:o,resizeRatios:n,groupAfterColumns:i,groupAfterStartWidth:s,groupAfterRatios:r}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=o,this.resizeRatios=n,this.resizeTakeFromCols=i,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=r,this.toggleColumnResizing(!0)}onResizing(e,t,o="uiColumnResized"){const n=this.normaliseDragChange(t),i=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(i,o,e)}getInitialValues(e){var l;const t=c=>c.reduce((u,d)=>u+d.getActualWidth(),0),o=(c,u)=>c.map(d=>d.getActualWidth()/u),n=this.getColumnsToResize(),i=t(n),s=o(n,i),r={columnsToResize:n,resizeStartWidth:i,resizeRatios:s};let a=null;if(e&&(a=((l=this.beans.colGroupSvc)==null?void 0:l.getGroupAtDirection(this.columnGroup,"After"))??null),a){const c=a.getDisplayedLeafColumns(),u=r.groupAfterColumns=c.filter(h=>h.isResizable()),d=r.groupAfterStartWidth=t(u);r.groupAfterRatios=o(u,d)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),o=this.getInitialValues();t>o.resizeStartWidth&&this.resizeColumns(o,t,e,!0)}resizeColumnsFromLocalValues(e,t,o=!0){if(!this.resizeCols||!this.resizeRatios)return;const n={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(n,e,t,o)}resizeColumns(e,t,o,n=!0){var d;const{columnsToResize:i,resizeStartWidth:s,resizeRatios:r,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:i,ratios:r,width:t}),a){const h=t-s;u.push({columns:a,ratios:c,width:l-h})}(d=this.beans.colResize)==null||d.resizeColumnSets({resizeSets:u,finished:n,source:o}),n&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},LB=class extends Ie{constructor(e,t,o,n,i){super(),this.pinned=e,this.column=t,this.eResize=o,this.comp=n,this.ctrl=i}postConstruct(){const e=[];let t,o;const n=()=>{if(Yt(this.eResize,t),!t)return;const{horizontalResizeSvc:r,colAutosize:a}=this.beans,l=r.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(l),o&&a&&e.push(a.addColumnAutosize(this.eResize,this.column))},i=()=>{e.forEach(r=>r()),e.length=0},s=()=>{const r=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(r!==t||a!==o)&&(t=r,o=a,i(),n())};s(),this.addDestroyFunc(i),this.ctrl.setRefreshFunction("resize",s)}onResizing(e,t){const{column:o,lastResizeAmount:n,resizeStartWidth:i,beans:s}=this,r=this.normaliseResizeAmount(t),a=i+r,l=[{key:o,newWidth:a}],{pinnedCols:c,ctrlsSvc:u,colResize:d}=s;if(this.column.getPinned()){const h=(c==null?void 0:c.leftWidth)??0,f=(c==null?void 0:c.rightWidth)??0,v=cl(u.getGridBodyCtrl().eBodyViewport)-50;if(h+f+(r-n)>v)return}this.lastResizeAmount=r,d==null||d.setColumnWidths(l,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const o=this.pinned!=="left",n=this.pinned==="right";return this.gos.get("enableRtl")?o&&(t*=-1):n&&(t*=-1),t}},BB=class extends Ie{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,o,n){const i=[],{colModel:s,gos:r,visibleCols:a}=this.beans;e.forEach(l=>{const c=s.getColDefCol(l.key)||s.getCol(l.key);if(!c)return;if(i.push({width:l.newWidth,ratios:[1],columns:[c]}),r.get("colResizeDefault")==="shift"&&(t=!t),t){const d=a.getColAfter(c);if(!d)return;const h=c.getActualWidth()-l.newWidth,f=d.getActualWidth()+h;i.push({width:f,ratios:[1],columns:[d]})}}),i.length!==0&&this.resizeColumnSets({resizeSets:i,finished:o,source:n})}resizeColumnSets(e){const{resizeSets:t,finished:o,source:n}=e;if(!(!t||t.every(u=>NB(u)))){if(o){const u=t&&t.length>0?t[0].columns:null;Nr(this.eventSvc,u,o,n)}return}const s=[],r=[];t.forEach(u=>{const{width:d,columns:h,ratios:f}=u,v={},m={};h.forEach(R=>r.push(R));let b=!0,S=0;for(;b;){if(S++,S>1e3){Nt(31);break}b=!1;const R=[];let _=0,M=d;h.forEach((W,z)=>{if(m[W.getId()])M-=v[W.getId()];else{R.push(W);const K=f[z];_+=K}});const I=1/_;R.forEach((W,z)=>{const de=z===R.length-1;let K;de?K=M:(K=Math.round(f[z]*d*I),M-=K);const O=W.getMinWidth(),ie=W.getMaxWidth();K<O?(K=O,m[W.getId()]=!0,b=!0):ie>0&&K>ie&&(K=ie,m[W.getId()]=!0,b=!0),v[W.getId()]=K})}h.forEach(R=>{const _=v[R.getId()];R.getActualWidth()!==_&&(R.setActualWidth(_,n),s.push(R))})});const a=s.length>0;let l=[];if(a){const{colFlex:u,visibleCols:d,colViewport:h}=this.beans;l=(u==null?void 0:u.refreshFlexedColumns({resizingCols:r,skipSetLeft:!0}))??[],d.setLeftValues(n),d.updateBodyWidths(),h.checkViewportColumns()}const c=r.concat(l);(a||o)&&Nr(this.eventSvc,c,o,n,l)}resizeHeader(e,t,o){if(!e.isResizable())return;const n=e.getActualWidth(),i=e.getMinWidth(),s=e.getMaxWidth(),r=Math.min(Math.max(n+t,i),s);this.setColumnWidths([{key:e,newWidth:r}],o,!0,"uiColumnResized")}createResizeFeature(e,t,o,n,i){return new LB(e,t,o,n,i)}createGroupResizeFeature(e,t,o,n){return new OB(e,t,o,n)}};function NB(e){const{columns:t,width:o}=e;let n=0,i=0,s=!0;t.forEach(l=>{const c=l.getMinWidth();n+=c||0;const u=l.getMaxWidth();u>0?i+=u:s=!1});const r=o>=n,a=!s||o<=i;return r&&a}var HB={moduleName:"ColumnResize",version:Je,beans:[BB],apiFunctions:{setColumnWidths:MB},dependsOn:[hB,XS]},GB=class extends Ie{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},VB=class extends tg{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}setComp(e,t,o,n,i){const{column:s,beans:r}=this,{context:a,colNames:l,colHover:c,rangeSvc:u,colResize:d}=r;this.comp=e,i=kl(this,a,i),this.setGui(t,i),this.displayName=l.getDisplayNameForColumnGroup(s,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(i),this.setupExpandable(i),this.setupTooltip(),this.setupAutoHeight({wrapperElement:n,compBean:i}),this.setupUserComp(),this.addHeaderMouseListeners(i),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const h=this.rowCtrl.pinned,f=s.getProvidedColumnGroup().getLeafColumns();c==null||c.createHoverFeature(i,f,t),u==null||u.createRangeHighlightFeature(i,s,e),i.createManagedBean(new eg(s,t,r)),i.createManagedBean(new GB(e,s)),d?this.resizeFeature=i.createManagedBean(d.createGroupResizeFeature(e,o,h,s)):e.setResizableDisplayed(!1),i.createManagedBean(new Qr(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(i,f),i.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(i),i.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,o=e.getDefinition();return pt(t.gos,{colDef:o,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,o=e.get("groupHeaderHeight");o!=null?o===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(o):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const o of t)e.addManagedListeners(o,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,o)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),o=t[0]===e,n=Vt(t)===e;if(!o&&!n)return;const i=e.getHighlighted(),s=!!this.rowCtrl.getHeaderCellCtrls().find(l=>l.column.isMoving());let r=!1,a=!1;if(s){const l=this.beans.gos.get("enableRtl"),c=i===1,u=i===0;o&&(l?a=c:r=u),n&&(l?r=u:a=c)}this.comp.toggleCss("ag-header-highlight-before",r),this.comp.toggleCss("ag-header-highlight-after",a)}resizeHeader(e,t){const{resizeFeature:o}=this;if(!o)return;const n=o.getInitialValues(t);o.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){var t;(t=this.resizeFeature)==null||t.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:o,enterpriseMenuFactory:n}=this.beans,i=this.column,s=i.getProvidedColumnGroup(),r=pt(o,{displayName:this.displayName,columnGroup:i,setExpanded:l=>{e.setColumnGroupOpened(s,l,"gridInitializing")},setTooltip:(l,c)=>{o.assertModuleRegistered("Tooltip",3),this.setupTooltip(l,c)},showColumnMenu:(l,c)=>n==null?void 0:n.showMenuAfterButtonClick(s,l,"columnMenu",c),showColumnMenuAfterMouseClick:(l,c)=>n==null?void 0:n.showMenuAfterMouseEvent(s,l,"columnMenu",c),eGridHeader:this.eGui}),a=CM(t,r);a&&this.comp.setUserCompDetails(a)}addHeaderMouseListeners(e){const t=i=>this.handleMouseOverChange(i.type==="mouseenter"),o=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),n=i=>this.handleContextMenuMouseEvent(i,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:o,contextmenu:n})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){var o;this.tooltipFeature=(o=this.beans.tooltipSvc)==null?void 0:o.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const o=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:o,expandableChanged:o})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),o=mS(t,this.gos,null,e);e.isPadding()?(o.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(i=>i.isSpanHeaderHeight())&&o.push("ag-header-span-height")):(o.push("ag-header-group-cell-with-group"),t!=null&&t.wrapHeaderText&&o.push("ag-header-cell-wrap-text")),o.forEach(n=>this.comp.toggleCss(n,!0))}setupMovingCss(e){const{column:t}=this,n=t.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());n.forEach(s=>{e.addManagedListeners(s,{movingChanged:i})}),i()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===Te.ENTER){const o=this.column,n=!o.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(o.getProvidedColumnGroup(),n,"uiColumnExpanded")}}setDragSource(e){var t;!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=((t=this.beans.colMoves)==null?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function zB(e,t,o){var n;(n=e.colGroupSvc)==null||n.setColumnGroupOpened(t,o,"api")}function WB(e,t,o){var n;return((n=e.colGroupSvc)==null?void 0:n.getColumnGroup(t,o))??null}function UB(e,t){var o;return((o=e.colGroupSvc)==null?void 0:o.getProvidedColGroup(t))??null}function $B(e,t,o){return e.colNames.getDisplayNameForColumnGroup(t,o)||""}function jB(e){var t;return((t=e.colGroupSvc)==null?void 0:t.getColumnGroupState())??[]}function KB(e,t){var o;(o=e.colGroupSvc)==null||o.setColumnGroupState(t,"api")}function qB(e){var t;(t=e.colGroupSvc)==null||t.resetColumnGroupState("api")}function QB(e){return e.visibleCols.treeLeft}function YB(e){return e.visibleCols.treeCenter}function JB(e){return e.visibleCols.treeRight}function ZB(e){return e.visibleCols.getAllTrees()}function XB(e,t){for(let o=0;o<t.length;o++){const n=e.indexOf(t[o]);n>=0&&(e[n]=e[e.length-1],e.pop())}}var eN=class extends Ie{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colFlex:o,colModel:n,colGroupSvc:i,colViewport:s,selectionColSvc:r}=this.beans;t||this.buildTrees(n,i),i==null||i.updateOpenClosedVisibility(),this.leftCols=Ph(this.treeLeft),this.centerCols=Ph(this.treeCenter),this.rightCols=Ph(this.treeRight),r==null||r.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(n),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(a=>a.isAutoHeight()),o==null||o.refreshFlexedColumns(),this.updateBodyWidths(),s.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(n,this.leftCols,this.rightCols,e),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}updateBodyWidths(){const e=si(this.centerCols),t=si(this.leftCols),o=si(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==o)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=o,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,o,n){let i,s;this.gos.get("enableRtl")?(i=t?t[0]:null,s=o?Vt(o):null):(i=t?Vt(t):null,s=o?o[0]:null),e.getCols().forEach(r=>{r.setLastLeftPinned(r===i,n),r.setFirstRightPinned(r===s,n)})}buildTrees(e,t){const o=e.getColsToShow(),n=o.filter(l=>l.getPinned()=="left"),i=o.filter(l=>l.getPinned()=="right"),s=o.filter(l=>l.getPinned()!="left"&&l.getPinned()!="right"),r=new uS,a=l=>t?t.createColumnGroups(l):l.columns;this.treeLeft=a({columns:n,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:i,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:s,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),o=[],n=[],i=[];for(const s of t){const r=s.getPinned();r?r===!0||r==="left"?o.push(s):i.push(s):n.push(s)}this.ariaOrderColumns=o.concat(n).concat(i)}getAriaColIndex(e){let t;return no(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{no(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const n=t.getCols().slice(0),i=this.gos.get("enableRtl");[this.leftCols,this.rightCols,this.centerCols].forEach(s=>{if(i){let r=si(s);s.forEach(a=>{r-=a.getActualWidth(),a.setLeft(r,e)})}else{let r=0;s.forEach(a=>{a.setLeft(r,e),r+=a.getActualWidth()})}XB(n,s)}),n.forEach(s=>{s.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:o}}=this;return o.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:o}}=this;return o.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,o,n){const i=[];let s=null;for(let r=0;r<t.length;r++){const a=t[r],l=t.length-r,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){const h=c-1;for(let f=1;f<=h;f++)u.push(t[r+f]);r+=h}let d;o?(d=!1,u.forEach(h=>{o(h)&&(d=!0)})):d=!0,d&&(i.length===0&&s&&(n&&n(a))&&i.push(s),i.push(a)),s=a}return i}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,o=t.indexOf(e);return o>0?t[o-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};Ds(this.treeCenter,!1,e),Ds(this.treeLeft,!1,e),Ds(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let o=0;o<t.length;o++){const n=this[t[o]];if(n.length)return e?Vt(n):n[0]}return null}getColAfter(e){const t=this.allCols,o=t.indexOf(e);return o<t.length-1?t[o+1]:null}getColsLeftWidth(){return si(this.leftCols)}getDisplayedColumnsRightWidth(){return si(this.rightCols)}isColAtEdge(e,t){const o=this.allCols;if(!o.length)return!1;const n=t==="first";let i;if(no(e)){const s=e.getDisplayedLeafColumns();if(!s.length)return!1;i=n?s[0]:Vt(s)}else i=e;return(n?o[0]:Vt(o))===i}};function Ds(e,t,o){if(e)for(let n=0;n<e.length;n++){const i=e[n];if(no(i)){const s=t?i.getDisplayedChildren():i.getChildren();Ds(s,t,o)}o(i)}}function Ph(e){const t=[];return Ds(e,!0,o=>{mi(o)&&t.push(o)}),t}var tN=class extends Ie{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return di(null,t,o=>{Eo(o)&&e.push({groupId:o.getGroupId(),open:o.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const o=[];di(null,t,n=>{if(Eo(n)){const i=n.getColGroupDef(),s={groupId:n.getGroupId(),open:i?i.openByDefault:void 0};o.push(s)}}),this.setColumnGroupState(o,e)}setColumnGroupState(e,t){const{colModel:o,colAnimation:n,visibleCols:i,eventSvc:s}=this.beans;if(!o.getColTree().length)return;n==null||n.start();const a=[];e.forEach(l=>{const c=l.groupId,u=l.open,d=this.getProvidedColGroup(c);d&&d.isExpanded()!==u&&(d.setExpanded(u),a.push(d))}),i.refresh(t,!0),a.length&&s.dispatchEvent({type:"columnGroupOpened",columnGroup:a.length===1?a[0]:void 0,columnGroups:a}),n==null||n.finish()}setColumnGroupOpened(e,t,o){let n;Eo(e)?n=e.getId():n=e||"",this.setColumnGroupState([{groupId:n,open:t}],o)}getProvidedColGroup(e){let t=null;return di(null,this.beans.colModel.getColTree(),o=>{Eo(o)&&o.getId()===e&&(t=o)}),t}getGroupAtDirection(e,t){const o=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),i=t==="After"?Vt(n):n[0],s=`getCol${t}`;for(;;){const r=this.beans.visibleCols[s](i);if(!r)return null;const a=this.getColGroupAtLevel(r,o);if(a!==e)return a}}getColGroupAtLevel(e,t){let o=e.getParent(),n,i;for(;n=o.getProvidedColumnGroup().getLevel(),i=o.getPaddingLevel(),!(n+i<=t);)o=o.getParent();return o}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();Ds(e,!1,t=>{no(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(no(e))return e;const o=this.beans.visibleCols.getAllTrees(),n=typeof t=="number";let i=null;return Ds(o,!1,s=>{if(no(s)){const r=s;let a;n?a=e===r.getGroupId()&&t===r.getPartId():a=e===r.getGroupId(),a&&(i=r)}}),i}createColumnGroups(e){const{columns:t,idCreator:o,pinned:n,oldDisplayedGroups:i,isStandaloneStructure:s}=e,r=this.mapOldGroupsById(i),a=[];let l=t;for(;l.length;){const c=l;l=[];let u=0;const d=h=>{const f=u;u=h;const v=c[f],b=(no(v)?v.getProvidedColumnGroup():v).getOriginalParent();if(b==null){for(let R=f;R<h;R++)a.push(c[R]);return}const S=this.createColumnGroup(b,o,r,n,s);for(let R=f;R<h;R++)S.addChild(c[R]);l.push(S)};for(let h=1;h<c.length;h++){const f=c[h],m=(no(f)?f.getProvidedColumnGroup():f).getOriginalParent(),b=c[u],R=(no(b)?b.getProvidedColumnGroup():b).getOriginalParent();m!==R&&d(h)}u<c.length&&d(c.length)}return s||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,o,n,i,s,r){const a=i.getUniqueKey(t.groupId||null,null),l=yy(this.beans,t,a),c=new Hc(l,a,!1,o);this.createBean(c);const u=this.findExistingGroup(t,s);u&&s.splice(u.idx,1);const d=u==null?void 0:u.group;d&&c.setExpanded(d.isExpanded());const h=oS(this.beans,l.children,o+1,e,n,i,s,r);return c.setChildren(h),c}balanceColumnTree(e,t,o,n){const i=[];for(let s=0;s<e.length;s++){const r=e[s];if(Eo(r)){const a=r,l=this.balanceColumnTree(a.getChildren(),t+1,o,n);a.setChildren(l),i.push(a)}else{let a,l;for(let c=o-1;c>=t;c--){const u=n.getUniqueKey(null,null),d=yy(this.beans,null,u),h=new Hc(d,u,!0,t);this.createBean(h),l&&l.setChildren([h]),l=h,a||(a=l)}if(a&&l)if(i.push(a),e.some(u=>Eo(u))){l.setChildren([r]);continue}else{l.setChildren(e);break}i.push(r)}}return i}findDepth(e){let t=0,o=e;for(;o&&o[0]&&Eo(o[0]);)t++,o=o[0].getChildren();return t}findMaxDepth(e,t){let o=t;for(let n=0;n<e.length;n++){const i=e[n];if(Eo(i)){const s=i,r=this.findMaxDepth(s.getChildren(),t+1);o<r&&(o=r)}}return o}balanceTreeForAutoCols(e,t){const o=[];return e.forEach(n=>{let i=n;for(let s=t-1;s>=0;s--){const r=new Hc(null,`FAKE_PATH_${n.getId()}}_${s}`,!0,s);this.createBean(r),r.setChildren([i]),i.originalParent=r,i=r}t===0&&(n.originalParent=null),o.push(i)}),o}findExistingGroup(e,t){if(e.groupId!=null)for(let n=0;n<t.length;n++){const i=t[n];if(i.getColGroupDef()&&i.getId()===e.groupId)return{idx:n,group:i}}}createColumnGroup(e,t,o,n,i){const s=e.getGroupId(),r=t.getInstanceIdForKey(s),a=ES(s,r);let l=o[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),Ye(l)?l.reset():(l=new PS(e,s,r,n),i||this.createBean(l)),l}mapOldGroupsById(e){const t={},o=n=>{n.forEach(i=>{if(no(i)){const s=i;t[i.getUniqueId()]=s,o(s.getChildren())}})};return e&&o(e),t}setupParentsIntoCols(e,t){e.forEach(o=>{if(o.parent=t,no(o)){const n=o;this.setupParentsIntoCols(n.getChildren(),n)}})}},oN={moduleName:"ColumnGroup",version:Je,dynamicBeans:{headerGroupCellCtrl:VB},beans:[tN],apiFunctions:{getAllDisplayedColumnGroups:ZB,getCenterDisplayedColumnGroups:YB,getColumnGroup:WB,getColumnGroupState:jB,getDisplayNameForColumnGroup:$B,getLeftDisplayedColumnGroups:QB,getProvidedColumnGroup:UB,getRightDisplayedColumnGroups:JB,resetColumnGroupState:qB,setColumnGroupOpened:zB,setColumnGroupState:KB}},nN={moduleName:"CheckboxCellRenderer",version:Je,userComponents:{agCheckboxCellRenderer:$L}};function iN(e,t){const o=e.colModel.getColDefCol(t);return o?o.getColDef():null}function sN(e){return e.colModel.getColumnDefs()}function rN(e,t,o){return e.colNames.getDisplayNameForColumn(t,o)||""}function aN(e,t){return e.colModel.getColDefCol(t)}function lN(e){return e.colModel.getColDefCols()}function cN(e,t){return wn(e,t,"api")}function uN(e){return bu(e)}function dN(e){$I(e,"api")}function hN(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function fN(e){return e.visibleCols.isPinningLeft()}function pN(e){return e.visibleCols.isPinningRight()}function gN(e,t){return e.visibleCols.getColAfter(t)}function mN(e,t){return e.visibleCols.getColBefore(t)}function vN(e,t,o){e.colModel.setColsVisible(t,o,"api")}function yN(e,t,o){var n;(n=e.pinnedCols)==null||n.setColsPinned(t,o,"api")}function CN(e){return e.colModel.getCols()}function bN(e){return e.visibleCols.leftCols}function wN(e){return e.visibleCols.centerCols}function SN(e){return e.visibleCols.rightCols}function xN(e){return e.visibleCols.allCols}function RN(e){return e.colViewport.getViewportColumns()}function Gf(e,t){if(!e)return;const o=e,n={};return Object.keys(o).forEach(i=>{if(t&&t.indexOf(i)>=0||Y0.has(i))return;const s=o[i];typeof s=="object"&&s!==null&&s.constructor===Object?n[i]=Gf(s):n[i]=s}),n}var _N=class extends Ie{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,o,n){var a,l;const i=e.slice();t?i.sort((c,u)=>o.indexOf(c)-o.indexOf(u)):o&&i.sort((c,u)=>n.indexOf(c)-n.indexOf(u));const s=(a=this.rowGroupColsSvc)==null?void 0:a.columns,r=(l=this.pivotColsSvc)==null?void 0:l.columns;return this.buildColumnDefs(i,s,r)}buildColumnDefs(e,t=[],o=[]){const n=[],i={};return e.forEach(s=>{const r=this.createDefFromColumn(s,t,o);let a=!0,l=r,c=s.getOriginalParent(),u=null;for(;c;){let d=null;if(c.isPadding()){c=c.getOriginalParent();continue}const h=i[c.getGroupId()];if(h){h.children.push(l),a=!1;break}if(d=this.createDefFromGroup(c),d&&(d.children=[l],i[d.groupId]=d,l=d,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&n.push(l)}),n}createDefFromGroup(e){const t=Gf(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,o){const n=Gf(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?o.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=e.isVisible()?void 0:!0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,n}},EN=class extends Ie{constructor(){super(...arguments),this.beanName="colFlex"}refreshFlexedColumns(e={}){const t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);const o=this.flexViewportWidth;if(!o)return[];const{visibleCols:n}=this.beans,i=n.centerCols;let s=-1;if(e.resizingCols){const v=new Set(e.resizingCols);for(let m=i.length-1;m>=0;m--)if(v.has(i[m])){s=m;break}}let r=!1;const a=i.map((v,m)=>{const b=v.getFlex(),S=b!=null&&b>0&&m>s;return r||(r=S),{col:v,isFlex:S,flex:Math.max(0,b??0),initialSize:v.getActualWidth(),min:v.getMinWidth(),max:v.getMaxWidth(),targetSize:0}});if(!r)return[];let l=a.length,c=a.reduce((v,m)=>v+m.flex,0),u=o;const d=(v,m)=>{v.frozenSize=m,v.col.setActualWidth(m,t),u-=m,c-=v.flex,l-=1},h=v=>v.frozenSize!=null;for(const v of a)v.isFlex||d(v,v.initialSize);for(;l>0;){const v=Math.round(c<1?u*c:u);let m,b=0,S=0;for(const M of a){if(h(M))continue;m=M,S+=v*(M.flex/c);const I=S-b,W=Math.round(I);M.targetSize=W,b+=W}m&&(m.targetSize+=v-b);let R=0;for(const M of a){if(h(M))continue;const I=M.targetSize,W=Math.min(Math.max(I,M.min),M.max);R+=W-I,M.violationType=W===I?void 0:W<I?"max":"min",M.targetSize=W}const _=R===0?"all":R>0?"min":"max";for(const M of a)h(M)||(_==="all"||M.violationType===_)&&d(M,M.targetSize)}e.skipSetLeft||n.setLeftValues(t),e.updateBodyWidths&&n.updateBodyWidths();const f=a.filter(v=>v.isFlex&&!v.violationType).map(v=>v.col);if(e.fireResizedEvent){const v=a.filter(b=>b.initialSize!==b.frozenSize).map(b=>b.col),m=a.filter(b=>b.flex).map(b=>b.col);Nr(this.eventSvc,v,!0,t,m)}return f}initCol(e){const{flex:t,initialFlex:o}=e.colDef;t!==void 0?e.flex=t:o!==void 0&&(e.flex=o)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}},PN=class extends Ie{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={};this.dataTypeDefinitions=t;const o={};this.formatValueFuncs=o;const n=r=>a=>{const{column:l,node:c,value:u}=a;let d=l.getColDef().valueFormatter;return d===r.groupSafeValueFormatter&&(d=r.valueFormatter),this.beans.valueSvc.formatValue(l,c,u,d)};for(const r of Object.keys(e)){const a=e[r],l={...a,groupSafeValueFormatter:Uy(a,this.gos)};t[r]=l,o[r]=n(l)}const i=this.gos.get("dataTypeDefinitions")??{},s={};this.dataTypeMatchers=s;for(const r of Object.keys(i)){const a=i[r],l=this.processDataTypeDefinition(a,i,[r],e);l&&(t[r]=l,a.dataTypeMatcher&&(s[r]=a.dataTypeMatcher),o[r]=n(l))}this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(r=>{const a=s[r];a&&delete s[r],s[r]=a??e[r].dataTypeMatcher})}processDataTypeDefinition(e,t,o,n){let i;const s=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let r=n[s];const a=t[s];if(r&&a&&(r=a),!Wy(e,r,s))return;i=zy(r,e)}else{if(o.includes(s)){Ue(44);return}const r=t[s];if(!Wy(e,r,s))return;const a=this.processDataTypeDefinition(r,t,[...o,s],n);if(!a)return;i=zy(a,e)}return{...i,groupSafeValueFormatter:Uy(i,this.gos)}}updateColDefAndGetColumnType(e,t,o){let{cellDataType:n}=t;const{field:i}=t;if(n===void 0&&(n=e.cellDataType),(n==null||n===!0)&&(n=this.canInferCellDataType(e,t)?this.inferCellDataType(i,o):!1),!n){e.cellDataType=!1;return}const s=this.dataTypeDefinitions[n];if(!s){Ue(47,{cellDataType:n});return}return e.cellDataType=n,s.groupSafeValueFormatter&&(e.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(e.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,n,s,o),s.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const o=n=>{t.add(n.key)};e.__addEventListener("columnStateUpdated",o),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",o))}canInferCellDataType(e,t){const{gos:o}=this;if(!Co(o))return!1;const n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(Fh(t,n))return!1;const i=t.type===null?e.type:t.type;if(i){const s=o.get("columnTypes")??{};if(Cu(i).some(a=>{const l=s[a.trim()];return l&&Fh(l,n)}))return!1}return!Fh(e,n)}inferCellDataType(e,t){if(!e)return;let o;const n=this.getInitialData();if(n){const i=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");o=Ga(n,e,i)}else this.initWaitForRowData(t);if(o!=null)return Object.keys(this.dataTypeMatchers).find(i=>this.dataTypeMatchers[i](o))??"object"}getInitialData(){var t;const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const o=(t=this.beans.rowModel.rootNode)==null?void 0:t.allLeafChildren;if(o!=null&&o.length)return o[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:o,eventSvc:n}=this.beans;t&&o&&(o.shouldQueueResizeOperations=!0);const[i]=this.addManagedEventListeners({rowDataUpdateStarted:s=>{const{firstRowData:r}=s;r&&(i==null||i(),this.isPendingInference=!1,this.processColumnsPendingInference(r,t),this.columnStateUpdatesPendingInference={},t&&(o==null||o.processResizeOperations()),n.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const o=[];this.destroyColumnStateUpdateListeners();const n={},i={};for(const s of Object.keys(this.columnStateUpdatesPendingInference)){const r=this.columnStateUpdatesPendingInference[s],a=this.colModel.getCol(s);if(!a)return;const l=a.getColDef();if(!this.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const c=a.getColDef();if(t&&c.type&&c.type!==l.type){const u=DN(a,r);u.rowGroup&&u.rowGroupIndex==null&&(n[s]=u),u.pivot&&u.pivotIndex==null&&(i[s]=u),o.push(u)}}t&&o.push(...this.generateColumnStateForRowGroupAndPivotIndexes(n,i)),o.length&&wn(this.beans,{state:o},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const o={},{rowGroupColsSvc:n,pivotColsSvc:i}=this.beans;return n==null||n.restoreColumnOrder(o,e),i==null||i.restoreColumnOrder(o,t),Object.values(o)}resetColDefIntoCol(e,t){const o=e.getUserProvidedColDef();if(!o)return!1;const n=kf(this.beans,o,e.getColId());return e.setColDef(n,o,t),!0}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,o=e.object;this.hasObjectValueParser=t.valueParser!==o.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==o.valueFormatter}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var n;if(t==null)return!0;const o=(n=this.getDataTypeDefinition(e))==null?void 0:n.dataTypeMatcher;return o?o(t):!0}validateColDef(e){const t=o=>Ue(48,{property:o});if(e.cellDataType==="object"){const{object:o}=this.dataTypeDefinitions;e.valueFormatter===o.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===o.valueParser&&!this.hasObjectValueParser&&t("Parser")}}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,o,n){var s;const i=this.formatValueFuncs[t];switch(o.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.getFindText=()=>null,e.suppressKeyboardEvent=r=>!!r.colDef.editable&&r.event.key===Te.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=i;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=i;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(r,a)=>{const l=this.colModel.getColDefCol(n),c=l==null?void 0:l.getColDef();if(!l||!c)return 0;const u=r==null?"":i({column:l,node:null,value:r}),d=a==null?"":i({column:l,node:null,value:a});return u===d?0:u>d?1:-1},e.keyCreator=i;break}}(s=this.beans.filterManager)==null||s.setColDefPropertiesForDataType(e,o,i)}getDefaultDataTypes(){const e=o=>!!o.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:o=>{var n,i;return((i=(n=o.newValue)==null?void 0:n.trim)==null?void 0:i.call(n))===""?null:Number(o.newValue)},valueFormatter:o=>o.value==null?"":typeof o.value!="number"||isNaN(o.value)?t("invalidNumber","Invalid Number"):String(o.value),dataTypeMatcher:o=>typeof o=="number"},text:{baseDataType:"text",valueParser:o=>o.newValue===""?null:Ef(o.newValue),dataTypeMatcher:o=>typeof o=="string"},boolean:{baseDataType:"boolean",valueParser:o=>{var n,i;return o.newValue==null?o.newValue:((i=(n=o.newValue)==null?void 0:n.trim)==null?void 0:i.call(n))===""?null:String(o.newValue).toLowerCase()==="true"},valueFormatter:o=>o.value==null?"":String(o.value),dataTypeMatcher:o=>typeof o=="boolean"},date:{baseDataType:"date",valueParser:o=>zo(o.newValue==null?null:String(o.newValue)),valueFormatter:o=>o.value==null?"":!(o.value instanceof Date)||isNaN(o.value.getTime())?t("invalidDate","Invalid Date"):cn(o.value,!1)??"",dataTypeMatcher:o=>o instanceof Date},dateString:{baseDataType:"dateString",dateParser:o=>zo(o)??void 0,dateFormatter:o=>cn(o??null,!1)??void 0,valueParser:o=>e(String(o.newValue))?o.newValue:null,valueFormatter:o=>e(String(o.value))?o.value:"",dataTypeMatcher:o=>typeof o=="string"&&e(o)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:o=>Ef(o.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function zy(e,t){const o={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(o.columnTypes=[...Cu(e.columnTypes),...Cu(t.columnTypes)]),o}function Wy(e,t,o){return t?t.baseDataType!==e.baseDataType?(Ue(46),!1):!0:(Ue(45,{parentCellDataType:o}),!1)}function Uy(e,t){if(e.valueFormatter)return o=>{var n,i;if((n=o.node)!=null&&n.group){const s=(o.colDef.pivotValueColumn??o.column).getAggFunc();if(s){if(s==="first"||s==="last")return e.valueFormatter(o);if(e.baseDataType==="number"&&s!=="count"){if(typeof o.value=="number")return e.valueFormatter(o);if(typeof o.value=="object"){if(!o.value)return;if("toNumber"in o.value)return e.valueFormatter({...o,value:o.value.toNumber()});if("value"in o.value)return e.valueFormatter({...o,value:o.value.value})}}return}if(t.get("groupDisplayType")==="groupRows"&&!t.get("treeData"))return}else if(t.get("groupHideOpenParents")&&o.column.isRowGroupActive()&&typeof o.value=="string"&&!((i=e.dataTypeMatcher)!=null&&i.call(e,o.value)))return;return e.valueFormatter(o)}}function FN(e,t,o,n){if(!t[o])return!1;const i=e[o];return i===null?(t[o]=!1,!1):n===void 0?!!i:i===n}function Fh(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([o,n])=>FN(e,t,o,n))}function DN(e,t){const o=cS(e);return t.forEach(n=>{delete o[n],n==="rowGroup"?delete o.rowGroupIndex:n==="pivot"&&delete o.pivotIndex}),o}var TN={moduleName:"DataType",version:Je,beans:[PN],dependsOn:[nN]},kN={moduleName:"ColumnFlex",version:Je,beans:[EN]},AN={moduleName:"ColumnApi",version:Je,beans:[_N],apiFunctions:{getColumnDef:iN,getDisplayNameForColumn:rN,getColumn:aN,getColumns:lN,applyColumnState:cN,getColumnState:uN,resetColumnState:dN,isPinning:hN,isPinningLeft:fN,isPinningRight:pN,getDisplayedColAfter:gN,getDisplayedColBefore:mN,setColumnsVisible:vN,setColumnsPinned:yN,getAllGridColumns:CN,getDisplayedLeftColumns:bN,getDisplayedCenterColumns:wN,getDisplayedRightColumns:SN,getAllDisplayedColumns:xN,getAllDisplayedVirtualColumns:RN,getColumnDefs:sN}};function IN(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,o=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(o,"$1 $2$3").replace(/\./g," ").split(" ").map(i=>i.substring(0,1).toUpperCase()+(i.length>1?i.substring(1,i.length):"")).join(" ")}var MN=class extends Ie{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,o=!1){if(!e)return null;const n=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:i}=this.beans;return o&&i?i.getHeaderName(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,o){const n=t==null?void 0:t.getColGroupDef();return n?this.getHeaderName(n,null,e,t,o):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,o,n,i){var r;const s=e.headerValueGetter;if(s){const a=pt(this.gos,{colDef:e,column:t,columnGroup:o,providedColumnGroup:n,location:i});return typeof s=="function"?s(a):typeof s=="string"?((r=this.beans.expressionSvc)==null?void 0:r.evaluate(s,a))??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return IN(e.field)}return""}},ON=class extends Ie{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,o=!1){const{visibleCols:n}=this,i=n.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!i)){if(this.scrollWidth=e,this.scrollPosition=t,n.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const r=n.bodyWidth;this.viewportLeft=r-t-e,this.viewportRight=r-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(o)}}getHeadersToRender(e,t){let o;switch(e){case"left":o=this.rowsOfHeadersToRenderLeft[t];break;case"right":o=this.rowsOfHeadersToRenderRight[t];break;default:o=this.rowsOfHeadersToRenderCenter[t];break}return o||[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(e){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},e||(this.colsWithinViewportHash="")}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||LN(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,o=t+e.getActualWidth(),n=this.viewportLeft-200,i=this.viewportRight+200,s=t<n&&o<n,r=t>i&&o>i;return!s&&!r}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=s=>{const r=s.getLeft();return Ye(r)&&r>this.viewportLeft},o=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:n}=this,i=n.centerCols;return n.getColsForRow(e,i,o,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){this.clear(!0);const e={},{leftCols:t,rightCols:o,treeLeft:n,treeRight:i,treeCenter:s}=this.visibleCols;this.headerColsWithinViewport.concat(t).concat(o).forEach(l=>e[l.getId()]=!0);const a=(l,c,u)=>{let d=!1;for(let h=0;h<l.length;h++){const f=l[h];let v=!1;if(mi(f))v=e[f.getId()]===!0;else{const b=f.getDisplayedChildren();b&&(v=a(b,c,u+1))}v&&(d=!0,c[u]||(c[u]=[]),c[u].push(f))}return d};a(n,this.rowsOfHeadersToRenderLeft,0),a(i,this.rowsOfHeadersToRenderRight,0),a(s,this.rowsOfHeadersToRenderCenter,0)}extractViewport(){const e=n=>`${n.getId()}-${n.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),o=this.colsWithinViewportHash!==t;return o&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),o}};function LN(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var BN=class extends Ie{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class o{refresh(){return!1}getGui(){return this.eGui}init(i){const s=t(i),r=typeof s;if(r==="string"||r==="number"||r==="boolean"){this.eGui=Op("<span>"+s+"</span>");return}if(s==null){this.eGui=Ut({tag:"span"});return}this.eGui=s}}return o}},NN={moduleName:"CellRendererFunction",version:Je,beans:[BN]},HN=class extends Ie{constructor(){super(...arguments),this.beanName="registry",this.agGridDefaults={},this.agGridDefaultParams={},this.jsComps={},this.dynamicBeans={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(e!=null)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:o,dynamicBeans:n,selectors:i}=e;if(o){const s=(r,a,l)=>{this.agGridDefaults[r]=a,l&&(this.agGridDefaultParams[r]=l)};for(const r of Object.keys(o)){const a=o[r];typeof a=="object"?s(r,a.classImp,a.params):s(r,a)}}if(n)for(const s of Object.keys(n))this.dynamicBeans[s]=n[s];if(i==null||i.forEach(s=>{this.selectors[s.selector]=s}),t)for(const s of Object.keys(t))this.icons[s]=t[s]}getUserComponent(e,t){var a;const o=(l,c,u)=>({componentFromFramework:c,component:l,params:u}),{frameworkOverrides:n}=this.beans,i=n.frameworkComponent(t,this.gos.get("components"));if(i!=null)return o(i,!0);const s=this.jsComps[t];if(s){const l=n.isFrameworkComponent(s);return o(s,l)}const r=this.agGridDefaults[t];return r?o(r,!1,this.agGridDefaultParams[t]):((a=this.beans.validation)==null||a.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null)}createDynamicBean(e,t,...o){const n=this.dynamicBeans[e];if(n==null){if(t)throw new Error(Ui(256));return}return new n(...o)}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}},GN=23,VN=class extends Ie{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){var e,t;this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(o=>o(this.params)),this.readyCallbacks.length=0)},((t=(e=this.beans.frameworkOverrides).runWhenReadyAsync)==null?void 0:t.call(e))??!1)}updateReady(){const e=Object.values(this.params);this.ready=e.length===GN&&e.every(t=>(t==null?void 0:t.isAlive())??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const o=this.readyCallbacks.indexOf(t);o>=0&&this.readyCallbacks.splice(o,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:o}=this.params;return[e,o,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},zN=':where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none}}:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{opacity:1}50%{opacity:.4}to{opacity:1}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-chart,.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-accent-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto}.ag-menu,.ag-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-resizer{pointer-events:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',TC,kC,rg=typeof window!="object"||!((kC=(TC=window==null?void 0:window.document)==null?void 0:TC.fonts)!=null&&kC.forEach),Vr=(e,t,o,n,i,s)=>{if(rg)return;n&&(e=`@layer ${CSS.escape(n)} { ${e} }`);let r=xr.map.get(t);if(r||(r=[],xr.map.set(t,r)),r.find(u=>u.css===e))return;const a=document.createElement("style");s&&a.setAttribute("nonce",s),a.dataset.agGlobalCss=o,a.textContent=e;const l={css:e,el:a,priority:i};let c;for(const u of r){if(u.priority>i)break;c=u}if(c){c.el.insertAdjacentElement("afterend",a);const u=r.indexOf(c);r.splice(u+1,0,l)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),r.push(l)},ex=(e,t,o)=>{Vr(zN,e,"core",t,0,o),Array.from(HM()).sort((n,i)=>n.moduleName.localeCompare(i.moduleName)).forEach(n=>{var i;return(i=n.css)==null?void 0:i.forEach(s=>Vr(s,e,`module-${n.moduleName}`,t,0,o))})},WN=e=>{xr.grids.add(e)},UN=e=>{if(xr.grids.delete(e),xr.grids.size===0){xr.map=new WeakMap;for(const t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},$y,xr=($y=typeof window=="object"?window:{}).agStyleInjectionState??($y.agStyleInjectionState={map:new WeakMap,grids:new Set}),vi=e=>new tx(e),Hi="$default",$N=0,tx=class{constructor({feature:e,params:t,modeParams:o={},css:n,cssImports:i}){this.feature=e,this.css=n,this.cssImports=i,this.modeParams={[Hi]:{...o[Hi]??{},...t??{}},...o}}use(e,t,o){let n=this._inject;if(n==null){let{css:i}=this;if(i){const s=`ag-theme-${this.feature??"part"}-${++$N}`;typeof i=="function"&&(i=i()),i=`:where(.${s}) {
${i}
}
`;for(const r of this.cssImports??[])i=`@import url(${JSON.stringify(r)});
${i}`;n={css:i,class:s}}else n=!1;this._inject=n}return n&&e&&Vr(n.css,e,n.class,t,1,o),n?n.class:!1}},jN=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),ox=e=>`--ag-${jN(e)}`,Qn=e=>`var(${ox(e)})`,KN=(e,t,o)=>Math.max(t,Math.min(o,e)),qN=e=>{const t=new Map;return o=>{const n=o;return t.has(n)||t.set(n,e(o)),t.get(n)}},Mn=e=>({ref:"accentColor",mix:e}),on=e=>({ref:"foregroundColor",mix:e}),yn=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),QN=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),qo={ref:"backgroundColor"},va={ref:"foregroundColor"},Vi={ref:"accentColor"},Tu={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:on(.15),chromeBackgroundColor:yn(.02),browserColorScheme:"light"},YN={...Tu,textColor:va,accentColor:"#2196f3",invalidColor:"#e02525",wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:qo,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},subtleTextColor:{ref:"textColor",mix:.5},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Vi,rangeSelectionBackgroundColor:Mn(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:Mn(.5),rangeHeaderHighlightColor:QN(.08),rowNumbersSelectedColor:Mn(.5),rowHoverColor:Mn(.08),columnHoverColor:Mn(.05),selectedRowBackgroundColor:Mn(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:qo,borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",spacing:8,fontSize:14,rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},dragAndDropImageBackgroundColor:qo,dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:"popupShadow"},dragHandleColor:on(.7),focusShadow:{spread:3,color:Mn(.5)},headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},iconSize:16,iconColor:"inherit",iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:on(.1),iconButtonActiveColor:Vi,iconButtonActiveBackgroundColor:Mn(.28),iconButtonActiveIndicatorColor:Vi,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Vi,toggleButtonOffBackgroundColor:yn(.3),toggleButtonSwitchBackgroundColor:qo,toggleButtonSwitchInset:2,menuBorder:{color:on(.2)},menuBackgroundColor:yn(.03),menuTextColor:yn(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:on(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Vi},cellEditingShadow:{ref:"cardShadow"},dialogBorder:{color:on(.2)},panelBackgroundColor:qo,panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipTextColor:{ref:"textColor"},tooltipBorder:!0,columnDropCellBackgroundColor:on(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:on(.13)},selectCellBackgroundColor:on(.07),selectCellBorder:{color:on(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",findMatchColor:va,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:va,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:on(.15),statusBarLabelColor:va,statusBarLabelFontWeight:500,statusBarValueColor:va,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"backgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"backgroundColor"},pinnedRowTextColor:{ref:"textColor"}},JN=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",ZN={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},XN=()=>vi({feature:"buttonStyle",params:{...ZN,buttonBackgroundColor:qo,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Vi}},css:JN}),eH=XN(),tH=".ag-column-drop-vertical-empty-message{align-items:center;border:1px dashed;border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",oH=()=>vi({feature:"columnDropStyle",css:tH}),nx=oH(),nH=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],iH=qN(e=>(e=e.toLowerCase(),nH.find(t=>e.endsWith(t.toLowerCase()))??"length")),td=e=>typeof e=="object"&&(e!=null&&e.ref)?Qn(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,ag=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){const t=Qn(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?Qn(e.onto):"transparent"}, ${t} ${KN(e.mix*100,0,100)}%)`}return!1},sH=td,hr=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,o=>o[0]==="-"?o:` ${Qn(o)} `)})`:e&&"ref"in e?Qn(e.ref):!1,rH=td,aH=(e,t)=>typeof e=="string"?e:e===!0?"solid 1px var(--ag-border-color)":e===!1?t==="columnBorder"?"solid 1px transparent":"none":e&&"ref"in e?Qn(e.ref):ix(e.style??"solid")+" "+hr(e.width??1)+" "+ag(e.color??{ref:"borderColor"}),lH=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?Qn(e.ref):[hr(e.offsetX??0),hr(e.offsetY??0),hr(e.radius??0),hr(e.spread??0),ag(e.color??{ref:"foregroundColor"})].join(" "),ix=td,sx=e=>typeof e=="string"?e.includes(",")?e:jy(e):e&&"googleFont"in e?sx(e.googleFont):e&&"ref"in e?Qn(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),jy(t))).join(", "):!1,jy=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),cH=td,rx=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?rx({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?Qn(e.ref):!1,uH=(e,t)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&Nt(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?Qn(e.ref):!1,dH={color:ag,colorScheme:sH,length:hr,scale:rH,border:aH,borderStyle:ix,shadow:lH,image:rx,fontFamily:sx,fontWeight:cH,duration:uH},hH=(e,t)=>{const o=iH(e);return dH[o](t,e)},fH=()=>new ax().withPart(eH).withPart(nx),ax=class lx{constructor(t=[]){this.parts=t}withPart(t){return typeof t=="function"&&(t=t()),t instanceof tx?new lx([...this.parts,t]):(Ra(259,{part:t},"Invalid part"),this)}withoutPart(t){return this.withPart(vi({feature:t}))}withParams(t,o=Hi){return this.withPart(vi({modeParams:{[o]:t}}))}_startUse({styleContainer:t,cssLayer:o,nonce:n,loadThemeGoogleFonts:i}){if(rg)return;gH(),ex(t,o,n);const s=pH(this);if(s.length>0)for(const r of s)i&&vH(r,n);for(const r of this.parts)r.use(t,o,n)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=Ky(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){const o={[Hi]:{...YN}};for(const n of Ky(this.parts))for(const i of Object.keys(n.modeParams)){const s=n.modeParams[i];if(s){const r=o[i]??(o[i]={}),a=new Set;for(const l of Object.keys(s)){const c=s[l];c!==void 0&&(r[l]=c,a.add(l))}if(i===Hi)for(const l of Object.keys(o)){const c=o[l];if(l!==Hi)for(const u of a)delete c[u]}}}this._paramsCache=t=o}return t}_getPerGridCss(t){const o="##SELECTOR##";let n=this._paramsCssCache;if(!n){let i="",s="";const r=this._getModeParams();for(const l of Object.keys(r)){const c=r[l];if(l!==Hi){const d=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(l):l}"]) & {
`;i+=d,s+=d}for(const u of Object.keys(c).sort()){const d=c[u],h=hH(u,d);if(h===!1)Nt(107,{key:u,value:d});else{const f=ox(u),v=f.replace("--ag-","--ag-inherited-");i+=`	${f}: var(${v}, ${h});
`,s+=`	${v}: var(${f});
`}}l!==Hi&&(i+=`}
`,s+=`}
`)}let a=`${o} {
${i}}
`;a+=`:has(> ${o}):not(${o}) {
${s}}
`,this._paramsCssCache=n=a}return n.replaceAll(o,`:where(.${t})`)}},Ky=e=>{const t=new Map;for(const n of e)t.set(n.feature,n);const o=[];for(const n of e)(!n.feature||t.get(n.feature)===n)&&o.push(n);return o},pH=e=>{const t=new Set,o=s=>{if(Array.isArray(s))s.forEach(o);else{const r=s==null?void 0:s.googleFont;typeof r=="string"&&t.add(r)}};return Object.values(e._getModeParams()).flatMap(s=>Object.values(s)).forEach(o),Array.from(t).sort()},qy=!1,gH=()=>{if(!qy){qy=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},mH=new Set,vH=async(e,t)=>{mH.add(e);const o=`@import url('https://${yH}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;Vr(o,document.head,`googleFont:${e}`,void 0,0,t)},yH="fonts.googleapis.com",CH='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',bH=()=>vi({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:qo,checkboxUncheckedBorderColor:yn(.3),checkboxCheckedBackgroundColor:Vi,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:qo,checkboxIndeterminateBackgroundColor:yn(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:qo,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:CH}),wH=bH(),cx=()=>({...Tu,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:yn(.05),rowHoverColor:Mn(.15),selectedRowBackgroundColor:Mn(.2),menuBackgroundColor:yn(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",findMatchColor:qo,findActiveMatchColor:qo,checkboxUncheckedBorderColor:yn(.4),toggleButtonOffBackgroundColor:yn(.4)}),SH=()=>({...cx(),backgroundColor:"#1f2836"}),xH=()=>vi({feature:"colorScheme",params:Tu,modeParams:{light:Tu,dark:cx(),"dark-blue":SH()}}),RH=xH(),ux={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},dx={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>'},_H=(e={})=>{let t="";for(const o of[...Object.keys(ux),...Object.keys(dx)]){const n=EH(o,e.strokeWidth);t+=`.ag-icon-${o}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(n)}'); }
`}return t},EH=(e,t=1.5)=>{const o=dx[e];if(o)return o;const n=ux[e];if(!n)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+n+"</svg>"},PH=(e={})=>vi({feature:"iconSet",css:()=>_H(e)}),FH=PH(),DH=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',TH=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow)}}",kH={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"}},AH=()=>vi({feature:"inputStyle",params:{...kH,inputBackgroundColor:qo,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Vi},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:yn(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>DH+TH}),IH=AH(),MH='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:1px solid var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:1px solid var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',OH={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:1,tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},LH=()=>vi({feature:"tabStyle",params:{...OH,tabBarBorder:!0,tabBarBackgroundColor:on(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:qo},css:MH}),BH=LH(),NH=()=>fH().withPart(wH).withPart(RH).withPart(FH).withPart(BH).withPart(IH).withPart(nx).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),HH=NH(),GH={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},VH={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},zH={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},Qy={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},Yy={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},Jy={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},Dh={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},Zy={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0},WH=0,UH=class extends Ie{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass=`ag-theme-params-${++WH}`,this.globalCSS=[]}wireBeans(e){const{eGridDiv:t,gridOptions:o}=e;this.eGridDiv=t,this.eStyleContainer=o.themeStyleContainer??(t.getRootNode()===document?document.head:t),this.cssLayer=o.themeCssLayer,this.styleNonce=o.styleNonce}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(Qy),this.getSizeEl(Yy),this.getSizeEl(Jy),this.getSizeEl(Dh),this.getSizeEl(Zy),this.refreshRowBorderWidthVariable(),this.addDestroyFunc(()=>UN(this)),this.mutationObserver=new MutationObserver(()=>{this.fireGridStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(Zy)}getRowBorderWidth(){return this.getCSSVariablePixelValue(Dh)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(Qy)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(Yy)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(GH)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(VH),o=this.getCSSVariablePixelValue(zH);return e-1+o*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(Jy)}applyThemeClasses(e){const{gridTheme:t}=this;let o="";if(t)o=`${this.paramsClass} ${t._getCssClass()}`;else{this.mutationObserver.disconnect();let n=this.eGridDiv;for(;n;){let i=!1;for(const s of Array.from(n.classList))s.startsWith("ag-theme-")&&(i=!0,o=o?`${o} ${s}`:s);i&&this.mutationObserver.observe(n,{attributes:!0,attributeFilter:["class"]}),n=n.parentElement}}for(const n of Array.from(e.classList))n.startsWith("ag-theme-")&&e.classList.remove(n);if(o){const n=e.className;e.className=n+(n?" ":"")+o}}refreshRowHeightVariable(){const{eGridDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),o=this.gos.get("rowHeight");if(o==null||isNaN(o)||!isFinite(o))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;const n=`${o}px`;return t!=n?(e.style.setProperty("--ag-line-height",n),o):t!=""?parseFloat(t):-1}addGlobalCSS(e,t){this.gridTheme?Vr(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const o=this.measureSizeEl(e);return o==="detached"||o==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,o),o)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const o=t.offsetWidth;return o===Th?"no-styles":(this.sizesMeasured=!0,o)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=Ut({tag:"div",cls:"ag-measurement-container"}),this.eGridDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const o=this.getMeasurementContainer();t=Ut({tag:"div"});const{border:n,noWarn:i}=e;n?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${Th}px)`)):t.style.width=`var(${e.cssName}, ${Th}px)`,o.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);s==="no-styles"&&!i&&Ue(9,{variable:e});const r=Zi(this.beans,t,()=>{const a=this.measureSizeEl(e);a==="detached"||a==="no-styles"||(this.lastKnownValues.set(e,a),a!==s&&(s=a,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}fireGridStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(Dh);this.eGridDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}handleThemeGridOptionChange(){const{gos:e,eGridDiv:t,globalCSS:o,gridTheme:n}=this,i=e.get("theme");let s;if(i==="legacy")s=void 0;else{const r=i??HH;r instanceof ax?s=r:Nt(240,{theme:r})}if(s!==n){if(s){WN(this),ex(this.eStyleContainer,this.cssLayer,this.styleNonce);for(const[a,l]of o)Vr(a,this.eStyleContainer,l,this.cssLayer,0,this.styleNonce);o.length=0}this.gridTheme=s,s==null||s._startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce});let r=this.eParamsStyle;if(!r){r=this.eParamsStyle=Ut({tag:"style"});const a=this.gos.get("styleNonce");a&&r.setAttribute("nonce",a),t.appendChild(r)}rg||(r.textContent=(s==null?void 0:s._getPerGridCss(this.paramsClass))||""),this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged")}s&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&Nt(i?106:239)}},Th=15538,$H=class extends Ie{constructor(){super(...arguments),this.beanName="eventSvc",this.globalSvc=new Bs}postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}addEventListener(e,t,o){this.globalSvc.addEventListener(e,t,o)}removeEventListener(e,t,o){this.globalSvc.removeEventListener(e,t,o)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalSvc.dispatchEvent(pt(this.gos,e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(pt(this.gos,e))}};function hx(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}function Vf(e,t){let o;if(no(e)&&hx(e)&&e.isPadding()){const n=e;o=n.getLeafColumns()[0];let i=o;for(;i!==n;)t++,i=i.getParent()}return{column:o||e,headerRowIndex:t}}var jH=class extends Ie{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,o=>{this.gridBodyCon=o.gridBodyCtrl});const t=go(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let o;const{colModel:n,colGroupSvc:i,ctrlsSvc:s}=this.beans;if(typeof e=="string"?(o=n.getCol(e),o||(o=(i==null?void 0:i.getColumnGroup(e))??null)):o=e,!o)return null;const r=s.getHeaderRowContainerCtrl(),a=r==null?void 0:r.getAllCtrls(),l=Vt(a||[]).type==="filter",c=Vn(this.beans)-1;let u=-1,d=o;for(;d;)u++,d=d.getParent();let h=u;return t&&l&&h===c-1&&h++,h===-1?null:{headerRowIndex:h,column:o}}navigateVertically(e,t,o){const n=this.beans.focusSvc;if(t||(t=n.focusedHeader),!t)return!1;const{headerRowIndex:i}=t,s=t.column,r=Vn(this.beans),a=e==="UP",l=this.getHeaderRowType(i);let{headerRowIndex:c,column:u,headerRowIndexWithoutSpan:d}=a?KH(l,s,i):qH(l,s,i),h=!1;return c<0&&(c=0,u=s,h=!0),c>=r?(c=-1,this.currentHeaderRowWithoutSpan=-1):d!==void 0&&(this.currentHeaderRowWithoutSpan=d),!h&&!u?!1:n.focusHeaderPosition({headerPosition:{headerRowIndex:c,column:u},allowUserOverride:!0,event:o})}navigateHorizontally(e,t=!1,o){const{focusSvc:n,gos:i}=this.beans,s=n.focusedHeader;let r,a;this.currentHeaderRowWithoutSpan!==-1?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,e==="LEFT"!==i.get("enableRtl")?(a="Before",r=this.findHeader(s,a)):(a="After",r=this.findHeader(s,a));const l=i.getCallback("tabToNextHeader");if(t&&l){const c=n.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:r,direction:a});if(c){const{headerRowIndex:u}=n.focusedHeader||{};u!=null&&u!=s.headerRowIndex&&(this.currentHeaderRowWithoutSpan=u)}return c}return r||!t?n.focusHeaderPosition({headerPosition:r,direction:a,fromTab:t,allowUserOverride:!0,event:o}):this.focusNextHeaderRow(s,a,o)}focusNextHeaderRow(e,t,o){const n=e.headerRowIndex;let i=null,s;const r=this.beans;if(t==="Before"?n>0&&(s=n-1,this.currentHeaderRowWithoutSpan-=1,i=this.findColAtEdgeForHeaderRow(s,"end")):(s=n+1,this.currentHeaderRowWithoutSpan<Vn(r)?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1,i=this.findColAtEdgeForHeaderRow(s,"start")),!i)return!1;const{column:a,headerRowIndex:l}=Vf(i.column,i==null?void 0:i.headerRowIndex);return r.focusSvc.focusHeaderPosition({headerPosition:{column:a,headerRowIndex:l},direction:t,fromTab:!0,allowUserOverride:!0,event:o})}scrollToColumn(e,t="After"){if(e.getPinned())return;let o;if(no(e)){const n=e.getDisplayedLeafColumns();o=t==="Before"?Vt(n):n[0]}else o=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(o)}findHeader(e,t){let o,n;const{colGroupSvc:i,visibleCols:s}=this.beans;if(no(e.column)?o=(i==null?void 0:i.getGroupAtDirection(e.column,t))??void 0:(n=`getCol${t}`,o=s[n](e.column)),!o)return;const{headerRowIndex:r}=e;if(this.getHeaderRowType(r)!=="filter"){const c=[o];for(;o.getParent();)o=o.getParent(),c.push(o);o=c[Math.max(0,c.length-1-r)]}const{column:a,headerRowIndex:l}=Vf(o,r);return{column:a,headerRowIndex:l}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const{visibleCols:o,ctrlsSvc:n,colGroupSvc:i}=this.beans,s=o.allCols,r=s[t==="start"?0:s.length-1];if(!r)return;const a=n.getHeaderRowContainerCtrl(r.getPinned()),l=a==null?void 0:a.getRowType(e);if(l=="group"){const c=i==null?void 0:i.getColGroupAtLevel(r,e);return{headerRowIndex:e,column:c}}return{headerRowIndex:l==null?-1:e,column:r}}};function KH(e,t,o){const n=e==="filter",i=e==="column";let s=n?t:t.getParent(),r=o-1,a=r;if(i&&hx(t.getParent())){for(;s&&s.isPadding();)s=s.getParent(),r--;a=r,r<0&&(s=t,r=o,a=void 0)}return{column:s,headerRowIndex:r,headerRowIndexWithoutSpan:a}}function qH(e,t,o,n="After"){let i=t,s=o+1;const r=s;if(e==="group"){const a=t.getDisplayedLeafColumns(),l=n==="After"?a[0]:Vt(a),c=[];let u=l;for(;u.getParent()!==t;)u=u.getParent(),c.push(u);if(i=l,l.isSpanHeaderHeight())for(let d=c.length-1;d>=0;d--){const h=c[d];if(!h.isPadding()){i=h;break}s++}else i=Vt(c),i||(i=l)}return{column:i,headerRowIndex:s,headerRowIndexWithoutSpan:r}}var QH=class extends Ie{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(YM(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(Jt(this.beans),HS)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const e=Jt(this.beans);return this.isDomDataPresentInHierarchy(e,Ru)?!0:this.isDomDataPresentInHierarchy(e,Fu)}isDomDataPresentInHierarchy(e,t){let o=e;for(;o;){if(N0(this.gos,o,t))return!0;o=o.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:o,column:n}=e,i={rowIndex:t,rowPinned:o,column:n,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:o});return s&&(i.isFullWidthCell=s.isFullWidth()),i}clearFocusedCell(){if(this.focusedCell==null)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:o,rowPinned:n,forceBrowserFocus:i=!1,preventScrollOnBrowserFocus:s=!1}=e,r=this.colModel.getCol(t);if(!r){this.focusedCell=null;return}this.focusedCell={rowIndex:o,rowPinned:ci(n),column:r},this.eventSvc.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCell),forceBrowserFocus:i,preventScrollOnBrowserFocus:s})}isCellFocused(e){return this.focusedCell==null?!1:xS(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;const{column:t,rowCtrl:{rowIndex:o,pinned:n}}=e,{column:i,headerRowIndex:s}=this.focusedHeader;return t===i&&o===s&&n==i.getPinned()}focusHeaderPosition(e){var l;if(this.setFocusRecovered(),Fs(this.beans))return!1;const{direction:t,fromTab:o,allowUserOverride:n,event:i,fromCell:s,rowWithoutSpanValue:r}=e;let{headerPosition:a}=e;if(s&&((l=this.filterManager)!=null&&l.isAdvFilterHeaderActive()))return this.focusAdvancedFilter(a);if(n){const c=this.focusedHeader,u=Vn(this.beans);if(o){const d=this.gos.getCallback("tabToNextHeader");d&&(a=this.getHeaderPositionFromUserFunc({userFunc:d,direction:t,currentPosition:c,headerPosition:a,headerRowCount:u}))}else{const d=this.gos.getCallback("navigateToNextHeader");if(d&&i){const h={key:i.key,previousHeaderPosition:c,nextHeaderPosition:a,headerRowCount:u,event:i};a=d(h)}}}return a?this.focusProvidedHeaderPosition({headerPosition:a,direction:t,event:i,fromCell:s,rowWithoutSpanValue:r}):!1}focusHeaderPositionFromUserFunc(e){if(Fs(this.beans))return!1;const{userFunc:t,headerPosition:o,direction:n,event:i}=e,s=this.focusedHeader,r=Vn(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:n,currentPosition:s,headerPosition:o,headerRowCount:r});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:n,event:i})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:o,currentPosition:n,headerPosition:i,headerRowCount:s}=e,a=t({backwards:o==="Before",previousHeaderPosition:n,nextHeaderPosition:i,headerRowCount:s});return a===!0?n:a===!1?null:a}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:o,fromCell:n,rowWithoutSpanValue:i,event:s}=e,{column:r,headerRowIndex:a}=t,{filterManager:l,ctrlsSvc:c,headerNavigation:u}=this.beans;if(a===-1)return l!=null&&l.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:r,event:s});u==null||u.scrollToColumn(r,o);const d=c.getHeaderRowContainerCtrl(r.getPinned()),h=(d==null?void 0:d.focusHeader(t.headerRowIndex,r,s))||!1;return u&&h&&(i!=null||n)&&(u.currentHeaderRowWithoutSpan=i??-1),h}focusFirstHeader(){var n;if((n=this.overlays)!=null&&n.isExclusive()&&this.focusOverlay())return!0;let e=this.visibleCols.allCols[0];if(!e)return!1;const{colGroupSvc:t}=this.beans;t&&e.getParent()&&(e=t.getColGroupAtLevel(e,0));const o=Vf(e,0);return this.focusHeaderPosition({headerPosition:o,rowWithoutSpanValue:0})}focusLastHeader(e){var n;if((n=this.overlays)!=null&&n.isExclusive()&&this.focusOverlay(!0))return!0;const t=Vn(this.beans)-1,o=Vt(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:o},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){var t;return(t=this.filterManager)!=null&&t.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===ci(t)}focusOverlay(e){var o,n;const t=((o=this.overlays)==null?void 0:o.isVisible())&&((n=this.overlays.eWrapper)==null?void 0:n.getGui());return!!t&&Gs(t,e)}focusGridView(e){var s,r,a,l,c,u;const{backwards:t=!1,canFocusOverlay:o=!0,event:n}=e;if((s=this.overlays)!=null&&s.isExclusive())return o&&this.focusOverlay(t);if(Xu(this.beans))return t&&!Fs(this.beans)?this.focusLastHeader():o&&this.focusOverlay(t)?!0:t?!1:Gr(this.beans,t);const i=t?bO(this.beans):CO(this.beans);if(i){const d=e.column??((r=this.focusedHeader)==null?void 0:r.column),{rowIndex:h,rowPinned:f}=i,v=_u(this.beans,i);if(!d||!v||h==null)return!1;if(d.isSuppressNavigable(v)){const m=this.gos.get("enableRtl");let b;return!n||n.key===Te.TAB?b=m?Te.LEFT:Te.RIGHT:b=n.key,(a=this.beans.navigation)==null||a.navigateToNextCell(null,b,{rowIndex:h,column:d,rowPinned:f||null},!0),!0}if((l=this.navigation)==null||l.ensureCellVisible({rowIndex:h,column:d,rowPinned:f}),t){const m=this.rowRenderer.getRowByPosition(i);if(m!=null&&m.isFullWidth()&&((c=this.navigation)!=null&&c.tryToFocusFullWidthRow(i,t)))return!0}return this.setFocusedCell({rowIndex:h,column:d,rowPinned:ci(f),forceBrowserFocus:!0}),(u=this.beans.rangeSvc)==null||u.setRangeToCell({rowIndex:h,rowPinned:f,column:d}),!0}return!!(o&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){var t;return this.advFilterFocusColumn=e==null?void 0:e.column,((t=this.beans.advancedFilter)==null?void 0:t.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(e,t){var n;const o=(t?void 0:this.advFilterFocusColumn)??((n=this.visibleCols.allCols)==null?void 0:n[0]);return e?this.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:Vn(this.beans)-1}}):this.focusGridView({column:o})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},YH=class extends Ie{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;e!=null&&e.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){var o;const e=this.ctrlsSvc.get("center");if(!e||(o=this.colAnimation)!=null&&o.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),o=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==o)&&(this.horizontalScrollGap=t,this.verticalScrollGap=o,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),o=typeof e=="number"&&e>=0?e:GA();o!=null&&(this.scrollbarWidth=o,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},JH=class extends Ie{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){var n;if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:o}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:(e==null?void 0:e.getState())??{}}),this.destroyCalled=!0,(n=t.get("gridCtrl"))==null||n.destroyGridUi(),o.destroy(),super.destroy()}},$a=new Set(["gridPreDestroyed","fillStart","pasteStart"]),ZH={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1},ya=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),XH={tag:"span",cls:"ag-sort-indicator-container",children:[ya("Order","order"),ya("Asc","ascending-icon"),ya("Desc","descending-icon"),ya("Mixed","mixed-icon"),ya("None","none-icon")]},lg=class extends Bt{constructor(e){super(),this.eSortOrder=Qe,this.eSortAsc=Qe,this.eSortDesc=Qe,this.eSortMixed=Qe,this.eSortNone=Qe,e||this.setTemplate(XH)}attachCustomElements(e,t,o,n,i){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=o,this.eSortMixed=n,this.eSortNone=i}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const o=this.updateIcons.bind(this),n=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",o),this.addManagedEventListeners({newColumnsLoaded:o,sortChanged:n,columnRowGroupChanged:n}),this.onSortChanged()}addInIcon(e,t,o){if(t==null)return;const n=sn(e,this.beans,o);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:o,column:n,gos:i,beans:s}=this,r=s.sortSvc.getDisplaySortForColumn(n);if(e&&Yt(e,r==="asc",{skipAriaHidden:!0}),t&&Yt(t,r==="desc",{skipAriaHidden:!0}),o){const a=!n.getColDef().unSortIcon&&!i.get("unSortIcon"),l=r==null;Yt(o,!a&&l,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:o}=this;this.addInIcon("sortUnSort",e,t);const n=t.getColDef().showRowGroup;Bn(o)&&n&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:o}=this;if(e){const n=t.sortSvc.getDisplaySortForColumn(o)==="mixed";Yt(e,n,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:o}}=this;if(!e)return;const n=o.getColumnsWithSortingOrdered(),i=o.getDisplaySortIndexForColumn(t)??-1,s=n.some(a=>o.getDisplaySortIndexForColumn(a)??!1),r=i>=0&&s;Yt(e,r,{skipAriaHidden:!0}),i>=0?e.textContent=(i+1).toString():Do(e)}},eG={selector:"AG-SORT-INDICATOR",component:lg},vl=["asc","desc",null],tG=class extends Ie{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,o){const n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,o)}progressSortFromEvent(e,t){const n=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,n,"uiColumnSorted")}setSortForColumn(e,t,o,n){var u;t!=="asc"&&t!=="desc"&&(t=null);const{gos:i,showRowGroupCols:s}=this.beans,r=Bn(i);let a=[e];if(r&&e.getColDef().showRowGroup){const d=(u=s==null?void 0:s.getSourceColumnsForGroupColumn)==null?void 0:u.call(s,e),h=d==null?void 0:d.filter(f=>f.isSortable());h&&(a=[e,...h])}a.forEach(d=>this.setColSort(d,t,n));const l=(o||i.get("alwaysMultiSort"))&&!i.get("suppressMultiSort"),c=[];if(!l){const d=this.clearSortBarTheseColumns(a,n);c.push(...d)}this.updateSortIndex(e),c.push(...a),this.dispatchSortChangedEvents(n,c)}updateSortIndex(e){const{gos:t,colModel:o,showRowGroupCols:n}=this.beans,i=Bn(t),s=n==null?void 0:n.getShowRowGroupCol(e.getId()),r=i&&s||e,a=this.getColumnsWithSortingOrdered();o.forAllCols(u=>this.setColSortIndex(u,null));const l=a.filter(u=>i&&u.getColDef().showRowGroup?!1:u!==r);(r.getSort()?[...l,r]:l).forEach((u,d)=>this.setColSortIndex(u,d))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{t.getSort()&&(e=!0)}),e}dispatchSortChangedEvents(e,t){const o={type:"sortChanged",source:e};t&&(o.columns=t),this.eventSvc.dispatchEvent(o)}clearSortBarTheseColumns(e,t){const o=[];return this.beans.colModel.forAllCols(n=>{e.includes(n)||(n.getSort()&&o.push(n),this.setColSort(n,void 0,t))}),o}getNextSortDirection(e){const t=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??vl,o=t.indexOf(e.getSort()),n=o<0,i=o==t.length-1;return n||i?t[0]:t[o+1]}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:o,rowGroupColsSvc:n}=this.beans;let i=[];if(t.forAllCols(c=>{c.getSort()&&i.push(c)}),t.isPivotMode()){const c=Bn(e);i=i.filter(u=>{const d=!!u.getAggFunc(),h=!u.isPrimary(),f=c?o==null?void 0:o.getShowRowGroupCol(u.getId()):u.getColDef().showRowGroup;return d||h||f})}const s=(n==null?void 0:n.columns.filter(c=>!!c.getSort()))??[],r={};i.forEach((c,u)=>r[c.getId()]=u),i.sort((c,u)=>{const d=c.getSortIndex(),h=u.getSortIndex();if(d!=null&&h!=null)return d-h;if(d==null&&h==null){const f=r[c.getId()],v=r[u.getId()];return f>v?1:-1}else return h==null?-1:1});const a=Bn(e)&&!!s.length;a&&(i=[...new Set(i.map(c=>(o==null?void 0:o.getShowRowGroupCol(c.getId()))??c))]);const l=new Map;return i.forEach((c,u)=>l.set(c,u)),a&&s.forEach(c=>{const u=o.getShowRowGroupCol(c.getId());l.set(c,l.get(u))}),l}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=Bn(this.gos),o=!!e.getColDef().showRowGroup;return t&&o}getDisplaySortForColumn(e){var r;const t=(r=this.beans.showRowGroupCols)==null?void 0:r.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const n=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,i=n[0].getSort();return n.every(a=>a.getSort()==i)?i:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,o){let n=0;e.addManagedListeners(t,{movingChanged:()=>{n=Date.now()}}),o&&e.addManagedElementListeners(o,{click:s=>{const r=t.isMoving(),l=Date.now()-n<50;r||l||this.progressSortFromEvent(t,s)}});const i=()=>{var r;const s=t.getSort();if(e.toggleCss("ag-header-cell-sorted-asc",s==="asc"),e.toggleCss("ag-header-cell-sorted-desc",s==="desc"),e.toggleCss("ag-header-cell-sorted-none",!s),t.getColDef().showRowGroup){const a=(r=this.beans.showRowGroupCols)==null?void 0:r.getSourceColumnsForGroupColumn(t),c=!(a==null?void 0:a.every(u=>t.getSort()==u.getSort()));e.toggleCss("ag-header-cell-sorted-mixed",c)}};e.addManagedEventListeners({sortChanged:i,columnRowGroupChanged:i})}initCol(e){const{sort:t,initialSort:o,sortIndex:n,initialSortIndex:i}=e.colDef;t!==void 0?(t==="asc"||t==="desc")&&(e.sort=t):(o==="asc"||o==="desc")&&(e.sort=o),n!==void 0?n!==null&&(e.sortIndex=n):i!==null&&(e.sortIndex=i)}updateColSort(e,t,o){t!==void 0&&(t==="desc"||t==="asc"?this.setColSort(e,t,o):this.setColSort(e,void 0,o))}setColSort(e,t,o){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",o)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new lg(e)}getSortIndicatorSelector(){return eG}},Rr={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"},oG=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}}),nG={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?typeof e=="string"?Rr[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:Rr[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?Rr[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{var o;const t=["columnsMenuTab","generalMenuTab"];return(o=e.menuTabs)!=null&&o.some(n=>t.includes(n))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",spanRows:"CellSpan"},iG=()=>({autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:o})=>o?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},cellRendererParams:{validate:t=>(t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer")&&"checkbox"in t.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(t,o)=>o.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:o})=>o==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:o})=>o==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:o})=>o==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{const o=t.headerValueGetter;return typeof o=="function"||typeof o=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t.smallDown)return Ui(262);if(t.smallLeft)return Ui(263);if(t.smallRight)return Ui(264)}return null}},sortingOrder:{validate:t=>{const o=t.sortingOrder;if(Array.isArray(o)&&o.length>0){const n=o.filter(i=>!vl.includes(i));if(n.length>0)return`sortingOrder must be an array with elements from [${vl.map(pu).join()}], currently it includes [${n.map(pu).join()}]`}else if(!Array.isArray(o)||o.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${o}`;return null}},type:{validate:t=>{const o=t.type;return o instanceof Array?o.some(i=>typeof i!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof o=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:o})=>o?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:o,cellSelection:n,suppressRowTransform:i,enableCellSpan:s,rowDragEntireRow:r,enableCellTextSelection:a})=>typeof o=="object"&&(o==null?void 0:o.mode)==="singleRow"&&o!=null&&o.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":n?"colDef.spanRows is not supported with cellSelection.":i?"colDef.spanRows is not supported with suppressRowTransform.":s?r?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."}}),sG={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0},rG=()=>Object.keys(sG),aG=()=>({objectName:"colDef",allProperties:rG(),docsUrl:"column-properties/",deprecations:oG(),validations:iG()}),lG=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded"],cG=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged","beforeRefreshModel","rowNodeDataChanged"],fx=()=>[...lG,...cG],uG=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce"],dG=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","selectionColumnDef","findOptions"],hG=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],px=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],fG=["theme","rowSelection"],pG=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],gx=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"],gG=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned"],zf=()=>[...hG,...dG,...uG,...px,...gG,...gx,...pG,...fG],mG=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."}});function kn(e,t,o){return typeof t=="number"||t==null?t==null||t>=o?null:`${e}: value should be greater than or equal to ${o}`:`${e}: value should be a number`}var vG={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"SharedRowGrouping",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},yG=()=>{const e={autoSizePadding:{validate({autoSizePadding:o}){return kn("autoSizePadding",o,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:o}){return kn("cacheBlockSize",o,1)}},cacheOverflowSize:{validate({cacheOverflowSize:o}){return kn("cacheOverflowSize",o,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:o=>{const n=o.domLayout,i=["autoHeight","normal","print"];return n&&!i.includes(n)?`domLayout must be one of [${i.join()}], currently it's ${n}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:o,pinnedTopRowData:n,pinnedBottomRowData:i}){return o&&(n||i)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({isRowPinnable:o,pinnedTopRowData:n,pinnedBottomRowData:i}){return o&&(n||i)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate({isRowPinned:o,pinnedTopRowData:n,pinnedBottomRowData:i}){return o&&(n||i)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},icons:{validate:({icons:o})=>{if(o){if(o.smallDown)return Ui(262);if(o.smallLeft)return Ui(263);if(o.smallRight)return Ui(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:o}){return kn("infiniteInitialRowCount",o,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},keepDetailRowsCount:{validate({keepDetailRowsCount:o}){return kn("keepDetailRowsCount",o,1)}},paginationPageSize:{validate({paginationPageSize:o}){return kn("paginationPageSize",o,1)}},paginationPageSizeSelector:{validate:o=>{const n=o.paginationPageSizeSelector;return typeof n=="boolean"||n==null||n.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:o}){return kn("rowBuffer",o,0)}},rowClass:{validate:o=>typeof o.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{treeData:{required:[!1,void 0]},pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:o}){return o&&typeof o=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':o&&typeof o!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":o&&o.mode!=="multiRow"&&o.mode!=="singleRow"?`Selection mode "${o.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:o=>{const n=o.rowStyle;return n&&typeof n=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:o}){return kn("serverSideInitialRowCount",o,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:o=>{const n=o.sortingOrder;if(Array.isArray(n)&&n.length>0){const i=n.filter(s=>!vl.includes(s));if(i.length>0)return`sortingOrder must be an array with elements from [${vl.map(pu).join()}], currently it includes [${i.map(pu).join()}]`}else if(!Array.isArray(n)||n.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${n}`;return null}},tooltipHideDelay:{validate:o=>o.tooltipHideDelay&&o.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:o=>o.tooltipShowDelay&&o.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:o=>{const n=o.rowModelType??"clientSide";switch(n){case"clientSide":{const{treeDataChildrenField:i,treeDataParentIdField:s,getDataPath:r,getRowId:a}=o;if(!i&&!s&&!r)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(i){if(r)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(s)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(s){if(!a)return"getRowId callback not provided, tree data with parent id cannot be built.";if(r)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${n} row model.`;return o.isServerSideGroup&&o.getServerSideGroupKey?null:i}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:o}){return kn("viewportRowModelBufferSize",o,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:o}){return kn("viewportRowModelPageSize",o,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:o,showOpenedGroup:n}){return o!=null&&o.field&&n?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":o!=null&&o.valueGetter&&n?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}}},t={};return gx.forEach(o=>{t[o]={expectedType:"boolean"}}),px.forEach(o=>{t[o]={expectedType:"number"}}),No(t,e),t},CG=()=>({objectName:"gridOptions",allProperties:[...zf(),...fx().map(e=>Vp(e))],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:mG(),validations:yG()}),bG=0,wG=0,SG=class extends Ie{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.gridInstanceId=wG++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new Bs,this.globalEventHandlerFactory=e=>(t,o)=>{if(!this.isAlive())return;const n=$a.has(t);if(n&&!e||!n&&e)return;const i=(s,r)=>{const a=this.gridOptions[Vp(s)];typeof a=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>a(r))};if(this.gridReadyFired)i(t,o);else if(t==="gridReady"){i(t,o),this.gridReadyFired=!0;for(const s of this.queueEvents)i(s.eventName,s.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:o})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"gridOptionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??ZH[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return Ye(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(o=>e(this.addGridCommonParams(o)))}updateGridOptions({options:e,force:t,source:o="api"}){const n={id:bG++,properties:[]},i=[],{gridOptions:s,validation:r}=this;for(const a of Object.keys(e)){const l=e[a];r==null||r.warnOnInitialPropertyUpdate(o,a);const c=t||typeof l=="object"&&o==="api",u=s[a];if(c||u!==l){s[a]=l;const d={type:a,currentValue:l,previousValue:u,changeSet:n,source:o};i.push(d)}}this.validateGridOptions(this.gridOptions),n.properties=i.map(a=>a.type),i.forEach(a=>{Yi(this,`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propEventSvc.dispatchEvent(a)})}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addGridCommonParams(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const o of Object.keys(e)){const n=e[o];if(n==null||n===!1)continue;let i=t[o];typeof i=="function"&&(i=i(e,this.gridOptions,this.beans)),i&&this.assertModuleRegistered(i,o)}}validateGridOptions(e){var t;this.validateOptions(e,vG),(t=this.validation)==null||t.processGridOptions(e)}validateColDef(e,t,o){var n,i;(o||!((n=this.beans.dataTypeSvc)!=null&&n.isColPendingInference(t)))&&(this.validateOptions(e,nG),(i=this.validation)==null||i.validateColDef(e))}assertModuleRegistered(e,t){const o=Array.isArray(e)?e.some(n=>this.isModuleRegistered(n)):this.isModuleRegistered(e);return o||Nt(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),o}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:Up(),rowModelType:this.get("rowModelType"),isUmd:VM()}}isModuleRegistered(e){return Af(e,this.gridId,this.get("rowModelType"))}};function mx(e){const t={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:t},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:t},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:t},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var xG=mx(!0),RG=mx(!1),_G=class extends Bt{constructor(){super(...arguments),this.eFilter=Qe,this.eFilterButton=Qe,this.eSortIndicator=Qe,this.eMenu=Qe,this.eLabel=Qe,this.eText=Qe,this.eSortOrder=Qe,this.eSortAsc=Qe,this.eSortDesc=Qe,this.eSortMixed=Qe,this.eSortNone=Qe,this.isLoadingInnerComponent=!1}refresh(e){var o,n,i;const t=this.params;if(this.params=e,this.workOutTemplate(e,!!((o=this.beans)!=null&&o.sortSvc))!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){const s={...e};No(s,e.innerHeaderComponentParams),(i=(n=this.innerHeaderComponent).refresh)==null||i.call(n,s)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const o=e.template;return o?o!=null&&o.trim?o.trim():o:t?xG:RG}init(e){this.params=e;const{sortSvc:t,touchSvc:o,rowNumbersSvc:n,userCompFactory:i}=this.beans,s=t==null?void 0:t.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!s),this.setTemplate(this.currentTemplate,s?[s]:void 0),o==null||o.setupForHeader(this),this.setMenu(),this.setupSort(),n==null||n.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(i,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const o=yM(e,t,t);o&&(this.isLoadingInnerComponent=!0,o.newAgStackInstance().then(n=>{this.isLoadingInnerComponent=!1,n&&(this.isAlive()?(this.innerHeaderComponent=n,this.eText&&this.eText.appendChild(n.getGui())):this.destroyBean(n))}))}setDisplayName(e){const{displayName:t}=e,o=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||o===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=Kr(t))}addInIcon(e,t,o){const n=sn(e,this.beans,o);n&&t.appendChild(n)}workOutShowMenu(){var e;return this.params.enableMenu&&!!((e=this.beans.menuSvc)!=null&&e.isHeaderMenuButtonEnabled())}shouldSuppressMenuHide(){var e;return!!((e=this.beans.menuSvc)!=null&&e.isHeaderMenuButtonAlwaysShowEnabled())}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){nn(this.eMenu),this.eMenu=void 0;return}const{gos:e,eMenu:t,params:o}=this,n=Ko(e);this.addInIcon(n?"menu":"menuAlt",t,o.column),t.classList.toggle("ag-header-menu-icon",!n);const i=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=i,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(i)}toggleMenuAlwaysShow(e){var t;(t=this.eMenu)==null||t.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:o}=this;t||this.toggleMenuAlwaysShow(!0),o.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){var l;const{params:t,gos:o,beans:n,eMenu:i,eFilterButton:s}=this,r=t.column,a=Ko(o);if(e&&!a){if((l=n.menuSvc)!=null&&l.isFilterMenuInHeaderEnabled(r))return t.showFilter(s??i??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(i??s??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:o}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:n,eSortOrder:i,eSortAsc:s,eSortDesc:r,eSortMixed:a,eSortNone:l}=this;n.attachCustomElements(i,s,r,a,l)}this.eSortIndicator.setupSort(o),this.currentSort&&e.setupHeader(this,o,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;const o=()=>{const n=t.column.isFilterActive();Yt(e,n,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,o,"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,o,n){if(!e)return nn(t),!1;const i=this.params.column;return this.addInIcon(n,t,i),this.addManagedListeners(i,{filterChanged:o}),o(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:o}=this;return e?t??o??this.getGui():o??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},EG={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},PG=class extends Bt{constructor(){super(EG),this.agOpened=Qe,this.agClosed=Qe,this.agLabel=Qe,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:o}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),o==null||o.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&Ue(89)}workOutInnerHeaderGroupComponent(e,t){const o=bM(e,t,t);o&&(this.isLoadingInnerComponent=!0,o.newAgStackInstance().then(n=>{this.isLoadingInnerComponent=!1,n&&(this.isAlive()?(this.innerHeaderGroupComponent=n,this.agLabel.appendChild(n.getGui())):this.destroyBean(n))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:o},beans:n}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const i=l=>{if(ui(l))return;const c=!o.isExpanded();n.colGroupSvc.setColumnGroupOpened(o.getProvidedColumnGroup(),c,"uiColumnExpanded")};this.addTouchAndClickListeners(n,t,i),this.addTouchAndClickListeners(n,e,i);const s=l=>{Hs(l)};this.addManagedElementListeners(t,{dblclick:s}),this.addManagedElementListeners(e,{dblclick:s}),this.addManagedElementListeners(this.getGui(),{dblclick:i}),this.updateIconVisibility();const r=o.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t,o){var n;(n=e.touchSvc)==null||n.setupForHeaderGroupElement(this,t,o),this.addManagedElementListeners(t,{click:o})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:o}}=this;if(o.isExpandable()){const n=o.isExpanded();Yt(e,n),Yt(t,!n)}else Yt(e,!1),Yt(t,!1)}addInIcon(e,t){const o=sn(e,this.beans,null);o&&t.appendChild(o)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:t,agClosed:o}=this;Yt(t,!1),Yt(o,!1);return}}setupLabel(e){var i;const{displayName:t,columnGroup:o}=e,n=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;Ye(t)&&!n&&(this.agLabel.textContent=Kr(t)),this.toggleCss("ag-sticky-label",!((i=o.getColGroupDef())!=null&&i.suppressStickyLabel))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},FG={moduleName:"ColumnHeaderComp",version:Je,userComponents:{agColumnHeader:_G},icons:{menu:"menu",menuAlt:"menu-alt"}},DG={moduleName:"ColumnGroupHeaderComp",version:Je,userComponents:{agColumnGroupHeader:PG},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},TG=class extends Ie{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&Ue(92)}createTask(e,t,o,n){this.verify();let i=o;n&&this.batchFrameworkComps&&(i="f1");const s={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((o,n)=>o.index!==n.index?t*(n.index-o.index):n.createOrder-o.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:o,f1:n,destroyTasks:i,beans:s}=this,{ctrlsSvc:r,frameworkOverrides:a}=s,l=t.list,c=o.list,u=n.list,d=Date.now();let h=0;const f=e<=0,v=r.getScrollFeature();for(;f||h<e;){if(!v.scrollGridIfNeeded()){let b;if(l.length)this.sortTaskList(t),b=l.pop().task;else if(c.length)this.sortTaskList(o),b=c.pop().task;else if(u.length)a.wrapOutgoing(()=>{for(;(f||h<e)&&!v.scrollGridIfNeeded();){if(u.length)this.sortTaskList(n),b=u.pop().task,b();else break;h=Date.now()-d}}),b=()=>{};else if(i.length)b=i.pop();else break;b()}h=Date.now()-d}l.length||c.length||u.length||i.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);Si(this.beans,e)}isQueueEmpty(){return!this.ticking}},kG={moduleName:"AnimationFrame",version:Je,beans:[TG]},AG=class extends Ie{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!xs())return;const t=(o,n,i)=>{var a;const{rowCtrl:s,cellCtrl:r}=e.getControlsForEventTarget((i==null?void 0:i.target)??null);r!=null&&r.column&&r.dispatchCellContextMenuEvent(i??null),(a=this.beans.contextMenuSvc)==null||a.handleContextMenuMouseEvent(void 0,i,s,r)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!xs()||K0("dblclick"))return!1;const n=Date.now(),i=n-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=n,i})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){const{gos:t,sortSvc:o,menuSvc:n}=this.beans;if(t.get("suppressTouch"))return;const{params:i,eMenu:s,eFilterButton:r}=e,a=new hs(e.getGui(),!0),l=e.shouldSuppressMenuHide(),c=l&&Ye(s)&&i.enableMenu,u=c?new hs(s,!0):a;if(i.enableMenu||n!=null&&n.isHeaderContextMenuEnabled(i.column)){const d=c?"tap":"longTap",h=f=>i.showColumnMenuAfterMouseClick(f.touchStart);e.addManagedListeners(u,{[d]:h})}if(i.enableSorting){const d=h=>{const f=h.touchStart.target;l&&(s!=null&&s.contains(f)||r!=null&&r.contains(f))||o==null||o.progressSort(i.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:d})}if(i.enableFilterButton&&r){const d=new hs(r,!0);e.addManagedListeners(d,{tap:()=>i.showFilter(r)}),e.addDestroyFunc(()=>d.destroy())}e.addDestroyFunc(()=>a.destroy()),c&&e.addDestroyFunc(()=>u.destroy())}setupForHeaderGroup(e){var o;const t=e.params;if((o=this.beans.menuSvc)!=null&&o.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){const n=new hs(t.eGridHeader,!0),i=s=>t.showColumnMenuAfterMouseClick(s.touchStart);e.addManagedListeners(n,{longTap:i}),e.addDestroyFunc(()=>n.destroy())}}setupForHeaderGroupElement(e,t,o){const n=new hs(t,!0);e.addManagedListeners(n,{tap:o}),e.addDestroyFunc(()=>n.destroy())}mockContextMenu(e,t,o){if(!xs())return;const n=new hs(t),i=s=>{gl(this.gos,s.touchEvent)&&o(void 0,s.touchStart,s.touchEvent)};e.addManagedListeners(n,{longTap:i}),e.addDestroyFunc(()=>n.destroy())}},IG={moduleName:"Touch",version:Je,beans:[AG]},MG=class extends Ie{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,o=!1){return o?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const o=e===Te.UP,n=e===Te.DOWN,i=e===Te.LEFT;let s,r;const{pageBounds:a,gos:l,visibleCols:c}=this.beans;if(o||n)r=o?a.getFirstRow():a.getLastRow(),s=t.column;else{const u=l.get("enableRtl");r=t.rowIndex,s=(i!==u?c.allCols:[...c.allCols].reverse()).find(h=>this.isCellGoodToFocusOn({rowIndex:r,rowPinned:null,column:h}))}return s?{rowIndex:r,rowPinned:null,column:s}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let o=t,n=!1;for(;!n;){switch(e){case Te.UP:o=this.getCellAbove(o);break;case Te.DOWN:o=this.getCellBelow(o);break;case Te.RIGHT:o=this.gos.get("enableRtl")?this.getCellToLeft(o):this.getCellToRight(o);break;case Te.LEFT:o=this.gos.get("enableRtl")?this.getCellToRight(o):this.getCellToLeft(o);break;default:o=null,Ue(8,{key:e});break}o?n=this.isCellGoodToFocusOn(o):n=!0}return o}isCellGoodToFocusOn(e){const t=e.column;let o;const{pinnedRowModel:n,rowModel:i}=this.beans;switch(e.rowPinned){case"top":o=n==null?void 0:n.getPinnedTopRow(e.rowIndex);break;case"bottom":o=n==null?void 0:n.getPinnedBottomRow(e.rowIndex);break;default:o=i.getRow(e.rowIndex);break}return o?!this.isSuppressNavigable(t,o):!1}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){var n;if(!e)return null;const t=((n=this.rowSpanSvc)==null?void 0:n.getCellEnd(e))??e,o=Ey(this.beans,t);return o?{rowIndex:o.rowIndex,column:e.column,rowPinned:o.rowPinned}:null}getCellAbove(e){var n;if(!e)return null;const t=((n=this.rowSpanSvc)==null?void 0:n.getCellStart(e))??e,o=Eu(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned});return o?{rowIndex:o.rowIndex,column:e.column,rowPinned:o.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:o}=this.beans,n=t.allCols;let i=e.rowIndex,s=e.rowPinned,r=t.getColAfter(e.column);if(!r){r=n[0];const a=Ey(this.beans,e);if(qt(a)||!a.rowPinned&&!((o==null?void 0:o.isRowInPage(a.rowIndex))??!0))return null;i=a?a.rowIndex:null,s=a?a.rowPinned:null}return{rowIndex:i,column:r,rowPinned:s}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:o,pagination:n}=t,i=o.allCols;let s=e.rowIndex,r=e.rowPinned,a=o.getColBefore(e.column);if(!a){a=Vt(i);const l=Eu(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(qt(l)||!l.rowPinned&&!((n==null?void 0:n.isRowInPage(l.rowIndex))??!0))return null;s=l?l.rowIndex:null,r=l?l.rowPinned:null}return{rowIndex:s,column:a,rowPinned:r}}isSuppressNavigable(e,t){const{suppressNavigable:o}=e.colDef;if(typeof o=="boolean")return o;if(typeof o=="function"){const n=e.createColumnFunctionCallbackParams(t);return o(n)}return!1}};function OG(e){return e.focusSvc.getFocusedCell()}function LG(e){return e.focusSvc.clearFocusedCell()}function BG(e,t,o,n){e.focusSvc.setFocusedCell({rowIndex:t,column:o,rowPinned:n,forceBrowserFocus:!0})}function NG(e,t){var o;return((o=e.navigation)==null?void 0:o.tabToNextCell(!1,t))??!1}function HG(e,t){var o;return((o=e.navigation)==null?void 0:o.tabToNextCell(!0,t))??!1}function GG(e,t,o=!1){var i;const n=(i=e.headerNavigation)==null?void 0:i.getHeaderPositionForColumn(t,o);n&&e.focusSvc.focusHeaderPosition({headerPosition:n})}var VG=class extends Ie{constructor(){super(),this.beanName="navigation",this.onPageDown=fy(this.onPageDown,100),this.onPageUp=fy(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const o=e.key,n=e.altKey,i=e.ctrlKey||e.metaKey,s=!!this.beans.rangeSvc&&e.shiftKey,r=fO(this.gos,e);let a=!1;switch(o){case Te.PAGE_HOME:case Te.PAGE_END:!i&&!n&&(this.onHomeOrEndKey(o),a=!0);break;case Te.LEFT:case Te.RIGHT:case Te.UP:case Te.DOWN:if(!r)return!1;i&&!n&&!s&&(this.onCtrlUpDownLeftRight(o,r),a=!0);break;case Te.PAGE_DOWN:case Te.PAGE_UP:!i&&!n&&(a=this.handlePageUpDown(o,r,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,o){return o&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===Te.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){const{scrollIndex:t,scrollType:o,scrollColumn:n,focusIndex:i,focusColumn:s}=e,{scrollFeature:r}=this.gridBodyCon;Ye(n)&&!n.isPinned()&&r.ensureColumnVisible(n),Ye(t)&&r.ensureIndexVisible(t,o),e.isAsync||r.ensureIndexVisible(i);const{focusSvc:a,rangeSvc:l}=this.beans;a.setFocusedCell({rowIndex:i,column:s,rowPinned:null,forceBrowserFocus:!0}),l==null||l.setRangeToCell({rowIndex:i,rowPinned:null,column:s})}onPageDown(e){const t=this.beans,o=kh(t),n=this.getViewportHeight(),{pageBounds:i,rowModel:s,rowAutoHeight:r}=t,a=i.getPixelOffset(),l=o.top+n,c=s.getRowIndexAtPixel(l+a);r!=null&&r.active?this.navigateToNextPageWithAutoHeight(e,c):this.navigateToNextPage(e,c)}onPageUp(e){const t=this.beans,o=kh(t),{pageBounds:n,rowModel:i,rowAutoHeight:s}=t,r=n.getPixelOffset(),a=o.top,l=i.getRowIndexAtPixel(a+r);s!=null&&s.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,o=!1){const{pageBounds:n,rowModel:i}=this.beans,s=this.getViewportHeight(),r=n.getFirstRow(),a=n.getLastRow(),l=n.getPixelOffset(),c=i.getRow(e.rowIndex),u=o?(c==null?void 0:c.rowHeight)-s-l:s-l,d=(c==null?void 0:c.rowTop)+u;let h=i.getRowIndexAtPixel(d+l);if(h===e.rowIndex){const v=o?-1:1;t=h=e.rowIndex+v}let f;o?(f="bottom",h<r&&(h=r),t<r&&(t=r)):(f="top",h>a&&(h=a),t>a&&(t=a)),this.isRowTallerThanView(i.getRow(h))&&(t=h,f="top"),this.navigateTo({scrollIndex:t,scrollType:f,scrollColumn:null,focusIndex:h,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,o=!1){this.navigateTo({scrollIndex:t,scrollType:o?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const n=this.getNextFocusIndexForAutoHeight(e,o);this.navigateTo({scrollIndex:t,scrollType:o?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const o=t?-1:1,n=this.getViewportHeight(),{pageBounds:i,rowModel:s}=this.beans,r=i.getLastRow();let a=0,l=e.rowIndex;for(;l>=0&&l<=r;){const c=s.getRow(l);if(c){const u=c.rowHeight??0;if(a+u>n)break;a+=u}l+=o}return Math.max(0,Math.min(l,r))}getViewportHeight(){const e=this.beans,t=kh(e),o=this.beans.scrollVisibleSvc.getScrollbarWidth();let n=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(n-=o),n}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const o=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),{rowIndex:n}=o,i=o.column;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:i,focusIndex:n,focusColumn:i})}onHomeOrEndKey(e){const t=e===Te.PAGE_HOME,{visibleCols:o,pageBounds:n,rowModel:i}=this.beans,s=o.allCols,r=t?n.getFirstRow():n.getLastRow(),a=i.getRow(r);if(!a)return;const l=(t?s:[...s].reverse()).find(c=>!c.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:l,focusIndex:r,focusColumn:l})}onTabKeyDown(e,t){const o=t.shiftKey,n=this.tabToNextCellCommon(e,o,t),i=this.beans,{ctrlsSvc:s,pageBounds:r,focusSvc:a,gos:l}=i;if(n!==!1){n?t.preventDefault():n===null&&s.get("gridCtrl").allowFocusForNextCoreContainer(o);return}if(o){const{rowIndex:c,rowPinned:u}=e.getRowPosition();(u?c===0:c===r.getFirstRow())&&(l.get("headerHeight")===0||Fs(i)?Gr(i,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof Va&&e.focusCell(!0),(!o&&a.focusOverlay(!1)||Gr(i,o))&&t.preventDefault()}tabToNextCell(e,t){const o=this.beans,{focusSvc:n,rowRenderer:i}=o,s=n.getFocusedCell();if(!s)return!1;let r=dr(o,s);return!r&&(r=i.getRowByPosition(s),!r||!r.isFullWidth())?!1:!!this.tabToNextCellCommon(r,e,t)}tabToNextCellCommon(e,t,o){let n=e.editing;if(!n&&e instanceof Va){const r=e.rowCtrl;r&&(n=r.editing)}let i;return n?this.gos.get("editType")==="fullRow"?i=this.moveToNextEditingRow(e,t,o):i=this.moveToNextEditingCell(e,t,o):i=this.moveToNextCellNotEditing(e,t,o),i===null?i:i||!!this.beans.focusSvc.focusedHeader}moveToNextEditingCell(e,t,o=null){var s;const n=e.cellPosition;e.eGui.focus(),e.stopEditing();const i=this.findNextCellToFocusOn(n,t,!0);return i===!1?null:i==null?!1:((s=this.beans.editSvc)==null||s.startEditing(i,null,!0,o),i.focusCell(!1),!0)}moveToNextEditingRow(e,t,o=null){const n=e.cellPosition,i=this.findNextCellToFocusOn(n,t,!0);if(i===!1)return null;if(i==null)return!1;const s=i.cellPosition,r=this.isCellEditable(n),a=this.isCellEditable(s),l=s&&n.rowIndex===s.rowIndex&&n.rowPinned===s.rowPinned,{editSvc:c,rowEditSvc:u}=this.beans;if(r&&(c==null||c.setFocusOutOnEditor(e)),!l){const d=e.rowCtrl;c==null||c.stopRowEditing(d);const h=i.rowCtrl;u==null||u.startEditing(h,void 0,void 0,o)}return a?(c==null||c.setFocusInOnEditor(i),i.focusCell()):i.focusCell(!0),!0}moveToNextCellNotEditing(e,t,o){const n=this.beans.visibleCols.allCols;let i;if(e instanceof Du){if(i={...e.getRowPosition(),column:t?n[0]:Vt(n)},this.gos.get("embedFullWidthRows")&&o){const r=e.findFullWidthInfoForEvent(o);r&&(i.column=r.column)}}else i=e.getFocusedCellPosition();const s=this.findNextCellToFocusOn(i,t,!1);if(s===!1)return null;if(s instanceof Va)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s,t);return Ye(s)}findNextCellToFocusOn(e,t,o){let n=e;const i=this.beans,{cellNavigation:s,gos:r,focusSvc:a,rowRenderer:l,rangeSvc:c}=i;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=s.getNextTabbedCell(n,t);const u=r.getCallback("tabToNextCell");if(Ye(u)){const v=u({backwards:t,editing:o,previousCellPosition:e,nextCellPosition:n||null});if(v===!0)n=e;else{if(v===!1)return!1;n={rowIndex:v.rowIndex,column:v.column,rowPinned:v.rowPinned}}}if(!n)return null;if(n.rowIndex<0){const f=Vn(i);return a.focusHeaderPosition({headerPosition:{headerRowIndex:f+n.rowIndex,column:n.column},fromCell:!0}),null}const d=r.get("editType")==="fullRow";if(o&&!d&&!this.isCellEditable(n))continue;this.ensureCellVisible(n);const h=dr(i,n);if(!h){const f=l.getRowByPosition(n);if(!f||!f.isFullWidth()||o)continue;return{...f.getRowPosition(),column:n==null?void 0:n.column}}if(!s.isSuppressNavigable(h.column,h.rowNode))return h.setFocusedCellPosition(n),c==null||c.setRangeToCell(n),h}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:o,rowModel:n}=this.beans;return t==="top"?o==null?void 0:o.getPinnedTopRow(e):t==="bottom"?o==null?void 0:o.getPinnedBottomRow(e):n.getRow(e)}navigateToNextCell(e,t,o,n){let i=o,s=!1;const r=this.beans,{cellNavigation:a,focusSvc:l,gos:c}=r;for(;i&&(i===o||!this.isValidNavigateCell(i));)c.get("enableRtl")?t===Te.LEFT&&(i=this.getLastCellOfColSpan(i)):t===Te.RIGHT&&(i=this.getLastCellOfColSpan(i)),i=a.getNextCellToFocus(t,i),s=qt(i);if(s&&e&&e.key===Te.UP&&(i={rowIndex:-1,rowPinned:null,column:o.column}),n){const d=c.getCallback("navigateToNextCell");if(Ye(d)){const f=d({key:t,previousCellPosition:o,nextCellPosition:i||null,event:e});Ye(f)?i={rowPinned:f.rowPinned,rowIndex:f.rowIndex,column:f.column}:i=null}}if(!i)return;if(i.rowIndex<0){const d=Vn(r);l.focusHeaderPosition({headerPosition:{headerRowIndex:d+i.rowIndex,column:o.column},event:e||void 0,fromCell:!0});return}const u=this.getNormalisedPosition(i);u?this.focusPosition(u):this.tryToFocusFullWidthRow(i)}getNormalisedPosition(e){var n;if(!!((n=this.beans.spannedRowRenderer)!=null&&n.getCellByPosition(e)))return e;this.ensureCellVisible(e);const o=dr(this.beans,e);return o?(e=o.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:o,rowRenderer:n,focusSvc:i,eventSvc:s}=this.beans,r=o.allCols,a=n.getRowByPosition(e);if(!a||!a.isFullWidth())return!1;const l=i.getFocusedCell(),c={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Vt(r):r[0])};this.focusPosition(c);const u=t??(l!=null&&vO(c,l));return s.dispatchEvent({type:"fullWidthRowFocused",rowIndex:c.rowIndex,rowPinned:c.rowPinned,column:c.column,isFullWidthCell:!0,fromBelow:u}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:o}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),o==null||o.setRangeToCell(e)}isValidNavigateCell(e){return!!_u(this.beans,e)}getLastCellOfColSpan(e){const t=dr(this.beans,e);if(!t)return e;const o=t.getColSpanningList();return o.length===1?e:{rowIndex:e.rowIndex,column:Vt(o),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=V0(this.gos),o=this.beans.rowModel.getRow(e.rowIndex),n=t&&(o==null?void 0:o.sticky),{scrollFeature:i}=this.gridBodyCon;!n&&qt(e.rowPinned)&&i.ensureIndexVisible(e.rowIndex),e.column.isPinned()||i.ensureColumnVisible(e.column)}};function kh(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var zG={moduleName:"KeyboardNavigation",version:Je,beans:[VG,MG,jH],apiFunctions:{getFocusedCell:OG,clearFocusedCell:LG,setFocusedCell:BG,setFocusedHeader:GG,tabToNextCell:NG,tabToPreviousCell:HG}},WG=class extends Ie{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:(e==null?void 0:e.animate)??!1,newData:(e==null?void 0:e.newData)??!1,newPage:(e==null?void 0:e.newPage)??!1,newPageSize:(e==null?void 0:e.newPageSize)??!1,keepRenderedRows:(e==null?void 0:e.keepRenderedRows)??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:o}=this.beans;t?t.calculatePages():e.calculateBounds(0,o.getRowCount()-1)}},UG=class extends Ie{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){var e;return((e=this.topRowBounds)==null?void 0:e.rowIndex)??-1}getLastRow(){var e;return((e=this.bottomRowBounds)==null?void 0:e.rowIndex)??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this,o=(e==null?void 0:e.rowTop)??0,n=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:o,pageLastPixel:n}}calculateBounds(e,t){const{rowModel:o}=this.beans,n=o.getRowBounds(e);n&&(n.rowIndex=e),this.topRowBounds=n;const i=o.getRowBounds(t);i&&(i.rowIndex=t),this.bottomRowBounds=i,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){var t;const e=((t=this.topRowBounds)==null?void 0:t.rowTop)??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},$G=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",jG=class extends Ie{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const o of this.elements)o&&(Yt(o,t),Un(o,e))}},KG=class extends Ie{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:o}=this.beans,n=wo(e,"print"),i=n?0:t.getColsLeftWidth(),s=n?0:t.getDisplayedColumnsRightWidth();i!=this.leftWidth&&(this.leftWidth=i,o.dispatchEvent({type:"leftPinnedWidthChanged"})),s!=this.rightWidth&&(this.rightWidth=s,o.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=cl(e);if(t<=50)return;const o=this.getPinnedColumnsOverflowingViewport(t-50),n=this.gos.getCallback("processUnpinnedColumns"),{columns:i,hasLockedPinned:s}=o;let r=i;!r.length&&!s||(n&&(r=n({columns:r,viewportWidth:t})),!(!r||!r.length)&&(r=r.filter(a=>!Ps(a)),this.setColsPinned(r,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new jG(e,t)}setColsPinned(e,t,o){const{colModel:n,colAnimation:i,visibleCols:s,gos:r}=this.beans;if(!n.cols||!(e!=null&&e.length))return;if(wo(r,"print")){Ue(37);return}i==null||i.start();let a;t===!0||t==="left"?a="left":t==="right"?a="right":a=null;const l=[];e.forEach(c=>{if(!c)return;const u=n.getCol(c);u&&u.getPinned()!==a&&(this.setColPinned(u,a),l.push(u))}),l.length&&(s.refresh(o),aS(this.eventSvc,l,o)),i==null||i.finish()}initCol(e){const{pinned:t,initialPinned:o}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,o)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;const o=e.pinned==="left",n=e.pinned==="right";e.hidden=!0;const i=()=>{const s=o?this.leftWidth:this.rightWidth;if(s==null)return;const r=s==0,a=e.hidden!==r,l=this.gos.get("enableRtl"),c=t.getScrollbarWidth(),d=t.verticalScrollShowing&&(l&&o||!l&&n)?s+c:s;e.comp.setPinnedContainerWidth(`${d}px`),e.comp.setDisplayed(!r),a&&(e.hidden=r,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:n,rightWidth:i}=this,s=cl(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(n+i+e>s)if(s>n+i)e=s-n-i;else return 0}return e}getPinnedColumnsOverflowingViewport(e){const t=this.rightWidth??0,o=this.leftWidth??0,n=t+o;let i=!1;if(n<e)return{columns:[],hasLockedPinned:i};const{visibleCols:s}=this.beans,r=[...s.leftCols],a=[...s.rightCols];let l=0,c=0;const u=0,d=[];let h=n-u-e;for(;(c<r.length||l<a.length)&&h>0;){if(l<a.length){const f=a[l++];if(f.colDef.lockPinned){i=!0;continue}h-=f.getActualWidth(),d.push(f)}if(c<r.length&&h>0){const f=r[c++];if(f.colDef.lockPinned){i=!0;continue}h-=f.getActualWidth(),d.push(f)}}return{columns:d,hasLockedPinned:i}}},qG={moduleName:"PinnedColumn",version:Je,beans:[KG],css:[$G]},QG=class extends Ie{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=bo(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=go(e),o=this.descriptionContainer=t.createElement("div");o.classList.add("ag-aria-description-container"),y0(o,"polite"),PA(o,"additions text"),EA(o,!0),e.eGridDiv.appendChild(o)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{if(this.isAlive()&&this.descriptionContainer){let t=e;this.lastAnnouncement===t&&(t=`${t}.`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}},50)}destroy(){var t;super.destroy();const{descriptionContainer:e}=this;e&&(Do(e),(t=e.parentElement)==null||t.removeChild(e)),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},YG={moduleName:"Aria",version:Je,beans:[QG]};function JG(e){var t;(t=e.overlays)==null||t.showLoadingOverlay()}function ZG(e){var t;(t=e.overlays)==null||t.showNoRowsOverlay()}function XG(e){var t;(t=e.overlays)==null||t.hideOverlay()}var eV=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:1px solid var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",tV={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},vx=class extends Bt{constructor(){super(tV),this.eOverlayWrapper=Qe,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(eV)}handleKeyDown(e){if(e.key!==Te.TAB||e.defaultPrevented||ui(e))return;const t=this.beans;if($s(t,this.eOverlayWrapper,!1,e.shiftKey))return;let n=!1;e.shiftKey?n=t.focusSvc.focusGridView({column:Vt(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):n=Gr(t,!1),n&&e.preventDefault()}updateLayoutClasses(e,t){const o=this.eOverlayWrapper.classList,{AUTO_HEIGHT:n,NORMAL:i,PRINT:s}=mn;o.toggle(n,t.autoHeight),o.toggle(i,t.normal),o.toggle(s,t.print)}postConstruct(){this.createManagedBean(new qp(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,o,n){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),o&&this.isGridFocused()){const i=Jt(this.beans);i&&!G0(this.beans)&&(this.elToFocusAfter=i)}e.then(i=>{if(this.activePromise!==e){this.activeOverlay!==i&&(this.destroyBean(i),i=null);return}if(this.activePromise=null,!!i){if(this.activeOverlay!==i&&(this.eOverlayWrapper.appendChild(i.getGui()),this.activeOverlay=i,n)){const s=i;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,({currentValue:r})=>{var a;(a=s.refresh)==null||a.call(s,pt(this.gos,{...r??{}}))})}o&&this.isGridFocused()&&Gs(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){var n;this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);const o=this.updateListenerDestroyFunc;o&&(o(),this.updateListenerDestroyFunc=null),this.destroyBean(e),Do(this.eOverlayWrapper),(n=t==null?void 0:t.focus)==null||n.call(t,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=Jt(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},oV={selector:"AG-OVERLAY-WRAPPER",component:vx},nV=class extends Ie{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=Co(this.gos),this.isServerSide=!this.isClientSide&&jr(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");!t&&(t!==void 0||e.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){Ue(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return oV}getOverlayWrapperCompClass(){return vx}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}const{state:e,isClientSide:t,isServerSide:o,beans:{gos:n,colModel:i,rowModel:s}}=this;let r=this.gos.get("loading");r!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&r===void 0&&!n.get("suppressLoadingOverlay")&&(r=!n.get("columnDefs")||!i.ready||!n.get("rowData")&&t),r?e!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&s.isEmpty()&&!n.get("suppressNoRowsOverlay")?e!==2&&this.doShowNoRowsOverlay():(e===1||!o&&e!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(FM(this.beans.userCompFactory,pt(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(DM(this.beans.userCompFactory,pt(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,o){var i;const n=(e==null?void 0:e.newAgStackInstance())??null;(i=this.eWrapper)==null||i.showOverlay(n,t,this.isExclusive(),o),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;if(this.state===2){const o=this.beans.ctrlsSvc.get("gridHeaderCtrl");t=(o==null?void 0:o.headerHeight)||0}else this.wrapperPadding!==0&&(t=0);this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}},iV={moduleName:"Overlay",version:Je,userComponents:{agLoadingOverlay:IL,agNoRowsOverlay:OL},apiFunctions:{showLoadingOverlay:JG,showNoRowsOverlay:ZG,hideOverlay:XG},beans:[nV]},sV=class extends Ie{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=HA(),Yi(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;Yi(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),o=e/t;return this.maxScrollY*o}},rV=400,aV=class extends Ie{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(s=>s.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(s=>s.updateRangeBordersIfRangeCount())},o=()=>{this.eventSvc.addEventListener("cellSelectionChanged",e),this.eventSvc.addEventListener("columnMoved",t),this.eventSvc.addEventListener("columnPinned",t),this.eventSvc.addEventListener("columnVisible",t)},n=()=>{this.eventSvc.removeEventListener("cellSelectionChanged",e),this.eventSvc.removeEventListener("columnMoved",t),this.eventSvc.removeEventListener("columnPinned",t),this.eventSvc.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>n()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{gi(this.gos)?o():n()}),gi(this.gos)&&o()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",n=>this.onSuppressCellFocusChanged(n.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:n,previousValue:i})=>{(!i&&n||i&&!n)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:o}=this.beans;if(o&&this.addManagedPropertyListener("showOpenedGroup",()=>{const n=o.getShowRowGroupCols();n.length&&this.refreshCells({columns:n,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const n=this.gridBodyCtrl;n.setStickyTopHeight(0),n.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=wo(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new lV(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){var e;return((e=this.stickyRowFeature)==null?void 0:e.stickyTopRowCtrls)??[]}getStickyBottomRowCtrls(){var e;return((e=this.stickyRowFeature)==null?void 0:e.stickyBottomRowCtrls)??[]}updateAllRowCtrls(){var n;const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),o=((n=this.cachedRowCtrls)==null?void 0:n.getEntries())??[];t.length>0||o.length>0?this.allRowCtrls=[...e,...t,...o]:this.allRowCtrls=e}isCellBeingRendered(e,t){var i;const o=this.rowCtrlsByRowIndex[e];return!t||!o?!!o:o.isFullWidth()?!0:!!((i=this.beans.spannedRowRenderer)==null?void 0:i.getCellByPosition({rowIndex:e,column:t,rowPinned:null}))||!!o.getCellCtrl(t)||!o.isRowRendered()}updateCellFocus(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onCellFocusChanged(e){if(e&&e.rowIndex!=null&&!e.rowPinned){const t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;t&&this.getAllCellCtrls().forEach(o=>t.onFlashCells(o,e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.colModel.getCols().forEach(t=>{const o=l=>{this.getAllCellCtrls().forEach(c=>{c.column===t&&l(c)})},n=()=>{o(l=>l.onLeftChanged())},i=()=>{o(l=>l.onWidthChanged())},s=()=>{o(l=>l.onFirstRightPinnedChanged())},r=()=>{o(l=>l.onLastLeftPinnedChanged())},a=()=>{o(l=>l.onColDefChanged())};t.__addEventListener("leftChanged",n),t.__addEventListener("widthChanged",i),t.__addEventListener("firstRightPinnedChanged",s),t.__addEventListener("lastLeftPinnedChanged",r),t.__addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",n),t.__removeEventListener("widthChanged",i),t.__removeEventListener("firstRightPinnedChanged",s),t.__removeEventListener("lastLeftPinnedChanged",r),t.__removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){const e=wo(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),o=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,o&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];return this.getAllRowCtrls().forEach(o=>{var i;const n=(i=o.getCellCtrl(e,!0))==null?void 0:i.eGui;n&&t.push(n)}),t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,o){const{pinnedRowModel:n,beans:i,printLayout:s}=this,r=Object.fromEntries(e.map(l=>[l.rowNode.id,l]));n==null||n.forEachPinnedRow(t,(l,c)=>{const u=e[c];u&&n.getPinnedRowById(u.rowNode.id,t)===void 0&&(u.destroyFirstPass(),u.destroySecondPass()),l.id in r&&o?(e[c]=r[l.id],delete r[l.id]):e[c]=new Du(l,i,!1,!1,s)});const a=(t==="top"?n==null?void 0:n.getPinnedTopRowCount():n==null?void 0:n.getPinnedBottomRowCount())??0;e.length=a}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){var o,n;if(e.sticky)(o=this.stickyRowFeature)==null||o.refreshStickyNode(e);else if((n=this.cachedRowCtrls)!=null&&n.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const i=s=>{const r=s[e.rowIndex];r&&r.rowNode===e&&(r.destroyFirstPass(),r.destroySecondPass(),s[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":i(this.topRowCtrls);break;case"bottom":i(this.bottomRowCtrls);break;default:i(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e==null||e.forEach(o=>this.redrawRow(o,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){var a;this.getLockOnRefresh();const t=(a=this.beans.focusSvc)==null?void 0:a.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);const o=!e.domLayoutChanged&&!!e.recycleRows,n=e.animate&&yr(this.gos),i=o?this.getRowsToRecycle():null;o||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:s,gos:r}=this;if(s){s.checkStickyRows();const l=s.extraTopHeight+s.extraBottomHeight;l&&this.updateContainerHeights(l)}this.recycleRows(i,n),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(r.get("enableRowPinning")?o:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var n;const t=e.newData||e.newPage,o=this.gos.get("suppressScrollOnNewData");t&&!o&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),(n=this.stickyRowFeature)==null||n.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let o=this.pageBounds.getCurrentPageHeight();o===0&&(o=1),t.setModelHeight(o+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error(Ui(252));this.refreshInProgress=!0,(t=(e=this.beans.frameworkOverrides).getLockOnRefresh)==null||t.call(e)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,(t=(e=this.beans.frameworkOverrides).releaseLockOnRefresh)==null||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,o=this.findPositionToFocus(e);if(!o){t.focusHeaderPosition({headerPosition:{headerRowIndex:Vn(this.beans)-1,column:e.column}});return}if(e.rowIndex!==o.rowIndex||e.rowPinned!=o.rowPinned){t.setFocusedCell({...o,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(pt(this.gos,{...o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(e){const{pagination:t,pageBounds:o}=this.beans;let n=e;for(n.rowPinned==null&&t&&o&&!t.isRowInPage(n.rowIndex)&&(n={rowPinned:null,rowIndex:o.getFirstRow()});n;){if(n.rowPinned==null&&o)if(n.rowIndex<o.getFirstRow()){if(n=Eu(this.beans,{rowPinned:null,rowIndex:0}),!n)return null}else n.rowIndex>o.getLastRow()&&(n={rowPinned:null,rowIndex:o.getLastRow()});const i=this.getRowByPosition(n);if(i!=null&&i.isAlive())return{...i.getRowPosition(),column:e.column};n=Eu(this.beans,n)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),o=t.length;for(let n=0;n<o;n++){const i=t[n].getAllCellCtrls(),s=i.length;for(let r=0;r<s;r++)e.push(i[r])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),o=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...o,...(e==null?void 0:e.getCtrls("top"))??[],...(e==null?void 0:e.getCtrls("bottom"))??[],...(e==null?void 0:e.getCtrls("center"))??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,o){const n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,o)}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const o of this.getCellCtrls(e.rowNodes,e.columns))o.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const o of this.getRowCtrls(e)){if(!o.isFullWidth())continue;o.refreshFullWidth()||(t=!0,this.redrawRow(o.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=Wf(e),o=this.getAllRowCtrls();return!e||!t?o:o.filter(n=>{const i=n.rowNode;return Uf(i,t)})}getCellCtrls(e,t){let o;Ye(t)&&(o={},t.forEach(i=>{const s=this.colModel.getCol(i);Ye(s)&&(o[s.getId()]=!0)}));const n=[];return this.getRowCtrls(e).forEach(i=>{i.getAllCellCtrls().forEach(s=>{const r=s.column.getId();o&&!o[r]||n.push(s)})}),n}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){var o;const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),(o=this.stickyRowFeature)==null||o.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const o of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[o].rowNode.id==null&&e.push(o);this.removeRowCtrls(e);const t={};for(const o of Object.values(this.rowCtrlsByRowIndex)){const n=o.rowNode;t[n.id]=o}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(o=>{const n=this.rowCtrlsByRowIndex[o];n&&(n.destroyFirstPass(t),n.destroySecondPass()),delete this.rowCtrlsByRowIndex[o]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{focusSvc:t,animationFrameSvc:o}=this.beans,{afterScroll:n}=e;let i;const s=this.stickyRowFeature;s&&(i=(t==null?void 0:t.getFocusCellToUseAfterRefresh())||void 0);const r=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(s){l=s.checkStickyRows();const u=s.extraTopHeight+s.extraBottomHeight;u&&this.updateContainerHeights(u)}const c=this.firstRenderedRow!==r||this.lastRenderedRow!==a;if(!(n&&!l&&!c)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,n),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(n&&!l),i!=null)){const u=t==null?void 0:t.getFocusCellToUseAfterRefresh();i!=null&&u==null&&(o==null||o.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const o={};e.forEach(s=>o[s]=!0);const i=Object.keys(this.rowCtrlsByRowIndex).filter(s=>!o[s]);this.removeRowCtrls(i,t)}calculateIndexesToDraw(e){var r,a;const t=[];for(let l=this.firstRenderedRow;l<=this.lastRenderedRow;l++)t.push(l);const o=this.beans.pagination,n=(a=(r=this.beans.focusSvc)==null?void 0:r.getFocusedCell())==null?void 0:a.rowIndex;n!=null&&(n<this.firstRenderedRow||n>this.lastRenderedRow)&&(!o||o.isRowInPage(n))&&t.push(n);const i=l=>{const c=l.rowNode.rowIndex;c==null||c===n||(c<this.firstRenderedRow||c>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(l)&&t.push(c)};for(const l of Object.values(this.rowCtrlsByRowIndex))i(l);if(e)for(const l of Object.values(e))i(l);t.sort((l,c)=>l-c);const s=[];for(let l=0;l<t.length;l++){const c=t[l],u=this.rowModel.getRow(c);u&&!u.sticky&&s.push(c)}return s}recycleRows(e,t=!1,o=!1){const n=this.calculateIndexesToDraw(e);if((this.printLayout||o)&&(t=!1),this.removeRowCompsNotToDraw(n,!t),n.forEach(i=>{this.createOrUpdateRowCtrl(i,e,t,o)}),e){const{animationFrameSvc:i}=this.beans;(i==null?void 0:i.active)&&o&&!this.printLayout?i.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),o=e.isPinningRight();(this.pinningLeft!==t||o!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=o,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const o=t.rowNode.rowIndex;e.push(o.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=Wf(e);return this.getAllRowCtrls().filter(o=>{if(!o.isFullWidth())return!1;const n=o.rowNode;return!(t!=null&&!Uf(n,t))})}createOrUpdateRowCtrl(e,t,o,n){let i,s=this.rowCtrlsByRowIndex[e];if(s||(i=this.rowModel.getRow(e),Ye(i)&&Ye(t)&&t[i.id]&&i.alreadyRendered&&(s=t[i.id],t[i.id]=null)),!s)if(i||(i=this.rowModel.getRow(e)),Ye(i))s=this.createRowCon(i,o,n);else return;return i&&(i.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=s,s}destroyRowCtrls(e,t){const o=[];if(e){for(const n of Object.values(e))if(n){if(this.cachedRowCtrls&&n.isCacheable()){this.cachedRowCtrls.addRow(n);continue}if(n.destroyFirstPass(!t),t){const i=n.instanceId;this.zombieRowCtrls[i]=n,o.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[i]})}else n.destroySecondPass()}}t&&(o.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),window.setTimeout(()=>o.forEach(n=>n()),rV))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=Es(this.beans);return e*t}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:o}=this;e.updateOffset();let n,i;if(!o.isRowsToRender())n=0,i=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),n=t.getFirstRow(),i=t.getLastRow();else{const u=this.getRowBufferInPixels(),d=this.ctrlsSvc.getScrollFeature(),h=this.gos.get("suppressRowVirtualisation");let f=!1,v,m;do{const M=t.getPixelOffset(),{pageFirstPixel:I,pageLastPixel:W}=t.getCurrentPagePixelRange(),z=e.divStretchOffset,de=d.getVScrollPosition(),K=de.top,O=de.bottom;h?(v=I+z,m=W+z):(v=Math.max(K+M-u,I)+z,m=Math.min(O+M+u,W)+z),this.firstVisibleVPixel=Math.max(K+M,I)+z,this.lastVisibleVPixel=Math.min(O+M,W)+z,f=this.ensureAllRowsInRangeHaveHeightsCalculated(v,m)}while(f);let b=o.getRowIndexAtPixel(v),S=o.getRowIndexAtPixel(m);const R=t.getFirstRow(),_=t.getLastRow();b<R&&(b=R),S>_&&(S=_),n=b,i=S}const s=wo(this.gos,"normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);s&&!r&&i-n>a&&(i=n+a);const l=n!==this.firstRenderedRow,c=i!==this.lastRenderedRow;(l||c)&&(this.firstRenderedRow=n,this.lastRenderedRow=i,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:n,lastRow:i}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,Si(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var a,l;const o=(a=this.pinnedRowModel)==null?void 0:a.ensureRowHeightsValid(),n=(l=this.stickyRowFeature)==null?void 0:l.ensureRowHeightsValid(),{pageBounds:i,rowModel:s}=this,r=s.ensureRowHeightsValid(e,t,i.getFirstRow(),i.getLastRow());return(r||n)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),n||r||o?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){const n=e.rowNode,i=this.focusSvc.isRowFocused(n.rowIndex,n.rowPinned),s=e.editing,r=n.detail;return i||s||r?!!this.isRowPresent(n):!1}isRowPresent(e){var t;return this.rowModel.isRowPresent(e)?((t=this.beans.pagination)==null?void 0:t.isRowInPage(e.rowIndex))??!0:!1}createRowCon(e,t,o){var r,a;const n=((r=this.cachedRowCtrls)==null?void 0:r.getRow(e))??null;if(n)return n;const i=o&&!this.printLayout&&!!((a=this.beans.animationFrameSvc)!=null&&a.active);return new Du(e,this.beans,t,i,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(n=>n.rowNode),t=this.getStickyTopRowCtrls().map(n=>n.rowNode),o=this.getStickyBottomRowCtrls().map(n=>n.rowNode);return[...t,...e,...o]}getRowByPosition(e){let t;const{rowIndex:o}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[o];break;case"bottom":t=this.bottomRowCtrls[o];break;default:t=this.rowCtrlsByRowIndex[o],t||(t=this.getStickyTopRowCtrls().find(n=>n.rowNode.rowIndex===o)||null,t||(t=this.getStickyBottomRowCtrls().find(n=>n.rowNode.rowIndex===o)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const n=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!n}},lV=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,o=this.entriesMap[t];delete this.entriesMap[t],dn(this.entriesList,o)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],dn(this.entriesList,e)}getEntries(){return this.entriesList}};function Wf(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(o=>{const n=o.id;switch(o.rowPinned){case"top":t.top[n]=o;break;case"bottom":t.bottom[n]=o;break;default:t.normal[n]=o;break}}),t}function Uf(e,t){const o=e.id;switch(e.rowPinned){case"top":return t.top[o]!=null;case"bottom":return t.bottom[o]!=null;default:return t.normal[o]!=null}}var cV=class extends Ie{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=Bn(e),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Bn(e))}doFullSort(e,t){const o=e.map((n,i)=>({currentPos:i,rowNode:n}));return o.sort(this.compareRowNodes.bind(this,t)),o.map(n=>n.rowNode)}compareRowNodes(e,t,o){const n=t.rowNode,i=o.rowNode;for(let s=0,r=e.length;s<r;s++){const a=e[s],l=a.sort==="desc",c=this.getValue(n,a.column),u=this.getValue(i,a.column);let d;const h=this.getComparator(a,n);if(h?d=h(c,u,n,i,l):d=QA(c,u,this.isAccentedSort),!isNaN(d)&&d!==0)return a.sort==="asc"?d:d*-1}return t.currentPos-o.currentPos}getComparator(e,t){const o=e.column,n=o.getColDef().comparator;if(n!=null)return n;if(!o.getColDef().showRowGroup)return;const i=!t.group&&o.getColDef().field;if(!i)return;const s=this.beans.colModel.getColDefCol(i);if(s)return s.getColDef().comparator}getValue(e,t){var a,l;const{valueSvc:o,colModel:n,showRowGroupCols:i,gos:s}=this.beans;if(!this.primaryColumnsSortGroups)return o.getValue(t,e,!1);if(e.rowGroupColumn===t){if(z0(s,n.isPivotActive())){const d=(a=e.allLeafChildren)==null?void 0:a[0];return d?o.getValue(t,d,!1):void 0}const u=i==null?void 0:i.getShowRowGroupCol(t.getId());return u?(l=e.groupData)==null?void 0:l[u.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return o.getValue(t,e,!1)}};function uV(e){var t;(t=e.sortSvc)==null||t.onSortChanged("api")}var yx={moduleName:"Sort",version:Je,beans:[tG,cV],apiFunctions:{onSortChanged:uV},userComponents:{agSortIndicator:lg},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},dV=class extends Ie{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:o}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),o.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),Yi(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,br(e.source))}}};function hV(e){var t;(t=e.valueCache)==null||t.expire()}function fV(e,t){const{colKey:o,rowNode:n,useFormatter:i}=t,s=e.colModel.getColDefCol(o)??e.colModel.getCol(o);if(qt(s))return null;const r=e.valueSvc.getValueForDisplay(s,n).value;return i?e.valueSvc.formatValue(s,n,r)??Kr(r):r}var pV="paste",gV=class extends Ie{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;Co(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:o}=this.beans;if(e.source===pV||t.get("suppressChangeDetection"))return;const n=e.node,i=[n],s=this.clientSideRowModel,r=s==null?void 0:s.rootNode;if(r&&!n.isRowPinned()){const a=t.get("aggregateOnlyChangedColumns"),l=new ml(a,r);l.addParentNode(n.parent,[e.column]),s.doAggregate(l),l.forEachChangedNodeDepthFirst(c=>{i.push(c),c.sibling&&i.push(c.sibling)})}o.refreshCells({rowNodes:i})}},mV=class extends Ie{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);Nt(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(o){return Nt(16,{expression:e,params:t,e:o}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const o=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",o);return t[e]=n,n}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},vV=class extends Ie{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,o){if(this.active){const n=this.cacheVersion;e.__cacheVersion!==n&&(e.__cacheVersion=n,e.__cacheData={}),e.__cacheData[t]=o}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},yV={moduleName:"ValueCache",version:Je,beans:[vV],apiFunctions:{expireValueCache:hV}},CV={moduleName:"Expression",version:Je,beans:[mV]},bV={moduleName:"ChangeDetection",version:Je,beans:[gV]},wV={moduleName:"CellApi",version:Je,apiFunctions:{getCellValue:fV}},SV=class extends Ie{constructor(){super(...arguments),this.beanName="valueSvc",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=jr(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=t=>this.callColumnCellValueChangedHandler(t);this.eventSvc.addEventListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeEventListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValueForDisplay(e,t,o=!1,n=!1){const{showRowGroupColValueSvc:i}=this.beans,s=!e&&t.group,r=e==null?void 0:e.colDef.showRowGroup,a=!this.isTreeData||t.footer;if(i&&a&&(s||r)){const v=i.getGroupValue(t,e);if(v==null)return{value:null,valueFormatted:null};if(!o)return{value:v.value,valueFormatted:null};const m=i.formatAndPrefixGroupColValue(v,e,n);return{value:v.value,valueFormatted:m}}if(!e)return{value:t.key,valueFormatted:null};const l=t.leafGroup&&this.colModel.isPivotMode(),c=t.group&&t.expanded&&!t.footer&&!l,u=this.gos.get("groupSuppressBlankHeader")||!t.sibling,d=c&&!u,h=this.getValue(e,t,d),f=o&&!(n&&e.colDef.useValueFormatterForExport===!1);return{value:h,valueFormatted:f?this.formatValue(e,t,h):null}}getValue(e,t,o=!1){var v;if(this.initialised||this.init(),!t)return;const n=e.getColDef(),i=n.field,s=e.getColId(),r=t.data;let a;const l=n.showRowGroup;if(typeof l=="string"&&(((v=this.beans.rowGroupColsSvc)==null?void 0:v.getColumnIndex(l))??-1)>t.level)return null;const c=typeof l!="string"||!t.group,u=t.groupData&&s in t.groupData,d=!o&&t.aggData&&t.aggData[s]!==void 0,h=this.isSsrm&&o&&!!e.getColDef().aggFunc,f=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(this.isTreeData&&d)a=t.aggData[s];else if(this.isTreeData&&n.valueGetter)a=this.executeValueGetter(n.valueGetter,r,e,t);else if(this.isTreeData&&i&&r)a=Ga(r,i,e.isFieldContainsDots());else if(u)a=t.groupData[s];else if(d)a=t.aggData[s];else if(n.valueGetter){if(!c)return a;a=this.executeValueGetter(n.valueGetter,r,e,t)}else if(f)a=Ga(r,t.field,e.isFieldContainsDots());else if(i&&r&&!h){if(!c)return a;a=Ga(r,i,e.isFieldContainsDots())}if(this.cellExpressions&&typeof a=="string"&&a.indexOf("=")===0){const m=a.substring(1);a=this.executeValueGetter(m,r,e,t)}return a}parseValue(e,t,o,n){var r;const i=e.getColDef(),s=i.valueParser;if(Ye(s)){const a=pt(this.gos,{node:t,data:t==null?void 0:t.data,oldValue:n,newValue:o,colDef:i,column:e});return typeof s=="function"?s(a):(r=this.expressionSvc)==null?void 0:r.evaluate(s,a)}return o}getDeleteValue(e,t){return Ye(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t).value)??null:null}formatValue(e,t,o,n,i=!0){let s=null,r;const a=e.getColDef();if(n?r=n:i&&(r=a.valueFormatter),r){const l=pt(this.gos,{value:o,node:t,data:t?t.data:null,colDef:a,column:e});typeof r=="function"?s=r(l):s=this.expressionSvc?this.expressionSvc.evaluate(r,l):null}else if(a.refData)return a.refData[o]||"";return s==null&&Array.isArray(o)&&(s=o.join(", ")),s}setValue(e,t,o,n){var u,d;const i=this.colModel.getColDefCol(t);if(!e||!i)return!1;qt(e.data)&&(e.data={});const{field:s,valueSetter:r}=i.getColDef();if(qt(s)&&qt(r))return Ue(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(i,o))return Ue(135),!1;const a=pt(this.gos,{node:e,data:e.data,oldValue:this.getValue(i,e),newValue:o,colDef:i.getColDef(),column:i});a.newValue=o;let l;if(Ye(r)?typeof r=="function"?l=r(a):l=(u=this.expressionSvc)==null?void 0:u.evaluate(r,a):l=this.setValueUsingField(e.data,s,o,i.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),(d=this.valueCache)==null||d.onDataChanged();const c=this.getValue(i,e);return this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,colDef:a.colDef,data:e.data,node:e,oldValue:a.oldValue,newValue:c,value:c,source:n}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,o,n){if(!t)return!1;let i=!1;if(!n)i=e[t]===o,i||(e[t]=o);else{const s=t.split(".");let r=e;for(;s.length>0&&r;){const a=s.shift();s.length===0?(i=r[a]===o,i||(r[a]=o)):r=r[a]}}return!i}executeValueGetterWithValueCache(e,t,o,n){const i=o.getColId(),s=this.valueCache.getValue(n,i);if(s!==void 0)return s;const r=this.executeValueGetterWithoutValueCache(e,t,o,n);return this.valueCache.setValue(n,i,r),r}executeValueGetterWithoutValueCache(e,t,o,n){var r;const i=pt(this.gos,{data:t,node:n,column:o,colDef:o.getColDef(),getValue:this.getValueCallback.bind(this,n)});let s;return typeof e=="function"?s=e(i):s=(r=this.expressionSvc)==null?void 0:r.evaluate(e,i),s}getValueCallback(e,t){const o=this.colModel.getColDefCol(t);return o?this.getValue(o,e):null}getKeyForNode(e,t){const o=this.getValue(e,t),n=e.getColDef().keyCreator;let i=o;if(n){const s=pt(this.gos,{value:o,colDef:e.getColDef(),column:e,node:t,data:t.data});i=n(s)}return typeof i=="string"||i==null||(i=String(i),i==="[object Object]"&&Ue(121)),i}},xV={moduleName:"CommunityCore",version:Je,beans:[JH,j2,HN,ZI,sV,eN,$H,SG,QI,UG,WG,aV,SV,QH,UH,YH,VN,dV,MN,ON],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:K2,destroy:q2,isDestroyed:Q2,getGridOption:Y2,setGridOption:J2,updateGridOptions:KS,isModuleRegistered:Z2},dependsOn:[TN,AB,HB,yx,FG,oN,DG,iV,bV,kG,zG,qG,YG,IG,NN,kN,CV]};function Cx(e){const{inputValue:t,allSuggestions:o,hideIrrelevant:n,filterByPercentageOfBestMatch:i}=e;let s=o.map((l,c)=>({value:l,relevance:RV(t,l),idx:c}));if(s.sort((l,c)=>c.relevance-l.relevance),n&&(s=s.filter(l=>l.relevance!==0)),s.length>0&&i&&i>0){const c=s[0].relevance*i;s=s.filter(u=>c-u.relevance<0)}const r=[],a=[];for(const l of s)r.push(l.value),a.push(l.idx);return{values:r,indices:a}}function RV(e,t){if(e===t)return 1e3;const o=e.length,n=t.length;if(o===0||n===0)return 0;const i=e.toLocaleLowerCase(),s=t.toLocaleLowerCase(),r=s.indexOf(i);if(r!==-1)return 980-r*2;if([...i].filter(d=>s.includes(d)).length===0)return 0;let l=Array.from({length:n+1},(d,h)=>h);for(let d=0;d<o;d++){const h=[d+1];for(let f=0;f<n;f++){const v=l[f+1]+1,m=h[f]+1;let b=l[f]+(e[d]!==t[f]?1:0);n>10&&f>n/2&&(b+=1),d>0&&f>0&&e[d-1]===t[f-1]&&(b-=4),h.push(Math.min(v,m,b))}l=h}const c=Math.round(l[n]),u=Math.max(1,1e3-c*30);return Math.max(1,u)}var bx={AdvancedFilter:1,AllEnterprise:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},Ah=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],_V={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:Ah,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...Ah,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...Ah,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},EV={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function PV(e,t){const o=[];return(Array.isArray(e)?e:[e]).forEach(n=>{const i=_V[n];i?i.forEach(s=>{const r=EV[s];(!r||r===t)&&o.push(s)}):o.push(n)}),o}var wx=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,FV=e=>{const t=e.map(n=>`import { ${ja(n)} } from '${bx[n]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(n=>n==="IntegratedCharts"||n==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(n=>ja(n,!0)).join(", ")} ]); 

For more info see: ${vr}/modules/`};function ja(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function DV(e,t){const o=t.filter(s=>s==="IntegratedCharts"||s==="Sparklines");let n="";return!(globalThis==null?void 0:globalThis.agCharts)&&o.length>0?n=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(s=>bx[s])&&(n=n+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),n}function Sx({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var Xy=({reasonOrId:e,moduleName:t,gridScoped:o,gridId:n,rowModelType:i,additionalText:s,isUmd:r})=>{const a=PV(t,i),l=typeof e=="string"?e:IV[e];if(r)return DV(l,a);const c=a.filter(h=>h==="IntegratedCharts"||h==="Sparklines"),u=c.length>0?`${c.map(h=>ja(h)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${l} as ${a.length>1?"one of "+a.map(h=>ja(h)).join(", "):ja(a[0])} is not registered${o?" for gridId: "+n:""}. ${u} Check if you have registered the module:
`}
${FV(a)}`+(s?` 

${s}`:"")},eC=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,TV=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,kV={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e==null?void 0:e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e==null?void 0:e.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:o})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",o],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${TV(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:o,pageSizeOptions:n})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${o?"":" the default"} paginationPageSizeSelector=[${n==null?void 0:n.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",100:({rowModelType:e})=>`selectAll only available when rowModelType='clientSide', ie not ${e}`,101:({propertyName:e,componentName:t,agGridDefaults:o,jsComps:n})=>{const i=[],s=[...Object.keys(o??[]).filter(a=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(a)),...Object.keys(n??[])],r=Cx({inputValue:t,allSuggestions:s,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return i.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),r.length>0&&i.push(`         Did you mean: [${r.slice(0,3)}]?
`),i.push("If using a custom component check it has been registered correctly."),i},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${vr}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({aggFuncOrString:e})=>`unrecognised aggregation function ${e}`,110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:o})=>["duplicate group keys for row data, keys should be unique",e,t,...o??[]],187:({rowId:e,firstData:t,secondData:o})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",o],188:()=>"getRowId callback must be provided for Server Side Row Model selection to work correctly.",189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:Xy,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${vr}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e==null?void 0:e.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>eC("IntegratedChartsModule"),258:()=>eC("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:o,gridId:n,rowModelType:i})=>Xy({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:Rr[t],gridId:n,gridScoped:o,rowModelType:i}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${vr}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>wx(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children.";break}return t},275:Sx,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled."};function AV(e,t){const o=kV[e];if(!o)return[`Missing error text for error id ${e}!`];const n=o(t),s=`
See ${O0(e,t)}`;return Array.isArray(n)?n.concat(s):[n,s]}var IV={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},cg=class fs{static applyGlobalGridOptions(t){if(!fs.gridOptions)return{...t};let o={};return No(o,fs.gridOptions,!0,!0),fs.mergeStrategy==="deep"?No(o,t,!0,!0):o={...o,...t},fs.gridOptions.context&&(o.context=fs.gridOptions.context),t.context&&(fs.mergeStrategy==="deep"&&o.context&&No(t.context,o.context,!0,!0),o.context=t.context),o}};cg.gridOptions=void 0;cg.mergeStrategy="shallow";var MV=cg;function OV(e,t,o){if(!t)return Nt(11),{};const n=o;let i;if(!(n!=null&&n.setThemeOnGridDiv)){const r=Ut({tag:"div"});r.style.height="100%",e.appendChild(r),e=r,i=()=>e.remove()}return new BV().create(e,t,r=>{const a=new U2(e);r.createBean(a)},void 0,o,i)}var LV=1,BV=class{create(e,t,o,n,i,s){const r=MV.applyGlobalGridOptions(t),a=r.gridId??String(LV++),l=this.getRegisteredModules(i,a,r.rowModelType),c=this.createBeansList(r.rowModelType,l,a),u=this.createProvidedBeans(e,r,i);if(!c)return;const d={providedBeanInstances:u,beanClasses:c,gridId:a,beanInitComparator:P2,beanDestroyComparator:F2,derivedBeans:[_2],destroyCallback:s},h=new WM(d);return this.registerModuleFeatures(h,l),o(h),h.getBean("syncSvc").start(),n&&n(h),h.getBean("gridApi")}getRegisteredModules(e,t,o){var n;return Hr(xV,void 0,!0),(n=e==null?void 0:e.modules)==null||n.forEach(i=>Hr(i,t)),NM(t,tC(o))}registerModuleFeatures(e,t){const o=e.getBean("registry"),n=e.getBean("apiFunctionSvc");t.forEach(i=>{o.registerModule(i);const s=i.apiFunctions;s&&Object.keys(s).forEach(a=>{n==null||n.addFunction(a,s[a])})})}createProvidedBeans(e,t,o){let n=o?o.frameworkOverrides:null;qt(n)&&(n=new $S);const i={gridOptions:t,eGridDiv:e,globalListener:o?o.globalListener:null,globalSyncListener:o?o.globalSyncListener:null,frameworkOverrides:n};return o&&o.providedBeanInstances&&Object.assign(i,o.providedBeanInstances),i}createBeansList(e,t,o){const n={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},i=tC(e),s=n[i];if(!s){Ra(201,{rowModelType:i},`Unknown rowModelType ${i}.`);return}if(!GM()){Ra(272,void 0,wx());return}if(!e){const a=Object.entries(n).filter(([l,c])=>Af(c,o,l));if(a.length==1){const[l,c]=a[0];if(l!==i){const u={moduleName:c,rowModelType:l};Ra(275,u,Sx(u));return}}}if(!Af(s,o,i)){Ra(200,{reasonOrId:`rowModelType = '${i}'`,moduleName:s,gridScoped:Up(),gridId:o,rowModelType:i},`Missing module ${s}Module for rowModelType ${i}.`);return}const r=new Set;return t.forEach(a=>{var l;return(l=a.beans)==null?void 0:l.forEach(c=>r.add(c))}),Array.from(r)}};function tC(e){return e??"clientSide"}function Yn(e){const t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function od(e){const t=e.rowModel;return t.getType()==="infinite"?t:void 0}function xx(e){const t=e.rowModel;return t.getType()==="serverSide"?t:void 0}var NV=class extends Ie{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");if(t)return(n,i,s)=>t({key:n,defaultValue:i,variableValues:s});const o=e.get("localeText");return(n,i,s)=>{let r=o&&o[n];if(r&&s&&s.length){let a=0;for(;!(a>=s.length||r.indexOf("${variable}")===-1);)r=r.replace("${variable}",s[a++])}return r??i}}};function HV(e,t=!1){const o=[],n=[],i=[],s=[],r=[],a=[],l=[],c=[],u=[];let d=0;for(let h=0;h<e.length;h++){const{colId:f,sort:v,sortIndex:m,rowGroup:b,rowGroupIndex:S,aggFunc:R,pivot:_,pivotIndex:M,pinned:I,hide:W,width:z,flex:de}=e[h];u.push(f),v&&(o[m??d++]={colId:f,sort:v}),b&&(n[S??0]=f),typeof R=="string"&&i.push({colId:f,aggFunc:R}),_&&(s[M??0]=f),I&&(I==="right"?a:r).push(f),W&&l.push(f),(de!=null||z)&&c.push({colId:f,flex:de??void 0,width:z})}return{sort:o.length?{sortModel:o}:void 0,rowGroup:n.length?{groupColIds:n}:void 0,aggregation:i.length?{aggregationModel:i}:void 0,pivot:s.length||t?{pivotMode:t,pivotColIds:s}:void 0,columnPinning:r.length||a.length?{leftColIds:r,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:c.length?{columnSizingModel:c}:void 0,columnOrder:u.length?{orderedColIds:u}:void 0}}function GV(e){const t=[];return e.forEach(({groupId:o,open:n})=>{n&&t.push(o)}),t.length?{openColumnGroupIds:t}:void 0}var VV=class{wrap(e,t,o,n){const i=this.createWrapper(e,n);return t==null||t.forEach(s=>{this.createMethod(i,s,!0)}),o==null||o.forEach(s=>{this.createMethod(i,s,!1)}),i}createMethod(e,t,o){e.addMethod(t,this.createMethodProxy(e,t,o))}createMethodProxy(e,t,o){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(o&&Ue(49,{methodName:t}),null)}}},zV={tag:"div",cls:"ag-tooltip"},WV=class extends Yr{constructor(){super(zV)}init(e){const{value:t}=e;this.getGui().textContent=Kr(t)}};function UV(e,t){if(typeof e!="number")return"";const o=t(),n=o("thousandSeparator",","),i=o("decimalSeparator",".");return e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${n}`)}var $V=class extends Ie{getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},jV=class{constructor(e){const{colModel:t,rowGroupColsSvc:o,colNames:n,valueSvc:i,gos:s,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.colModel=t,this.rowGroupColsSvc=o,this.colNames=n,this.valueSvc=i,this.gos=s,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,o,n,i){if(this.processRowGroupCallback&&(this.gos.get("treeData")||i.group)&&(!i.rowGroupColumn||e.isRowGroupDisplayed(i.rowGroupColumn.getColId())))return{value:this.processRowGroupCallback(pt(this.gos,{column:e,node:i}))??""};if(this.processCellCallback)return{value:this.processCellCallback(pt(this.gos,{accumulatedRowIndex:o,column:e,node:i,value:this.valueSvc.getValueForDisplay(e,i).value,type:n,parseValue:h=>this.valueSvc.parseValue(e,i,h,this.valueSvc.getValue(e,i)),formatValue:h=>this.valueSvc.formatValue(e,i,h)??h}))??""};const s=this.gos.get("treeData"),r=this.valueSvc,a=i.level===-1&&i.footer,l=t===0&&W0(this.gos,i,this.colModel.isPivotMode()),c=e.colDef.showRowGroup===!0&&(i.group||s);if(!a&&(l||c)){let h="",f=i;for(;f&&f.level!==-1;){const{value:v,valueFormatted:m}=r.getValueForDisplay(l?void 0:e,f,!0);h=` -> ${m??v??""}${h}`,f=f.parent}return{value:h,valueFormatted:h}}const{value:u,valueFormatted:d}=r.getValueForDisplay(e,i,!0);return{value:u??"",valueFormatted:d}}getHeaderName(e,t){return e?e(pt(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function KV(e,t){const o=document.defaultView||window;if(!o){Ue(52);return}const n=document.createElement("a"),i=o.URL.createObjectURL(t);n.setAttribute("href",i),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:o})),document.body.removeChild(n),o.setTimeout(()=>{o.URL.revokeObjectURL(i)},0)}var qV={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0},Go="clientSide",ko="serverSide",sr="infinite",QV={onGroupExpandedOrCollapsed:[Go],refreshClientSideRowModel:[Go],isRowDataEmpty:[Go],forEachLeafNode:[Go],forEachNodeAfterFilter:[Go],forEachNodeAfterFilterAndSort:[Go],resetRowHeights:[Go],applyTransaction:[Go],applyTransactionAsync:[Go],flushAsyncTransactions:[Go],getBestCostNodeSelection:[Go],getServerSideSelectionState:[ko],setServerSideSelectionState:[ko],applyServerSideTransaction:[ko],applyServerSideTransactionAsync:[ko],applyServerSideRowData:[ko],retryServerSideLoads:[ko],flushServerSideAsyncTransactions:[ko],refreshServerSide:[ko],getServerSideGroupLevelState:[ko],refreshInfiniteCache:[sr],purgeInfiniteCache:[sr],getInfiniteRowCount:[sr],isLastRowIndexKnown:[sr,ko],expandAll:[Go,ko],collapseAll:[Go,ko],onRowHeightChanged:[Go,ko],setRowCount:[sr,ko],getCacheBlockState:[sr,ko]},YV={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function JV(e,t,o){const n=YV[e];if(n){const{version:s,new:r,old:a,message:l}=n,c=a??e;return(...u)=>{const d=r?`Please use ${r} instead. `:"";return Ha(`Since ${s} api.${c} is deprecated. ${d}${l??""}`),t.apply(t,u)}}const i=QV[e];return i?(...s)=>{const r=o.rowModel.getType();if(!i.includes(r)){mr(`api.${e} can only be called when gridOptions.rowModelType is ${i.join(" or ")}`);return}return t.apply(t,s)}:t}var ZV={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1},XV={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},e3=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),t3=class extends Ie{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,YA(this)}warnOnInitialPropertyUpdate(e,t){e==="api"&&qV[t]&&Ue(22,{key:t})}processGridOptions(e){this.processOptions(e,CG())}validateApiFunction(e,t){return JV(e,t,this.beans)}missingUserComponent(e,t,o,n){const i=Rr[t];i?this.gos.assertModuleRegistered(i,`AG Grid '${e}' component: ${t}`):Ue(101,{propertyName:e,componentName:t,agGridDefaults:o,jsComps:n})}checkRowEvents(e){n3.has(e)&&Ue(10,{eventType:e})}validateIcon(e){if(e3.has(e)&&Ue(43,{iconName:e}),ZV[e])return;const t=XV[e];if(t){Nt(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:Up(),gridId:this.beans.context.getGridId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}Ue(134,{iconName:e})}isProvidedUserComp(e){return!!Rr[e]}validateColDef(e){this.processOptions(e,aG())}processOptions(e,t){const{validations:o,deprecations:n,allProperties:i,propertyExceptions:s,objectName:r,docsUrl:a}=t;i&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...s??[],...Object.keys(n)],i,r,a);const l=new Set;Object.keys(e).forEach(u=>{const d=n[u];if(d){const{message:R,version:_}=d;l.add(`As of v${_}, ${String(u)} is deprecated. ${R??""}`)}const h=e[u];if(h==null||h===!1)return;const f=o[u];if(!f)return;const{dependencies:v,validate:m,supportedRowModels:b,expectedType:S}=f;if(S){const R=typeof h;if(R!==S){l.add(`${String(u)} should be of type '${S}' but received '${R}' (${h}).`);return}}if(b){const R=this.gridOptions.rowModelType??"clientSide";if(!b.includes(R)){l.add(`${String(u)} is not supported with the '${R}' row model. It is only valid with: ${b.join(", ")}.`);return}}if(v){const R=this.checkForRequiredDependencies(u,v,e);if(R){l.add(R);return}}if(m){const R=m(e,this.gridOptions,this.beans);if(R){l.add(R);return}}}),l.size>0&&l.forEach(u=>{Ha(u)})}checkForRequiredDependencies(e,t,o){const i=Object.entries(t).filter(([s,r])=>{const a=o[s];return!r.required.includes(a)});return i.length===0?null:i.map(([s,r])=>`'${String(e)}' requires '${s}' to be one of [${r.required.map(a=>a===null?"null":a===void 0?"undefined":a).join(", ")}]. ${r.reason??""}`).join(`
           `)}checkProperties(e,t,o,n,i){const s=["__ob__","__v_skip","__metadata__"],r=o3(Object.getOwnPropertyNames(e),[...s,...t,...o],o),a=Object.keys(r);for(const l of a){const c=r[l];let u=`invalid ${n} property '${l}' did you mean any of these: ${c.slice(0,8).join(", ")}.`;o.includes("context")&&(u+=`
If you are trying to annotate ${n} with application data, use the '${n}.context' property instead.`),Ha(u)}if(a.length>0&&i){const l=this.beans.frameworkOverrides.getDocLink(i);Ha(`to see all the valid ${n} properties please check: ${l}`)}}getConsoleMessage(e,t){return AV(e,t)}};function o3(e,t,o){const n={},i=e.filter(s=>!t.some(r=>r===s));return i.length>0&&i.forEach(s=>n[s]=Cx({inputValue:s,allSuggestions:o}).values),n}var n3=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),i3={moduleName:"Validation",version:Je,beans:[t3]};function Rx(e){e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)}var s3=class extends Ie{constructor(){super(...arguments),this.beanName="filterStage",this.refreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),this.step="filter"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var o;const t=!!((o=this.filterManager)!=null&&o.isChildFilterPresent());this.filterNodes(t,e)}filterNodes(e,t){const o=(n,i)=>{n.hasChildren()&&e&&!i?n.childrenAfterFilter=n.childrenAfterGroup.filter(s=>{const r=s.childrenAfterFilter&&s.childrenAfterFilter.length>0,a=s.data&&this.filterManager.doesRowPassFilter({rowNode:s});return r||a}):n.childrenAfterFilter=n.childrenAfterGroup,Rx(n)};if(this.doingTreeDataFiltering()){const n=(s,r)=>{if(s.childrenAfterGroup)for(let a=0;a<s.childrenAfterGroup.length;a++){const l=s.childrenAfterGroup[a],c=r||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?n(s.childrenAfterGroup[a],c):o(l,c)}o(s,r)},i=s=>n(s,!1);t.executeFromRootNode(i)}else{const n=i=>o(i,!1);t.forEachChangedNodeDepthFirst(n,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},r3=class extends tg{constructor(){super(...arguments),this.iconCreated=!1}setComp(e,t,o,n,i){this.comp=e;const s=kl(this,this.beans.context,i);this.eButtonShowMainFilter=o,this.eFloatingFilterBody=n,this.setGui(t,s),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(s),this.setupLeft(s),this.setupHover(s),this.setupFocus(s),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(s),this.setupUi(),s.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(s),s.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(s)}),s.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,o=e.colDef;return pt(t.gos,{colDef:o,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,o=!!e.floatingFilter;this.active=t&&o}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=sn("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Qr(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();Yu(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){var r;const{beans:t}=this;if(Jt(t)===this.eGui)return;const i=$s(t,this.eGui,null,e.shiftKey);if(i){(r=t.headerNavigation)==null||r.scrollToColumn(this.column),e.preventDefault(),i.focus();return}const s=this.findNextColumnWithFloatingFilter(e.shiftKey);s&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:s},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let o=this.column;do if(o=e?t.getColBefore(o):t.getColAfter(o),!o)break;while(!o.getColDef().filter||!o.getColDef().floatingFilter);return o}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case Te.UP:case Te.DOWN:case Te.LEFT:case Te.RIGHT:if(t)return;Hs(e);case Te.ENTER:t&&Gs(this.eGui)&&e.preventDefault();break;case Te.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const o=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),n=!!e.relatedTarget&&Rs(e.relatedTarget,"ag-floating-filter");if(o&&n&&e.target===this.eGui){const i=this.lastFocusEvent,s=!!(i&&i.key===Te.TAB);if(i&&s){const r=i.shiftKey;Gs(this.eGui,r)}}this.focusThis()}setupHover(e){var t;(t=this.beans.colHover)==null||t.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new eg(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){var e;this.suppressFilterButton=!((e=this.beans.menuSvc)!=null&&e.isFloatingFilterButtonEnabled(this.column)),this.highlightFilterButtonWhenActive=!Ko(this.gos)}setupUserComp(){var t;if(!this.active)return;const e=(t=this.beans.filterManager)==null?void 0:t.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){var t;const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;(t=this.beans.menuSvc)==null||t.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,o=n=>{if((n==null?void 0:n.source)==="filterDestroyed"&&!this.isAlive())return;const i=this.comp.getFloatingFilterComp();i&&i.then(s=>{if(s){const r=t==null?void 0:t.getCurrentFloatingFilterParentModel(this.column),a=n?{...n,columns:n.columns??[],source:n.source==="api"?"api":"columnFilter"}:null;s.onParentModelChanged(r,a)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:o}),t!=null&&t.isFilterActive(this.column)&&o(null)}setupWidth(e){const t=()=>{const o=`${this.column.getActualWidth()}px`;this.comp.setWidth(o)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var e;if(!this.suppressFilterButton&&this.comp){const t=!!((e=this.beans.filterManager)!=null&&e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){var s;const t=this.active;this.setupActive();const o=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const n=this.active?(s=this.beans.filterManager)==null?void 0:s.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,i=this.comp.getFloatingFilterComp();!i||!n?this.updateCompDetails(e,n,o):i.then(r=>{var a;!r||(a=this.beans.filterManager)!=null&&a.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(e,n,o):this.updateFloatingFilterParams(n)})}updateCompDetails(e,t,o){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),o&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){var o;if(!e)return;const t=e.params;(o=this.comp.getFloatingFilterComp())==null||o.then(n=>{n!=null&&n.refresh&&typeof n.refresh=="function"&&n.refresh(t)})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function a3(e,t){var n;const o=e.colModel.getCol(t);if(!o){Nt(12,{colKey:t});return}(n=e.menuSvc)==null||n.showColumnMenu({column:o,positionBy:"auto"})}function l3(e){var t;(t=e.menuSvc)==null||t.hidePopupMenu()}var c3={moduleName:"SharedMenu",version:Je,beans:[kL],apiFunctions:{showColumnMenu:a3,hidePopupMenu:l3}},u3=0,d3=200,h3=class extends Ie{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:o,column:n,node:i,event:s}=e,r=t.getBoundingClientRect(),a=this.getParentRect();this.setAlignedTo(t,o);let l=!1;const c=()=>{const u=this.keepXYWithinBounds(o,r.top-a.top,0),d=o.clientWidth>0?o.clientWidth:200;l||(o.style.minWidth=`${d}px`,l=!0);const f=a.right-a.left-d;let v;return this.gos.get("enableRtl")?(v=b(),v<0&&(v=m(),this.setAlignedStyles(o,"left")),v>f&&(v=0,this.setAlignedStyles(o,"right"))):(v=m(),v>f&&(v=b(),this.setAlignedStyles(o,"right")),v<0&&(v=0,this.setAlignedStyles(o,"left"))),{x:v,y:u};function m(){return r.right-a.left-2}function b(){return r.left-a.left-d}};this.positionPopup({ePopup:o,keepWithinBounds:!0,updatePosition:c,postProcessCallback:()=>this.callPostProcessPopup("subMenu",o,t,s instanceof MouseEvent?s:void 0,n,i)})}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:o,nudgeY:n,skipObserver:i}=e;this.positionPopup({ePopup:t,nudgeX:o,nudgeY:n,keepWithinBounds:!0,skipObserver:i,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:o,nudgeY:n,keepWithinBounds:i,eventSource:s,alignSide:r="left",position:a="over",column:l,rowNode:c,type:u}=e,d=s.getBoundingClientRect(),h=this.getParentRect();this.setAlignedTo(s,t);const f=()=>{let v=d.left-h.left;r==="right"&&(v-=t.offsetWidth-d.width);let m;return a==="over"?(m=d.top-h.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,d,h,e.nudgeY||0)==="under"?m=d.top-h.top+d.height:m=d.top-t.offsetHeight-(n||0)*2-h.top),{x:v,y:m}};this.positionPopup({ePopup:t,nudgeX:o,nudgeY:n,keepWithinBounds:i,updatePosition:f,postProcessCallback:()=>this.callPostProcessPopup(u,t,s,null,l,c)})}shouldRenderUnderOrAbove(e,t,o,n){const i=o.bottom-t.bottom,s=t.top-o.top,r=e.offsetHeight+n;return i>r?"under":s>r||s>i?"above":"under"}setAlignedStyles(e,t){const o=this.getPopupIndex(e);if(o===-1)return;const n=this.popupList[o],{alignedToElement:i}=n;!i||(["right","left","over","above","under"].forEach(r=>{i.classList.remove(`ag-has-popup-positioned-${r}`),e.classList.remove(`ag-popup-positioned-${r}`)}),!t)||(i.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){const o=this.getPopupIndex(t);if(o!==-1){const n=this.popupList[o];n.alignedToElement=e}}callPostProcessPopup(e,t,o,n,i,s){const r=this.gos.getCallback("postProcessPopup");r&&r({column:i,rowNode:s,ePopup:t,type:e,eventSource:o,mouseEvent:n})}positionPopup(e){const{ePopup:t,keepWithinBounds:o,nudgeX:n,nudgeY:i,skipObserver:s,updatePosition:r}=e,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:d}=r();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,n&&(u+=n),i&&(d+=i),o&&(u=this.keepXYWithinBounds(t,u,1),d=this.keepXYWithinBounds(t,d,0)),t.style.left=`${u}px`,t.style.top=`${d}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!s){const c=Zi(this.beans,t,()=>l(!0));setTimeout(()=>c(),d3)}}getActivePopups(){return this.popupList.map(e=>e.element)}getParentRect(){const e=go(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),P0(t)}keepXYWithinBounds(e,t,o){const n=o===0,i=n?"clientHeight":"clientWidth",s=n?"top":"left",r=n?"height":"width",a=n?"scrollTop":"scrollLeft",l=go(this.beans),c=l.documentElement,u=this.getPopupParent(),d=e.getBoundingClientRect(),h=u.getBoundingClientRect(),f=l.documentElement.getBoundingClientRect(),v=u===l.body,m=Math.ceil(d[r]);let S=v?(n?E0:uu)(c)+c[a]:u[i];v&&(S-=Math.abs(f[s]-h[s]));const R=S-m;return Math.min(Math.max(t,0),Math.abs(R))}addPopup(e){const t=go(this.beans),{eChild:o,ariaLabel:n,alwaysOnTop:i,positionCallback:s,anchorToElement:r}=e;if(!t)return Ue(122),{hideFunc:()=>{}};const a=this.getPopupIndex(o);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(o);const l=this.createPopupWrapper(o,n,!!i),c=this.addEventListenersToPopup({...e,wrapperEl:l});return s&&s(),this.addPopupToPopupList(o,l,c,r),{hideFunc:c}}initialisePopupPosition(e){const o=this.getPopupParent().getBoundingClientRect();Ye(e.style.top)||(e.style.top=`${o.top*-1}px`),Ye(e.style.left)||(e.style.left=`${o.left*-1}px`)}createPopupWrapper(e,t,o){const n=this.getPopupParent(),{environment:i,gos:s}=this.beans,r=Ut({tag:"div"});return i.applyThemeClasses(r),r.classList.add("ag-popup"),e.classList.add(s.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Qi(e,"dialog"),Yu(e,t),r.appendChild(e),n.appendChild(r),o?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),r}handleThemeChange(e){if(e.themeChanged){const t=this.beans.environment;for(const o of this.popupList)t.applyThemeClasses(o.wrapper)}}addEventListenersToPopup(e){const t=this.beans,o=go(t),n=this.getPopupParent(),{wrapperEl:i,eChild:s,closedCallback:r,afterGuiAttached:a,closeOnEsc:l,modal:c}=e;let u=!1;const d=m=>{if(!i.contains(Jt(t)))return;m.key===Te.ESCAPE&&!ui(m)&&v({keyboardEvent:m})},h=m=>v({mouseEvent:m}),f=m=>v({touchEvent:m}),v=(m={})=>{const{mouseEvent:b,touchEvent:S,keyboardEvent:R,forceHide:_}=m;!_&&(this.isEventFromCurrentPopup({mouseEvent:b,touchEvent:S},s)||u)||(u=!0,n.removeChild(i),o.removeEventListener("keydown",d),o.removeEventListener("mousedown",h),o.removeEventListener("touchstart",f),o.removeEventListener("contextmenu",h),this.eventSvc.removeEventListener("dragStarted",h),r&&r(b||S||R),this.removePopupFromPopupList(s))};return a&&a({hidePopup:v}),window.setTimeout(()=>{l&&o.addEventListener("keydown",d),c&&(o.addEventListener("mousedown",h),this.eventSvc.addEventListener("dragStarted",h),o.addEventListener("touchstart",f),o.addEventListener("contextmenu",h))},0),v}addPopupToPopupList(e,t,o,n){this.popupList.push({element:e,wrapper:t,hideFunc:o,instanceId:u3++,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const o=this.getPopupIndex(e);if(o===-1)return;const n=this.popupList[o];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then(s=>s&&s()),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;const i=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=i,n.isAnchored=!0,i}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),o=t.getBoundingClientRect(),{element:n,ePopup:i}=e,s=n.getBoundingClientRect(),r=d=>parseInt(d.substring(0,d.length-1),10),a=(d,h)=>{const f=o[d]-s[d],v=r(i.style[d]);return{initialDiff:f,lastDiff:f,initial:v,last:v,direction:h}},l=a("top",0),c=a("left",1),u=this.beans.frameworkOverrides;return new Lo(d=>{u.wrapIncoming(()=>{u.setInterval(()=>{const h=t.getBoundingClientRect(),f=n.getBoundingClientRect();if(f.top==0&&f.left==0&&f.height==0&&f.width==0){e.hidePopup();return}const m=(b,S)=>{const R=r(i.style[S]);b.last!==R&&(b.initial=R,b.last=R);const _=h[S]-f[S];if(_!=b.lastDiff){const M=this.keepXYWithinBounds(i,b.initial+b.initialDiff-_,b.direction);i.style[S]=`${M}px`,b.last=M}b.lastDiff=_};m(l,"top"),m(c,"left")},200).then(h=>{d(()=>{h!=null&&window.clearInterval(h)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:o,touchEvent:n}=e,i=o||n;if(!i)return!1;const s=this.getPopupIndex(t);if(s===-1)return!1;for(let r=s;r<this.popupList.length;r++){const a=this.popupList[r];if(bI(a.element,i))return!0}return this.isElementWithinCustomPopup(i.target)}isElementWithinCustomPopup(e){const t=go(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const o=this.getWrapper(e);o&&(o.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(o))}bringPopupToFront(e){const t=this.getPopupParent(),o=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=o.length,i=this.getWrapper(e);if(!i||n<=1||!t.contains(e))return;const s=[],r=[];for(const h of o)h!==i&&(h.classList.contains("ag-always-on-top")?r.push(h):s.push(h));const a=[],l=r.length,d=i.classList.contains("ag-always-on-top")||!l?[...s,...r,i]:[...s,i,...r];for(let h=0;h<=n;h++){const f=d[h];if(o[h]===d[h]||f===i)continue;f.querySelectorAll("div").forEach(m=>{m.scrollTop!==0&&a.push([m,m.scrollTop])}),h===0?t.insertAdjacentElement("afterbegin",f):d[h-1].insertAdjacentElement("afterend",f)}for(;a.length;){const h=a.pop();h[0].scrollTop=h[1]}}},nd={moduleName:"Popup",version:Je,beans:[h3]},f3=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:1px solid var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function p3(e){const t=e.filterManager;return!!(t!=null&&t.isColumnFilterPresent())||!!(t!=null&&t.isAggregateFilterPresent())}function g3(e,t){var o;return((o=e.filterManager)==null?void 0:o.getColumnFilterInstance(t))??Promise.resolve(void 0)}function m3(e,t){var n;const o=e.colModel.getColDefCol(t);if(o)return(n=e.filterManager)==null?void 0:n.destroyFilter(o,"api")}function v3(e,t){e.frameworkOverrides.wrapIncoming(()=>{var o;return(o=e.filterManager)==null?void 0:o.setFilterModel(t)})}function y3(e){var t;return((t=e.filterManager)==null?void 0:t.getFilterModel())??{}}function C3(e,t){var o;return((o=e.filterManager)==null?void 0:o.getColumnFilterModel(t))??null}function b3(e,t,o){var n;return((n=e.filterManager)==null?void 0:n.setColumnFilterModel(t,o))??Promise.resolve()}function w3(e,t){var n;const o=e.colModel.getCol(t);if(!o){Nt(12,{colKey:t});return}(n=e.menuSvc)==null||n.showFilterMenu({column:o,containerType:"columnFilter",positionBy:"auto"})}var oC={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},nC=["january","february","march","april","may","june","july","august","september","october","november","december"];function S3(e,t){return e==null?-1:t==null?1:parseFloat(e)-parseFloat(t)}var x3=class extends Ie{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}postConstruct(){var e,t;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),beforeRefreshModel:({params:o})=>{var n;(o.rowDataUpdated||(n=o.changedProps)!=null&&n.has("treeData"))&&this.onNewRowsLoaded("rowDataUpdated")},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...((t=(e=this.gos.get("initialState"))==null?void 0:e.filter)==null?void 0:t.filterModel)??{}}}setFilterModel(e,t="api"){const{colModel:o,dataTypeSvc:n,filterManager:i}=this.beans;if(n!=null&&n.isPendingInference){this.filterModelUpdateQueue.push({model:e,source:t});return}const s=[],r=this.getFilterModel(!0);if(e){const a=new Set(Object.keys(e));this.allColumnFilters.forEach((l,c)=>{const u=e[c];s.push(yc(l.filterPromise,u)),a.delete(c)}),a.forEach(l=>{const c=o.getColDefCol(l)||o.getCol(l);if(!c){Ue(62,{colId:l});return}if(!c.isFilterAllowed()){Ue(63,{colId:l});return}const u=this.getOrCreateFilterWrapper(c);if(!u){Ue(64,{colId:l});return}s.push(yc(u.filterPromise,e[l]))})}else this.allColumnFilters.forEach(a=>{s.push(yc(a.filterPromise,null))});Lo.all(s).then(()=>{const a=this.getFilterModel(!0),l=[];this.allColumnFilters.forEach((c,u)=>{const d=r?r[u]:null,h=a?a[u]:null;ul(d,h)||l.push(c.column)}),l.length>0&&(i==null||i.onFilterChanged({columns:l,source:t}))})}getFilterModel(e){var s;const t={},{allColumnFilters:o,initialFilterModel:n,beans:{colModel:i}}=this;if(o.forEach((r,a)=>{const l=this.getModelFromFilterWrapper(r);Ye(l)&&(t[a]=l)}),!e)for(const r of Object.keys(n)){const a=n[r];Ye(a)&&!o.has(r)&&((s=i.getCol(r))!=null&&s.isFilterAllowed())&&(t[r]=a)}return t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?typeof t.getModel!="function"?(Ue(66),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){this.initialFilterModel={};const{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=a=>a?a.isFilterActive?a.isFilterActive():(Ue(67),!1):!1,{colModel:t,gos:o}=this.beans,n=!!Df(o),i=a=>{if(!a.isPrimary())return!0;const c=!t.isPivotActive();return!a.isValueActive()||!c?!1:t.isPivotMode()?!0:n},s=[],r=[];return this.forEachColumnFilter((a,l)=>{e(a)&&(i(l.column)?s.push(a):r.push(a))}).then(()=>{this.activeAggregateFilters=s,this.activeColumnFilters=r})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((o,n)=>this.setColFilterActive(n.column,o.isFilterActive(),e,t))}forEachColumnFilter(e){const t=[];return this.allColumnFilters.forEach(o=>{const n=o.filterPromise;n&&t.push(n.then(i=>e(i,o)))}),Lo.all(t)}doColumnFiltersPass(e,t,o){const{data:n,aggData:i}=e,s=o?this.activeAggregateFilters:this.activeColumnFilters,r=o?i:n;for(let a=0;a<s.length;a++){const l=s[a];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function"){Nt(91);continue}if(!l.doesFilterPass({node:e,data:r}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:o}=this.beans,n=()=>{this.isAlive()&&(o==null||o.onFilterChanged(e))};t.isRefreshInProgress()?setTimeout(n,0):n()}updateBeforeFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:o}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",o).then(()=>{this.allColumnFilters.forEach(n=>{n.filterPromise&&n.filterPromise.then(i=>{i&&i!==t&&i.onAnyFilterChanged&&i.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{var o;(o=t.onNewRowsLoaded)==null||o.call(t)}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createGetValue(e){const{filterValueSvc:t,colModel:o}=this.beans;return(n,i)=>{const s=i?o.getCol(i):e;return s?t.getValue(s,n):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;const{gos:o,dataTypeSvc:n}=this.beans;if(hh(o))t="agSetColumnFilter";else{const i=n==null?void 0:n.getBaseDataType(e);i==="number"?t="agNumberColumnFilter":i==="date"||i==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;const{gos:o,dataTypeSvc:n}=this.beans;if(hh(o))t="agSetColumnFloatingFilter";else{const i=n==null?void 0:n.getBaseDataType(e);i==="number"?t="agNumberColumnFloatingFilter":i==="date"||i==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const o=this.getDefaultFilter(e),n=e.getColDef();let i;const s={...this.createFilterParams(e,n),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(i,e)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(i,e)(a),doesRowPassOtherFilter:a=>{var l;return((l=this.beans.filterManager)==null?void 0:l.doesRowPassOtherFilters(i,a))??!0}},r=EM(this.beans.userCompFactory,n,s,o);return r?{filterPromise:()=>{const a=r.newAgStackInstance();return a.then(l=>{i=l,t&&(t.filter=l??void 0)}),a},compDetails:r}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return pt(this.gos,{column:e,colDef:t,rowModel:this.beans.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compDetails:null},{filterPromise:o,compDetails:n}=this.createFilterInstance(e,t);return t.filterPromise=(o==null?void 0:o())??null,t.compDetails=n,t}onColumnsChanged(){const e=[],{colModel:t,filterManager:o}=this.beans;this.allColumnFilters.forEach((i,s)=>{let r;i.column.isPrimary()?r=t.getColDefCol(s):r=t.getCol(s),!(r&&r===i.column)&&(e.push(i.column),this.disposeFilterWrapper(i,"columnChanged"),this.disposeColumnListener(s))});const n=e.every(iC);e.length>0&&!n?o==null||o.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){var e,t;(t=(e=this.beans.autoColSvc)==null?void 0:e.getColumns())==null||t.forEach(o=>{iC(o)&&this.getOrCreateFilterWrapper(o)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:o}=this.allColumnFilters.get(e.getColId())??{};return o&&typeof(o==null?void 0:o.isFilterAllowed)=="function"?o.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){const o=u=>{var h;const d=(h=this.getOrCreateFilterWrapper(e))==null?void 0:h.filterPromise;d!=null&&d.then(f=>{u(pl(f))})},n=e.getColDef(),i={...this.createFilterParams(e,n),filterChangedCallback:()=>o(u=>this.filterChangedCallbackFactory(u,e)())},{userCompFactory:s,frameworkOverrides:r}=this.beans,a=IM(s,n,i);let l=MO(r,n,()=>this.getDefaultFloatingFilter(e));l==null&&(l="agReadOnlyFloatingFilter");const c=pt(this.gos,{column:e,filterParams:a,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:o,showParentFilter:t});return kM(s,n,c,l)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){const o=e.getColId(),n=this.allColumnFilters.get(o);this.disposeColumnListener(o),delete this.initialFilterModel[o],n&&this.disposeFilterWrapper(n,t).then(i=>{var s;i&&this.isAlive()&&((s=this.beans.filterManager)==null||s.onFilterChanged({columns:[e],source:"api"}))})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){var o;return((o=e.filterPromise)==null?void 0:o.then(n=>{const i=!!(n!=null&&n.isFilterActive());return this.destroyBean(n),this.setColFilterActive(e.column,!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:e.column}),i}))??Lo.resolve(!1)}filterModifiedCallbackFactory(e,t){return()=>{this.eventSvc.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return o=>{const n=(o==null?void 0:o.source)??"columnFilter",i={filter:e,additionalEventAttributes:o,columns:[t],source:n};this.callOnFilterChangedOutsideRenderCycle(i)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const o=t.column,{compDetails:n}=o.isFilterAllowed()?this.createFilterInstance(o):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,n)){this.destroyFilter(o,"paramsUpdated");return}const i=o.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(o,"paramsUpdated");return}t.filterPromise.then(s=>{(s!=null&&s.refresh?s.refresh({...this.createFilterParams(o,o.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(s,o),filterChangedCallback:this.filterChangedCallbackFactory(s,o),doesRowPassOtherFilter:a=>{var l;return((l=this.beans.filterManager)==null?void 0:l.doesRowPassOtherFilters(s,a))??!0},...i}):!0)===!1&&this.destroyFilter(o,"paramsUpdated")})}setColumnFilterWrapper(e,t){const o=e.getColId();this.allColumnFilters.set(o,t),this.allColumnListeners.set(o,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(o)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:o}=e,{componentClass:n}=t;return!(o===n||(o==null?void 0:o.render)&&(n==null?void 0:n.render)&&o.render===n.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(o=>{t(pl(o))})})}getFilterInstanceImpl(e){var n;const t=this.beans.colModel.getColDefCol(e);return t?((n=this.getOrCreateFilterWrapper(t))==null?void 0:n.filterPromise)??Lo.resolve(null):Lo.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:o})=>{this.setColumnFilterModel(e,t).then(()=>o())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){const{colModel:o,dataTypeSvc:n}=this.beans;if(n!=null&&n.isPendingInference){let a=()=>{};const l=new Promise(c=>{a=c});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:a}),l}const i=o.getColDefCol(e),s=i?this.getOrCreateFilterWrapper(i):null;return s?(a=>new Promise(l=>{a.then(c=>l(c))}))(yc(s.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){const t=this.beans.colModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,o){const n=hh(this.gos),i=this.getLocaleTextFunc(),s=r=>{const{filterParams:a}=e;e.filterParams=typeof a=="object"?{...a,...r}:r};switch(t.baseDataType){case"number":{n&&s({comparator:S3});break}case"boolean":{s(n?{valueFormatter:r=>Ye(r.value)?i(String(r.value),r.value?"True":"False"):i("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(r,a)=>a,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(r,a)=>a===!1,numberOfInputs:0}]});break}case"date":{s(n?{valueFormatter:r=>{const a=o(r);return Ye(a)?a:i("blanks","(Blanks)")},treeList:!0,treeListFormatter:(r,a)=>{if(r==="NaN")return i("invalidDate","Invalid Date");if(a===1&&r!=null){const l=nC[Number(r)-1];return i(l,oC[l])}return r??i("blanks","(Blanks)")}}:{isValidDate:sC});break}case"dateString":{const r=t.dateParser;s(n?{valueFormatter:a=>{const l=o(a);return Ye(l)?l:i("blanks","(Blanks)")},treeList:!0,treeListPathGetter:a=>{const l=r(a??void 0);return l?[String(l.getFullYear()),String(l.getMonth()+1),String(l.getDate())]:null},treeListFormatter:(a,l)=>{if(l===1&&a!=null){const c=nC[Number(a)-1];return i(c,oC[c])}return a??i("blanks","(Blanks)")}}:{comparator:(a,l)=>{const c=r(l);return l==null||c<a?-1:c>a?1:0},isValidDate:a=>typeof a=="string"&&sC(r(a))});break}case"object":{n?s({valueFormatter:r=>{const a=o(r);return Ye(a)?a:i("blanks","(Blanks)")}}):e.filterValueGetter=r=>o({column:r.column,node:r.node,value:this.beans.valueSvc.getValue(r.column,r.node)});break}}}setColFilterActive(e,t,o,n){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",o)),e.dispatchColEvent("filterChanged",o,n)}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function yc(e,t){return e?new Lo(o=>{e.then(n=>{typeof n.setModel!="function"&&(Ue(65),o()),(n.setModel(t)||Lo.resolve()).then(()=>o())})}):Lo.resolve()}function iC(e){return e.getColDef().filter==="agGroupColumnFilter"}function sC(e){return e instanceof Date&&!isNaN(e.getTime())}function R3(e){var t;return!!((t=e.filterManager)!=null&&t.isAnyFilterPresent())}function _3(e,t="api"){var o;(o=e.filterManager)==null||o.onFilterChanged({source:t})}var E3=class extends Ie{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:n})=>this.onAdvFilterEnabledChanged(n),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:o}=this;this.alwaysPassFilter=o.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=o.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterModel(e,t="api"){var o;if(this.isAdvFilterEnabled()){this.warnAdvFilters();return}(o=this.colFilter)==null||o.setFilterModel(e,t)}getFilterModel(){var e;return((e=this.colFilter)==null?void 0:e.getFilterModel())??{}}isColumnFilterPresent(){var e;return!!((e=this.colFilter)!=null&&e.isColumnFilterPresent())}isAggregateFilterPresent(){var e;return!!((e=this.colFilter)!=null&&e.isAggregateFilterPresent())}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){var t,o;e?(t=this.colFilter)!=null&&t.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):(o=this.advancedFilter)!=null&&o.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){var e;return!!((e=this.advancedFilter)!=null&&e.isEnabled())}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){Df(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:o,columns:n=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):Lo.resolve()).then(()=>{var s;const i={source:t,type:"filterChanged",columns:n};o&&No(i,o),this.eventSvc.dispatchEvent(i),(s=this.colFilter)==null||s.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!!((e=this.colFilter)!=null&&e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!!((e=this.quickFilter)!=null&&e.isFilterPresent())}updateAggFiltering(){this.aggFiltering=!!Df(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){var o;const{rowNode:t}=e;return(o=this.alwaysPassFilter)!=null&&o.call(this,t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doAggregateFiltersPass(t,e.filterInstanceToSkip))}doesRowPassFilter(e){var o;const{rowNode:t}=e;return(o=this.alwaysPassFilter)!=null&&o.call(this,t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doColumnFiltersPass(t,e.filterInstanceToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterActive(e){var t;return!!((t=this.colFilter)!=null&&t.isFilterActive(e))}getOrCreateFilterWrapper(e){var t;return((t=this.colFilter)==null?void 0:t.getOrCreateFilterWrapper(e))??null}getDefaultFloatingFilter(e){return this.colFilter.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.colFilter.createFilterParams(e,t)}isFilterAllowed(e){var t;return this.isAdvFilterEnabled()?!1:!!((t=this.colFilter)!=null&&t.isFilterAllowed(e))}getFloatingFilterCompDetails(e,t){var o;return(o=this.colFilter)==null?void 0:o.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){var t;return(t=this.colFilter)==null?void 0:t.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){var o;(o=this.colFilter)==null||o.destroyFilter(e,t)}areFilterCompsDifferent(e,t){var o;return!!((o=this.colFilter)!=null&&o.areFilterCompsDifferent(e,t))}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){var o;if(this.isAdvFilterEnabled()){if((o=this.beans.dataTypeSvc)!=null&&o.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return this.isAdvFilterEnabled()?!1:!!((e=this.colFilter)!=null&&e.hasFloatingFilters())}getColumnFilterInstance(e){var t;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):((t=this.colFilter)==null?void 0:t.getColumnFilterInstance(e))??Promise.resolve(void 0)}warnAdvFilters(){Ue(68)}setupAdvFilterHeaderComp(e){var t;(t=this.advancedFilter)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach(e=>this.setAdvFilterModel(e)),this.advFilterModelUpdateQueue=[]}getColumnFilterModel(e){var t;return(t=this.colFilter)==null?void 0:t.getColumnFilterModel(e)}setColumnFilterModel(e,t){var o;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):((o=this.colFilter)==null?void 0:o.setColumnFilterModel(e,t))??Promise.resolve()}setColDefPropertiesForDataType(e,t,o){var n;(n=this.colFilter)==null||n.setColDefPropertiesForDataType(e,t,o)}},P3=class extends Ie{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){var e;(e=this.hidePopup)==null||e.call(this)}showMenuAfterMouseEvent(e,t,o,n){e&&!e.isColumn||this.showPopup(e,i=>{var s;(s=this.popupSvc)==null||s.positionPopupUnderMouseEvent({column:e,type:o,mouseEvent:t,ePopup:i})},o,t.target,Ko(this.gos),n)}showMenuAfterButtonClick(e,t,o,n){if(e&&!e.isColumn)return;let i=-1,s="left";const r=Ko(this.gos);!r&&this.gos.get("enableRtl")&&(i=1,s="right");const a=r?void 0:4*i,l=r?void 0:4;this.showPopup(e,c=>{var u;(u=this.popupSvc)==null||u.positionPopupByComponent({type:o,eventSource:t,ePopup:c,nudgeX:a,nudgeY:l,alignSide:s,keepWithinBounds:!0,position:"under",column:e})},o,t,r,n)}showPopup(e,t,o,n,i,s){var m;const r=e?this.createBean(new DO(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!(r!=null&&r.hasFilter())||!e){Nt(57);return}const a=Ut({tag:"div",cls:`ag-menu${i?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(a,{keydown:b=>this.trapFocusWithin(b,a)}),a.appendChild(r==null?void 0:r.getGui());let l;const c=()=>r==null?void 0:r.afterGuiDetached(),u=pI(this.gos)?n??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,d=b=>{Ay(e,!1,"contextMenu");const S=b instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),S&&n&&_n(n)){const R=yS(n);R==null||R.focus({preventScroll:!0})}c(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,o,e),s==null||s()},h=this.getLocaleTextFunc(),f=i&&o!=="columnFilter"?h("ariaLabelColumnMenu","Column Menu"):h("ariaLabelColumnFilter","Column Filter"),v=(m=this.popupSvc)==null?void 0:m.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:d,positionCallback:()=>t(a),anchorToElement:u,ariaLabel:f});v&&(this.hidePopup=l=v.hideFunc),r.afterInit().then(()=>{t(a),r.afterGuiAttached({container:o,hidePopup:l})}),Ay(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,o,e)}trapFocusWithin(e,t){e.key!==Te.TAB||e.defaultPrevented||$s(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),Gs(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,o){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:o??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},F3=class extends Ie{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t){if(!t)return;const o=e.getColDef(),{filterValueGetter:n}=o;return n?this.executeFilterValueGetter(n,t.data,e,t,o):this.beans.valueSvc.getValue(e,t)}executeFilterValueGetter(e,t,o,n,i){const{expressionSvc:s,valueSvc:r}=this.beans,a=pt(this.gos,{data:t,node:n,column:o,colDef:i,getValue:r.getValueCallback.bind(r,n)});return typeof e=="function"?e(a):s==null?void 0:s.evaluate(e,a)}},D3={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},T3=class extends Bt{constructor(){super(D3,[ed]),this.eFloatingFilterText=Qe}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const o=t.getModelAsString(e);this.eFloatingFilterText.setValue(o)}})}refresh(e){this.init(e)}},_x=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}mapCustomOptions(){const{filterOptions:e}=this;e&&e.forEach(t=>{if(typeof t=="string")return;const o=[["displayKey"],["displayName"],["predicate","test"]],n=i=>i.some(s=>t[s]!=null)?!0:(Ue(72,{keys:i}),!1);if(!o.every(n)){this.filterOptions=e.filter(i=>i===t)||[];return}this.customFilterOptions[t.displayKey]=t})}selectDefaultItem(e){const{filterOptions:t}=this;if(e.defaultOption)this.defaultOption=e.defaultOption;else if(t.length>=1){const o=t[0];typeof o=="string"?this.defaultOption=o:o.displayKey?this.defaultOption=o.displayKey:Ue(73)}else Ue(74)}getCustomOption(e){return this.customFilterOptions[e]}};function Ka(e,t,o){return o==null?e.splice(t):e.splice(t,o)}function ku(e){return e==null||typeof e=="string"&&e.trim().length===0}function k3(e){return e==="AND"||e==="OR"?e:"AND"}function A3(e,t,o){if(e==null)return;const{predicate:n}=e;if(n!=null&&!t.some(i=>i==null))return n(t,o)}function I3(e,t){let o=e.length;return o>t&&(e.splice(t),Ue(78),o=t),o}var Ex=class extends IO{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:n}=t;return n??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,o)=>{const n=o===0?e:this.optionsFactory.defaultOption;t.setValue(n,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOperatorsOr:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const o=!e.operator,n=!t.operator;if(!o&&n||o&&!n)return!1;let s;if(o){const r=e,a=t;s=this.areSimpleModelsEqual(r,a)}else{const r=e,a=t;s=r.operator===a.operator&&Us(r.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return s}shouldRefresh(e){var s;const t=this.getModel(),o=t?t.conditions??[t]:null,n=((s=e.filterOptions)==null?void 0:s.map(r=>typeof r=="string"?r:r.displayKey))??this.getDefaultFilterOptions();return!(!(!o||o.every(r=>n.find(a=>a===r.type)!==void 0))||typeof e.maxNumConditions=="number"&&o&&o.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const o=e;let n=o.conditions;n==null&&(n=[],Ue(77));const i=I3(n,this.maxNumConditions),s=this.getNumConditions();if(i<s)this.removeConditionsAndOperators(i);else if(i>s)for(let a=s;a<i;a++)this.createJoinOperatorPanel(),this.createOption();const r=o.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!r,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(r,!0)),n.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{const o=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(o.type,!0),this.setConditionIntoUi(o,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Lo.resolve()}doesFilterPass(e){const t=this.getModel();if(t==null)return!0;const{operator:o}=t,n=[];if(o){const s=t;n.push(...s.conditions??[])}else n.push(t);return n[o&&o==="OR"?"some":"every"](s=>this.individualConditionPasses(e,s))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=k3(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new _x,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(Ue(79),t=1),this.maxNumConditions=t;let o=e.numAlwaysVisibleConditions??1;o<1&&(Ue(80),o=1),o>t&&(Ue(81),o=t),this.numAlwaysVisibleConditions=o}createOption(){const e=this.createManagedBean(new sg);this.eTypes.push(e),e.addCss("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const o=this.getNumConditions()-1;this.forEachPositionInput(o,n=>this.resetInput(n)),this.addChangedListeners(e,o)}createJoinOperatorPanel(){const e=Ut({tag:"div",cls:"ag-filter-condition"});this.eJoinOperatorPanels.push(e);const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),o=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const n=this.eJoinOperatorPanels.length-1,i=this.joinOperatorId++;this.resetJoinOperatorAnd(t,n,i),this.resetJoinOperatorOr(o,n,i),this.isReadOnly()||(t.onValueChange(this.listener),o.onValueChange(this.listener))}createJoinOperator(e,t,o){const n=this.createManagedBean(new l2);e.push(n);const i="ag-filter-condition-operator";return n.addCss(i),n.addCss(`${i}-${o}`),t.appendChild(n.getGui()),n}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;t.forEach(o=>{e.addOption(o)}),e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,o=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:o?this.getLocaleTextFunc()(o.displayKey,o.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let o=0;o<this.getNumConditions();o++)this.isConditionUiComplete(o)?e=o:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const o=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<o){this.removeConditionsAndOperators(o+1);const n=e+1,i=o-n;i>0&&this.removeConditionsAndOperators(n,i),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((n,i)=>{const s=this.isConditionDisabled(i,e);n.setDisabled(s||this.filterListOptions.length<=1),i===1&&(ll(this.eJoinOperatorPanels[0],s),this.eJoinOperatorsAnd[0].setDisabled(s),this.eJoinOperatorsOr[0].setDisabled(s))}),this.eConditionBodies.forEach((n,i)=>{Yt(n,this.isConditionBodyVisible(i))});const o=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(n=>{n.setValue(!o,!0)}),this.eJoinOperatorsOr.forEach(n=>{n.setValue(o,!0)}),this.forEachInput((n,i,s,r)=>{this.setElementDisplayed(n,i<r),this.setElementDisabled(n,this.isConditionDisabled(s,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:o,eConditionBodies:n,eJoinOperatorPanels:i,eJoinOperatorsAnd:s,eJoinOperatorsOr:r}=this;this.removeComponents(o,e,t),this.removeElements(n,e,t),this.removeValueElements(e,t);const a=Math.max(e-1,0);this.removeElements(i,a,t),this.removeComponents(s,a,t),this.removeComponents(r,a,t)}removeElements(e,t,o){Ka(e,t,o).forEach(i=>nn(i))}removeComponents(e,t,o){Ka(e,t,o).forEach(i=>{nn(i.getGui()),this.destroyBean(i)})}afterGuiAttached(e){var t;if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus)){const{eFilterBody:o,eTypes:n}=this;let i;if(!this.isReadOnly()){const s=this.getInputs(0)[0];s instanceof gs&&this.isConditionBodyVisible(0)?i=s.getInputElement():i=(t=n[0])==null?void 0:t.getFocusableElement()}(i??o).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,o=-1,n=!1;const i=this.getJoinOperator();for(let r=this.getNumConditions()-1;r>=0;r--)if(this.isConditionUiComplete(r))t===-1&&(t=r,o=r);else{const a=r>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(r-1),l=r<t;(a||l)&&(this.removeConditionsAndOperators(r,1),n=!0,l&&o--)}let s=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),s=!0),this.shouldAddNewConditionAtEnd(o===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),s=!0),s&&this.updateConditionStatusesAndValues(o,i),n&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=o}getPlaceholderText(e,t){let o=this.translate(e);if(typeof this.filterPlaceholder=="function"){const n=this.eTypes[t].getValue(),i=this.translate(n);o=this.filterPlaceholder({filterOptionKey:n,filterOption:i,placeholder:o})}else typeof this.filterPlaceholder=="string"&&(o=this.filterPlaceholder);return o}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput((t,o,n,i)=>{if(!(t instanceof gs))return;const s=o===0&&i>1?"inRangeStart":o===0?"filterOoo":"inRangeEnd",r=o===0&&i>1?e("ariaFilterFromValue","Filter from value"):o===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(s,n)),t.setInputAriaLabel(r)})}setElementValue(e,t,o){e instanceof gs&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Bt&&Yt(e.getGui(),t)}setElementDisabled(e,t){e instanceof Bt&&ll(e.getGui(),t)}attachElementOnChange(e,t){e instanceof gs&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,o)=>{this.forEachPositionTypeInput(o,t,e)})}forEachPositionInput(e,t){const o=this.getConditionType(e);this.forEachPositionTypeInput(e,o,t)}forEachPositionTypeInput(e,t,o){const n=this.getNumberOfInputs(t),i=this.getInputs(e);for(let s=0;s<i.length;s++){const r=i[s];r!=null&&o(r,s,e,n)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(o=>o==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,o)=>this.resetJoinOperatorAnd(t,o,this.joinOperatorId+o)),this.eJoinOperatorsOr.forEach((t,o)=>this.resetJoinOperatorOr(t,o,this.joinOperatorId+o)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Lo.resolve()}resetType(e){const o=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(o).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,o){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),o)}resetJoinOperatorOr(e,t,o){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),o)}resetJoinOperator(e,t,o,n,i){this.updateJoinOperatorDisabled(e.setValue(o,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${i}`).setLabel(n),t)}updateJoinOperatorsDisabled(){const e=(t,o)=>this.updateJoinOperatorDisabled(t,o);this.eJoinOperatorsAnd.forEach(e),this.eJoinOperatorsOr.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const o=this.mapValuesFromModel(e);this.forEachInput((n,i,s)=>{s===t&&this.setElementValue(n,o[i]!=null?o[i]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,o,n)=>{this.setElementValue(t,o===0&&n===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,o=>{this.attachElementOnChange(o,this.listener)}))}individualConditionPasses(e,t){const o=this.getCellValue(e.node),n=this.mapValuesFromModel(t),i=this.optionsFactory.getCustomOption(t.type),s=A3(i,n,o);return s??(o==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(n,o,t,e))}hasInvalidInputs(){return!1}},Px=class extends Ex{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:o,includeBlanksInGreaterThan:n,includeBlanksInLessThan:i,includeBlanksInRange:s}=this.scalarFilterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(o)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(n)return!0;break;case"lessThan":case"lessThanOrEqual":if(i)return!0;break;case"inRange":if(s)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,o){const n=o.type;if(!this.isValid(t))return n==="notEqual"||n==="notBlank";const i=this.comparator(),s=e[0]!=null?i(e[0],t):0;switch(n){case"equals":return s===0;case"notEqual":return s!==0;case"greaterThan":return s>0;case"greaterThanOrEqual":return s>=0;case"lessThan":return s<0;case"lessThanOrEqual":return s<=0;case"inRange":{const r=i(e[1],t);return this.scalarFilterParams.inRangeInclusive?s>=0&&r<=0:s>0&&r<0}case"blank":return ku(t);case"notBlank":return!ku(t);default:return Ue(76,{filterModelType:n}),!0}}},Fx=class{constructor(e,t,o,n,i,s){this.alive=!0,this.context=e,this.eParent=i;const r=PM(t,o,n);r&&r.newAgStackInstance().then(a=>{var u,d;if(!this.alive){e.destroyBean(a);return}if(this.dateComp=a,!a)return;i.appendChild(a.getGui()),(u=a==null?void 0:a.afterGuiAttached)==null||u.call(a);const{tempValue:l,disabled:c}=this;l&&a.setDate(l),c!=null&&((d=a.setDisabled)==null||d.call(a,c)),s==null||s(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){var o;const t=this.dateComp;t?(o=t.setDisabled)==null||o.call(t,e):this.disabled=e}setDisplayed(e){Yt(this.eParent,e)}setInputPlaceholder(e){var t,o;(o=(t=this.dateComp)==null?void 0:t.setInputPlaceholder)==null||o.call(t,e)}setInputAriaLabel(e){var t,o;(o=(t=this.dateComp)==null?void 0:t.setInputAriaLabel)==null||o.call(t,e)}afterGuiAttached(e){var t,o;(o=(t=this.dateComp)==null?void 0:t.afterGuiAttached)==null||o.call(t,e)}updateParams(e){var t,o;(o=(t=this.dateComp)==null?void 0:t.refresh)==null||o.call(t,e)}},Dx=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],ug=class{constructor(e,t,o){this.getLocaleTextFunc=e,this.optionsFactory=t,this.valueFormatter=o}getModelAsString(e){if(!e)return null;const t=e.operator!=null,o=this.getLocaleTextFunc();if(t){const n=e,s=(n.conditions??[]).map(a=>this.getModelAsString(a)),r=n.operator==="AND"?"andCondition":"orCondition";return s.join(` ${o(r,DS[r])} `)}else{if(e.type==="blank"||e.type==="notBlank")return o(e.type,e.type);{const n=e,i=this.optionsFactory.getCustomOption(n.type),{displayKey:s,displayName:r,numberOfInputs:a}=i||{};return s&&r&&a===0?(o(s,r),r):this.conditionToString(n,i)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}},Tx=class extends ug{constructor(e,t,o){super(t,o),this.dateFilterParams=e}conditionToString(e,t){const{type:o}=e,{numberOfInputs:n}=t||{},i=o=="inRange"||n===2,s=zo(e.dateFrom),r=zo(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(i){const l=s!==null?Ua(s,a):"null",c=r!==null?Ua(r,a):"null";return`${l}-${c}`}return s!=null?Ua(s,a):`${o}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},rC=1e3,aC=1/0,M3=class extends Px{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=rC,this.maxValidYear=aC,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:o,type:n}=e||{};return[t&&zo(t)||null,o&&zo(o)||null].slice(0,this.getNumberOfInputs(n))}comparator(){return this.dateFilterParams.comparator??O3}isValid(e){const t=this.dateFilterParams.isValidDate;return!t||t(e)}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(o,n)=>{if(e[o]!=null)if(isNaN(e[o]))Ue(82,{param:o});else return e[o]==null?n:Number(e[o]);return n};this.minValidYear=t("minValidYear",rC),this.maxValidYear=t("maxValidYear",aC),this.minValidYear>this.maxValidYear&&Ue(83),this.minValidDate=e.minValidDate?e.minValidDate instanceof Date?e.minValidDate:zo(e.minValidDate):null,this.maxValidDate=e.maxValidDate?e.maxValidDate instanceof Date?e.maxValidDate:zo(e.maxValidDate):null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&Ue(84),this.filterModelFormatter=new Tx(this.dateFilterParams,this.getLocaleTextFunc.bind(this),this.optionsFactory)}createDateCompWrapper(e){const{beans:{userCompFactory:t,context:o,gos:n},dateFilterParams:i}=this,s=new Fx(o,t,i.colDef,pt(n,{onDateChanged:()=>this.onUiChanged(),filterParams:i,location:"filter"}),e);return this.addDestroyFunc(()=>s.destroy()),s}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return Dx}createValueElement(){const e=Ut({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,o,n){const i=Ut({tag:"div",cls:`ag-filter-${n} ag-filter-date-${n}`});t.push(i),e.appendChild(i),o.push(this.createDateCompWrapper(i))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),Ka(this.eConditionPanelsFrom,e,t),Ka(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,o){Ka(e,t,o).forEach(i=>i.destroy())}isValidDateValue(e){if(e===null)return!1;const{minValidDate:t,maxValidDate:o,minValidYear:n,maxValidYear:i}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<n)return!1;if(o){if(e>o)return!1}else if(e.getUTCFullYear()>i)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((o,n,i,s)=>{i!==e||!t||n>=s||(t=t&&this.isValidDateValue(o.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),o={},n=this.getValues(e);return n.length>0&&(o.dateFrom=cn(n[0])),n.length>1&&(o.dateTo=cn(n[1])),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...o}}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),o=e("ariaFilterValue","Filter Value");this.forEachInput(n=>{n.setInputPlaceholder(t),n.setInputAriaLabel(o)})}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:o}=this;return e>=t.length?[null,null]:[t[e],o[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(o,n,i,s)=>{n<s&&t.push(o.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function O3(e,t){const o=t;return o<e?-1:o>e?1:0}var kx=class extends Bt{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}const t=e.operator;let o;t?o=e.conditions[0]:o=e,this.lastType=o.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const o=e;return this.isTypeEditable(o.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const o=new _x;this.optionsFactory=o,o.init(e.filterParams,this.getDefaultOptions());const n=o.defaultOption;t||(this.lastType=n),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(n);this.setEditable(i)}refresh(e){this.setSimpleParams(e)}hasSingleInput(e){var o;const t=(o=this.optionsFactory.getCustomOption(e))==null?void 0:o.numberOfInputs;return t==null||t==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},L3={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},B3=class extends kx{constructor(){super(L3,[ed]),this.eReadOnlyText=Qe,this.eDateWrapper=Qe}getDefaultOptions(){return Dx}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new Tx(this.filterParams,this.getLocaleTextFunc.bind(this),this.optionsFactory);const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.dateComp.updateParams(this.getDateComponentParams()),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const o=e?zo(e.dateFrom):null;this.dateComp.setDate(o),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Yt(this.eDateWrapper,e),Yt(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){t!=null&&t.afterFloatingFilter||t!=null&&t.afterDataChange||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=cn(e);this.params.parentFilterInstance(o=>{if(o){const n=zo(t);o.onFloatingFilterChanged(this.lastType||null,n)}})}getDateComponentParams(){const{filterParams:e,column:t}=this.params,o=Kp(e,this.defaultDebounceMs);return pt(this.gos,{onDateChanged:bo(this,this.onDateChanged.bind(this),o),filterParams:t.getColDef().filterParams,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:o,params:n}=this;this.dateComp=new Fx(e,t,n.column.getColDef(),this.getDateComponentParams(),o,i=>{i.setInputAriaLabel(this.getAriaLabel(n))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},N3={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},H3=class extends Bt{constructor(){super(N3,[ed]),this.eDateInput=Qe,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){const t=this.eDateInput.getInputElement(),o=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=o&&zs(),t.type=o?"date":"text";const{minValidYear:n,maxValidYear:i,minValidDate:s,maxValidDate:r,buttons:a}=e.filterParams||{};if(s&&n&&Ue(85),r&&i&&Ue(86),s&&r){const[l,c]=[s,r].map(u=>u instanceof Date?u:zo(u));l&&c&&l.getTime()>c.getTime()&&Ue(87)}s?s instanceof Date?t.min=Ua(s):t.min=s:n&&(t.min=`${n}-01-01`),r?r instanceof Date?t.max=Ua(r):t.max=r:i&&(t.max=`${i}-12-31`),this.isApply=e.location==="floatingFilter"&&!!(a!=null&&a.includes("apply"))}refresh(e){this.params=e,this.setParams(e)}getDate(){return zo(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(cn(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){var t;return((t=e==null?void 0:e.filterParams)==null?void 0:t.browserDatePicker)??!0}},Ax=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],Ix=class extends ug{conditionToString(e,t){const{numberOfInputs:o}=t||{},{filter:n,filterTo:i,type:s}=e,r=s=="inRange"||o===2,a=this.formatValue.bind(this);return r?`${a(n)}-${a(i)}`:n!=null?a(n):`${s}`}};function $f(e){const{allowedCharPattern:t}=e??{};return t??null}var G3=class extends Px{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:o,type:n}=e||{};return[this.processValue(t),this.processValue(o)].slice(0,this.getNumberOfInputs(n))}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new Ix(this.getLocaleTextFunc.bind(this),this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return Ax}setElementValue(e,t,o){const{numberFormatter:n}=this.numberFilterParams,i=!o&&n?n(t??null):t;super.setElementValue(e,i)}createValueElement(){const e=$f(this.numberFilterParams),t=Ut({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,o,n){const i=this.createManagedBean(n?new js({allowedCharPattern:n}):new ig);i.addCss(`ag-filter-${o}`),i.addCss("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeValueElements(e,t){const o=n=>this.removeComponents(n,e,t);o(this.eValuesFrom),o(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(o,n,i,s)=>{n<s&&t.push(this.processValue(this.stringToFloat(o.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=ci(e);t!=null&&t.trim()===""&&(t=null);const o=this.numberFilterParams.numberParser;return o?o(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),o={filterType:this.filterType,type:t},n=this.getValues(e);return n.length>0&&(o.filter=n[0]),n.length>1&&(o.filterTo=n[1]),o}getInputs(e){const{eValuesFrom:t,eValuesTo:o}=this;return e>=t.length?[null,null]:[t[e],o[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},Mx=class extends Ie{constructor(e){super(),this.params=e,this.eInput=Qe,this.onValueChanged=()=>{}}setupGui(e){var n;this.eInput=this.createManagedBean(new js((n=this.params)==null?void 0:n.config));const t=this.eInput.getGui();e.appendChild(t);const o=i=>this.onValueChanged(i);this.addManagedListeners(t,{input:o,keydown:o})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){const{eInput:o}=this;o.setInputAriaLabel(e),t!==void 0&&o.setAutoComplete(t)}};function Ox(e){const t=e==null?void 0:e.trim();return t===""?e:t}var V3={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},Lx=class extends kx{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Qe,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(V3)}onParentModelChanged(e,t){t!=null&&t.afterFloatingFilter||t!=null&&t.afterDataChange||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1,{inputSvc:o,defaultDebounceMs:n,readOnly:i}=this;if(o.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=Pu(e.filterParams),!i){const s=Kp(e.filterParams,n),r=bo(this,this.syncUpWithParentFilter.bind(this),s);o.setValueChangedListener(r)}}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,o=t.getValue();Do(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(o,!0)}syncUpWithParentFilter(e){const t=e.key===Te.ENTER;if(this.applyActive&&!t)return;const{inputSvc:o,params:n}=this;let i=o.getValue();n.filterParams.trimInput&&(i=Ox(i),o.setValue(i,!0)),n.parentFilterInstance(s=>{s==null||s.onFloatingFilterChanged(this.lastType||null,i||null)})}setEditable(e){this.inputSvc.setEditable(e)}},z3=class extends Ie{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new ig),this.eTextInput=this.createManagedBean(new js),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),o=this.eTextInput.getGui();e.appendChild(t),e.appendChild(o),this.setupListeners(t,n=>this.onValueChanged(n)),this.setupListeners(o,n=>this.onValueChanged(n))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},W3=class extends Lx{init(e){var t;super.init(e),this.filterModelFormatter=new Ix(this.getLocaleTextFunc.bind(this),this.optionsFactory,(t=e.filterParams)==null?void 0:t.numberFormatter)}refresh(e){$f(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return Ax}createFloatingFilterInputService(e){return this.allowedCharPattern=$f(e.filterParams),this.allowedCharPattern?this.createManagedBean(new Mx({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new z3)}},Bx=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],Nx=class extends ug{conditionToString(e,t){const{numberOfInputs:o}=t||{},{filter:n,filterTo:i,type:s}=e;return s=="inRange"||o===2?`${n}-${i}`:n!=null?`${n}`:`${s}`}},U3=class extends Ex{constructor(){super("textFilter"),this.filterType="text",this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:o})=>{if(o==null)return!1;switch(e){case"contains":return t.indexOf(o)>=0;case"notContains":return t.indexOf(o)<0;case"equals":return t===o;case"notEqual":return t!=o;case"startsWith":return t.indexOf(o)===0;case"endsWith":{const n=t.lastIndexOf(o);return n>=0&&n===t.length-o.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=e.textMatcher||this.defaultMatcher,this.formatter=e.textFormatter||(e.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new Nx(this.getLocaleTextFunc.bind(this),this.optionsFactory)}createCondition(e){const t=this.getConditionType(e),o={filterType:this.filterType,type:t},n=this.getValuesWithSideEffects(e,!0);return n.length>0&&(o.filter=n[0]),n.length>1&&(o.filterTo=n[1]),o}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:o}=this;return e>=t.length?[null,null]:[t[e],o[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const o=[];return this.forEachPositionInput(e,(n,i,s,r)=>{if(i<r){let a=ci(n.getValue());t&&this.textFilterParams.trimInput&&(a=Ox(a)??null,n.setValue(a,!0)),o.push(a)}}),o}getDefaultFilterOptions(){return Bx}createValueElement(){const e=Ut({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,o){const n=this.createManagedBean(new js);n.addCss(`ag-filter-${o}`),n.addCss("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){const o=n=>this.removeComponents(n,e,t);o(this.eValuesFrom),o(this.eValuesTo)}mapValuesFromModel(e){const{filter:t,filterTo:o,type:n}=e||{};return[t||null,o||null].slice(0,this.getNumberOfInputs(n))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,o,n){const i=e.map(h=>this.formatter(h))||[],s=this.formatter(t),{api:r,colDef:a,column:l,context:c,textFormatter:u}=this.textFilterParams;if(o.type==="blank")return ku(t);if(o.type==="notBlank")return!ku(t);const d={api:r,colDef:a,column:l,context:c,node:n.node,data:n.data,filterOption:o.type,value:s,textFormatter:u};return i.some(h=>this.matcher({...d,filterText:h}))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},$3=class extends Lx{init(e){super.init(e),this.filterModelFormatter=new Nx(this.getLocaleTextFunc.bind(this),this.optionsFactory)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultOptions(){return Bx}createFloatingFilterInputService(){return this.createManagedBean(new Mx)}};function j3(e){var t;return!!((t=e.quickFilter)!=null&&t.isFilterPresent())}function K3(e){var t;return(t=e.quickFilter)==null?void 0:t.getText()}function q3(e){var t;(t=e.quickFilter)==null||t.resetCache()}var Q3=class extends Ie{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",o=>this.setFilter(o.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){var l;const{autoColSvc:e,colModel:t,gos:o,pivotResultCols:n}=this.beans,i=t.isPivotMode(),s=e==null?void 0:e.getColumns(),r=t.getColDefCols();let a=(i&&!o.get("applyQuickFilterBeforePivotOrAgg")?(l=n==null?void 0:n.getPivotResultCols())==null?void 0:l.list:r)??[];s&&(a=a.concat(s)),this.colsToUse=o.get("includeHiddenColumnsInQuickFilter")?a:a.filter(c=>c.isVisible()||c.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(o=>t?this.doesRowPassCache(e,o):this.doesRowPassNoCache(e,o))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return Ye(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){Ue(70,{newFilter:e});return}const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),o=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,o&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(o=>{const n=this.getTextForColumn(o,e);return Ye(n)&&n.indexOf(t)>=0})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassMatcher(e,t){let o;e?(this.checkGenerateAggText(t),o=t.quickFilterAggregateText):o=this.getAggText(t);const{quickFilterParts:n,matcher:i}=this;return i(n,o)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let o=this.beans.filterValueSvc.getValue(e,t);const n=e.getColDef();if(n.getQuickFilterText){const i=pt(this.gos,{value:o,node:t,data:t.data,column:e,colDef:n});o=n.getQuickFilterText(i)}return Ye(o)?o.toString().toUpperCase():null}getAggText(e){const t=[];return this.colsToUse.forEach(o=>{const n=this.getTextForColumn(o,e);Ye(n)&&t.push(n)}),t.join(`
`)}},Y3={moduleName:"ClientSideRowModelFilter",version:Je,rowModels:["clientSide"],beans:[s3]},dg={moduleName:"FilterCore",version:Je,beans:[E3],apiFunctions:{isAnyFilterPresent:R3,onFilterChanged:_3},css:[f3],dependsOn:[Y3]},Hx={moduleName:"FilterValue",version:Je,beans:[F3]},id={moduleName:"ColumnFilter",version:Je,beans:[x3,P3],dynamicBeans:{headerFilterCellCtrl:r3},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:p3,getColumnFilterInstance:g3,destroyFilter:m3,setFilterModel:v3,getFilterModel:y3,getColumnFilterModel:C3,setColumnFilterModel:b3,showColumnFilter:w3},dependsOn:[dg,nd,Hx,c3]},J3={moduleName:"CustomFilter",version:Je,userComponents:{agReadOnlyFloatingFilter:T3},dependsOn:[id]},Z3={moduleName:"TextFilter",version:Je,dependsOn:[id],userComponents:{agTextColumnFilter:U3,agTextColumnFloatingFilter:$3}},X3={moduleName:"NumberFilter",version:Je,dependsOn:[id],userComponents:{agNumberColumnFilter:G3,agNumberColumnFloatingFilter:W3}},e5={moduleName:"DateFilter",version:Je,dependsOn:[id],userComponents:{agDateColumnFilter:M3,agDateInput:H3,agDateColumnFloatingFilter:B3}},t5={moduleName:"QuickFilterCore",version:Je,rowModels:["clientSide"],beans:[Q3],dependsOn:[dg,Hx]},o5={moduleName:"QuickFilter",version:Je,apiFunctions:{isQuickFilterPresent:j3,getQuickFilter:K3,resetQuickFilter:q3},dependsOn:[t5]},n5={moduleName:"ExternalFilter",version:Je,dependsOn:[dg]},Ea=class{constructor(e){this.cellValueChanges=e}},Ih=class extends Ea{constructor(e,t,o,n){super(e),this.initialRange=t,this.finalRange=o,this.ranges=n}},i5=10,lC=class{constructor(e){this.actionStack=[],this.maxStackSize=e||i5,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},s5=class extends Ie{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},o=this.activeCellEdit!==null&&xS(this.activeCellEdit,t),n=this.activeRowEdit!==null&&yO(this.activeRowEdit,t);if(!(o||n||this.isPasting||this.isRangeInAction))return;const{rowPinned:s,rowIndex:r,column:a,oldValue:l,value:c}=e,u={rowPinned:s,rowIndex:r,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const o=e.get("undoRedoCellEditingLimit");if(o<=0)return;this.undoStack=new lC(o),this.redoStack=new lC(o),this.addListeners();const n=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:i=>{i.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:n,newColumnsLoaded:n,columnGroupOpened:n,columnRowGroupChanged:n,columnMoved:n,columnPinned:n,columnVisible:n,rowDragEnd:n}),t.whenReady(this,i=>{this.gridBodyCtrl=i.gridBodyCtrl})}getCurrentUndoStackSize(){var e;return((e=this.undoStack)==null?void 0:e.getCurrentStackSize())??0}getCurrentRedoStackSize(){var e;return((e=this.redoStack)==null?void 0:e.getCurrentStackSize())??0}undo(e){const{eventSvc:t,undoStack:o,redoStack:n}=this;t.dispatchEvent({type:"undoStarted",source:e});const i=this.undoRedo(o,n,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:i})}redo(e){const{eventSvc:t,undoStack:o,redoStack:n}=this;t.dispatchEvent({type:"redoStarted",source:e});const i=this.undoRedo(n,o,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:i})}undoRedo(e,t,o,n,i){if(!e)return!1;const s=e.pop();return!s||!s.cellValueChanges?!1:(this.processAction(s,r=>r[n],i),s instanceof Ih?this.processRange(s.ranges||[s[o]]):this.processCell(s.cellValueChanges),t.push(s),!0)}processAction(e,t,o){e.cellValueChanges.forEach(n=>{const{rowIndex:i,rowPinned:s,columnId:r}=n,a={rowIndex:i,rowPinned:s},l=_u(this.beans,a);l.displayed&&l.setDataValue(r,t(n),o)})}processRange(e){let t;const o=this.beans.rangeSvc;o.removeAllCellRanges(!0),e.forEach((n,i)=>{if(!n)return;const s=n.startRow,r=n.endRow;i===e.length-1&&(t={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:n.startColumn.getColId()},this.setLastFocusedCell(t));const a={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:n.startColumn,columns:n.columns};o.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:o,rowPinned:n}=t,i={rowIndex:o,rowPinned:n},s=_u(this.beans,i),r={rowPinned:t.rowPinned,rowIndex:s.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r)}setLastFocusedCell(e){const{rowIndex:t,columnId:o,rowPinned:n}=e,{colModel:i,focusSvc:s,rangeSvc:r}=this.beans,a=i.getCol(o);if(!a)return;const{scrollFeature:l}=this.gridBodyCtrl;l.ensureIndexVisible(t),l.ensureColumnVisible(a);const c={rowIndex:t,column:a,rowPinned:n};s.setFocusedCell({...c,forceBrowserFocus:!0}),r==null||r.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new Ea(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const o=new Ea(this.cellValueChanges);this.pushActionsToUndoStack(o)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new Ea(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new Ih(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:o}=this.beans;t&&gi(o)?e=new Ih(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new Ea(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},r5=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}",a5={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},l5=class extends Yr{constructor(){super(a5,[ng]),this.eCheckbox=Qe}init(e){this.params=e;const t=e.value??void 0,o=this.eCheckbox;o.setValue(t),o.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(o,{fieldValueChanged:i=>this.setAriaLabel(i.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),o=Ap(t,e),n=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${n} (${o})`)}},sd=class extends Yr{constructor(e){super({tag:"div",cls:"ag-cell-edit-wrapper",children:[e.getTemplate()]},e.getAgComponents()),this.cellEditorInput=e,this.eInput=Qe}init(e){this.params=e;const{cellStartedEdit:t,eventKey:o,suppressPreventDefault:n}=e,i=this.eInput;this.cellEditorInput.init(i,e);let s,r=!0;t?(this.focusAfterAttached=!0,o===Te.BACKSPACE||o===Te.DELETE?s="":o&&o.length===1?n?r=!1:s=o:(s=this.cellEditorInput.getStartValue(),o!==Te.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,s=this.cellEditorInput.getStartValue()),r&&s!=null&&i.setStartValue(s),this.addManagedElementListeners(i.getGui(),{keydown:a=>{const{key:l}=a;(l===Te.PAGE_UP||l===Te.PAGE_DOWN)&&a.preventDefault()}})}afterGuiAttached(){var n,i;const e=this.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;zs()||t.getFocusableElement().focus();const o=t.getInputElement();this.highlightAllOnFocus?o.select():(i=(n=this.cellEditorInput).setCaret)==null||i.call(n)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),o=e.getInputElement();t.focus(),o.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},c5={tag:"ag-input-date-field",ref:"eInput",cls:"ag-cell-editor"},u5=class{getTemplate(){return c5}getAgComponents(){return[WS]}init(e,t){this.eInput=e,this.params=t;const{min:o,max:n,step:i}=t;o!=null&&e.setMin(o),n!=null&&e.setMax(n),i!=null&&e.setStep(i)}getValue(){const{eInput:e,params:t}=this,o=e.getDate();return!Ye(o)&&!Ye(t.value)?t.value:o??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return cn(e,!1)}},d5=class extends sd{constructor(){super(new u5)}},h5={tag:"ag-input-date-field",ref:"eInput",cls:"ag-cell-editor"},f5=class{constructor(e){this.getDataTypeService=e}getTemplate(){return h5}getAgComponents(){return[WS]}init(e,t){this.eInput=e,this.params=t;const{min:o,max:n,step:i}=t;o!=null&&e.setMin(o),n!=null&&e.setMax(n),i!=null&&e.setStep(i)}getValue(){const{params:e,eInput:t}=this,o=this.formatDate(t.getDate());return!Ye(o)&&!Ye(e.value)?e.value:e.parseValue(o??"")}getStartValue(){return cn(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):zo(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):cn(e??null,!1)??void 0}},p5=class extends sd{constructor(){super(new f5(()=>this.beans.dataTypeSvc))}},g5={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eTextArea",cls:"ag-large-text-input"}]},m5=class extends Yr{constructor(){super(g5,[u2]),this.eTextArea=Qe}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),e.value!=null&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===Te.LEFT||t===Te.UP||t===Te.RIGHT||t===Te.DOWN||e.shiftKey&&t===Te.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue(),t=this.params;return!Ye(e)&&!Ye(t.value)?t.value:t.parseValue(e)}},v5={tag:"ag-input-number-field",ref:"eInput",cls:"ag-cell-editor"},y5=class{getTemplate(){return v5}getAgComponents(){return[d2]}init(e,t){this.eInput=e,this.params=t;const{max:o,min:n,precision:i,step:s}=t;o!=null&&e.setMax(o),n!=null&&e.setMin(n),i!=null&&e.setPrecision(i),s!=null&&e.setStep(s);const r=e.getInputElement();t.preventStepping?e.addManagedElementListeners(r,{keydown:this.preventStepping}):t.showStepperButtons&&r.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===Te.UP||e.key===Te.DOWN)&&e.preventDefault()}getValue(){const{eInput:e,params:t}=this,o=e.getValue();if(!Ye(o)&&!Ye(t.value))return t.value;let n=t.parseValue(o);if(n==null)return n;if(typeof n=="string"){if(n==="")return null;n=Number(n)}return isNaN(n)?null:n}getStartValue(){return this.params.value}setCaret(){zs()&&this.eInput.getInputElement().focus({preventScroll:!0})}},C5=class extends sd{constructor(){super(new y5)}},b5={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eSelect",cls:"ag-cell-editor"}]},w5=class extends Yr{constructor(){super(b5,[S2]),this.eSelect=Qe,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueSvc:o,gos:n}=this,{values:i,value:s,eventKey:r}=e;if(qt(i)){Ue(58);return}this.startedByEnter=r!=null?r===Te.ENTER:!1;let a=!1;i.forEach(d=>{const h={value:d},f=o.formatValue(e.column,null,d),v=f!=null;h.text=v?f:d,t.addOption(h),a=a||s===d}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),c!=null&&t.setPickerMaxWidth(c),n.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},S5={tag:"ag-input-text-field",ref:"eInput",cls:"ag-cell-editor"},x5=class{getTemplate(){return S5}getAgComponents(){return[ed]}init(e,t){this.eInput=e,this.params=t;const o=t.maxLength;o!=null&&e.setMaxLength(o)}getValue(){const{eInput:e,params:t}=this,o=e.getValue();return!Ye(o)&&!Ye(t.value)?t.value:t.parseValue(o)}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){const e=this.eInput,t=e.getValue(),o=Ye(t)&&t.length||0;o&&e.getInputElement().setSelectionRange(o,o)}},cC=class extends sd{constructor(){super(new x5)}};function R5(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function _5(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function Gx(e,t,o="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,o),"ensureVisible")}function Vx(e,t,o){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,o),"ensureVisible")}function E5(e,t,o=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,o),"ensureVisible")}function P5(e){var t;(t=e.undoRedo)==null||t.undo("api")}function F5(e){var t;(t=e.undoRedo)==null||t.redo("api")}function D5(e,t={}){const o=[];return e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(n=>{var s;const i=(s=n.comp)==null?void 0:s.getCellEditor();i&&o.push(pl(i))}),o}function T5(e){const t=[];return e.rowRenderer.getAllCellCtrls().forEach(o=>{if(o.editing){const{cellPosition:n}=o;t.push(n)}}),t}function k5(e,t=!1){var o;(o=e.editSvc)==null||o.stopAllEditing(t)}function A5(e,t){const o=e.colModel.getCol(t.colKey);if(!o){Ue(12,{colKey:t.colKey});return}const n={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:o};t.rowPinned==null&&Vx(e,t.rowIndex),Gx(e,t.colKey);const s=dr(e,n);if(!s)return;const{focusSvc:r,gos:a,editSvc:l}=e,c=()=>{const d=Jt(e),h=s.eGui;return d!==h&&!!(h!=null&&h.contains(d))},u=a.get("stopEditingWhenCellsLoseFocus")&&c();(u||!r.isCellFocused(n))&&r.setFocusedCell({...n,forceBrowserFocus:u,preventScrollOnBrowserFocus:!0}),l==null||l.startRowOrCellEdit(s,t.key)}function I5(e){var t;return((t=e.undoRedo)==null?void 0:t.getCurrentUndoStackSize())??0}function M5(e){var t;return((t=e.undoRedo)==null?void 0:t.getCurrentRedoStackSize())??0}var O5={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},L5=class extends Yr{constructor(e){super(O5),this.params=e}postConstruct(){Ns(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,o=n=>{Of(this.gos,n,t.node,t.column,!0)||t.onKeyDown(n)};this.addManagedElementListeners(e,{keydown:o})}},B5=class extends Ie{constructor(){super(...arguments),this.beanName="editSvc"}startEditing(e,t=null,o=!1,n=null){var c;if(!e.isCellEditable()||e.editing)return!1;if(!e.comp)return e.onCompAttachedFuncs.push(()=>{this.startEditing(e,t,o,n)}),!0;const i=this.createCellEditorParams(e,t,o),s=e.column.getColDef(),r=xy(this.beans.userCompFactory,s,i),a=(r==null?void 0:r.popupFromSelector)!=null?r.popupFromSelector:!!s.cellEditorPopup,l=(r==null?void 0:r.popupPositionFromSelector)!=null?r.popupPositionFromSelector:s.cellEditorPopupPosition;return uC(e,!0,r),e.comp.setEditDetails(r,a,l,this.gos.get("reactiveCustomComponents")),this.eventSvc.dispatchEvent(e.createEvent(n,"cellEditingStarted")),!((c=r==null?void 0:r.params)!=null&&c.suppressPreventDefault)}stopEditing(e,t=!1){if(e.onEditorAttachedFuncs=[],!e.editing)return!1;const{comp:o,column:n,rowNode:i}=e,{newValue:s,newValueExists:r}=N5(t,o),a=this.beans.valueSvc.getValueForDisplay(n,i).value;let l=!1;return r&&(l=H5(e,a,s,i,n)),uC(e,!1,void 0),o.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventSvc.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:a,newValue:s,valueChanged:l}),l}handleColDefChanged(e){var o;const t=(o=e.comp)==null?void 0:o.getCellEditor();if(t!=null&&t.refresh){const{eventKey:n,cellStartedEdit:i}=e.editCompDetails.params,s=this.createCellEditorParams(e,n,i),r=e.column.getColDef(),a=xy(this.beans.userCompFactory,r,s);t.refresh(a.params)}}setFocusOutOnEditor(e){if(!e.editing)return;const t=e.comp.getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){if(!e.editing)return;const t=e.comp,o=t.getCellEditor();o!=null&&o.focusIn?o.focusIn():(e.focusCell(!0),e.onEditorAttachedFuncs.push(()=>{var n,i;return(i=(n=t.getCellEditor())==null?void 0:n.focusIn)==null?void 0:i.call(n)}))}createPopupEditorWrapper(e){return new L5(e)}stopAllEditing(e=!1){this.beans.rowRenderer.getAllRowCtrls().forEach(t=>this.stopRowEditing(t,e))}stopRowEditing(e,t=!1){var s;if(e.stoppingRowEdit)return;const o=e.getAllCellCtrls(),n=e.editing;e.stoppingRowEdit=!0;let i=!1;for(const r of o){const a=r.stopEditing(t);n&&!t&&!i&&a&&(i=!0)}i&&this.eventSvc.dispatchEvent(e.createRowEvent("rowValueChanged")),n&&((s=this.beans.rowEditSvc)==null||s.setEditing(e,!1)),e.stoppingRowEdit=!1}addStopEditingWhenGridLosesFocus(e){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const t=o=>{const n=o.relatedTarget;if(Rf(n)===null){this.stopAllEditing();return}let i=e.some(s=>s.contains(n))&&SS(this.gos,n);if(!i){const s=this.beans.popupSvc;i=!!s&&(s.getActivePopups().some(r=>r.contains(n))||s.isElementWithinCustomPopup(n))}i||this.stopAllEditing()};e.forEach(o=>this.addManagedElementListeners(o,{focusout:t}))}setInlineEditingCss(e){const t=e.editing||e.getAllCellCtrls().some(o=>o.editing);e.forEachGui(void 0,o=>{o.rowComp.toggleCss("ag-row-inline-editing",t),o.rowComp.toggleCss("ag-row-not-inline-editing",!t)})}isCellEditable(e,t){if(t.group){if(this.gos.get("treeData")){if(!t.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return e.isColumnFunc(t,e.colDef.editable)}startRowOrCellEdit(e,t,o=null){var n;return e.comp?this.gos.get("editType")==="fullRow"?((n=this.beans.rowEditSvc)==null?void 0:n.startEditing(e.rowCtrl,t,e))??!1:this.startEditing(e,t,!0,o):(e.onCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(e,t,o)}),!0)}stopRowOrCellEdit(e,t=!1,o=!1,n=!1){this.gos.get("editType")==="fullRow"?this.stopRowEditing(e.rowCtrl,t):this.stopEditing(e,t),o||this.navigateAfterEdit(n,e.cellPosition)}createCellEditorParams(e,t,o){const{column:n,rowNode:i,cellPosition:{rowIndex:s}}=e,{valueSvc:r,gos:a}=this.beans;return pt(a,{value:r.getValueForDisplay(n,i).value,eventKey:t,column:n,colDef:n.getColDef(),rowIndex:s,node:i,data:i.data,cellStartedEdit:o,onKeyDown:e.onKeyDown.bind(e),stopEditing:this.stopRowOrCellEdit.bind(this,e,!1),eGridCell:e.eGui,parseValue:l=>r.parseValue(n,i,l,e.value),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){var n;if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const i=e?Te.UP:Te.DOWN;(n=this.beans.navigation)==null||n.navigateToNextCell(null,i,t,!1)}}};function uC(e,t,o){e.editCompDetails=o,e.editing!==t&&(e.editing=t)}function N5(e,t){const o={newValueExists:!1};if(e)return o;const n=t.getCellEditor();return!n||n.isCancelAfterEnd&&n.isCancelAfterEnd()?o:{newValue:n.getValue(),newValueExists:!0}}function H5(e,t,o,n,i){if(o===t)return!1;e.suppressRefreshCell=!0;const s=n.setDataValue(i,o,"edit");return e.suppressRefreshCell=!1,s}var G5=class extends Ie{constructor(){super(...arguments),this.beanName="rowEditSvc"}startEditing(e,t=null,o=null,n=null){if(e.editing)return!1;let i=!0,s=!1;const{editSvc:r}=this.beans;return e.getAllCellCtrls().forEach(a=>{const l=a===o;l?i=(r==null?void 0:r.startEditing(a,t,l,n))??!1:r==null||r.startEditing(a,null,l,n),s||(s=a.editing)}),s&&this.setEditing(e,!0),i}setEditing(e,t){e.editing=t,e.forEachGui(void 0,n=>n.rowComp.toggleCss("ag-row-editing",t));const o=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventSvc.dispatchEvent(o)}},Xi={moduleName:"EditCore",version:Je,beans:[B5,G5],apiFunctions:{getCellEditorInstances:D5,getEditingCells:T5,stopEditing:k5,startEditingCell:A5},dependsOn:[nd],css:[r5]},V5={moduleName:"UndoRedoEdit",version:Je,beans:[s5],apiFunctions:{undoCellEditing:P5,redoCellEditing:F5,getCurrentUndoSize:I5,getCurrentRedoSize:M5},dependsOn:[Xi]},z5={moduleName:"TextEditor",version:Je,userComponents:{agCellEditor:cC,agTextCellEditor:cC},dependsOn:[Xi]},W5={moduleName:"NumberEditor",version:Je,userComponents:{agNumberCellEditor:{classImp:C5,params:{suppressPreventDefault:!0}}},dependsOn:[Xi]},U5={moduleName:"DateEditor",version:Je,userComponents:{agDateCellEditor:d5,agDateStringCellEditor:p5},dependsOn:[Xi]},$5={moduleName:"CheckboxEditor",version:Je,userComponents:{agCheckboxCellEditor:l5},dependsOn:[Xi]},j5={moduleName:"SelectEditor",version:Je,userComponents:{agSelectCellEditor:w5},dependsOn:[Xi]},K5={moduleName:"LargeTextEditor",version:Je,userComponents:{agLargeTextCellEditor:m5},dependsOn:[Xi]},q5={moduleName:"CustomEditor",version:Je,dependsOn:[Xi]},Q5=class extends Ie{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,br(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),II(e))}createColumns(e,t){var h,f;const o=()=>{var v;yu(this.beans,(v=this.columns)==null?void 0:v.tree),this.columns=null},n=e.treeDepth,s=(((h=this.columns)==null?void 0:h.treeDepth)??-1)==n,r=this.generateSelectionCols();if(AI(r,((f=this.columns)==null?void 0:f.list)??[])&&s)return;o();const{colGroupSvc:l}=this.beans,c=(l==null?void 0:l.findDepth(e.tree))??0,u=(l==null?void 0:l.balanceTreeForAutoCols(r,c))??[];this.columns={list:r,tree:u,treeDepth:c,map:{}},t(v=>{if(!v)return null;const m=v.filter(b=>!qr(b));return[...r,...m]})}updateColumns(e){var o;const t=br(e.source);(o=this.columns)==null||o.list.forEach(n=>{const i=this.createSelectionColDef(e.currentValue);n.setColDef(i,null,t),wn(this.beans,{state:[{...i,colId:n.getColId()}]},t)})}getColumn(e){var t;return((t=this.columns)==null?void 0:t.list.find(o=>tS(o,e)))??null}getColumns(){var e;return((e=this.columns)==null?void 0:e.list)??null}isSelectionColumnEnabled(){var r,a;const{gos:e,beans:t}=this,o=e.get("rowSelection");if(typeof o!="object"||!_s(e))return!1;const n=(((a=(r=t.autoColSvc)==null?void 0:r.getColumns())==null?void 0:a.length)??0)>0;if(o.checkboxLocation==="autoGroupColumn"&&n)return!1;const i=!!Cr(o),s=Bc(o);return i||s}createSelectionColDef(e){const{gos:t}=this.beans,o=e??t.get("selectionColumnDef"),n=t.get("enableRtl"),{rowSpan:i,spanRows:s,...r}=o??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:n?"right":"left",comparator(a,l,c,u){const d=c.isSelected(),h=u.isSelected();return d===h?0:d?1:-1},editable:!1,suppressFillHandle:!0,pinned:null,...r,colId:Z0,chartDataType:"excluded"}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);const o=new Ju(e,null,t,!1);return this.createBean(o),[o]}onSelectionOptionsChanged(e,t,o){const n=t&&typeof t!="string"?Cr(t):void 0,i=e&&typeof e!="string"?Cr(e):void 0,s=n!==i,r=t&&typeof t!="string"?Bc(t):void 0,a=e&&typeof e!="string"?Bc(e):void 0,l=r!==a,c=gu(e),u=gu(t);(s||l||c!==u)&&this.beans.colModel.refreshAll(o)}destroy(){var e;yu(this.beans,(e=this.columns)==null?void 0:e.tree),super.destroy()}refreshVisibility(e,t,o){var l,c;if(!((l=this.columns)!=null&&l.list.length))return;const n=e.length+t.length+o.length;if(n===0)return;const i=this.columns.list[0];if(!i.isVisible())return;const s=()=>{let u;switch(i.pinned){case"left":case!0:u=e;break;case"right":u=o;break;default:u=t}u&&dn(u,i)};(((c=this.beans.rowNumbersSvc)==null?void 0:c.getColumn(X0))?2:1)===n&&s()}};function Y5(e,t){var r;if(!t.nodes.every(a=>a.rowPinned&&!Al(a)?(Ue(59),!1):a.id===void 0?(Ue(60),!1):!0))return;const{nodes:n,source:i,newValue:s}=t;(r=e.selectionSvc)==null||r.setNodesSelected({nodes:n,source:i??"api",newValue:s})}function J5(e,t,o="apiSelectAll"){var n;(n=e.selectionSvc)==null||n.selectAllRowNodes({source:o,selectAll:t})}function Z5(e,t,o="apiSelectAll"){var n;(n=e.selectionSvc)==null||n.deselectAllRowNodes({source:o,selectAll:t})}function X5(e,t="apiSelectAllFiltered"){var o;(o=e.selectionSvc)==null||o.selectAllRowNodes({source:t,selectAll:"filtered"})}function ez(e,t="apiSelectAllFiltered"){var o;(o=e.selectionSvc)==null||o.deselectAllRowNodes({source:t,selectAll:"filtered"})}function tz(e,t="apiSelectAllCurrentPage"){var o;(o=e.selectionSvc)==null||o.selectAllRowNodes({source:t,selectAll:"currentPage"})}function oz(e,t="apiSelectAllCurrentPage"){var o;(o=e.selectionSvc)==null||o.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function nz(e){var t;return((t=e.selectionSvc)==null?void 0:t.getSelectedNodes())??[]}function iz(e){var t;return((t=e.selectionSvc)==null?void 0:t.getSelectedRows())??[]}var sz=class extends a2{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=mu(e),this.groupSelectsDescendants=fl(e),this.groupSelectsFiltered=vu(e)==="filteredDescendants",this.masterSelectsDetail=my(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const t=fl(e),o=mu(e),n=vu(e)==="filteredDescendants";this.masterSelectsDetail=my(e)==="detail",(t!==this.groupSelectsDescendants||n!==this.groupSelectsFiltered||o!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=n,this.mode=o)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,o){if(this.isRowSelectionBlocked(t))return 0;const n=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,o);return n==null?0:(this.selectionCtx.selectAll=!1,"select"in n?(n.reset?this.resetNodes():this.selectRange(n.deselect,!1,o),this.selectRange(n.select,!0,o)):this.setNodesSelected({nodes:[n.node],newValue:n.newValue,clearSelection:n.clearSelection,keepDescendants:n.keepDescendants,event:e,source:o}))}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:o,nodes:n,event:i,source:s,keepDescendants:r=!1}){var l;if(!_s(this.gos)&&e)return Ue(132),0;if(n.length===0)return 0;if(n.length>1&&!this.isMultiSelect())return Ue(130),0;let a=0;for(let c=0;c<n.length;c++){const u=n[c],d=rr(u),h=this.groupSelectsFiltered&&d.group;if(d.rowPinned&&!Al(d)){Ue(59);continue}if(d.id===void 0){Ue(60);continue}h||this.selectRowNode(d,e,i,s)&&(this.detailSelection.delete(d.id),a++),this.groupSelectsDescendants&&((l=d.childrenAfterGroup)!=null&&l.length)&&(a+=this.selectChildren(d,e,s))}return o||(n.length===1&&s==="api"&&this.selectionCtx.setRoot(rr(n[0])),e&&(t||!this.isMultiSelect())&&(a+=this.clearOtherNodes(rr(n[0]),r,s)),a>0&&(this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s))),a}selectRange(e,t,o){let n=0;return e.forEach(i=>{const s=rr(i);if(s.group&&this.groupSelectsDescendants)return;this.selectRowNode(s,t,void 0,o)&&n++}),n>0&&(this.updateGroupsFromChildrenSelections(o),this.dispatchSelectionChanged(o)),n}selectChildren(e,t,o){const n=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return n?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:o,nodes:n}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((o,n)=>{e(o)&&t.set(n,o)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:o,rowModel:n}=this.beans;if(!Co(o))return!1;const i=n.rootNode;if(!i)return!1;t||(t=new ml(!0,i),t.active=!1);let s=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==i){const a=this.calculateSelectedFromChildren(r);s=this.selectRowNode(r,a===null?!1:a,void 0,e)||s}}),s}clearOtherNodes(e,t,o){const n=new Map;let i=0;return this.selectedNodes.forEach(s=>{const r=s.id==e.id;if((t?!az(e,s):!0)&&!r){const l=this.selectedNodes.get(s.id);i+=this.setNodesSelected({nodes:[l],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:o}),this.groupSelectsDescendants&&s.parent&&n.set(s.parent.id,s.parent)}}),n.forEach(s=>{const r=this.calculateSelectedFromChildren(s);this.selectRowNode(s,r===null?!1:r,void 0,o)}),i}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new Vs(this.beans);return t.id=e.id,t.data=e.data,t.__daemon=!0,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!Co(e))return;const o=t.getTopLevelNodes();if(o===null)return;const n=[];function i(s){for(let r=0,a=s.length;r<a;r++){const l=s[r];l.isSelected()?n.push(l):l.group&&l.childrenAfterGroup&&i(l.childrenAfterGroup)}}return i(o),n}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){const o=Co(this.gos);let n=!1;const i=s=>{const r=this.selectRowNode(rr(s),!1,void 0,e);n||(n=r)};if(t==="currentPage"||t==="filtered"){if(!o){Nt(102);return}this.getNodesToSelect(t).forEach(i)}else this.selectedNodes.forEach(i),this.reset(e);if(this.selectionCtx.selectAll=!1,o&&this.groupSelectsDescendants){const s=this.updateGroupsFromChildrenSelections(e);n||(n=s)}n&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,o=0;return this.getNodesToSelect(e).forEach(n=>{this.groupSelectsDescendants&&n.group||(n.isSelected()?t++:n.selectable&&o++)}),{selectedCount:t,notSelectedCount:o}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:o}=this.getSelectedCounts(e);return zx(t,o)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[],o=i=>t.push(i);if(e==="currentPage")return this.forEachNodeOnPage(i=>{if(!i.group){o(i);return}if(!i.expanded&&!i.footer){const s=r=>{var a;o(r),(a=r.childrenAfterFilter)==null||a.forEach(s)};s(i);return}this.groupSelectsDescendants||o(i)}),t;const n=this.beans.rowModel;return e==="filtered"?(n.forEachNodeAfterFilter(o),t):(n.forEachNode(o),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:o}=this.beans,n=t.getFirstRow(),i=t.getLastRow();for(let s=n;s<=i;s++){const r=o.getRow(s);r&&e(r)}}selectAllRowNodes(e){const{gos:t,selectionCtx:o}=this;if(!_s(t)){Ue(132);return}if(uI(t)&&!hl(t)){Ue(130);return}if(!this.canSelectAll())return;const{source:n,selectAll:i}=e;let s=!1;if(this.getNodesToSelect(i).forEach(r=>{const a=this.selectRowNode(rr(r),!0,void 0,n);s||(s=a)}),o.selectAll=!0,Co(t)&&this.groupSelectsDescendants){const r=this.updateGroupsFromChildrenSelections(n);s||(s=r)}s&&this.dispatchSelectionChanged(n)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t){if(!Array.isArray(e)){Nt(103);return}const o=new Set(e),n=[];this.beans.rowModel.forEachNode(i=>{o.has(i.id)&&n.push(i)}),this.setNodesSelected({newValue:!0,nodes:n,source:t})}canSelectAll(){const{gos:e}=this.beans;return!!Co(e)}updateSelectable(e){var l;const{gos:t,rowModel:o}=this.beans;if(!_s(t))return;const n="selectableChanged",i=e!==void 0,s=Co(t)&&this.groupSelectsDescendants,r=[],a=c=>{var d;if(i&&!c.group)return;if(s&&c.group){const h=((d=c.childrenAfterGroup)==null?void 0:d.some(f=>f.selectable))??!1;this.setRowSelectable(c,h,!0);return}!this.updateRowSelectable(c,!0)&&c.isSelected()&&r.push(c)};if(s){if(e===void 0){const c=o.rootNode;e=c?new ml(!1,c):void 0}e==null||e.forEachChangedNodeDepthFirst(a,!i,!i)}else o.forEachNode(a);r.length&&this.setNodesSelected({nodes:r,newValue:!1,source:n}),!i&&s&&((l=this.updateGroupsFromChildrenSelections)==null||l.call(this,n))}updateSelectableAfterGrouping(e){var t;this.updateSelectable(e),this.groupSelectsDescendants&&((t=this.updateGroupsFromChildrenSelections)!=null&&t.call(this,"rowGroupChanged",e))&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){var s,r;if(!this.masterSelectsDetail)return;const o=(r=(s=e.detailNode)==null?void 0:s.detailGridInfo)==null?void 0:r.api;if(!o)return;const n=rz(o);if(e.isSelected()!==n&&this.selectRowNode(e,n,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!n){const a=this.detailSelection.get(e.id)??new Set;for(const l of o.getSelectedNodes())a.add(l.id);this.detailSelection.set(e.id,a)}}setDetailSelectionState(e,t,o){if(this.masterSelectsDetail){if(!hl(t)){Ue(269);return}switch(e.isSelected()){case!0:{o.selectAll();break}case!1:{o.deselectAll();break}case void 0:{const n=this.detailSelection.get(e.id);if(n){const i=[];for(const s of n){const r=o.getRowNode(s);r&&i.push(r)}o.setNodesSelected({nodes:i,newValue:!0,source:"masterDetail"})}break}}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function rr(e){return Al(e)?e.pinnedSibling:e.footer?e.sibling:e}function rz(e){let t=0,o=0;return e.forEachNode(n=>{n.isSelected()?t++:n.selectable&&o++}),zx(t,o)}function zx(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function az(e,t){let o=t.parent;for(;o;){if(o===e)return!0;o=o.parent}return!1}var lz={moduleName:"SharedRowSelection",version:Je,beans:[Q5],apiFunctions:{setNodesSelected:Y5,selectAll:J5,deselectAll:Z5,selectAllFiltered:X5,deselectAllFiltered:ez,selectAllOnCurrentPage:tz,deselectAllOnCurrentPage:oz,getSelectedNodes:nz,getSelectedRows:iz}},cz={moduleName:"RowSelection",version:Je,rowModels:["clientSide","infinite","viewport"],beans:[sz],dependsOn:[lz]};function uz(e){var t;(t=e.expansionSvc)==null||t.expandAll(!0)}function dz(e){var t;(t=e.expansionSvc)==null||t.expandAll(!1)}function hz(e){const t=Yn(e),o=xx(e);t?t.onRowHeightChanged():o&&o.onRowHeightChanged()}function fz(e,t,o){var s;const n=xx(e);if(n){if(((s=e.rowGroupColsSvc)==null?void 0:s.columns.length)===0){if(t<0){Nt(238);return}n.setRowCount(t,o);return}Nt(28);return}const i=od(e);if(i){i.setRowCount(t,o);return}}function pz(e){var t;return jr(e.gos)?e.rowModel.getBlockStates():((t=e.rowNodeBlockLoader)==null?void 0:t.getBlockState())??{}}function gz(e){return e.rowModel.isLastRowIndexKnown()}var mz={moduleName:"CsrmSsrmSharedApi",version:Je,apiFunctions:{expandAll:uz,collapseAll:dz,onRowHeightChanged:hz}},vz={moduleName:"SsrmInfiniteSharedApi",version:Je,apiFunctions:{setRowCount:fz,getCacheBlockState:pz,isLastRowIndexKnown:gz}},yz=class extends Ie{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(n=>{var s;if(!n){Nt(18),t||Nt(20);return}if(this.isGridApi(n))return n;const i=n;return"current"in i?(s=i.current)==null?void 0:s.api:(i.api||Nt(19),i.api)}).filter(n=>!!n&&!n.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const o=[];return e.columns?e.columns.forEach(n=>{o.push(t(n))}):e.column&&o.push(t(e.column)),o}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":Ue(21);break}})}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;t&&e.columnGroups.forEach(o=>{let n=null;o&&(n=t.getProvidedColGroup(o.getGroupId())),!(o&&!n)&&t.setColumnGroupOpened(n,o.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){var u;const t=e.column;let o=null;const n=this.beans,{colResize:i,ctrlsSvc:s,colModel:r}=n;if(t&&(o=r.getColDefCol(t.getColId())),t&&!o)return;const a=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const h=e.api.getColumnState().map(f=>({colId:f.colId}));wn(n,{state:h,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const h=e.api.getColumnState().map(f=>({colId:f.colId,hide:f.hide}));wn(n,{state:h},"alignedGridChanged")}break;case"columnPinned":{const h=e.api.getColumnState().map(f=>({colId:f.colId,pinned:f.pinned}));wn(n,{state:h},"alignedGridChanged")}break;case"columnResized":{const d=e,h={};a.forEach(f=>{h[f.getId()]={key:f.getColId(),newWidth:f.getActualWidth()}}),(u=d.flexColumns)==null||u.forEach(f=>{h[f.getId()]&&delete h[f.getId()]}),i==null||i.setColumnWidths(Object.values(h),!1,d.finished,"alignedGridChanged");break}}const c=s.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(d=>{d.setGridOption("alwaysShowVerticalScroll",c)})}},Cz={moduleName:"AlignedGrids",version:Je,beans:[yz]},bz=class extends o2{constructor(){super(...arguments),this.beanName="csrmNodeSvc"}},Mh=class{constructor(){this.removals=new Set,this.updates=new Set,this.adds=new Set}remove(e){this.adds.delete(e)||(this.updates.delete(e),this.removals.add(e))}update(e){this.adds.has(e)||this.updates.add(e)}add(e){this.adds.add(e)}};function wz(e){if(qt(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let o=0;o<t.length;o++){const n=t[o],i=o===0,s=o===e.childrenAfterSort.length-1;n.setFirstChild(i),n.lastChild!==s&&(n.lastChild=s,n.dispatchRowEvent("lastChildChanged")),n.childIndex!==o&&(n.childIndex=o,n.dispatchRowEvent("childIndexChanged"))}}function Wx(e){e.sibling&&(e.sibling.childrenAfterSort=e.childrenAfterSort),wz(e)}var Sz=class extends Ie{constructor(){super(...arguments),this.beanName="sortStage",this.refreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),this.step="sort"}execute(e){const t=this.beans,o=t.sortSvc.getSortOptions(),n=Ye(o)&&o.length>0,i=n&&!!e.changedRowNodes&&this.gos.get("deltaSort"),s=o.some(({column:r})=>Bn(t.gos)?r.isPrimary()&&r.isRowGroupActive():!!r.getColDef().showRowGroup);this.sort(t,o,n,i,e.changedRowNodes,e.changedPath,s)}sort(e,t,o,n,i,s,r){const{gos:a,colModel:l,rowGroupColsSvc:c,rowNodeSorter:u,rowRenderer:d,showRowGroupCols:h}=e,f=a.get("groupMaintainOrder"),v=l.getCols().some(_=>_.isRowGroupActive()),m=l.isPivotMode(),b=a.getCallback("postSortRows");let S=!1;const R=_=>{var z,de;const M=m&&_.leafGroup,I=f&&v&&!_.leafGroup&&!r;let W;if(I){const K=(z=c==null?void 0:c.columns)==null?void 0:z[_.level+1],O=(K==null?void 0:K.getSort())===null,ie=_.childrenAfterAggFilter.slice(0);if(_.childrenAfterSort&&!O){const N={};_.childrenAfterSort.forEach((oe,F)=>{N[oe.id]=F}),ie.sort((oe,F)=>(N[oe.id]??0)-(N[F.id]??0))}W=ie}else!o||M?W=_.childrenAfterAggFilter.slice(0):n&&i?W=xz(u,_,i,s,t):W=u.doFullSort(_.childrenAfterAggFilter,t);if(S||(S=((de=_.childrenAfterSort)==null?void 0:de[0])!==W[0]),_.childrenAfterSort=W,Wx(_),b){const K={nodes:_.childrenAfterSort};b(K)}};if(s==null||s.forEachChangedNodeDepthFirst(R),S&&this.gos.get("groupHideOpenParents")){const _=h==null?void 0:h.getShowRowGroupCols();_!=null&&_.length&&d.refreshCells({columns:_,force:!0})}}};function xz(e,t,o,n,i){const s=t.childrenAfterAggFilter,r=t.childrenAfterSort;if(!r)return e.doFullSort(s,i);const a=new Set,l=[],{updates:c,adds:u}=o;for(let h=0,f=s.length;h<f;++h){const v=s[h];c.has(v)||u.has(v)||n&&!n.canSkip(v)?l.push({currentPos:l.length,rowNode:v}):a.add(v.id)}const d=r.filter(h=>a.has(h.id)).map((h,f)=>({currentPos:f,rowNode:h}));return l.sort((h,f)=>e.compareRowNodes(i,h,f)),Rz(e,i,l,d)}function Rz(e,t,o,n){const i=[];let s=0,r=0;const a=o.length,l=n.length;for(;s<a&&r<l;){const c=o[s],u=n[r],d=e.compareRowNodes(t,c,u);let h;d<0?(h=c,++s):(h=u,++r),i.push(h.rowNode)}for(;s<a;)i.push(o[s++].rowNode);for(;r<l;)i.push(n[r++].rowNode);return i}var _z=class extends Ie{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowsToDisplay=[],this.lastHighlightedRow=null,this.started=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1,this.onRowHeightChanged_debounced=bo(this,this.onRowHeightChanged.bind(this),100)}wireBeans(e){this.colModel=e.colModel,this.valueCache=e.valueCache,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggStage=e.aggStage,this.pivotStage=e.pivotStage,this.filterAggStage=e.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter(n=>!!n);const e=this.refreshModel.bind(this,{step:"group"}),t=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new Vs(this.beans);const o=this.getNewNodeManager();this.nodeManager=o,o.activate(this.rootNode)}getNewNodeManager(){const{gos:e,beans:t}=this;switch(vI(e)){case"treeNested":return t.csrmChildrenTreeNodeSvc??t.csrmNodeSvc;case"treePath":return t.csrmPathTreeNodeSvc??t.csrmNodeSvc;default:return t.csrmNodeSvc}}addPropertyListeners(){const e=["treeData","treeDataChildrenField",...this.orderedStages.flatMap(({refreshProps:t})=>[...t])];this.addManagedPropertyListeners(e,t=>{var n;const o=(n=t.changeSet)==null?void 0:n.properties;o&&this.onPropChange(o)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,o,n){let i,s=!1;do{i=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(r,o),c=Math.min(a,n);for(let u=l;u<=c;u++){const d=this.getRow(u);if(d.rowHeightEstimated){const h=Ji(this.beans,d);d.setRowHeight(h.height),i=!0,s=!0}}i&&this.setRowTopAndRowIndex()}while(i);return s}onPropChange(e){if(!this.rootNode)return;const t=this.gos,o=new Set(e),n={step:"nothing",changedProps:o},i=o.has("rowData"),s=this.nodeManager,r=this.getNewNodeManager(),a=s!==r||i&&o.has("treeData")&&t.get("treeData")||o.has("treeDataChildrenField")&&t.get("treeData");let l;if((a||i)&&(l=t.get("rowData"),l!=null&&!Array.isArray(l)&&(l=null,Ue(1))),a&&(i||(l=(s==null?void 0:s.extractRowData())??l),s!==r&&(s==null||s.deactivate(),this.nodeManager=r),r.activate(this.rootNode)),l)if(!a&&!this.isEmpty()&&l.length>0&&t.exists("getRowId")&&!t.get("resetRowDataOnUpdate"))n.keepRenderedRows=!0,n.animate=!this.gos.get("suppressAnimationFrame"),n.changedRowNodes=new Mh,r.setImmutableRowData(n,l);else{n.rowDataUpdated=!0,n.newData=!0;const{selectionSvc:u,pinnedRowModel:d}=this.beans;u==null||u.reset("rowDataChanged"),d!=null&&d.isManual()&&d.reset(),this.rowNodesCountReady=!0,r.setNewRowData(l)}if(n.rowDataUpdated)n.step="group";else if(n.step==="nothing"){for(const{refreshProps:c,step:u}of this.orderedStages)if(e.some(d=>c.has(d))){n.step=u;break}}n.step!=="nothing"&&this.refreshModel(n)}setRowTopAndRowIndex(){const{beans:e,rowsToDisplay:t}=this,o=e.environment.getDefaultRowHeight();let n=0;const i=new Set,s=wo(this.gos,"normal");for(let r=0,a=t.length;r<a;++r){const l=t[r];if(l.id!=null&&i.add(l.id),l.rowHeight==null){const c=Ji(e,l,s,o);l.setRowHeight(c.height,c.estimated)}l.setRowTop(n),l.setRowIndex(r),n+=l.rowHeight}return i}clearRowTopAndRowIndex(e,t){const o=e.active,n=s=>{s&&s.id!=null&&!t.has(s.id)&&s.clearRowTopAndRowIndex()},i=s=>{if(s!==null&&(n(s),n(s.detailNode),n(s.sibling),s.hasChildren()&&s.childrenAfterGroup)){const r=s.level==-1;o&&!r&&!s.expanded||s.childrenAfterGroup.forEach(i)}};i(this.rootNode)}clearHighlight(){const e=this.lastHighlightedRow;e&&(e.highlighted=null,e.dispatchRowEvent("rowHighlightChanged"),this.lastHighlightedRow=null)}highlightRow(e,t){const o=e!==this.lastHighlightedRow,n=t!==e.highlighted;(o||n)&&(o&&this.clearHighlight(),e.highlighted=t,e.dispatchRowEvent("rowHighlightChanged"),this.lastHighlightedRow=e)}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){const e=this.rootNode;if(!e||this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===e)return 1;const o=e.childrenAfterAggFilter,n=e.sibling?1:0;return(o?o.length:0)+n}getTopLevelRowDisplayedIndex(e){const{rootNode:t,rowsToDisplay:o}=this;if(!t||!o.length||o[0]===t)return e;const{childrenAfterSort:i}=t,s=a=>{let l=i[a];if(this.gos.get("groupHideOpenParents"))for(;l.expanded&&l.childrenAfterSort&&l.childrenAfterSort.length>0;)l=l.childrenAfterSort[0];return l.rowIndex},{footerSvc:r}=this.beans;return r?r.getTopDisplayIndex(o,e,i,s):s(e)}getTopLevelIndexFromDisplayedIndex(e){var r;const{rootNode:t,rowsToDisplay:o}=this;if(!t||!o.length||o[0]===t)return e;let i=this.getRow(e);for(i.footer&&(i=i.sibling);i.parent&&i.parent!==t;)i=i.parent;const s=(r=t.childrenAfterSort)==null?void 0:r.findIndex(a=>a===i);return s===-1?e:s??e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=yr(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=yr(this.gos),n=e.columns.length===0||e.columns.some(i=>i.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:n,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=yr(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new ml(!1,this.rootNode);return e||(t.active=!1),t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:o,rowDataUpdated:n}=e;return!(!t||o||!n||t.removals.size||t.adds.size)}refreshModel(e){var n,i;if(!this.rootNode)return;const t=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&!!e.rowDataUpdated));if((i=(n=this.nodeManager).refreshModel)==null||i.call(n,e,this.started),this.eventSvc.dispatchEvent({type:"beforeRefreshModel",params:e}),!this.started||(e.rowDataUpdated&&this.eventSvc.dispatchEvent({type:"rowDataUpdated"}),this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e)))return;switch(this.isRefreshingModel=!0,e.step){case"group":this.doRowGrouping(e.changedRowNodes,t,!!e.rowNodesOrderChanged,!!e.afterColumnsChanged);case"filter":this.doFilter(t);case"pivot":this.doPivot(t);case"aggregate":this.doAggregate(t);case"filter_aggregates":this.doFilterAggregates(t);case"sort":this.doSort(e.changedRowNodes,t);case"map":this.doRowsToDisplay()}const o=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(t,o),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){var e,t,o;return!((t=(e=this.rootNode)==null?void 0:e.allLeafChildren)!=null&&t.length)||!((o=this.colModel)!=null&&o.ready)}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let o=!1,n=!1;const i=[],s=fl(this.gos);return this.forEachNodeAfterFilterAndSort(r=>{if(n)return;if(o&&(r===t||r===e)&&(n=!0,r.group&&s)){i.push(...r.allLeafChildren);return}if(!o){if(r!==t&&r!==e)return;o=!0}if(!r.group||!s){i.push(r);return}}),i}getTopLevelNodes(){var e;return((e=this.rootNode)==null?void 0:e.childrenAfterGroup)??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay;if(this.isEmpty()||t.length===0)return-1;let o=0,n=t.length-1;if(e<=0)return 0;if(Vt(t).rowTop<=e)return t.length-1;let s=-1,r=-1;for(;;){const a=Math.floor((o+n)/2),l=t[a];if(this.isRowInPixel(l,e)||(l.rowTop<e?o=a+1:l.rowTop>e&&(n=a-1),s===o&&r===n))return a;s=o,r=n}}isRowInPixel(e,t){const o=e.rowTop,n=e.rowTop+e.rowHeight;return o<=t&&n>t}forEachLeafNode(e){var t,o;(o=(t=this.rootNode)==null?void 0:t.allLeafChildren)==null||o.forEach((n,i)=>e(n,i))}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){this.rowsToDisplay.forEach(e)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,o=>o.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,o=>o.childrenAfterSort)}forEachPivotNode(e,t=!1,o=!1){const{colModel:n,rowGroupColsSvc:i}=this.beans;if(!n.isPivotMode())return;if(!(i!=null&&i.columns.length)){e(this.rootNode,0);return}const s=o?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,r=>r.leafGroup?null:r[s])}depthFirstSearchRowNodes(e,t=!1,o=s=>s.childrenAfterGroup,n=this.rootNode,i=0){let s=i;if(!n)return s;const r=n===this.rootNode;r||e(n,s++);const{footerSvc:a}=this.beans;if(n.hasChildren()&&!n.footer){const l=o(n);if(l){s=(a==null?void 0:a.addTotalRows(s,n,e,t,r,"top"))??s;for(const c of l)s=this.depthFirstSearchRowNodes(e,t,o,c,s);return(a==null?void 0:a.addTotalRows(s,n,e,t,r,"bottom"))??s}}return s}doAggregate(e){var o;const t=this.rootNode;t&&((o=this.aggStage)==null||o.execute({rowNode:t,changedPath:e}))}doFilterAggregates(e){const t=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:t,changedPath:e}):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t}):t.forEachChangedNodeDepthFirst(o=>{o.childrenAfterSort=o.childrenAfterAggFilter.slice(0),Wx(o)})}doRowGrouping(e,t,o,n){var r;const i=this.rootNode;if(!((r=this.groupStage)==null?void 0:r.execute({rowNode:i,changedPath:t,changedRowNodes:e,rowNodesOrderChanged:o,afterColumnsChanged:n}))&&!this.nodeManager.treeData){const a=i.sibling;i.childrenAfterGroup=i.allLeafChildren,a&&(a.childrenAfterGroup=i.childrenAfterGroup),i.updateHasChildren()}this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath:e}):e.forEachChangedNodeDepthFirst(t=>{t.childrenAfterFilter=t.childrenAfterGroup,Rx(t)},!0)}doPivot(e){var t;(t=this.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){if(typeof e=="string"&&e.indexOf(Mf)==0){let o;return this.forEachNode(n=>{n.id===e&&(o=n)}),o}return this.nodeManager.getRowNode(e)}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const o=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},o)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var i,s;(i=this.valueCache)==null||i.onDataChanged();const e=[],t=[],o=new Mh;let n=!1;(s=this.rowDataTransactionBatch)==null||s.forEach(r=>{this.rowNodesCountReady=!0;const{rowNodeTransaction:a,rowsInserted:l}=this.nodeManager.updateRowData(r.rowDataTransaction,o);l&&(n=!0),t.push(a),r.callback&&e.push(r.callback.bind(null,a))}),this.commitTransactions(n,o),e.length>0&&window.setTimeout(()=>{e.forEach(r=>r())},0),t.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){var i;(i=this.valueCache)==null||i.onDataChanged(),this.rowNodesCountReady=!0;const t=new Mh,{rowNodeTransaction:o,rowsInserted:n}=this.nodeManager.updateRowData(e,t);return this.commitTransactions(n,t),o}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,rowNodesOrderChanged:e,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:t,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{flattenStage:e,rootNode:t}=this;let o;if(e)o=e.execute({rowNode:t});else{o=(t==null?void 0:t.childrenAfterSort)??[];for(const n of o)n.setUiLevel(0)}this.rowsToDisplay=o}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const o=t.detailNode;o&&o.setRowHeight(o.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){var t;if(e.rowHeightChanged){if((t=this.beans.rowAutoHeight)!=null&&t.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlight(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.orderedStages=Cy,this.rowsToDisplay=Cy}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}};function Ez(e){var t;(t=e.expansionSvc)==null||t.onGroupExpandedOrCollapsed()}function Pz(e,t){const o=Yn(e);o&&((!t||t==="everything")&&(t="group"),o.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function Fz(e){var t;return((t=Yn(e))==null?void 0:t.isEmpty())??!0}function Dz(e,t){var o;(o=Yn(e))==null||o.forEachLeafNode(t)}function Tz(e,t){var o;(o=Yn(e))==null||o.forEachNodeAfterFilter(t)}function kz(e,t){var o;(o=Yn(e))==null||o.forEachNodeAfterFilterAndSort(t)}function Az(e){var t,o;if((t=e.rowAutoHeight)!=null&&t.active){Ue(3);return}(o=Yn(e))==null||o.resetRowHeights()}function Iz(e,t){return e.frameworkOverrides.wrapIncoming(()=>{var o;return(o=Yn(e))==null?void 0:o.updateRowData(t)})}function Mz(e,t,o){e.frameworkOverrides.wrapIncoming(()=>{var n;return(n=Yn(e))==null?void 0:n.batchUpdateRowData(t,o)})}function Oz(e){e.frameworkOverrides.wrapIncoming(()=>{var t;return(t=Yn(e))==null?void 0:t.flushAsyncTransactions()})}function Lz(e){var t;return(t=e.selectionSvc)==null?void 0:t.getBestCostNodeSelection()}var Bz={moduleName:"ClientSideRowModel",version:Je,rowModels:["clientSide"],beans:[bz,_z,Sz],dependsOn:[yx]},Nz={moduleName:"ClientSideRowModelApi",version:Je,apiFunctions:{onGroupExpandedOrCollapsed:Ez,refreshClientSideRowModel:Pz,isRowDataEmpty:Fz,forEachLeafNode:Dz,forEachNodeAfterFilter:Tz,forEachNodeAfterFilterAndSort:kz,resetRowHeights:Az,applyTransaction:Iz,applyTransactionAsync:Mz,flushAsyncTransactions:Oz,getBestCostNodeSelection:Lz},dependsOn:[mz]},Hz=class extends Ie{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:o,columnKeys:n,skipRowGroups:i,exportRowNumbers:s}=t,r=this.getColumnsToExport({allColumns:o,skipRowGroups:i,columnKeys:n,exportRowNumbers:s});return[this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t)].reduce((a,l)=>l(a),e).parse()}processRow(e,t,o,n){var v;const i=t.shouldRowBeSkipped||(()=>!1),r=t.rowPositions!=null||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!r,l=this.colModel.isPivotMode()?n.leafGroup:!n.group,c=!!n.footer,u=n.allChildrenCount===1&&((v=n.childrenAfterGroup)==null?void 0:v.length)===1&&lI(this.gos,n);if(!l&&!c&&(t.skipRowGroups||u||a)||t.onlySelected&&!n.isSelected()||t.skipPinnedTop&&n.rowPinned==="top"||t.skipPinnedBottom&&n.rowPinned==="bottom"||n.stub||n.level===-1&&!l&&!c||i(pt(this.gos,{node:n})))return;const f=e.onNewBodyRow(n);if(o.forEach((m,b)=>{f.onColumn(m,b,n)}),t.getCustomContentBelowRow){const m=t.getCustomContentBelowRow(pt(this.gos,{node:n}));m&&e.addCustomContent(m)}}appendContent(e){return t=>{const o=e.appendContent;return o&&t.addCustomContent(o),t}}prependContent(e){return t=>{const o=e.prependContent;return o&&t.addCustomContent(o),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return o=>{if(!e.skipColumnGroupHeaders){const n=new uS,{colGroupSvc:i}=this.beans,s=i?i.createColumnGroups({columns:t,idCreator:n,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(s,o,e.processGroupHeaderCallback)}return o}}exportHeaders(e,t){return o=>{if(!e.skipColumnHeaders){const n=o.onNewHeaderRow();t.forEach((i,s)=>{n.onColumn(i,s,void 0)})}return o}}processPinnedTopRows(e,t){return o=>{var i,s;const n=this.processRow.bind(this,o,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="top").sort((r,a)=>r.rowIndex-a.rowIndex).map(r=>{var a;return(a=this.pinnedRowModel)==null?void 0:a.getPinnedTopRow(r.rowIndex)}).forEach(n):(i=this.pinnedRowModel)!=null&&i.isManual()||(s=this.pinnedRowModel)==null||s.forEachPinnedRow("top",n),o}}processRows(e,t){return o=>{var c;const n=this.rowModel,i=Co(this.gos),s=jr(this.gos),r=!i&&e.onlySelected,a=this.processRow.bind(this,o,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)return e.rowPositions.filter(u=>u.rowPinned==null).sort((u,d)=>u.rowIndex-d.rowIndex).map(u=>n.getRow(u.rowIndex)).forEach(a),o;if(this.colModel.isPivotMode())return i?n.forEachPivotNode(a,!0,l==="filteredAndSorted"):s?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a),o;if(e.onlySelectedAllPages||r){const u=((c=this.beans.selectionSvc)==null?void 0:c.getSelectedNodes())??[];this.replicateSortedOrder(u),u.forEach(a)}else l==="all"?n.forEachNode(a):i||s?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a);return o}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:o}=this.beans;if(!t||!o)return;const n=t.getSortOptions(),i=(s,r)=>{var a,l;return s.rowIndex!=null&&r.rowIndex!=null?s.rowIndex-r.rowIndex:s.level===r.level?((a=s.parent)==null?void 0:a.id)===((l=r.parent)==null?void 0:l.id)?o.compareRowNodes(n,{rowNode:s,currentPos:s.rowIndex??-1},{rowNode:r,currentPos:r.rowIndex??-1}):i(s.parent,r.parent):s.level>r.level?i(s.parent,r):i(s,r.parent)};e.sort(i)}processPinnedBottomRows(e,t){return o=>{var i,s;const n=this.processRow.bind(this,o,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="bottom").sort((r,a)=>r.rowIndex-a.rowIndex).map(r=>{var a;return(a=this.pinnedRowModel)==null?void 0:a.getPinnedBottomRow(r.rowIndex)}).forEach(n):(i=this.pinnedRowModel)!=null&&i.isManual()||(s=this.pinnedRowModel)==null||s.forEachPinnedRow("bottom",n),o}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:o=!1,exportRowNumbers:n=!1,columnKeys:i}=e,{colModel:s,gos:r,visibleCols:a}=this,l=s.isPivotMode(),c=h=>qr(h)?!1:!Ps(h)||n;if(i&&i.length)return s.getColsForKeys(i).filter(c);const u=r.get("treeData");let d=[];return t&&!l?d=s.getCols():d=a.allCols,d=d.filter(h=>c(h)&&(o&&!u?!zp(h):!0)),d}recursivelyAddHeaderGroups(e,t,o){const n=[];e.forEach(i=>{const s=i;s.getChildren&&s.getChildren().forEach(r=>n.push(r))}),e.length>0&&no(e[0])&&this.doAddHeaderHeader(t,e,o),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,t,o)}doAddHeaderHeader(e,t,o){const n=e.onNewHeaderGroupingRow();let i=0;t.forEach(s=>{const r=s;let a;o?a=o(pt(this.gos,{columnGroup:r})):a=this.beans.colNames.getDisplayNameForColumnGroup(r,"header");const l=r.getLeafColumns().reduce((c,u,d,h)=>{let f=Vt(c);return u.getColumnGroupShow()==="open"?(!f||f[1]!=null)&&(f=[d],c.push(f)):f&&f[1]==null&&(f[1]=d-1),d===h.length-1&&f&&f[1]==null&&(f[1]=d),c},[]);n.onColumn(r,a||"",i++,r.getLeafColumns().length-1,l)})}},Gz={moduleName:"SharedExport",version:Je,beans:[Hz]},dC=`\r
`,Vz=class extends jV{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:o}=e;this.suppressQuotes=t,this.columnSeparator=o}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,dC),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((o,n)=>{n!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(o.data.value||""),o.mergeAcross&&this.appendEmptyCells(o.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,o,n){o!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(n)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,o){t!=0&&(this.result+=this.columnSeparator);const n=this.extractRowCellValue(e,t,t,"csv",o);this.result+=this.putInQuotes(n.valueFormatted??n.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(Ue(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=dC),this.isFirstLine=!1}},zz=class extends $V{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){Ue(51);return}const t=this.getMergedParams(e),o=this.getData(t),n=new Blob(["\uFEFF",o],{type:"text/plain"}),i=typeof t.fileName=="function"?t.fileName(pt(this.gos,{})):t.fileName;KV(this.getFileName(i),n)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const o=t?Object.assign({},e):this.getMergedParams(e);return this.getData(o)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:o,rowGroupColsSvc:n,valueSvc:i,gos:s}=this,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:d}=e;return new Vz({colModel:t,colNames:o,valueSvc:i,gos:s,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:d||",",rowGroupColsSvc:n})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function Wz(e,t){var o;return(o=e.csvCreator)==null?void 0:o.getDataAsCsv(t)}function Uz(e,t){var o;(o=e.csvCreator)==null||o.exportDataAsCsv(t)}var $z={moduleName:"CsvExport",version:Je,beans:[zz],apiFunctions:{getDataAsCsv:Wz,exportDataAsCsv:Uz},dependsOn:[Gz]},jz=class extends Ie{constructor(e,t,o){super(),this.id=e,this.parentCache=t,this.params=o,this.state="needsLoading",this.version=0,this.startRow=e*o.blockSize,this.endRow=this.startRow+o.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,o){this.successCommon(e,{rowData:t,rowCount:o})}isRequestMostRecentAndLive(e){const t=e===this.version,o=this.isAlive();return t&&o}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:o,beans:n,rowNodes:i}=this;for(let s=0;s<e;s++){const r=o+s,a=new Vs(n);a.setRowHeight(t),a.uiLevel=0,a.setRowIndex(r),a.setRowTop(t*r),i.push(a)}}getBlockStateJson(){const{id:e,startRow:t,endRow:o,state:n}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:o,pageStatus:n}}}setDataAndId(e,t,o){Ye(t)?e.setDataAndId(t,o.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(qt(this.params.datasource.getRows)){Ue(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){const{startRow:e,endRow:t,version:o,params:{sortModel:n,filterModel:i},gos:s}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,o),failCallback:this.pageLoadFailed.bind(this,o),sortModel:n,filterModel:i,context:pt(s,{}).context}}forEachNode(e,t,o){this.rowNodes.forEach((n,i)=>{this.startRow+i<o&&e(n,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);const o=e-this.startRow;return this.rowNodes[o]}processServerResult(e){const{rowNodes:t,beans:o}=this;t.forEach((i,s)=>{const r=e.rowData?e.rowData[s]:void 0;!i.id&&i.alreadyRendered&&r&&(t[s]=new Vs(o),t[s].setRowIndex(i.rowIndex),t[s].setRowTop(i.rowTop),t[s].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(t[s],r,this.startRow+s)});const n=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,n)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},Kz=2,qz=class extends Ie{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){const o=Math.floor(e/this.params.blockSize);let n=this.blocks[o];if(!n){if(t)return;n=this.createBlock(o)}return n.getRow(e)}createBlock(e){const t=this.params,o=this.createBean(new jz(e,this,t));return this.blocks[o.id]=o,this.blockCount++,this.purgeBlocksIfNeeded(o),t.rowNodeBlockLoader.addBlock(o),o}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(Yi(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(r=>r!=e),o=(r,a)=>a.lastAccessed-r.lastAccessed;t.sort(o);const n=this.params.maxBlocksInCache>0,i=n?this.params.maxBlocksInCache-1:null,s=Kz-1;t.forEach((r,a)=>{const l=r.state==="needsLoading"&&a>=s,c=n?a>=i:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(r)||this.isBlockFocused(r))return;this.removeBlockFromCache(r)}})}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const{startRow:o,endRow:n}=e;return t.rowIndex>=o&&t.rowIndex<n}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:o}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,o-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:o,overflowSize:n}=this.params,s=(e.id+1)*o+n;this.rowCount<s&&(this.rowCount=s)}}setRowCount(e,t){this.rowCount=e,Ye(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};this.getBlocksInOrder().forEach(o=>o.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(o,n)=>o.id-n.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.id*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const o=[];let n=-1,i=!1;const s={value:0};let r=!1;return this.getBlocksInOrder().forEach(l=>{if(!r){if(i&&n+1!==l.id){r=!0;return}n=l.id,l.forEachNode(c=>{const u=c===e||c===t;(i||u)&&o.push(c),u&&(i=!i)},s,this.rowCount)}}),r||i?[]:o}},Qz=class extends Ie{constructor(){super(...arguments),this.beanName="rowModel"}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=Es(this.beans),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()))}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=Es(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){var t;let e;this.cacheParams?e=!ul(this.cacheParams.sortModel,((t=this.beans.sortSvc)==null?void 0:t.getSortModel())??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){var o;return((o=this.infiniteCache)==null?void 0:o.getRowNodesInRange(e,t))??[]}reset(){var o;if(!this.datasource)return;Br(this.gos)!=null||(o=this.beans.selectionSvc)==null||o.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const e=this.beans,{filterManager:t,sortSvc:o,rowNodeBlockLoader:n,eventSvc:i,gos:s}=e;this.cacheParams={datasource:this.datasource,filterModel:(t==null?void 0:t.getFilterModel())??{},sortModel:(o==null?void 0:o.getSortModel())??[],rowNodeBlockLoader:n,initialRowCount:s.get("infiniteInitialRowCount"),maxBlocksInCache:s.get("maxBlocksInCache"),rowHeight:Es(e),overflowSize:s.get("cacheOverflowSize"),blockSize:s.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new qz(this.cacheParams)),i.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(o=>{o.id===e&&(t=o)}),t}forEachNode(e){var t;(t=this.infiniteCache)==null||t.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),o=this.getRowCount()-1;return t>o?o:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){var e;(e=this.infiniteCache)==null||e.refreshCache()}purgeCache(){var e;(e=this.infiniteCache)==null||e.purgeCache()}isLastRowIndexKnown(){var e;return((e=this.infiniteCache)==null?void 0:e.isLastRowIndexKnown())??!1}setRowCount(e,t){var o;(o=this.infiniteCache)==null||o.setRowCount(e,t)}};function Yz(e){var t;(t=od(e))==null||t.refreshCache()}function Jz(e){var t;(t=od(e))==null||t.purgeCache()}function Zz(e){var t;return(t=od(e))==null?void 0:t.getRowCount()}var Xz=class extends Ie{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=cI(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=bo(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){dn(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){Yi(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(o=>o.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length,t.forEach(o=>o.load()),this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach(t=>{const{id:o,state:n}=t.getBlockStateJson();e[o]=n}),e}printCacheStatus(){Yi(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},e4={moduleName:"InfiniteRowModelCore",version:Je,rowModels:["infinite"],beans:[Qz,Xz]},t4={moduleName:"InfiniteRowModel",version:Je,apiFunctions:{refreshInfiniteCache:Yz,purgeInfiniteCache:Jz,getInfiniteRowCount:Zz},dependsOn:[e4,vz]},o4="↑",n4="↓",i4={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},s4=class extends Bt{constructor(){super(i4),this.eValue=Qe,this.eDelta=Qe,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const o=Math.abs(t),n=e.formatValue(o),i=Ye(n)?n:o,s=t>=0,r=this.eDelta;s?r.textContent=o4+i:r.textContent=n4+i,r.classList.toggle("ag-value-change-delta-up",s),r.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Do(this.eDelta)}refresh(e,t=!1){var a;const{value:o,valueFormatted:n}=e,{eValue:i,lastValue:s,beans:r}=this;if(o===s||(Ye(n)?i.textContent=n:Ye(o)?i.textContent=o:Do(i),(a=r.filterManager)!=null&&a.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof o=="number"&&typeof s=="number"){const l=o-s;this.showDelta(e,l)}return s&&i.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=o,!0}},r4=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",a4={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},l4=class extends Bt{constructor(){super(a4),this.eCurrent=Qe,this.refreshCount=0,this.registerCSS(r4)}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const{beans:t,eCurrent:o}=this,n=Ut({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=n,n.textContent=o.textContent,this.getGui().insertBefore(n,o),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){var i;let o=e.value;if(qt(o)&&(o=""),o===this.lastValue||(i=this.beans.filterManager)!=null&&i.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=o;const n=this.eCurrent;return Ye(e.valueFormatted)?n.textContent=e.valueFormatted:Ye(e.value)?n.textContent=o:Do(n),!0}},c4=class extends Ie{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,o=this.beans.gos.get("cellFlashDuration"),n=this.beans.gos.get("cellFadeDuration")){const i=this.animations[t];i.delete(e);const s=Date.now(),r=s+o,a=s+o+n,l={phase:"flash",flashEndTime:r,fadeEndTime:a};i.set(e,l);const c=`ag-cell-${t}`,u=`${c}-animation`,{comp:d,eGui:{style:h}}=e;d.toggleCss(c,!0),d.toggleCss(u,!1),h.removeProperty("transition"),h.removeProperty("transition-delay"),this.nextAnimationTime&&r+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),o)}),this.nextAnimationTime=r)}advanceAnimations(){const e=Date.now();let t=null;for(const o of Object.keys(this.animations)){const n=this.animations[o],i=`ag-cell-${o}`,s=`${i}-animation`;for(const[r,a]of n){if(!r.isAlive()||!r.comp){n.delete(r);continue}const{phase:l,flashEndTime:c,fadeEndTime:u}=a,d=l==="flash"?c:u;if(!(e+15>=d)){t=Math.min(d,t??1/0);continue}const{comp:f,eGui:{style:v}}=r;switch(l){case"flash":f.toggleCss(i,!1),f.toggleCss(s,!0),v.transition=`background-color ${u-c}ms`,v.transitionDelay=`${c-e}ms`,t=Math.min(u,t??1/0),a.phase="fade";break;case"fade":f.toggleCss(i,!1),f.toggleCss(s,!1),v.removeProperty("transition"),v.removeProperty("transition-delay"),n.delete(r);break}}}t==null?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;const o=mO(e.cellPosition);t.cells[o]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t==null?void 0:t.flashDuration,t==null?void 0:t.fadeDuration)}destroy(){for(const e of Object.keys(this.animations))this.animations[e].clear()}};function u4(e,t={}){const{cellFlashSvc:o}=e;o&&e.frameworkOverrides.wrapIncoming(()=>{e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(n=>o.flashCell(n,t))})}var d4={moduleName:"HighlightChanges",version:Je,beans:[c4],userComponents:{agAnimateShowChangeCellRenderer:s4,agAnimateSlideCellRenderer:l4},apiFunctions:{flashCells:u4}};function h4(e){var t;return((t=e.stateSvc)==null?void 0:t.getState())??{}}function f4(e){switch(e={...e},e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=p4(e)}return e}function p4(e){return e.cellSelection=g4(e,"rangeSelection"),e}function g4(e,t){if(e&&typeof e=="object")return e[t]}var m4=class extends Ie{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=bo(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=bo(this,()=>{this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())},0),this.onRowSelectedDebounced=bo(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){this.isClientSideRowModel=Co(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",Je);const e=this.suppressEventsAndDispatchInitEvent.bind(this);this.beans.ctrlsSvc.whenReady(this,()=>e(()=>this.setupStateOnGridReady()));const[t,o,n]=this.addManagedEventListeners({newColumnsLoaded:({source:i})=>{i==="gridInitializing"&&(t(),e(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{o==null||o(),e(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{n==null||n(),e(()=>this.setupStateOnFirstDataRendered())}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getInitialState(){return f4(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){const e=()=>this.updateCachedState("sideBar",this.getSideBarState());e(),this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=o=>()=>this.updateColumnState([o]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:o,pagination:n}=this.getInitialState();e&&this.setFilterState(e),t&&this.setRowGroupExpansionState(t),o&&this.setRowSelectionState(o),n&&this.setPaginationState(n);const i=this.updateCachedState.bind(this);i("filter",this.getFilterState()),i("rowGroupExpansion",this.getRowGroupExpansionState()),i("rowSelection",this.getRowSelectionState()),i("pagination",this.getPaginationState());const s=()=>{this.updateRowGroupExpansionStateTimer=0,i("rowGroupExpansion",this.getRowGroupExpansionState())};this.addManagedEventListeners({filterChanged:()=>i("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:s,columnRowGroupChanged:s,rowDataUpdated:()=>{this.gos.get("groupDefaultExpanded")!==0&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(s)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:r=>{(r.newPage||r.newPageSize)&&i("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:o,columnOrder:n,rowPinning:i}=this.getInitialState();o&&this.setFocusedCellState(o),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),i&&this.setRowPinningState(i),this.setColumnPivotState(!!(n!=null&&n.orderedColIds));const s=this.updateCachedState.bind(this);s("sideBar",this.getSideBarState()),s("focusedCell",this.getFocusedCellState());const r=this.getRangeSelectionState();s("rangeSelection",r),s("cellSelection",r),s("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>s("focusedCell",this.getFocusedCellState()),cellSelectionChanged:a=>{if(a.finished){const l=this.getRangeSelectionState();s("rangeSelection",l),s("cellSelection",l)}},bodyScrollEnd:()=>s("scroll",this.getScrollState()),pinnedRowsChanged:()=>s("rowPinning",this.getRowPinningState())})}getColumnState(){const e=this.beans;return HV(bu(e),e.colModel.isPivotMode())}setColumnState(e){const{sort:t,rowGroup:o,aggregation:n,pivot:i,columnPinning:s,columnVisibility:r,columnSizing:a,columnOrder:l,partialColumnState:c}=e,u={},d=b=>{let S=u[b];return S||(S={colId:b},u[b]=S,S)},h=c?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:b,sort:S},R)=>{const _=d(b);_.sort=S,_.sortIndex=R}),h.sort=null,h.sortIndex=null),o&&(o.groupColIds.forEach((b,S)=>{const R=d(b);R.rowGroup=!0,R.rowGroupIndex=S}),h.rowGroup=null,h.rowGroupIndex=null),n&&(n.aggregationModel.forEach(({colId:b,aggFunc:S})=>{d(b).aggFunc=S}),h.aggFunc=null),i&&(i.pivotColIds.forEach((b,S)=>{const R=d(b);R.pivot=!0,R.pivotIndex=S}),this.gos.updateGridOptions({options:{pivotMode:i.pivotMode},source:"gridInitializing"}),h.pivot=null,h.pivotIndex=null),s&&(s.leftColIds.forEach(b=>{d(b).pinned="left"}),s.rightColIds.forEach(b=>{d(b).pinned="right"}),h.pinned=null),r&&(r.hiddenColIds.forEach(b=>{d(b).hide=!0}),h.hide=null),a&&(a.columnSizingModel.forEach(({colId:b,flex:S,width:R})=>{const _=d(b);_.flex=S??null,_.width=R}),h.flex=null);const f=l==null?void 0:l.orderedColIds,v=!!(f!=null&&f.length),m=v?f.map(b=>d(b)):Object.values(u);m.length&&(this.columnStates=m,wn(this.beans,{state:m,applyOrder:v,defaultState:h},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const o=this.columnGroupStates;this.columnGroupStates=void 0;const n=this.beans,{pivotResultCols:i,colGroupSvc:s}=n;if(i!=null&&i.isPivotResultColsPresent()){if(t){const r=[];for(const a of t)i.getPivotResultCol(a.colId)&&r.push(a);wn(n,{state:r,applyOrder:e},"gridInitializing")}o&&(s==null||s.setColumnGroupState(o,"gridInitializing"))}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState();return GV(t)}setColumnGroupState(e){var s;const t=this.beans.colGroupSvc;if(!Object.prototype.hasOwnProperty.call(e,"columnGroup")||!t)return;const o=new Set((s=e.columnGroup)==null?void 0:s.openColumnGroupIds),i=t.getColumnGroupState().map(({groupId:r})=>{const a=o.has(r);return a&&o.delete(r),{groupId:r,open:a}});o.forEach(r=>{i.push({groupId:r,open:!0})}),i.length&&(this.columnGroupStates=i),t.setColumnGroupState(i,"gridInitializing")}getFilterState(){const e=this.beans.filterManager;let t=e==null?void 0:e.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);const o=(e==null?void 0:e.getAdvFilterModel())??void 0;return t||o?{filterModel:t,advancedFilterModel:o}:void 0}setFilterState(e){const t=this.beans.filterManager,{filterModel:o,advancedFilterModel:n}=e??{};o&&(t==null||t.setFilterModel(o,"columnFilter")),n&&(t==null||t.setAdvFilterModel(n,"advancedFilter"))}getRangeSelectionState(){var t;const e=(t=this.beans.rangeSvc)==null?void 0:t.getCellRanges().map(o=>{const{id:n,type:i,startRow:s,endRow:r,columns:a,startColumn:l}=o;return{id:n,type:i,startRow:s,endRow:r,colIds:a.map(c=>c.getColId()),startColId:l.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:o,colModel:n,visibleCols:i}=this.beans;if(!gi(t)||!o)return;const s=[];e.cellRanges.forEach(r=>{const a=[];if(r.colIds.forEach(c=>{const u=n.getCol(c);u&&a.push(u)}),!a.length)return;let l=n.getCol(r.startColId);if(!l){const c=i.allCols,u=new Set(a);l=c.find(d=>u.has(d))}s.push({...r,columns:a,startColumn:l})}),o.setCellRanges(s)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=(e==null?void 0:e.getHScrollPosition())??{left:0},{top:o}=(e==null?void 0:e.getVScrollPosition())??{top:0};return o||t?{top:o,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:o}=e,{frameworkOverrides:n,rowRenderer:i,animationFrameSvc:s,ctrlsSvc:r}=this.beans;n.wrapIncoming(()=>{var a;r.get("center").setCenterViewportScrollLeft(o),(a=r.getScrollFeature())==null||a.setVerticalScrollPosition(t),i.redraw({afterScroll:!0}),s==null||s.flushAllFrames()})}getSideBarState(){var e,t;return(t=(e=this.beans.sideBar)==null?void 0:e.comp)==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:o,rowPinned:n}=e;return{colId:t.getColId(),rowIndex:o,rowPinned:n}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:o,rowPinned:n}=e,{focusSvc:i,colModel:s}=this.beans;i.setFocusedCell({column:s.getCol(t),rowIndex:o,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const o=e.getCurrentPage(),n=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!o&&!n))return{page:o,pageSize:n}}setPaginationState(e){const{pagination:t,gos:o}=this.beans;t&&(e.pageSize&&!o.get("paginationAutoPageSize")&&t.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&t.setPage(e.page))}getRowSelectionState(){var n;const e=this.beans.selectionSvc;if(!e)return;const t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!((n=t==null?void 0:t.toggledNodes)!=null&&n.length)?void 0:t}setRowSelectionState(e){var t;(t=this.beans.selectionSvc)==null||t.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const{expansionSvc:e,rowModel:t}=this.beans;if(!e)return;const o=[];return t.forEachNode(({expanded:n,id:i})=>{n&&i&&o.push(i)}),o.length?{expandedRowGroupIds:o}:void 0}getRowPinningState(){var e;return(e=this.beans.pinnedRowModel)==null?void 0:e.getPinnedState()}setRowPinningState(e){var t;(t=this.beans.pinnedRowModel)==null||t.setPinnedState(e)}setRowGroupExpansionState(e){var t;(t=this.beans.expansionSvc)==null||t.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let o=!1;const n=this.cachedState;for(const i of Object.keys(t)){const s=t[i];ul(s,n[i])||(o=!0)}this.cachedState={...n,...t},o&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const o=this.cachedState[e];this.setCachedStateValue(e,t),ul(t,o)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){const e=this.staleStateKeys;e.forEach(t=>{switch(t){case"rowSelection":this.setCachedStateValue(t,this.getRowSelectionState());break}}),e.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0;const t=this.beans.colAnimation;t==null||t.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(t==null||t.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},v4={moduleName:"GridState",version:Je,beans:[m4],apiFunctions:{getState:h4}};function y4(e){return e.rowModel.isLastRowIndexKnown()}function C4(e){var t;return((t=e.pagination)==null?void 0:t.getPageSize())??100}function b4(e){var t;return((t=e.pagination)==null?void 0:t.getCurrentPage())??0}function w4(e){var t;return((t=e.pagination)==null?void 0:t.getTotalPages())??1}function S4(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function x4(e){var t;(t=e.pagination)==null||t.goToNextPage()}function R4(e){var t;(t=e.pagination)==null||t.goToPreviousPage()}function _4(e){var t;(t=e.pagination)==null||t.goToFirstPage()}function E4(e){var t;(t=e.pagination)==null||t.goToLastPage()}function P4(e,t){var o;(o=e.pagination)==null||o.goToPage(t)}var F4=class extends Ie{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,o=()=>{const n=Math.max(Es(t),1),i=Math.floor(e/n);t.pagination.setPageSize(i,"autoCalculated")};this.isBodyRendered?bo(this,o,50)():(o(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Ca="paginationPageSizeSelector",D4={tag:"span",cls:"ag-paging-page-size"},T4=class extends Bt{constructor(){super(D4),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(Ca,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){Do(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Ca)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),o=!t||!e.includes(t);if(o){const i=this.gos.exists("paginationPageSize"),s=this.gos.get(Ca)!==!0;Ue(94,{pageSizeSet:i,pageSizesSet:s,pageSizeOptions:e,paginationPageSizeOption:t}),s||Ue(95,{paginationPageSizeOption:t,paginationPageSizeSelector:Ca}),e.unshift("")}const n=String(o?"":t);this.selectPageSizeComp?(Us(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(n,!0)):this.createPageSizeSelectorComp(e,n),this.hasEmptyOption=o}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const o=this.getLocaleTextFunc(),n=o("pageSizeSelectorLabel","Page Size:"),i=o("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new sg).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(i).setLabel(n).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(Ca);return!Array.isArray(t)||!(t!=null&&t.length)?e:[...t].sort((o,n)=>o-n)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},k4={selector:"AG-PAGE-SIZE-SELECTOR",component:T4},A4=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:max(var(--ag-row-height),22px);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",I4=class extends US{constructor(){super(),this.btFirst=Qe,this.btPrevious=Qe,this.btNext=Qe,this.btLast=Qe,this.lbRecordCount=Qe,this.lbFirstRowOnPage=Qe,this.lbLastRowOnPage=Qe,this.lbCurrent=Qe,this.lbTotal=Qe,this.pageSizeComp=Qe,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(A4)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[k4]);const{btFirst:t,btPrevious:o,btNext:n,btLast:i}=this;this.activateTabIndex([t,o,n,i]),t.insertAdjacentElement("afterbegin",sn(e?"last":"first",this.beans)),o.insertAdjacentElement("afterbegin",sn(e?"next":"previous",this.beans)),n.insertAdjacentElement("afterbegin",sn(e?"previous":"next",this.beans)),i.insertAdjacentElement("afterbegin",sn(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:s=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(s):XM(this.beans,s),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:o}=e;this.addManagedListeners(t,{click:o,keydown:n=>{(n.key===Te.ENTER||n.key===Te.SPACE)&&(n.preventDefault(),o())}})}),ZM(this.beans,this,this.getGui()),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):UV(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),o=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const n=this.isZeroPagesToDisplay(),i=e===o-1;this.nextButtonDisabled=i||n,this.lastButtonDisabled=!t||n||e===o-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){FA(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),o=this.pagination.getMasterRowCount(),n=e?o:null,i=this.pagination.getCurrentPage(),s=this.pagination.getPageSize();let r,a;this.isZeroPagesToDisplay()?r=a=0:(r=s*i+1,a=r+s-1,e&&a>n&&(a=n));const l=r+s-1,c=!e&&o<l,u=this.formatNumber(r);this.lbFirstRowOnPage.textContent=u;let d;const h=this.getLocaleTextFunc();c?d=h("pageLastRowUnknown","?"):d=this.formatNumber(a),this.lbLastRowOnPage.textContent=d;const v=t>0?i+1:0,m=this.formatNumber(v);this.lbCurrent.textContent=m;let b,S;if(e)b=this.formatNumber(t),S=this.formatNumber(n);else{const R=h("more","more");b=R,S=R}this.lbTotal.textContent=b,this.lbRecordCount.textContent=S,this.announceAriaStatus(u,d,S,m,b)}announceAriaStatus(e,t,o,n,i){var d,h;const s=this.getLocaleTextFunc(),r=s("page","Page"),a=s("to","to"),l=s("of","of"),c=`${e} ${a} ${t} ${l} ${o}`,u=`${r} ${n} ${l} ${i}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,(d=this.ariaAnnounce)==null||d.announceValue(c,"paginationRow")),u!==this.ariaPageStatus&&(this.ariaPageStatus=u,(h=this.ariaAnnounce)==null||h.announceValue(u,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}},M4={selector:"AG-PAGINATION",component:I4},O4=class extends Ie{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return M4}isPaginateChildRows(){const e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;!this.active||t===e||typeof t!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}goToPageWithIndex(e){var o,n;if(!this.active)return;let t=e;this.paginateChildRows||(t=((n=(o=this.beans.rowModel).getTopLevelIndexFromDisplayedIndex)==null?void 0:n.call(o,e))??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return this.active?e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return Ye(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:Ye(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Ye(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Ye(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const o=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}o!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}const o=this.pageSize,n=t-1;this.totalPages=Math.floor(n/o)+1,this.adjustCurrentPageIfInvalid();const i=this.currentPage,s=o*i;let r=o*(i+1)-1;if(r>n&&(r=n),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(s),r===n)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const a=e.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=a-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}const{pageSize:t,currentPage:o}=this,n=e-1;this.totalPages=Math.floor(n/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*o,this.bottomDisplayedRowIndex=t*(o+1)-1,this.bottomDisplayedRowIndex>n&&(this.bottomDisplayedRowIndex=n)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:o=!1,newPageSize:n=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:o,newPageSize:n,keepRenderedRows:t})}},L4={moduleName:"Pagination",version:Je,beans:[O4,F4],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:y4,paginationGetPageSize:C4,paginationGetCurrentPage:b4,paginationGetTotalPages:w4,paginationGetRowCount:S4,paginationGoToNextPage:x4,paginationGoToPreviousPage:R4,paginationGoToFirstPage:_4,paginationGoToLastPage:E4,paginationGoToPage:P4},dependsOn:[nd]};function B4(e,t={}){const o=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(o))}function Ux(e,t,o,n,i){t&&(n&&t.parent&&t.parent.level!==-1&&Ux(e,t.parent,o,n,i),t.setExpanded(o,void 0,i))}function N4(e,t){return e.rowModel.getRowNode(t)}function H4(e,t,o,n){e.rowRenderer.addRenderedRowListener(t,o,n)}function G4(e){return e.rowRenderer.getRenderedNodes()}function V4(e,t,o){e.rowModel.forEachNode(t,o)}function z4(e){return e.rowRenderer.firstRenderedRow}function W4(e){return e.rowRenderer.lastRenderedRow}function U4(e,t){return e.rowModel.getRow(t)}function $4(e){return e.rowModel.getRowCount()}var $x={moduleName:"RowApi",version:Je,apiFunctions:{redrawRows:B4,setRowNodeExpanded:Ux,getRowNode:N4,addRenderedRowListener:H4,getRenderedNodes:G4,forEachNode:V4,getFirstDisplayedRowIndex:z4,getLastDisplayedRowIndex:W4,getDisplayedRowAtIndex:U4,getDisplayedRowCount:$4}},j4={moduleName:"ScrollApi",version:Je,apiFunctions:{getVerticalPixelRange:R5,getHorizontalPixelRange:_5,ensureColumnVisible:Gx,ensureIndexVisible:Vx,ensureNodeVisible:E5}};function K4(e,t,o){if(!t)return;const n=e.ctrlsSvc.getGridBodyCtrl().eGridBody,i=`aria-${t}`;o===null?n.removeAttribute(i):n.setAttribute(i,o)}function q4(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function Q4(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function Y4(e){var t;return((t=e.animationFrameSvc)==null?void 0:t.isQueueEmpty())??!0}function J4(e){var t;(t=e.animationFrameSvc)==null||t.flushAllFrames()}function Z4(e){return{rowHeight:Es(e),headerHeight:Ml(e)}}function X4(e,t={}){var s;const o=[];if(e.rowRenderer.getCellCtrls(t.rowNodes,t.columns).forEach(r=>{const a=r.getCellRenderer();a!=null&&o.push(pl(a))}),(s=t.columns)!=null&&s.length)return o;const n=[],i=Wf(t.rowNodes);return e.rowRenderer.getAllRowCtrls().forEach(r=>{if(i&&!Uf(r.rowNode,i)||!r.isFullWidth())return;const a=r.getFullWidthCellRenderers();for(let l=0;l<a.length;l++){const c=a[l];c!=null&&n.push(pl(c))}}),[...n,...o]}var eW={moduleName:"RenderApi",version:Je,apiFunctions:{setGridAriaProperty:K4,refreshCells:q4,refreshHeader:Q4,isAnimationFrameQueueEmpty:Y4,flushAllAnimationFrames:J4,getSizesForCurrentTheme:Z4,getCellRendererInstances:X4}};function tW(e,t){var o,n;typeof t=="number"?(o=e.colAutosize)==null||o.sizeColumnsToFit(t,"api"):(n=e.colAutosize)==null||n.sizeColumnsToFitGridBody(t)}function oW(e,t,o){var n;(n=e.colAutosize)==null||n.autoSizeCols({colKeys:t,skipHeader:o,source:"api"})}function nW(e,t){var o;(o=e.colAutosize)==null||o.autoSizeAllColumns("api",t)}var iW=class extends Ie{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}autoSizeCols(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeCols(e));return}const{colKeys:t,skipHeader:o,skipHeaderGroups:n,stopAtGroup:i,source:s="api"}=e,{animationFrameSvc:r,renderStatus:a,colModel:l,autoWidthCalc:c,visibleCols:u}=this.beans;if(r==null||r.flushAllFrames(),this.timesDelayed<5&&a&&!a.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.autoSizeCols(e)});return}this.timesDelayed=0;const d=[];let h=-1;const f=o??this.gos.get("skipHeaderOnAutoSize"),v=n??f;for(;h!==0;){h=0;const m=[];t.forEach(b=>{if(!b)return;const S=l.getCol(b);if(!S||Ps(S)||d.indexOf(S)>=0)return;const R=c.getPreferredWidthForColumn(S,f);if(R>0){const _=sW(S,R);S.setActualWidth(_,s),d.push(S),h++}m.push(S)}),m.length&&u.refresh(s)}v||this.autoSizeColumnGroupsByColumns(t,s,i),Nr(this.eventSvc,d,!0,"autosizeColumns")}autoSizeColumn(e,t,o){e&&this.autoSizeCols({colKeys:[e],skipHeader:o,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,o){const{colModel:n,ctrlsSvc:i}=this.beans,s=new Set;n.getColsForKeys(e).forEach(c=>{let u=c.getParent();for(;u&&u!=o;)u.isPadding()||s.add(u),u=u.getParent()});let a;const l=[];for(const c of s){for(const u of i.getHeaderRowContainerCtrls())if(a=u.getHeaderCtrlForColumn(c),a)break;a&&a.resizeLeafColumnsToFit(t)}return l}autoSizeAllColumns(e,t){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}const o=this.beans.visibleCols.allCols;this.autoSizeCols({colKeys:o,skipHeader:t,source:e})}addColumnAutosize(e,t){const o=this.gos.get("skipHeaderOnAutoSize"),n=()=>{this.autoSizeColumn(t,"uiColumnResized",o)};e.addEventListener("dblclick",n);const i=new hs(e);return i.addEventListener("doubleTap",n),()=>{e.removeEventListener("dblclick",n),i.removeEventListener("doubleTap",n),i.destroy()}}addColumnGroupResize(e,t,o){const n=this.gos.get("skipHeaderOnAutoSize"),i=()=>{const s=[];t.getDisplayedLeafColumns().forEach(a=>{a.getColDef().suppressAutoSize||s.push(a.getColId())}),s.length>0&&this.autoSizeCols({colKeys:s,skipHeader:n,stopAtGroup:t,source:"uiColumnResized"}),o()};return e.addEventListener("dblclick",i),()=>e.removeEventListener("dblclick",i)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const{ctrlsSvc:o,scrollVisibleSvc:n}=this.beans,i=o.getGridBodyCtrl(),r=i.isVerticalScrollShowing()?n.getScrollbarWidth():0,l=cl(i.eGridBody)-r;if(l>0){this.sizeColumnsToFit(l,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):Ue(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",o,n){var f;if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,o,n));return}const i={};n&&((f=n==null?void 0:n.columnLimits)==null||f.forEach(({key:v,...m})=>{i[typeof v=="string"?v:v.getColId()]=m}));const s=this.beans.visibleCols.allCols;if(e<=0||!s.length||e===si(s)&&s.every(m=>{if(m.colDef.suppressSizeToFit)return!0;const b=i==null?void 0:i[m.getId()],S=(b==null?void 0:b.minWidth)??(n==null?void 0:n.defaultMinWidth),R=(b==null?void 0:b.maxWidth)??(n==null?void 0:n.defaultMaxWidth),_=m.getActualWidth();return(S==null||_>=S)&&(R==null||_<=R)}))return;const a=[],l=[];s.forEach(v=>{v.getColDef().suppressSizeToFit===!0?l.push(v):a.push(v)});const c=a.slice(0);let u=!1;const d=v=>{dn(a,v),l.push(v)};for(a.forEach(v=>{v.resetActualWidth(t);const m=i==null?void 0:i[v.getId()],b=(m==null?void 0:m.minWidth)??(n==null?void 0:n.defaultMinWidth),S=(m==null?void 0:m.maxWidth)??(n==null?void 0:n.defaultMaxWidth),R=v.getActualWidth();typeof b=="number"&&R<b?v.setActualWidth(b,t,!0):typeof S=="number"&&R>S&&v.setActualWidth(S,t,!0)});!u;){u=!0;const v=e-si(l);if(v<=0)a.forEach(m=>{var S;const b=((S=i==null?void 0:i[m.getId()])==null?void 0:S.minWidth)??(n==null?void 0:n.defaultMinWidth);if(typeof b=="number"){m.setActualWidth(b,t,!0);return}m.setActualWidth(m.minWidth,t)});else{const m=v/si(a);let b=v;for(let S=a.length-1;S>=0;S--){const R=a[S],_=i==null?void 0:i[R.getId()],M=(_==null?void 0:_.minWidth)??(n==null?void 0:n.defaultMinWidth),I=(_==null?void 0:_.maxWidth)??(n==null?void 0:n.defaultMaxWidth),W=R.getMinWidth(),z=R.getMaxWidth(),de=typeof M=="number"&&M>W?M:W,K=typeof I=="number"&&I<z?I:z;let O=Math.round(R.getActualWidth()*m);O<de?(O=de,d(R),u=!1):O>K?(O=K,d(R),u=!1):S===0&&(O=b),R.setActualWidth(O,t,!0),b-=O}}}c.forEach(v=>{v.fireColumnWidthChangedEvent(t)});const h=this.beans.visibleCols;h.setLeftValues(t),h.updateBodyWidths(),!o&&Nr(this.eventSvc,c,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:o,defaultMinWidth:n,defaultMaxWidth:i}=e,s=o==null?void 0:o.map(({colId:r,minWidth:a,maxWidth:l})=>({key:r,minWidth:a,maxWidth:l}));this.sizeColumnsToFitGridBody({defaultMinWidth:n,defaultMaxWidth:i,columnLimits:s})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if((e==null?void 0:e.type)!=="fitCellContents")return;const{colIds:t,skipHeader:o}=e;setTimeout(()=>{t?this.autoSizeCols({colKeys:t,skipHeader:o,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",o)})}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function sW(e,t){const o=e.getMinWidth();t<o&&(t=o);const n=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=n),t}var rW={moduleName:"ColumnAutoSize",version:Je,beans:[iW],apiFunctions:{sizeColumnsToFit:tW,autoSizeColumns:oW,autoSizeAllColumns:nW},dependsOn:[XS]},aW=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function lW(e){var t;return((t=e.pinnedRowModel)==null?void 0:t.getPinnedTopRowCount())??0}function cW(e){var t;return((t=e.pinnedRowModel)==null?void 0:t.getPinnedBottomRowCount())??0}function uW(e,t){var o;return(o=e.pinnedRowModel)==null?void 0:o.getPinnedTopRow(t)}function dW(e,t){var o;return(o=e.pinnedRowModel)==null?void 0:o.getPinnedBottomRow(t)}function hW(e,t,o){var n;return(n=e.pinnedRowModel)==null?void 0:n.forEachPinnedRow(t,o)}var fW={moduleName:"PinnedRow",version:Je,beans:[e2],css:[aW],apiFunctions:{getPinnedTopRowCount:lW,getPinnedBottomRowCount:cW,getPinnedTopRow:uW,getPinnedBottomRow:dW,forEachPinnedRow:hW},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},pW=class extends Va{constructor(e,t,o){super(e.col,e.firstNode,o,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,o,n,i,s,r){this.eWrapper=o,super.setComp(e,t,o,n,i,s,r),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){this.rowNode.rowIndex!=null&&kp(this.eGui,this.rowNode.rowIndex)}setAriaRowSpan(){IA(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if(Xu(t)){this.focusedCellPosition=void 0;return}const o=this.isCellFocused();o||(this.focusedCellPosition=void 0),e&&o&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},gW=class extends Du{onRowIndexChanged(){super.onRowIndexChanged(),this.getAllCellCtrls().forEach(e=>e.refreshAriaRowIndex())}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){var n;const t=(n=this.beans.rowSpanSvc)==null?void 0:n.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new pW(t,this,this.beans)}isCorrectCtrlForSpan(e){var n;const t=(n=this.beans.rowSpanSvc)==null?void 0:n.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!1:e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},mW=class extends Ie{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,o=`${e}Ctrls`,n=this[o],i=n.size,s=this.getAllRelevantRowControls(e),r=new Map;let a=!1;for(const c of s)c.isAlive()&&(t==null||t.forEachSpannedColumn(c.rowNode,(u,d)=>{if(r.has(d.firstNode))return;const h=n.get(d.firstNode);if(h){r.set(d.firstNode,h),n.delete(d.firstNode);return}a=!0;const f=new gW(d.firstNode,this.beans,!1,!1,!1);r.set(d.firstNode,f)}));this[o]=r;const l=r.size===i;if(!(!a&&l)){for(const c of n.values())c.destroyFirstPass(!0),c.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:t}=this.beans,o=t==null?void 0:t.getCellSpanByPosition(e);if(!o)return;const n=`${jx(e.rowPinned)}Ctrls`,i=this[n].get(o.firstNode);if(i)return i.getAllCellCtrls().find(s=>s.column===e.column)}getCtrls(e){const t=`${e}Ctrls`;return[...this[t].values()]}destroyRowCtrls(e){const t=`${e}Ctrls`;for(const o of this[t].values())o.destroyFirstPass(!0),o.destroySecondPass();this[t]=new Map}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},jx=e=>e??"center",vW=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){var o;const e=(o=this.firstNode.__autoHeights)==null?void 0:o[this.col.getColId()];if(e==null)return;let t=0;return this.spannedNodes.forEach(n=>{n!==this.lastNode&&(t+=n.rowHeight)}),e-t}},yW=class extends Ie{constructor(e){super(),this.column=e}buildCache(e){var _;const{column:t,beans:{gos:o,pinnedRowModel:n,rowModel:i,valueSvc:s,pagination:r}}=this,{colDef:a}=t,l=this[`${e}ValueNodeMap`],c=new Map,u=o.getCallback("isFullWidthRow"),d=a.equals,h=a.spanRows,f=typeof h=="function";let v=null,m=null,b;const S=(M,I)=>{v=M,m=null,b=I},R=M=>{const I=!M.isExpandable()&&!M.group&&!M.detail&&(u?!u({rowNode:M}):!0);if(M.rowIndex==null||!I){S(null,null);return}if(v==null||M.level!==v.level||M.footer||m&&M.rowIndex-1!==(m==null?void 0:m.getLastNode().rowIndex)){S(M,s.getValue(t,M));return}const W=s.getValue(t,M);if(f){const z=pt(o,{valueA:b,nodeA:v,valueB:W,nodeB:M,column:t,colDef:a});if(!h(z)){S(M,W);return}}else if(d?!d(b,W):b!==W){S(M,W);return}if(!m){const z=l==null?void 0:l.get(v);(z==null?void 0:z.firstNode)===v?(z.reset(),m=z):m=new vW(t,v),c.set(v,m)}m.addSpannedNode(M),c.set(M,m)};switch(e){case"center":(_=i.forEachDisplayedNode)==null||_.call(i,M=>{(!r||r.isRowInPage(M.rowIndex))&&R(M)});break;case"top":n==null||n.forEachPinnedRow("top",R);break;case"bottom":n==null||n.forEachPinnedRow("bottom",R);break}this[`${e}ValueNodeMap`]=c}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this[`${jx(e.rowPinned)}ValueNodeMap`].get(e)}},CW=class extends Ie{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=bo(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=bo(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;const o=this.createManagedBean(new yW(e));this.spanningColumns.set(e,o),o.buildCache("top"),o.buildCache("bottom"),o.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){const{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t==null||t.createCtrls("top"),t==null||t.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t==null||t.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){const o=this.spanningColumns.get(e);return o?o.isCellSpanning(t):!1}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:o}=this.beans,n=e.column,i=e.rowIndex,s=this.spanningColumns.get(n);if(!s)return;let r;switch(e.rowPinned){case"top":r=t==null?void 0:t.getPinnedTopRow(i);break;case"bottom":r=t==null?void 0:t.getPinnedBottomRow(i);break;default:r=o.getRow(i)}if(r)return s.getCellSpan(r)}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){const o=this.spanningColumns.get(e);if(o)return o.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[o,n]of this.spanningColumns)if(n.isCellSpanning(e)){const i=n.getCellSpan(e);t(o,i)}}destroy(){super.destroy(),this.spanningColumns.clear()}},bW={moduleName:"CellSpan",version:Je,beans:[CW,mW]},wW=class extends Ie{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,o=e.colDef,n=o.cellClassRules,i=this.getCellClassParams(e,o);Yp(this.beans.expressionSvc,n===this.cellClassRules?void 0:this.cellClassRules,n,i,s=>t.toggleCss(s,!0),s=>t.toggleCss(s,!1)),this.cellClassRules=n}applyUserStyles(){const e=this.column,t=e.colDef,o=t.cellStyle;if(!o)return;let n;if(typeof o=="function"){const i=this.getCellClassParams(e,t);n=o(i)}else n=o;n&&this.cellComp.setUserStyles(n)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,o=e.colDef,n=this.getCellClassParams(e,o);this.staticClasses.forEach(s=>t.toggleCss(s,!1));const i=this.beans.cellStyles.getStaticCellClasses(o,n);this.staticClasses=i,i.forEach(s=>t.toggleCss(s,!0))}getCellClassParams(e,t){const{value:o,rowNode:n}=this.cellCtrl;return pt(this.beans.gos,{value:o,data:n.data,node:n,colDef:t,column:e,rowIndex:n.rowIndex})}},SW=class extends Ie{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,o,n){Yp(this.beans.expressionSvc,void 0,e.cellClassRules,t,o,n),this.processStaticCellClasses(e,t,o)}getStaticCellClasses(e,t){const{cellClass:o}=e;if(!o)return[];let n;return typeof o=="function"?n=o(t):n=o,typeof n=="string"&&(n=[n]),n||[]}createCellCustomStyleFeature(e,t){return new wW(e,t)}processStaticCellClasses(e,t,o){this.getStaticCellClasses(e,t).forEach(i=>{o(i)})}},xW={moduleName:"CellStyle",version:Je,beans:[SW]},RW={moduleName:"RowStyle",version:Je,beans:[BO]};function _W(e,t){var o;return!!((o=e.colHover)!=null&&o.isHovered(t))}var EW=class extends Ie{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=o=>{const{beans:n,gos:i,element:s,columns:r}=this,a=n.colHover;o??!!i.get("columnHoverHighlight")?this.destroyManagedListeners=this.addManagedElementListeners(s,{mouseover:a.setMouseOver.bind(a,r),mouseout:a.clearMouseOver.bind(a)}):(this.destroyManagedListeners.forEach(c=>c()),this.destroyManagedListeners=[])}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},PW="ag-column-hover",FW=class extends Ie{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,o){const n=()=>{const i=this.isHovered(o);t.toggleCss("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:n}),n()}onCellColumnHover(e,t){if(!t)return;const o=this.isHovered(e);t.toggleCss(PW,o)}addHeaderFilterColumnHoverListener(e,t,o,n){this.createHoverFeature(e,[o],n);const i=()=>{const s=this.isHovered(o);t.toggleCss("ag-column-hover",s)};e.addManagedEventListeners({columnHoverChanged:i}),i()}createHoverFeature(e,t,o){e.createManagedBean(new EW(t,o))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},DW={moduleName:"ColumnHover",version:Je,beans:[FW],apiFunctions:{isColumnHovered:_W}},TW=class extends Ie{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){var e,t;this.wrapSvc=(t=(e=this.beans.frameworkOverrides).createGlobalEventListenerWrapper)==null?void 0:t.call(e)}addEventListener(e,t){var s;const o=((s=this.wrapSvc)==null?void 0:s.wrap(e,t))??t,n=!$a.has(e),i=n?this.asyncListeners:this.syncListeners;i.has(e)||i.set(e,new Set),i.get(e).add(o),this.eventSvc.addEventListener(e,o,n)}removeEventListener(e,t){var s,r;const o=((s=this.wrapSvc)==null?void 0:s.unwrap(e,t))??t,n=this.asyncListeners.get(e),i=!!(n!=null&&n.delete(o));i||(r=this.syncListeners.get(e))==null||r.delete(o),this.eventSvc.removeEventListener(e,o,i)}addGlobalListener(e){var s;const t=((s=this.wrapSvc)==null?void 0:s.wrapGlobal(e))??e,o=(r,a)=>{$a.has(r)&&t(r,a)},n=(r,a)=>{$a.has(r)||t(r,a)};this.globalListenerPairs.set(e,{syncListener:o,asyncListener:n});const i=this.eventSvc;i.addGlobalListener(o,!1),i.addGlobalListener(n,!0)}removeGlobalListener(e){const{eventSvc:t,wrapSvc:o,globalListenerPairs:n}=this,i=(o==null?void 0:o.unwrapGlobal(e))??e;if(n.has(i)){const{syncListener:r,asyncListener:a}=n.get(i);t.removeGlobalListener(r,!1),t.removeGlobalListener(a,!0),n.delete(e)}else this.syncGlobalListeners.delete(i),t.removeGlobalListener(i,!1)}destroyEventListeners(e,t){e.forEach((o,n)=>{o.forEach(i=>this.eventSvc.removeEventListener(n,i,t)),o.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(o=>this.eventSvc.removeGlobalListener(o,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:o,asyncListener:n})=>{t.removeGlobalListener(o,!1),t.removeGlobalListener(n,!0)}),e.clear()}};function kW(e,t,o){var n;(n=e.apiEventSvc)==null||n.addEventListener(t,o)}function AW(e,t,o){var n;(n=e.apiEventSvc)==null||n.removeEventListener(t,o)}function IW(e,t){var o;(o=e.apiEventSvc)==null||o.addGlobalListener(t)}function MW(e,t){var o;(o=e.apiEventSvc)==null||o.removeGlobalListener(t)}var OW={moduleName:"EventApi",version:Je,apiFunctions:{addEventListener:kW,addGlobalListener:IW,removeEventListener:AW,removeGlobalListener:MW},beans:[TW]},LW=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);white-space:normal}.ag-tooltip,.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",BW=class extends Ie{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,o,n){e&&t.destroyBean(e);const i=Sh(this.gos),{column:s,eGui:r}=t,a=s.getColDef();!n&&i&&!a.headerComponent&&(n=zc(()=>r.querySelector(".ag-header-cell-text")));const l={getColumn:()=>s,getColDef:()=>s.getColDef(),getGui:()=>r,getLocation:()=>"header",getTooltipValue:()=>o??s.getColDef().headerTooltip,shouldDisplayTooltip:n};let c=this.createTooltipFeature(l);return c&&(c=t.createBean(c),t.setRefreshFunction("tooltip",()=>c.refreshTooltip())),c}setupHeaderGroupTooltip(e,t,o,n){e&&t.destroyBean(e);const i=Sh(this.gos),{column:s,eGui:r}=t,a=s.getColGroupDef();!n&&i&&!(a!=null&&a.headerGroupComponent)&&(n=zc(()=>r.querySelector(".ag-header-group-text")));const l={getColumn:()=>s,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>o??(a&&a.headerTooltip),shouldDisplayTooltip:n};a&&(l.getColDef=()=>a);const c=this.createTooltipFeature(l);return c&&t.createBean(c)}enableCellTooltipFeature(e,t,o){const{column:n,rowNode:i}=e,s=()=>{const l=n.getColDef(),c=i.data;if(l.tooltipField&&Ye(c))return Ga(c,l.tooltipField,n.isTooltipFieldContainsDots());const u=l.tooltipValueGetter;return u?u(pt(this.gos,{location:"cell",colDef:n.getColDef(),column:n,rowIndex:e.cellPosition.rowIndex,node:i,data:i.data,value:e.value,valueFormatted:e.valueFormatted})):null},r=Sh(this.gos);!o&&r&&!e.isCellRenderer()&&(o=zc(()=>{const l=e.eGui;return l.children.length===0?l:l.querySelector(".ag-cell-value")}));const a={getColumn:()=>n,getColDef:()=>n.getColDef(),getRowIndex:()=>e.cellPosition.rowIndex,getRowNode:()=>i,getGui:()=>e.eGui,getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:s,getValueFormatted:()=>e.valueFormatted,shouldDisplayTooltip:o};return this.createTooltipFeature(a,this.beans)}refreshRowTooltip(e,t,o,n){const i={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>o,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n},s=this.beans,r=s.context;e&&t.destroyBean(e,r);const a=this.createTooltipFeature(i,s);return t.createBean(a,r)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=Ye(t.tooltipField)||Ye(t.tooltipValueGetter)||Ye(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},NW={moduleName:"Tooltip",version:Je,beans:[BW],dynamicBeans:{tooltipFeature:m2},userComponents:{agTooltipComponent:WV},dependsOn:[nd],css:[LW]},HW={moduleName:"Locale",version:Je,beans:[NV]},GW=class extends Ie{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=bo(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){var a,l,c,u;const{visibleCols:e,rowModel:t,rowSpanSvc:o,pinnedRowModel:n}=this.beans,i=e.autoHeightCols;let s=!1;const r=d=>{var v;const h=d.__autoHeights;let f=Ji(this.beans,d).height;for(const m of i){let b=h==null?void 0:h[m.getColId()];const S=o==null?void 0:o.getCellSpan(m,d);if(S){if(S.getLastNode()!==d)continue;if(b=(v=o==null?void 0:o.getCellSpan(m,d))==null?void 0:v.getLastNodeAutoHeight(),!b)return}if(b==null){if(this.colSpanSkipCell(m,d))continue;return}f=Math.max(b,f)}f!==d.rowHeight&&(d.setRowHeight(f),s=!0)};(a=n==null?void 0:n.forEachPinnedRow)==null||a.call(n,"top",r),(l=n==null?void 0:n.forEachPinnedRow)==null||l.call(n,"bottom",r),(c=t.forEachDisplayedNode)==null||c.call(t,r),s&&((u=t.onRowHeightChanged)==null||u.call(t))}setRowAutoHeight(e,t,o){if(e.__autoHeights??(e.__autoHeights={}),t==null){delete e.__autoHeights[o.getId()];return}const n=e.__autoHeights[o.getId()];e.__autoHeights[o.getId()]=t,n!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){const{colModel:o,colViewport:n,visibleCols:i}=this.beans;if(!o.colSpanActive)return!1;let s=[];switch(e.getPinned()){case"left":s=i.getLeftColsForRow(t);break;case"right":s=i.getRightColsForRow(t);break;case null:s=n.getColsWithinViewport(t);break}return!s.includes(e)}setupCellAutoHeight(e,t,o){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const n=t.parentElement,{rowNode:i,column:s}=e,r=this.beans,a=u=>{if(e.editing||!e.isAlive()||!o.isAlive())return;const{paddingTop:d,paddingBottom:h,borderBottomWidth:f,borderTopWidth:v}=Ws(n),m=d+h+f+v,S=t.offsetHeight+m;if(u<5){const R=go(r),_=!R||!R.contains(t),M=S==0;if(_||M){window.setTimeout(()=>a(u+1),0);return}}this.setRowAutoHeight(i,S,s)},l=()=>a(0);l();const c=Zi(r,t,l);return o.addDestroyFunc(()=>{c(),this.setRowAutoHeight(i,void 0,s)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;const e=this.beans.rowRenderer.getAllRowCtrls();let t=null;for(const{rowNode:o}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(o).filter(i=>i.isAutoHeight())),t.length!==0){if(!o.__autoHeights)return!1;for(const n of t){const i=o.__autoHeights[n.getColId()];if(!i||o.rowHeight<i)return!1}}return!0}},VW={moduleName:"RowAutoHeight",version:Je,beans:[GW]},hC={moduleName:"AllCommunity",version:Je,dependsOn:[Bz,$z,t4,i3,z5,W5,U5,$5,j5,K5,q5,V5,Z3,X3,e5,J3,o5,n5,v4,Cz,L4,AN,$x,j4,eW,rW,dB,fW,cz,yV,xW,DW,RW,OW,wV,d4,NW,HW,VW,uB,Nz,bW]},zW=Object.defineProperty,WW=(e,t,o)=>t in e?zW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,_r=(e,t,o)=>WW(e,typeof t!="symbol"?t+"":t,o);class yl{static getComponentDefinition(t,o){let n;return typeof t=="string"?n=this.searchForComponentInstance(o,t):n={extends:El({...t})},n||Nt(114,{component:t}),n.extends?(n.extends.setup&&(n.setup=n.extends.setup),n.extends.props=this.addParamsToProps(n.extends.props)):n.props=this.addParamsToProps(n.props),n}static addParamsToProps(t){return!t||Array.isArray(t)&&t.indexOf("params")===-1?t=["params",...t||[]]:typeof t=="object"&&!t.params&&(t.params={type:Object}),t}static createAndMountComponent(t,o,n,i){const s=yl.getComponentDefinition(t,n);if(!s)return;const{vNode:r,destroy:a,el:l}=this.mount(s,{params:Object.freeze(o)},n,i||{});return{componentInstance:r.component.proxy,element:l,destroy:a}}static mount(t,o,n,i){let s=jt(t,o);s.appContext={...n.appContext,provides:i};let r=document.createElement("div");return Mm(s,r),{vNode:s,destroy:()=>{r&&Mm(null,r),r=null,s=null},el:r}}static searchForComponentInstance(t,o,n=10,i=!1){let s=null,r=0,a=t.parent;for(;!s&&a&&a.components&&++r<n;)a.components&&a.components[o]&&(s=a.components[o]),a=a.parent;for(r=0,a=t.parent;!s&&a&&a.$options&&++r<n;){const l=a;l.$options&&l.$options.components&&l.$options.components[o]?s=l.$options.components[o]:l[o]&&(s=l[o]),a=a.parent}for(r=0,a=t.parent;!s&&a&&++r<n;){if(a.exposed){const l=a;l.exposed&&l.exposed[o]?s=l.exposed[o]:l[o]&&(s=l[o])}a=a.parent}if(!s){const l=t.appContext.components;l&&l[o]&&(s=l[o])}return!s&&!i?(Nt(114,{component:o}),null):s}}class UW extends VV{constructor(t,o){super(),_r(this,"parent"),_r(this,"provides"),this.parent=t,this.provides=o}createWrapper(t){const o=this;class n extends $W{init(r){super.init(r)}hasMethod(r){var a,l;const c=i.getFrameworkComponentInstance();return c[r]?!0:((a=c.$.exposed)==null?void 0:a[r])!=null||((l=c.exposed)==null?void 0:l[r])!=null||c.$.setupState[r]!=null}callMethod(r,a){var l,c;const u=this.getFrameworkComponentInstance(),d=i.getFrameworkComponentInstance();if(d[r])return d[r].apply(u,a);{const h=((l=u.$.exposed)==null?void 0:l[r])||((c=u.exposed)==null?void 0:c[r])||u.$.setupState[r];return h==null?void 0:h.apply(u,a)}}addMethod(r,a){i[r]=a}processMethod(r,a){return r==="refresh"&&(this.getFrameworkComponentInstance().params=a[0]),this.hasMethod(r)?this.callMethod(r,a):r==="refresh"}createComponent(r){return o.createComponent(t,r)}}const i=new n;return i}createComponent(t,o){return yl.createAndMountComponent(t,o,this.parent,this.provides)}createMethodProxy(t,o,n){return function(){return t.hasMethod(o)?t.callMethod(o,arguments):(n&&Ue(233,{methodName:o}),null)}}destroy(){this.parent=null}}class $W{constructor(){_r(this,"componentInstance"),_r(this,"element"),_r(this,"unmount")}getGui(){return this.element}destroy(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy=="function"&&this.getFrameworkComponentInstance().destroy(),this.unmount()}getFrameworkComponentInstance(){return this.componentInstance}init(t){const{componentInstance:o,element:n,destroy:i}=this.createComponent(t);this.componentInstance=o,this.unmount=i,this.element=n.firstElementChild??n}}class jW extends $S{constructor(t){super("vue"),_r(this,"parent"),this.parent=t}frameworkComponent(t,o){let n=yl.searchForComponentInstance(this.parent,t,10,!0)?t:null;if(!n&&o&&o[t]){const i=o[t];n=yl.searchForComponentInstance(this.parent,i,10,!0)?i:null}return n}isFrameworkComponent(t){return typeof t=="object"}}function KW(){return{gridOptions:{},modules:[],statusBar:void 0,sideBar:void 0,suppressContextMenu:void 0,preventDefaultOnContextMenu:void 0,allowContextMenuWithControlKey:void 0,columnMenu:void 0,suppressMenuHide:void 0,enableBrowserTooltips:void 0,tooltipTrigger:void 0,tooltipShowDelay:void 0,tooltipHideDelay:void 0,tooltipMouseTrack:void 0,tooltipShowMode:void 0,tooltipInteraction:void 0,popupParent:void 0,copyHeadersToClipboard:void 0,copyGroupHeadersToClipboard:void 0,clipboardDelimiter:void 0,suppressCopyRowsToClipboard:void 0,suppressCopySingleCellRanges:void 0,suppressLastEmptyLineOnPaste:void 0,suppressClipboardPaste:void 0,suppressClipboardApi:void 0,suppressCutToClipboard:void 0,columnDefs:void 0,defaultColDef:void 0,defaultColGroupDef:void 0,columnTypes:void 0,dataTypeDefinitions:void 0,maintainColumnOrder:void 0,enableStrictPivotColumnOrder:void 0,suppressFieldDotNotation:void 0,headerHeight:void 0,groupHeaderHeight:void 0,floatingFiltersHeight:void 0,pivotHeaderHeight:void 0,pivotGroupHeaderHeight:void 0,allowDragFromColumnsToolPanel:void 0,suppressMovableColumns:void 0,suppressColumnMoveAnimation:void 0,suppressMoveWhenColumnDragging:void 0,suppressDragLeaveHidesColumns:void 0,suppressGroupChangesColumnVisibility:void 0,suppressMakeColumnVisibleAfterUnGroup:void 0,suppressRowGroupHidesColumns:void 0,colResizeDefault:void 0,suppressAutoSize:void 0,autoSizePadding:void 0,skipHeaderOnAutoSize:void 0,autoSizeStrategy:void 0,components:void 0,editType:void 0,singleClickEdit:void 0,suppressClickEdit:void 0,readOnlyEdit:void 0,stopEditingWhenCellsLoseFocus:void 0,enterNavigatesVertically:void 0,enterNavigatesVerticallyAfterEdit:void 0,enableCellEditingOnBackspace:void 0,undoRedoCellEditing:void 0,undoRedoCellEditingLimit:void 0,defaultCsvExportParams:void 0,suppressCsvExport:void 0,defaultExcelExportParams:void 0,suppressExcelExport:void 0,excelStyles:void 0,findSearchValue:void 0,findOptions:void 0,quickFilterText:void 0,cacheQuickFilter:void 0,includeHiddenColumnsInQuickFilter:void 0,quickFilterParser:void 0,quickFilterMatcher:void 0,applyQuickFilterBeforePivotOrAgg:void 0,excludeChildrenWhenTreeDataFiltering:void 0,enableAdvancedFilter:void 0,alwaysPassFilter:void 0,includeHiddenColumnsInAdvancedFilter:void 0,advancedFilterParent:void 0,advancedFilterBuilderParams:void 0,suppressAdvancedFilterEval:void 0,suppressSetFilterByDefault:void 0,enableCharts:void 0,chartThemes:void 0,customChartThemes:void 0,chartThemeOverrides:void 0,chartToolPanelsDef:void 0,chartMenuItems:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,localeText:void 0,masterDetail:void 0,keepDetailRows:void 0,keepDetailRowsCount:void 0,detailCellRenderer:void 0,detailCellRendererParams:void 0,detailRowHeight:void 0,detailRowAutoHeight:void 0,context:void 0,alignedGrids:void 0,tabIndex:void 0,rowBuffer:void 0,valueCache:void 0,valueCacheNeverExpires:void 0,enableCellExpressions:void 0,suppressTouch:void 0,suppressFocusAfterRefresh:void 0,suppressBrowserResizeObserver:void 0,suppressPropertyNamesCheck:void 0,suppressChangeDetection:void 0,debug:void 0,loading:void 0,overlayLoadingTemplate:void 0,loadingOverlayComponent:void 0,loadingOverlayComponentParams:void 0,suppressLoadingOverlay:void 0,overlayNoRowsTemplate:void 0,noRowsOverlayComponent:void 0,noRowsOverlayComponentParams:void 0,suppressNoRowsOverlay:void 0,pagination:void 0,paginationPageSize:void 0,paginationPageSizeSelector:void 0,paginationAutoPageSize:void 0,paginateChildRows:void 0,suppressPaginationPanel:void 0,pivotMode:void 0,pivotPanelShow:void 0,pivotMaxGeneratedColumns:void 0,pivotDefaultExpanded:void 0,pivotColumnGroupTotals:void 0,pivotRowTotals:void 0,pivotSuppressAutoColumn:void 0,suppressExpandablePivotGroups:void 0,functionsReadOnly:void 0,aggFuncs:void 0,suppressAggFuncInHeader:void 0,alwaysAggregateAtRootLevel:void 0,aggregateOnlyChangedColumns:void 0,suppressAggFilteredOnly:void 0,removePivotHeaderRowWhenSingleValueColumn:void 0,animateRows:void 0,cellFlashDuration:void 0,cellFadeDuration:void 0,allowShowChangeAfterFilter:void 0,domLayout:void 0,ensureDomOrder:void 0,enableCellSpan:void 0,enableRtl:void 0,suppressColumnVirtualisation:void 0,suppressMaxRenderedRowRestriction:void 0,suppressRowVirtualisation:void 0,rowDragManaged:void 0,suppressRowDrag:void 0,suppressMoveWhenRowDragging:void 0,rowDragEntireRow:void 0,rowDragMultiRow:void 0,rowDragText:void 0,dragAndDropImageComponent:void 0,dragAndDropImageComponentParams:void 0,fullWidthCellRenderer:void 0,fullWidthCellRendererParams:void 0,embedFullWidthRows:void 0,groupDisplayType:void 0,groupDefaultExpanded:void 0,autoGroupColumnDef:void 0,groupMaintainOrder:void 0,groupSelectsChildren:void 0,groupLockGroupColumns:void 0,groupAggFiltering:void 0,groupTotalRow:void 0,grandTotalRow:void 0,suppressStickyTotalRow:void 0,groupSuppressBlankHeader:void 0,groupSelectsFiltered:void 0,showOpenedGroup:void 0,groupHideParentOfSingleChild:void 0,groupRemoveSingleChildren:void 0,groupRemoveLowestSingleChildren:void 0,groupHideOpenParents:void 0,groupAllowUnbalanced:void 0,rowGroupPanelShow:void 0,groupRowRenderer:void 0,groupRowRendererParams:void 0,treeData:void 0,treeDataChildrenField:void 0,treeDataParentIdField:void 0,rowGroupPanelSuppressSort:void 0,suppressGroupRowsSticky:void 0,pinnedTopRowData:void 0,pinnedBottomRowData:void 0,enableRowPinning:void 0,isRowPinnable:void 0,isRowPinned:void 0,rowModelType:void 0,rowData:void 0,asyncTransactionWaitMillis:void 0,suppressModelUpdateAfterUpdateTransaction:void 0,datasource:void 0,cacheOverflowSize:void 0,infiniteInitialRowCount:void 0,serverSideInitialRowCount:void 0,suppressServerSideFullWidthLoadingRow:void 0,cacheBlockSize:void 0,maxBlocksInCache:void 0,maxConcurrentDatasourceRequests:void 0,blockLoadDebounceMillis:void 0,purgeClosedRowNodes:void 0,serverSideDatasource:void 0,serverSideSortAllLevels:void 0,serverSideEnableClientSideSort:void 0,serverSideOnlyRefreshFilteredGroups:void 0,serverSidePivotResultFieldSeparator:void 0,viewportDatasource:void 0,viewportRowModelPageSize:void 0,viewportRowModelBufferSize:void 0,alwaysShowHorizontalScroll:void 0,alwaysShowVerticalScroll:void 0,debounceVerticalScrollbar:void 0,suppressHorizontalScroll:void 0,suppressScrollOnNewData:void 0,suppressScrollWhenPopupsAreOpen:void 0,suppressAnimationFrame:void 0,suppressMiddleClickScrolls:void 0,suppressPreventDefaultOnMouseWheel:void 0,scrollbarWidth:void 0,rowSelection:void 0,cellSelection:void 0,rowMultiSelectWithClick:void 0,suppressRowDeselection:void 0,suppressRowClickSelection:void 0,suppressCellFocus:void 0,suppressHeaderFocus:void 0,selectionColumnDef:void 0,rowNumbers:void 0,suppressMultiRangeSelection:void 0,enableCellTextSelection:void 0,enableRangeSelection:void 0,enableRangeHandle:void 0,enableFillHandle:void 0,fillHandleDirection:void 0,suppressClearOnFillReduction:void 0,sortingOrder:void 0,accentedSort:void 0,unSortIcon:void 0,suppressMultiSort:void 0,alwaysMultiSort:void 0,multiSortKey:void 0,suppressMaintainUnsortedOrder:void 0,icons:void 0,rowHeight:void 0,rowStyle:void 0,rowClass:void 0,rowClassRules:void 0,suppressRowHoverHighlight:void 0,suppressRowTransform:void 0,columnHoverHighlight:void 0,gridId:void 0,deltaSort:void 0,treeDataDisplayType:void 0,enableGroupEdit:void 0,initialState:void 0,theme:void 0,loadThemeGoogleFonts:void 0,themeCssLayer:void 0,styleNonce:void 0,themeStyleContainer:void 0,getContextMenuItems:void 0,getMainMenuItems:void 0,postProcessPopup:void 0,processUnpinnedColumns:void 0,processCellForClipboard:void 0,processHeaderForClipboard:void 0,processGroupHeaderForClipboard:void 0,processCellFromClipboard:void 0,sendToClipboard:void 0,processDataFromClipboard:void 0,isExternalFilterPresent:void 0,doesExternalFilterPass:void 0,getChartToolbarItems:void 0,createChartContainer:void 0,focusGridInnerElement:void 0,navigateToNextHeader:void 0,tabToNextHeader:void 0,navigateToNextCell:void 0,tabToNextCell:void 0,getLocaleText:void 0,getDocument:void 0,paginationNumberFormatter:void 0,getGroupRowAgg:void 0,isGroupOpenByDefault:void 0,initialGroupOrderComparator:void 0,processPivotResultColDef:void 0,processPivotResultColGroupDef:void 0,getDataPath:void 0,getChildCount:void 0,getServerSideGroupLevelParams:void 0,isServerSideGroupOpenByDefault:void 0,isApplyServerSideTransaction:void 0,isServerSideGroup:void 0,getServerSideGroupKey:void 0,getBusinessKeyForNode:void 0,getRowId:void 0,resetRowDataOnUpdate:void 0,processRowPostCreate:void 0,isRowSelectable:void 0,isRowMaster:void 0,fillOperation:void 0,postSortRows:void 0,getRowStyle:void 0,getRowClass:void 0,getRowHeight:void 0,isFullWidthRow:void 0,"onColumn-everything-changed":void 0,"onNew-columns-loaded":void 0,"onColumn-pivot-mode-changed":void 0,"onPivot-max-columns-exceeded":void 0,"onColumn-row-group-changed":void 0,"onExpand-or-collapse-all":void 0,"onColumn-pivot-changed":void 0,"onGrid-columns-changed":void 0,"onColumn-value-changed":void 0,"onColumn-moved":void 0,"onColumn-visible":void 0,"onColumn-pinned":void 0,"onColumn-group-opened":void 0,"onColumn-resized":void 0,"onDisplayed-columns-changed":void 0,"onVirtual-columns-changed":void 0,"onColumn-header-mouse-over":void 0,"onColumn-header-mouse-leave":void 0,"onColumn-header-clicked":void 0,"onColumn-header-context-menu":void 0,"onAsync-transactions-flushed":void 0,"onRow-group-opened":void 0,"onRow-data-updated":void 0,"onPinned-row-data-changed":void 0,"onPinned-rows-changed":void 0,"onRange-selection-changed":void 0,"onCell-selection-changed":void 0,"onChart-created":void 0,"onChart-range-selection-changed":void 0,"onChart-options-changed":void 0,"onChart-destroyed":void 0,"onTool-panel-visible-changed":void 0,"onTool-panel-size-changed":void 0,"onModel-updated":void 0,"onCut-start":void 0,"onCut-end":void 0,"onPaste-start":void 0,"onPaste-end":void 0,"onFill-start":void 0,"onFill-end":void 0,"onCell-selection-delete-start":void 0,"onCell-selection-delete-end":void 0,"onRange-delete-start":void 0,"onRange-delete-end":void 0,"onUndo-started":void 0,"onUndo-ended":void 0,"onRedo-started":void 0,"onRedo-ended":void 0,"onCell-clicked":void 0,"onCell-double-clicked":void 0,"onCell-mouse-down":void 0,"onCell-context-menu":void 0,"onCell-value-changed":void 0,"onCell-edit-request":void 0,"onRow-value-changed":void 0,"onHeader-focused":void 0,"onCell-focused":void 0,"onRow-selected":void 0,"onSelection-changed":void 0,"onTooltip-show":void 0,"onTooltip-hide":void 0,"onCell-key-down":void 0,"onCell-mouse-over":void 0,"onCell-mouse-out":void 0,"onFilter-changed":void 0,"onFilter-modified":void 0,"onFilter-opened":void 0,"onAdvanced-filter-builder-visible-changed":void 0,"onSort-changed":void 0,"onVirtual-row-removed":void 0,"onRow-clicked":void 0,"onRow-double-clicked":void 0,"onGrid-ready":void 0,"onGrid-pre-destroyed":void 0,"onGrid-size-changed":void 0,"onViewport-changed":void 0,"onFirst-data-rendered":void 0,"onDrag-started":void 0,"onDrag-stopped":void 0,"onDrag-cancelled":void 0,"onRow-editing-started":void 0,"onRow-editing-stopped":void 0,"onCell-editing-started":void 0,"onCell-editing-stopped":void 0,"onBody-scroll":void 0,"onBody-scroll-end":void 0,"onPagination-changed":void 0,"onComponent-state-changed":void 0,"onStore-refreshed":void 0,"onState-updated":void 0,"onColumn-menu-visible-changed":void 0,"onContext-menu-visible-changed":void 0,"onRow-drag-enter":void 0,"onRow-drag-move":void 0,"onRow-drag-leave":void 0,"onRow-drag-end":void 0,"onRow-drag-cancel":void 0,"onFind-changed":void 0,"onRow-resize-started":void 0,"onRow-resize-ended":void 0}}const qW=(e,t)=>{let o;return()=>{const n=function(){e()};window.clearTimeout(o),o=window.setTimeout(n,t)}};function QW(e){return e&&e.constructor&&e.constructor.toString().substring(0,5)==="class"}function ba(e){const t=o=>QW(o)?yt(o):Array.isArray(o)?o.map(n=>t(n)):Wt(o)||bn(o)||Er(o)?t(yt(o)):o;return t(e)}const YW={ref:"root"},JW=El({__name:"AgGridVue",props:nm(QE({gridOptions:{},modules:{},statusBar:{},sideBar:{type:[Object,String,Array,Boolean,null]},suppressContextMenu:{type:Boolean},preventDefaultOnContextMenu:{type:Boolean},allowContextMenuWithControlKey:{type:Boolean},columnMenu:{},suppressMenuHide:{type:Boolean},enableBrowserTooltips:{type:Boolean},tooltipTrigger:{},tooltipShowDelay:{},tooltipHideDelay:{},tooltipMouseTrack:{type:Boolean},tooltipShowMode:{},tooltipInteraction:{type:Boolean},popupParent:{},copyHeadersToClipboard:{type:Boolean},copyGroupHeadersToClipboard:{type:Boolean},clipboardDelimiter:{},suppressCopyRowsToClipboard:{type:Boolean},suppressCopySingleCellRanges:{type:Boolean},suppressLastEmptyLineOnPaste:{type:Boolean},suppressClipboardPaste:{type:Boolean},suppressClipboardApi:{type:Boolean},suppressCutToClipboard:{type:Boolean},columnDefs:{},defaultColDef:{},defaultColGroupDef:{},columnTypes:{},dataTypeDefinitions:{},maintainColumnOrder:{type:Boolean},enableStrictPivotColumnOrder:{type:Boolean},suppressFieldDotNotation:{type:Boolean},headerHeight:{},groupHeaderHeight:{},floatingFiltersHeight:{},pivotHeaderHeight:{},pivotGroupHeaderHeight:{},allowDragFromColumnsToolPanel:{type:Boolean},suppressMovableColumns:{type:Boolean},suppressColumnMoveAnimation:{type:Boolean},suppressMoveWhenColumnDragging:{type:Boolean},suppressDragLeaveHidesColumns:{type:Boolean},suppressGroupChangesColumnVisibility:{type:[Boolean,String]},suppressMakeColumnVisibleAfterUnGroup:{type:Boolean},suppressRowGroupHidesColumns:{type:Boolean},colResizeDefault:{},suppressAutoSize:{type:Boolean},autoSizePadding:{},skipHeaderOnAutoSize:{type:Boolean},autoSizeStrategy:{},components:{},editType:{},singleClickEdit:{type:Boolean},suppressClickEdit:{type:Boolean},readOnlyEdit:{type:Boolean},stopEditingWhenCellsLoseFocus:{type:Boolean},enterNavigatesVertically:{type:Boolean},enterNavigatesVerticallyAfterEdit:{type:Boolean},enableCellEditingOnBackspace:{type:Boolean},undoRedoCellEditing:{type:Boolean},undoRedoCellEditingLimit:{},defaultCsvExportParams:{},suppressCsvExport:{type:Boolean},defaultExcelExportParams:{},suppressExcelExport:{type:Boolean},excelStyles:{},findSearchValue:{},findOptions:{},quickFilterText:{},cacheQuickFilter:{type:Boolean},includeHiddenColumnsInQuickFilter:{type:Boolean},quickFilterParser:{type:Function},quickFilterMatcher:{type:Function},applyQuickFilterBeforePivotOrAgg:{type:Boolean},excludeChildrenWhenTreeDataFiltering:{type:Boolean},enableAdvancedFilter:{type:Boolean},alwaysPassFilter:{type:Function},includeHiddenColumnsInAdvancedFilter:{type:Boolean},advancedFilterParent:{},advancedFilterBuilderParams:{},suppressAdvancedFilterEval:{type:Boolean},suppressSetFilterByDefault:{type:Boolean},enableCharts:{type:Boolean},chartThemes:{},customChartThemes:{},chartThemeOverrides:{},chartToolPanelsDef:{},chartMenuItems:{type:[Array,Function]},loadingCellRenderer:{},loadingCellRendererParams:{},loadingCellRendererSelector:{type:Function},localeText:{},masterDetail:{type:Boolean},keepDetailRows:{type:Boolean},keepDetailRowsCount:{},detailCellRenderer:{},detailCellRendererParams:{},detailRowHeight:{},detailRowAutoHeight:{type:Boolean},context:{},alignedGrids:{type:[Array,Function]},tabIndex:{},rowBuffer:{},valueCache:{type:Boolean},valueCacheNeverExpires:{type:Boolean},enableCellExpressions:{type:Boolean},suppressTouch:{type:Boolean},suppressFocusAfterRefresh:{type:Boolean},suppressBrowserResizeObserver:{type:Boolean},suppressPropertyNamesCheck:{type:Boolean},suppressChangeDetection:{type:Boolean},debug:{type:Boolean},loading:{type:Boolean},overlayLoadingTemplate:{},loadingOverlayComponent:{},loadingOverlayComponentParams:{},suppressLoadingOverlay:{type:Boolean},overlayNoRowsTemplate:{},noRowsOverlayComponent:{},noRowsOverlayComponentParams:{},suppressNoRowsOverlay:{type:Boolean},pagination:{type:Boolean},paginationPageSize:{},paginationPageSizeSelector:{type:[Array,Boolean]},paginationAutoPageSize:{type:Boolean},paginateChildRows:{type:Boolean},suppressPaginationPanel:{type:Boolean},pivotMode:{type:Boolean},pivotPanelShow:{},pivotMaxGeneratedColumns:{},pivotDefaultExpanded:{},pivotColumnGroupTotals:{},pivotRowTotals:{},pivotSuppressAutoColumn:{type:Boolean},suppressExpandablePivotGroups:{type:Boolean},functionsReadOnly:{type:Boolean},aggFuncs:{},suppressAggFuncInHeader:{type:Boolean},alwaysAggregateAtRootLevel:{type:Boolean},aggregateOnlyChangedColumns:{type:Boolean},suppressAggFilteredOnly:{type:Boolean},removePivotHeaderRowWhenSingleValueColumn:{type:Boolean},animateRows:{type:Boolean},cellFlashDuration:{},cellFadeDuration:{},allowShowChangeAfterFilter:{type:Boolean},domLayout:{},ensureDomOrder:{type:Boolean},enableCellSpan:{type:Boolean},enableRtl:{type:Boolean},suppressColumnVirtualisation:{type:Boolean},suppressMaxRenderedRowRestriction:{type:Boolean},suppressRowVirtualisation:{type:Boolean},rowDragManaged:{type:Boolean},suppressRowDrag:{type:Boolean},suppressMoveWhenRowDragging:{type:Boolean},rowDragEntireRow:{type:Boolean},rowDragMultiRow:{type:Boolean},rowDragText:{type:Function},dragAndDropImageComponent:{},dragAndDropImageComponentParams:{},fullWidthCellRenderer:{},fullWidthCellRendererParams:{},embedFullWidthRows:{type:Boolean},groupDisplayType:{},groupDefaultExpanded:{},autoGroupColumnDef:{},groupMaintainOrder:{type:Boolean},groupSelectsChildren:{type:Boolean},groupLockGroupColumns:{},groupAggFiltering:{type:[Boolean,Function]},groupTotalRow:{type:[String,Function]},grandTotalRow:{},suppressStickyTotalRow:{type:[Boolean,String]},groupSuppressBlankHeader:{type:Boolean},groupSelectsFiltered:{type:Boolean},showOpenedGroup:{type:Boolean},groupHideParentOfSingleChild:{type:[Boolean,String]},groupRemoveSingleChildren:{type:Boolean},groupRemoveLowestSingleChildren:{type:Boolean},groupHideOpenParents:{type:Boolean},groupAllowUnbalanced:{type:Boolean},rowGroupPanelShow:{},groupRowRenderer:{},groupRowRendererParams:{},treeData:{type:Boolean},treeDataChildrenField:{},treeDataParentIdField:{},rowGroupPanelSuppressSort:{type:Boolean},suppressGroupRowsSticky:{type:Boolean},pinnedTopRowData:{},pinnedBottomRowData:{},enableRowPinning:{type:[Boolean,String]},isRowPinnable:{type:Function},isRowPinned:{type:Function},rowModelType:{},rowData:{},asyncTransactionWaitMillis:{},suppressModelUpdateAfterUpdateTransaction:{type:Boolean},datasource:{},cacheOverflowSize:{},infiniteInitialRowCount:{},serverSideInitialRowCount:{},suppressServerSideFullWidthLoadingRow:{type:Boolean},cacheBlockSize:{},maxBlocksInCache:{},maxConcurrentDatasourceRequests:{},blockLoadDebounceMillis:{},purgeClosedRowNodes:{type:Boolean},serverSideDatasource:{},serverSideSortAllLevels:{type:Boolean},serverSideEnableClientSideSort:{type:Boolean},serverSideOnlyRefreshFilteredGroups:{type:Boolean},serverSidePivotResultFieldSeparator:{},viewportDatasource:{},viewportRowModelPageSize:{},viewportRowModelBufferSize:{},alwaysShowHorizontalScroll:{type:Boolean},alwaysShowVerticalScroll:{type:Boolean},debounceVerticalScrollbar:{type:Boolean},suppressHorizontalScroll:{type:Boolean},suppressScrollOnNewData:{type:Boolean},suppressScrollWhenPopupsAreOpen:{type:Boolean},suppressAnimationFrame:{type:Boolean},suppressMiddleClickScrolls:{type:Boolean},suppressPreventDefaultOnMouseWheel:{type:Boolean},scrollbarWidth:{},rowSelection:{},cellSelection:{type:[Boolean,Object]},rowMultiSelectWithClick:{type:Boolean},suppressRowDeselection:{type:Boolean},suppressRowClickSelection:{type:Boolean},suppressCellFocus:{type:Boolean},suppressHeaderFocus:{type:Boolean},selectionColumnDef:{},rowNumbers:{type:[Boolean,Object]},suppressMultiRangeSelection:{type:Boolean},enableCellTextSelection:{type:Boolean},enableRangeSelection:{type:Boolean},enableRangeHandle:{type:Boolean},enableFillHandle:{type:Boolean},fillHandleDirection:{},suppressClearOnFillReduction:{type:Boolean},sortingOrder:{},accentedSort:{type:Boolean},unSortIcon:{type:Boolean},suppressMultiSort:{type:Boolean},alwaysMultiSort:{type:Boolean},multiSortKey:{},suppressMaintainUnsortedOrder:{type:Boolean},icons:{},rowHeight:{},rowStyle:{},rowClass:{},rowClassRules:{},suppressRowHoverHighlight:{type:Boolean},suppressRowTransform:{type:Boolean},columnHoverHighlight:{type:Boolean},gridId:{},deltaSort:{type:Boolean},treeDataDisplayType:{},enableGroupEdit:{type:Boolean},initialState:{},theme:{},loadThemeGoogleFonts:{type:Boolean},themeCssLayer:{},styleNonce:{},themeStyleContainer:{},getContextMenuItems:{type:Function},getMainMenuItems:{type:Function},postProcessPopup:{type:Function},processUnpinnedColumns:{type:Function},processCellForClipboard:{type:Function},processHeaderForClipboard:{type:Function},processGroupHeaderForClipboard:{type:Function},processCellFromClipboard:{type:Function},sendToClipboard:{type:Function},processDataFromClipboard:{type:Function},isExternalFilterPresent:{type:Function},doesExternalFilterPass:{type:Function},getChartToolbarItems:{type:Function},createChartContainer:{type:Function},focusGridInnerElement:{type:Function},navigateToNextHeader:{type:Function},tabToNextHeader:{type:Function},navigateToNextCell:{type:Function},tabToNextCell:{type:Function},getLocaleText:{type:Function},getDocument:{type:Function},paginationNumberFormatter:{type:Function},getGroupRowAgg:{type:Function},isGroupOpenByDefault:{type:Function},initialGroupOrderComparator:{type:Function},processPivotResultColDef:{type:Function},processPivotResultColGroupDef:{type:Function},getDataPath:{type:Function},getChildCount:{type:Function},getServerSideGroupLevelParams:{type:Function},isServerSideGroupOpenByDefault:{type:Function},isApplyServerSideTransaction:{type:Function},isServerSideGroup:{type:Function},getServerSideGroupKey:{type:Function},getBusinessKeyForNode:{type:Function},getRowId:{type:Function},resetRowDataOnUpdate:{type:Boolean},processRowPostCreate:{type:Function},isRowSelectable:{type:Function},isRowMaster:{type:Function},fillOperation:{type:Function},postSortRows:{type:Function},getRowStyle:{type:Function},getRowClass:{type:Function},getRowHeight:{type:Function},isFullWidthRow:{type:Function},"onTool-panel-visible-changed":{},"onTool-panel-size-changed":{},"onColumn-menu-visible-changed":{},"onContext-menu-visible-changed":{},"onCut-start":{},"onCut-end":{},"onPaste-start":{},"onPaste-end":{},"onColumn-visible":{},"onColumn-pinned":{},"onColumn-resized":{},"onColumn-moved":{},"onColumn-value-changed":{},"onColumn-pivot-mode-changed":{},"onColumn-pivot-changed":{},"onColumn-group-opened":{},"onNew-columns-loaded":{},"onGrid-columns-changed":{},"onDisplayed-columns-changed":{},"onVirtual-columns-changed":{},"onColumn-everything-changed":{},"onColumn-header-mouse-over":{},"onColumn-header-mouse-leave":{},"onColumn-header-clicked":{},"onColumn-header-context-menu":{},"onComponent-state-changed":{},"onCell-value-changed":{},"onCell-edit-request":{},"onRow-value-changed":{},"onCell-editing-started":{},"onCell-editing-stopped":{},"onRow-editing-started":{},"onRow-editing-stopped":{},"onUndo-started":{},"onUndo-ended":{},"onRedo-started":{},"onRedo-ended":{},"onCell-selection-delete-start":{},"onCell-selection-delete-end":{},"onRange-delete-start":{},"onRange-delete-end":{},"onFill-start":{},"onFill-end":{},"onFilter-opened":{},"onFilter-changed":{},"onFilter-modified":{},"onAdvanced-filter-builder-visible-changed":{},"onFind-changed":{},"onChart-created":{},"onChart-range-selection-changed":{},"onChart-options-changed":{},"onChart-destroyed":{},"onCell-key-down":{},"onGrid-ready":{},"onGrid-pre-destroyed":{},"onFirst-data-rendered":{},"onGrid-size-changed":{},"onModel-updated":{},"onVirtual-row-removed":{},"onViewport-changed":{},"onBody-scroll":{},"onBody-scroll-end":{},"onDrag-started":{},"onDrag-stopped":{},"onDrag-cancelled":{},"onState-updated":{},"onPagination-changed":{},"onRow-drag-enter":{},"onRow-drag-move":{},"onRow-drag-leave":{},"onRow-drag-end":{},"onRow-drag-cancel":{},"onRow-resize-started":{},"onRow-resize-ended":{},"onColumn-row-group-changed":{},"onRow-group-opened":{},"onExpand-or-collapse-all":{},"onPivot-max-columns-exceeded":{},"onPinned-row-data-changed":{},"onPinned-rows-changed":{},"onRow-data-updated":{},"onAsync-transactions-flushed":{},"onStore-refreshed":{},"onHeader-focused":{},"onCell-clicked":{},"onCell-double-clicked":{},"onCell-focused":{},"onCell-mouse-over":{},"onCell-mouse-out":{},"onCell-mouse-down":{},"onRow-clicked":{},"onRow-double-clicked":{},"onRow-selected":{},"onSelection-changed":{},"onCell-context-menu":{},"onRange-selection-changed":{},"onCell-selection-changed":{},"onTooltip-show":{},"onTooltip-hide":{},"onSort-changed":{}},KW()),{modelValue:{},modelModifiers:{}}),emits:nm(["update:modelValue"],["update:modelValue"]),setup(e,{expose:t,emit:o}){const n=e,i=kE("root"),s=De(void 0),r=De(!1),a=De(!1),l=De(!1),c=De({}),u=De(null),d=Gh(n);zf().filter(K=>K!="gridOptions").forEach(K=>{eo(()=>d[K],(O,ie)=>{(K==="rowData"&&!m.value||K!=="rowData")&&z(K,O),m.value=!1},{deep:!0})});const h=new Set(["rowDataUpdated","cellValueChanged","rowValueChanged"]),f=F1(e,"modelValue"),v=De(!1),m=De(!1),b=o;eo(f,(K,O)=>{r.value&&(m.value||(v.value=!0,z("rowData",ba(K),ba(O))),m.value=!1)},{deep:!0});const S=qW(()=>{m.value=!0,b("update:modelValue",I())},10),R=Gn(),_=K=>{var O,ie;l.value&&h.has(K)&&(ie=(O=R==null?void 0:R.vnode)==null?void 0:O.props)!=null&&ie["onUpdate:modelValue"]&&S()},M=()=>f.value||n.rowData||n.gridOptions.rowData,I=()=>{const K=[];return s==null||s.value.forEachLeafNode(O=>{K.push(O.data)}),K},W=K=>O=>{if(a.value)return;O==="gridReady"&&(l.value=!0);const ie=$a.has(O);ie&&!K||!ie&&K||h.has(O)&&(v.value||_(O),v.value=!1)},z=(K,O,ie)=>{if(r.value){let N=O.value||O;K==="rowData"&&N!=null&&(N=ba(N)),c.value[K]=N,u.value==null&&(u.value=window.setTimeout(()=>{u.value=null,mI(c.value,s.value),c.value={}},0))}},de=()=>Object.create(Gn().provides);return Xt(()=>{Hr($x,void 0,!0);const K=new UW(Gn(),de()),O={globalListener:W(),globalSyncListener:W(!0),frameworkOverrides:new jW(Gn()),providedBeanInstances:{frameworkCompWrapper:K},modules:n.modules},ie=li(gI(ba(n.gridOptions),n,[...zf(),...fx().map(oe=>Vp(oe))])),N=M();N!==void 0&&(ie.rowData=ba(N)),s.value=OV(i.value,ie,O),r.value=!0}),Rn(()=>{var K;r.value&&((K=s==null?void 0:s.value)==null||K.destroy(),a.value=!0)}),t({api:s}),(K,O)=>(ge(),me("div",YW,null,512))}}),ZW={"Liquid Oxygen":{category:"Chemicals",avgPrice:1375,type:"bulk"},Pesticides:{category:"Chemicals",avgPrice:412,type:"small batch"},"Surface Stabilisers":{category:"Chemicals",avgPrice:668,type:"bulk"},Water:{category:"Chemicals",avgPrice:260,type:"small batch"},"Evacuation Shelter":{category:"Consumer Items",avgPrice:500,type:"small batch"},"Survival Equipment":{category:"Consumer Items",avgPrice:666,type:"small batch"},Beer:{category:"Legal Drugs",avgPrice:350,type:"small batch"},Liquor:{category:"Legal Drugs",avgPrice:774,type:"small batch"},Wine:{category:"Legal Drugs",avgPrice:417,type:"small batch"},"Animal Meat":{category:"Foods",avgPrice:1462,type:"small batch"},Coffee:{category:"Foods",avgPrice:1425,type:"small batch"},Fish:{category:"Foods",avgPrice:613,type:"small batch"},"Food Cartridges":{category:"Foods",avgPrice:252,type:"small batch"},"Fruit and Vegetables":{category:"Foods",avgPrice:483,type:"small batch"},Grain:{category:"Foods",avgPrice:387,type:"small batch"},Tea:{category:"Foods",avgPrice:1603,type:"small batch"},"Ceramic Composites":{category:"Industrial Materials",avgPrice:402,type:"ground"},"CMM Composite":{category:"Industrial Materials",avgPrice:5972,type:"ground"},"Insulating Membrane":{category:"Industrial Materials",avgPrice:10605,type:"small batch"},Polymers:{category:"Industrial Materials",avgPrice:306,type:"ground"},Semiconductors:{category:"Industrial Materials",avgPrice:1084,type:"ground"},Superconductors:{category:"Industrial Materials",avgPrice:6551,type:"ground"},"Building Fabricators":{category:"Machinery",avgPrice:2224,type:"small batch"},"Crop Harvesters":{category:"Machinery",avgPrice:2211,type:"small batch"},"Emergency Power Cells":{category:"Machinery",avgPrice:2038,type:"small batch"},"Geological Equipment":{category:"Machinery",avgPrice:1830,type:"small batch"},"Microbial Furnaces":{category:"Machinery",avgPrice:418,type:"small batch"},"Mineral Extractors":{category:"Machinery",avgPrice:791,type:"small batch"},"Power Generators":{category:"Machinery",avgPrice:2388,type:"small batch"},"Thermal Cooling Units":{category:"Machinery",avgPrice:3700,type:"small batch"},"Water Purifiers":{category:"Machinery",avgPrice:447,type:"small batch"},"Agri-Medicines":{category:"Medicines",avgPrice:1197,type:"small batch"},"Basic Medicines":{category:"Medicines",avgPrice:489,type:"small batch"},"Combat Stabilizers":{category:"Medicines",avgPrice:3392,type:"small batch"},Aluminium:{category:"Metals",avgPrice:2540,type:"bulk"},Copper:{category:"Metals",avgPrice:631,type:"ground"},Steel:{category:"Metals",avgPrice:4179,type:"bulk"},Titanium:{category:"Metals",avgPrice:4446,type:"bulk"},"Advanced Catalysers":{category:"Technology",avgPrice:2863,type:"small batch"},"Bioreducing Lichen":{category:"Technology",avgPrice:1178,type:"small batch"},"Computer Components":{category:"Technology",avgPrice:708,type:"small batch"},"H.E. Suits":{category:"Technology",avgPrice:518,type:"small batch"},"Land Enrichment Systems":{category:"Technology",avgPrice:4693,type:"small batch"},"Medical Diagnostic Equipment":{category:"Technology",avgPrice:2944,type:"small batch"},"Micro Controllers":{category:"Technology",avgPrice:5404,type:"small batch"},"Muon Imager":{category:"Technology",avgPrice:6166,type:"small batch"},"Resonating Seperators":{category:"Technology",avgPrice:5692,type:"small batch"},Robotics:{category:"Technology",avgPrice:1915,type:"small batch"},"Structural Regulators":{category:"Technology",avgPrice:1909,type:"small batch"},"Military Grade Fabrics":{category:"Textiles",avgPrice:899,type:"small batch"},Biowaste:{category:"Waste",avgPrice:271,type:"small batch"},"Battle Weapons":{category:"Weapons",avgPrice:7137,type:"small batch"},"Non-Lethal Weapons":{category:"Weapons",avgPrice:1848,type:"small batch"},"Reactive Armour":{category:"Weapons",avgPrice:2102,type:"small batch"}},fC={activeQuotes:[],activeQuoteId:null,commodityData:ZW},qa=bi("quote",{state:()=>({...fC}),actions:{addQuote(e){const t={id:Date.now().toString(),...e};return this.activeQuotes.push(t),t},updateQuote(e,t){const o=this.activeQuotes.findIndex(n=>n.id===e);o!==-1&&(this.activeQuotes[o]={...this.activeQuotes[o],...t})},removeQuote(e){this.activeQuotes=this.activeQuotes.filter(t=>t.id!==e),this.activeQuoteId===e&&(this.activeQuoteId=null)},setActiveQuote(e){this.activeQuotes.some(t=>t.id===e)&&(this.activeQuoteId=e)},clearState(){Object.assign(this,fC)},findClosestCommodity(e,t=3){const o=e.toLowerCase().trim();let n=null,i=1/0;for(const s of Object.keys(this.commodityData)){const r=this.levenshteinDistance(o,s.toLowerCase());r<i&&(i=r,n=s)}return i<=t?n:null},levenshteinDistance(e,t){const o=e.length,n=t.length,i=Array(o+1).fill().map(()=>Array(n+1).fill(0));for(let s=0;s<=o;s++)i[s][0]=s;for(let s=0;s<=n;s++)i[0][s]=s;for(let s=1;s<=o;s++)for(let r=1;r<=n;r++)e[s-1]===t[r-1]?i[s][r]=i[s-1][r-1]:i[s][r]=Math.min(i[s-1][r-1]+1,i[s-1][r]+1,i[s][r-1]+1);return i[o][n]}},persist:{key:"freighthelper-quote",storage:localStorage}});var fr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qx={exports:{}};(function(e,t){(function(o,n){e.exports=n()})(fr,function(){/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var o=function(p,g){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,x){C.__proto__=x}||function(C,x){for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(C[E]=x[E])},o(p,g)};function n(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");o(p,g);function C(){this.constructor=p}p.prototype=g===null?Object.create(g):(C.prototype=g.prototype,new C)}var i=function(){return i=Object.assign||function(g){for(var C,x=1,E=arguments.length;x<E;x++){C=arguments[x];for(var D in C)Object.prototype.hasOwnProperty.call(C,D)&&(g[D]=C[D])}return g},i.apply(this,arguments)};function s(p,g,C){for(var x=0,E=g.length,D;x<E;x++)(D||!(x in g))&&(D||(D=Array.prototype.slice.call(g,0,x)),D[x]=g[x]);return p.concat(D||Array.prototype.slice.call(g))}var r=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:fr,a=Object.keys,l=Array.isArray;typeof Promise<"u"&&!r.Promise&&(r.Promise=Promise);function c(p,g){return typeof g!="object"||a(g).forEach(function(C){p[C]=g[C]}),p}var u=Object.getPrototypeOf,d={}.hasOwnProperty;function h(p,g){return d.call(p,g)}function f(p,g){typeof g=="function"&&(g=g(u(p))),(typeof Reflect>"u"?a:Reflect.ownKeys)(g).forEach(function(C){m(p,C,g[C])})}var v=Object.defineProperty;function m(p,g,C,x){v(p,g,c(C&&h(C,"get")&&typeof C.get=="function"?{get:C.get,set:C.set,configurable:!0}:{value:C,configurable:!0,writable:!0},x))}function b(p){return{from:function(g){return p.prototype=Object.create(g.prototype),m(p.prototype,"constructor",p),{extend:f.bind(null,p.prototype)}}}}var S=Object.getOwnPropertyDescriptor;function R(p,g){var C=S(p,g),x;return C||(x=u(p))&&R(x,g)}var _=[].slice;function M(p,g,C){return _.call(p,g,C)}function I(p,g){return g(p)}function W(p){if(!p)throw new Error("Assertion Failed")}function z(p){r.setImmediate?setImmediate(p):setTimeout(p,0)}function de(p,g){return p.reduce(function(C,x,E){var D=g(x,E);return D&&(C[D[0]]=D[1]),C},{})}function K(p,g){if(typeof g=="string"&&h(p,g))return p[g];if(!g)return p;if(typeof g!="string"){for(var C=[],x=0,E=g.length;x<E;++x){var D=K(p,g[x]);C.push(D)}return C}var $=g.indexOf(".");if($!==-1){var Z=p[g.substr(0,$)];return Z==null?void 0:K(Z,g.substr($+1))}}function O(p,g,C){if(!(!p||g===void 0)&&!("isFrozen"in Object&&Object.isFrozen(p)))if(typeof g!="string"&&"length"in g){W(typeof C!="string"&&"length"in C);for(var x=0,E=g.length;x<E;++x)O(p,g[x],C[x])}else{var D=g.indexOf(".");if(D!==-1){var $=g.substr(0,D),Z=g.substr(D+1);if(Z==="")C===void 0?l(p)&&!isNaN(parseInt($))?p.splice($,1):delete p[$]:p[$]=C;else{var te=p[$];(!te||!h(p,$))&&(te=p[$]={}),O(te,Z,C)}}else C===void 0?l(p)&&!isNaN(parseInt(g))?p.splice(g,1):delete p[g]:p[g]=C}}function ie(p,g){typeof g=="string"?O(p,g,void 0):"length"in g&&[].map.call(g,function(C){O(p,C,void 0)})}function N(p){var g={};for(var C in p)h(p,C)&&(g[C]=p[C]);return g}var oe=[].concat;function F(p){return oe.apply([],p)}var Y="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(F([8,16,32,64].map(function(p){return["Int","Uint","Float"].map(function(g){return g+p+"Array"})}))).filter(function(p){return r[p]}),J=new Set(Y.map(function(p){return r[p]}));function L(p){var g={};for(var C in p)if(h(p,C)){var x=p[C];g[C]=!x||typeof x!="object"||J.has(x.constructor)?x:L(x)}return g}function ce(p){for(var g in p)if(h(p,g))return!1;return!0}var U=null;function le(p){U=new WeakMap;var g=q(p);return U=null,g}function q(p){if(!p||typeof p!="object")return p;var g=U.get(p);if(g)return g;if(l(p)){g=[],U.set(p,g);for(var C=0,x=p.length;C<x;++C)g.push(q(p[C]))}else if(J.has(p.constructor))g=p;else{var E=u(p);g=E===Object.prototype?{}:Object.create(E),U.set(p,g);for(var D in p)h(p,D)&&(g[D]=q(p[D]))}return g}var se={}.toString;function be(p){return se.call(p).slice(8,-1)}var ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",j=typeof ue=="symbol"?function(p){var g;return p!=null&&(g=p[ue])&&g.apply(p)}:function(){return null};function Ee(p,g){var C=p.indexOf(g);return C>=0&&p.splice(C,1),C>=0}var ne={};function pe(p){var g,C,x,E;if(arguments.length===1){if(l(p))return p.slice();if(this===ne&&typeof p=="string")return[p];if(E=j(p)){for(C=[];x=E.next(),!x.done;)C.push(x.value);return C}if(p==null)return[p];if(g=p.length,typeof g=="number"){for(C=new Array(g);g--;)C[g]=p[g];return C}return[p]}for(g=arguments.length,C=new Array(g);g--;)C[g]=arguments[g];return C}var ae=typeof Symbol<"u"?function(p){return p[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},xe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Le=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],nt=xe.concat(Le),H={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function w(p,g){this.name=p,this.message=g}b(w).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Q(p,g){return p+". Errors: "+Object.keys(g).map(function(C){return g[C].toString()}).filter(function(C,x,E){return E.indexOf(C)===x}).join(`
`)}function re(p,g,C,x){this.failures=g,this.failedKeys=x,this.successCount=C,this.message=Q(p,g)}b(re).from(w);function A(p,g){this.name="BulkError",this.failures=Object.keys(g).map(function(C){return g[C]}),this.failuresByPos=g,this.message=Q(p,this.failures)}b(A).from(w);var k=nt.reduce(function(p,g){return p[g]=g+"Error",p},{}),T=w,G=nt.reduce(function(p,g){var C=g+"Error";function x(E,D){this.name=C,E?typeof E=="string"?(this.message="".concat(E).concat(D?`
 `+D:""),this.inner=D||null):typeof E=="object"&&(this.message="".concat(E.name," ").concat(E.message),this.inner=E):(this.message=H[g]||C,this.inner=null)}return b(x).from(T),p[g]=x,p},{});G.Syntax=SyntaxError,G.Type=TypeError,G.Range=RangeError;var ee=Le.reduce(function(p,g){return p[g+"Error"]=G[g],p},{});function P(p,g){if(!p||p instanceof w||p instanceof TypeError||p instanceof SyntaxError||!p.name||!ee[p.name])return p;var C=new ee[p.name](g||p.message,p);return"stack"in p&&m(C,"stack",{get:function(){return this.inner.stack}}),C}var B=nt.reduce(function(p,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(p[g+"Error"]=G[g]),p},{});B.ModifyError=re,B.DexieError=w,B.BulkError=A;function V(){}function X(p){return p}function fe(p,g){return p==null||p===X?g:function(C){return g(p(C))}}function Se(p,g){return function(){p.apply(this,arguments),g.apply(this,arguments)}}function ke(p,g){return p===V?g:function(){var C=p.apply(this,arguments);C!==void 0&&(arguments[0]=C);var x=this.onsuccess,E=this.onerror;this.onsuccess=null,this.onerror=null;var D=g.apply(this,arguments);return x&&(this.onsuccess=this.onsuccess?Se(x,this.onsuccess):x),E&&(this.onerror=this.onerror?Se(E,this.onerror):E),D!==void 0?D:C}}function Ne(p,g){return p===V?g:function(){p.apply(this,arguments);var C=this.onsuccess,x=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),C&&(this.onsuccess=this.onsuccess?Se(C,this.onsuccess):C),x&&(this.onerror=this.onerror?Se(x,this.onerror):x)}}function xt(p,g){return p===V?g:function(C){var x=p.apply(this,arguments);c(C,x);var E=this.onsuccess,D=this.onerror;this.onsuccess=null,this.onerror=null;var $=g.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?Se(E,this.onsuccess):E),D&&(this.onerror=this.onerror?Se(D,this.onerror):D),x===void 0?$===void 0?void 0:$:c(x,$)}}function bt(p,g){return p===V?g:function(){return g.apply(this,arguments)===!1?!1:p.apply(this,arguments)}}function Ot(p,g){return p===V?g:function(){var C=p.apply(this,arguments);if(C&&typeof C.then=="function"){for(var x=this,E=arguments.length,D=new Array(E);E--;)D[E]=arguments[E];return C.then(function(){return g.apply(x,D)})}return g.apply(this,arguments)}}var lt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oo(p,g){lt=p}var co={},Dt=100,$t=typeof Promise>"u"?[]:function(){var p=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[p,u(p),p];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,u(g),p]}(),St=$t[0],vo=$t[1],_e=$t[2],Fe=vo&&vo.then,Ve=St&&St.constructor,Ke=!!_e;function it(){queueMicrotask(nR)}var ut=function(p,g){Ks.push([p,g]),wt&&(it(),wt=!1)},Rt=!0,wt=!0,Zo=[],xi=[],Ri=X,Uo={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:V,pgp:!1,env:{},finalize:V},ct=Uo,Ks=[],es=0,Ol=[];function tt(p){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=ct;if(typeof p!="function"){if(p!==co)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ld(this,this._value);return}this._state=null,this._value=null,++g.ref,gg(this,p)}var ad={get:function(){var p=ct,g=Hl;function C(x,E){var D=this,$=!p.global&&(p!==ct||g!==Hl),Z=$&&!Ei(),te=new tt(function(he,Re){cd(D,new pg(yg(x,p,$,Z),yg(E,p,$,Z),he,Re,p))});return this._consoleTask&&(te._consoleTask=this._consoleTask),te}return C.prototype=co,C},set:function(p){m(this,"then",p&&p.prototype===co?ad:{get:function(){return p},set:ad.set})}};f(tt.prototype,{then:ad,_then:function(p,g){cd(this,new pg(null,null,p,g,ct))},catch:function(p){if(arguments.length===1)return this.then(null,p);var g=arguments[0],C=arguments[1];return typeof g=="function"?this.then(null,function(x){return x instanceof g?C(x):Ll(x)}):this.then(null,function(x){return x&&x.name===g?C(x):Ll(x)})},finally:function(p){return this.then(function(g){return tt.resolve(p()).then(function(){return g})},function(g){return tt.resolve(p()).then(function(){return Ll(g)})})},timeout:function(p,g){var C=this;return p<1/0?new tt(function(x,E){var D=setTimeout(function(){return E(new G.Timeout(g))},p);C.then(x,E).finally(clearTimeout.bind(null,D))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&m(tt.prototype,Symbol.toStringTag,"Dexie.Promise"),Uo.env=vg();function pg(p,g,C,x,E){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof g=="function"?g:null,this.resolve=C,this.reject=x,this.psd=E}f(tt,{all:function(){var p=pe.apply(null,arguments).map(Gl);return new tt(function(g,C){p.length===0&&g([]);var x=p.length;p.forEach(function(E,D){return tt.resolve(E).then(function($){p[D]=$,--x||g(p)},C)})})},resolve:function(p){if(p instanceof tt)return p;if(p&&typeof p.then=="function")return new tt(function(C,x){p.then(C,x)});var g=new tt(co,!0,p);return g},reject:Ll,race:function(){var p=pe.apply(null,arguments).map(Gl);return new tt(function(g,C){p.map(function(x){return tt.resolve(x).then(g,C)})})},PSD:{get:function(){return ct},set:function(p){return ct=p}},totalEchoes:{get:function(){return Hl}},newPSD:_i,usePSD:ts,scheduler:{get:function(){return ut},set:function(p){ut=p}},rejectionMapper:{get:function(){return Ri},set:function(p){Ri=p}},follow:function(p,g){return new tt(function(C,x){return _i(function(E,D){var $=ct;$.unhandleds=[],$.onunhandled=D,$.finalize=Se(function(){var Z=this;iR(function(){Z.unhandleds.length===0?E():D(Z.unhandleds[0])})},$.finalize),p()},g,C,x)})}}),Ve&&(Ve.allSettled&&m(tt,"allSettled",function(){var p=pe.apply(null,arguments).map(Gl);return new tt(function(g){p.length===0&&g([]);var C=p.length,x=new Array(C);p.forEach(function(E,D){return tt.resolve(E).then(function($){return x[D]={status:"fulfilled",value:$}},function($){return x[D]={status:"rejected",reason:$}}).then(function(){return--C||g(x)})})})}),Ve.any&&typeof AggregateError<"u"&&m(tt,"any",function(){var p=pe.apply(null,arguments).map(Gl);return new tt(function(g,C){p.length===0&&C(new AggregateError([]));var x=p.length,E=new Array(x);p.forEach(function(D,$){return tt.resolve(D).then(function(Z){return g(Z)},function(Z){E[$]=Z,--x||C(new AggregateError(E))})})})}),Ve.withResolvers&&(tt.withResolvers=Ve.withResolvers));function gg(p,g){try{g(function(C){if(p._state===null){if(C===p)throw new TypeError("A promise cannot be resolved with itself.");var x=p._lib&&qs();C&&typeof C.then=="function"?gg(p,function(E,D){C instanceof tt?C._then(E,D):C.then(E,D)}):(p._state=!0,p._value=C,mg(p)),x&&Qs()}},ld.bind(null,p))}catch(C){ld(p,C)}}function ld(p,g){if(xi.push(g),p._state===null){var C=p._lib&&qs();g=Ri(g),p._state=!1,p._value=g,sR(p),mg(p),C&&Qs()}}function mg(p){var g=p._listeners;p._listeners=[];for(var C=0,x=g.length;C<x;++C)cd(p,g[C]);var E=p._PSD;--E.ref||E.finalize(),es===0&&(++es,ut(function(){--es===0&&ud()},[]))}function cd(p,g){if(p._state===null){p._listeners.push(g);return}var C=p._state?g.onFulfilled:g.onRejected;if(C===null)return(p._state?g.resolve:g.reject)(p._value);++g.psd.ref,++es,ut(oR,[C,p,g])}function oR(p,g,C){try{var x,E=g._value;!g._state&&xi.length&&(xi=[]),x=lt&&g._consoleTask?g._consoleTask.run(function(){return p(E)}):p(E),!g._state&&xi.indexOf(E)===-1&&rR(g),C.resolve(x)}catch(D){C.reject(D)}finally{--es===0&&ud(),--C.psd.ref||C.psd.finalize()}}function nR(){ts(Uo,function(){qs()&&Qs()})}function qs(){var p=Rt;return Rt=!1,wt=!1,p}function Qs(){var p,g,C;do for(;Ks.length>0;)for(p=Ks,Ks=[],C=p.length,g=0;g<C;++g){var x=p[g];x[0].apply(null,x[1])}while(Ks.length>0);Rt=!0,wt=!0}function ud(){var p=Zo;Zo=[],p.forEach(function(x){x._PSD.onunhandled.call(null,x._value,x)});for(var g=Ol.slice(0),C=g.length;C;)g[--C]()}function iR(p){function g(){p(),Ol.splice(Ol.indexOf(g),1)}Ol.push(g),++es,ut(function(){--es===0&&ud()},[])}function sR(p){Zo.some(function(g){return g._value===p._value})||Zo.push(p)}function rR(p){for(var g=Zo.length;g;)if(Zo[--g]._value===p._value){Zo.splice(g,1);return}}function Ll(p){return new tt(co,!1,p)}function Zt(p,g){var C=ct;return function(){var x=qs(),E=ct;try{return Pi(C,!0),p.apply(this,arguments)}catch(D){g&&g(D)}finally{Pi(E,!1),x&&Qs()}}}var ho={awaits:0,echoes:0,id:0},aR=0,Bl=[],Nl=0,Hl=0,lR=0;function _i(p,g,C,x){var E=ct,D=Object.create(E);D.parent=E,D.ref=0,D.global=!1,D.id=++lR,Uo.env,D.env=Ke?{Promise:tt,PromiseProp:{value:tt,configurable:!0,writable:!0},all:tt.all,race:tt.race,allSettled:tt.allSettled,any:tt.any,resolve:tt.resolve,reject:tt.reject}:{},g&&c(D,g),++E.ref,D.finalize=function(){--this.parent.ref||this.parent.finalize()};var $=ts(D,p,C,x);return D.ref===0&&D.finalize(),$}function Ys(){return ho.id||(ho.id=++aR),++ho.awaits,ho.echoes+=Dt,ho.id}function Ei(){return ho.awaits?(--ho.awaits===0&&(ho.id=0),ho.echoes=ho.awaits*Dt,!0):!1}(""+Fe).indexOf("[native code]")===-1&&(Ys=Ei=V);function Gl(p){return ho.echoes&&p&&p.constructor===Ve?(Ys(),p.then(function(g){return Ei(),g},function(g){return Ei(),ao(g)})):p}function cR(p){++Hl,(!ho.echoes||--ho.echoes===0)&&(ho.echoes=ho.awaits=ho.id=0),Bl.push(ct),Pi(p,!0)}function uR(){var p=Bl[Bl.length-1];Bl.pop(),Pi(p,!1)}function Pi(p,g){var C=ct;if((g?ho.echoes&&(!Nl++||p!==ct):Nl&&(!--Nl||p!==ct))&&queueMicrotask(g?cR.bind(null,p):uR),p!==ct&&(ct=p,C===Uo&&(Uo.env=vg()),Ke)){var x=Uo.env.Promise,E=p.env;(C.global||p.global)&&(Object.defineProperty(r,"Promise",E.PromiseProp),x.all=E.all,x.race=E.race,x.resolve=E.resolve,x.reject=E.reject,E.allSettled&&(x.allSettled=E.allSettled),E.any&&(x.any=E.any))}}function vg(){var p=r.Promise;return Ke?{Promise:p,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:p.all,race:p.race,allSettled:p.allSettled,any:p.any,resolve:p.resolve,reject:p.reject}:{}}function ts(p,g,C,x,E){var D=ct;try{return Pi(p,!0),g(C,x,E)}finally{Pi(D,!1)}}function yg(p,g,C,x){return typeof p!="function"?p:function(){var E=ct;C&&Ys(),Pi(g,!0);try{return p.apply(this,arguments)}finally{Pi(E,!1),x&&queueMicrotask(Ei)}}}function dd(p){Promise===Ve&&ho.echoes===0?Nl===0?p():enqueueNativeMicroTask(p):setTimeout(p,0)}var ao=tt.reject;function hd(p,g,C,x){if(!p.idbdb||!p._state.openComplete&&!ct.letThrough&&!p._vip){if(p._state.openComplete)return ao(new G.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return ao(new G.DatabaseClosed);p.open().catch(V)}return p._state.dbReadyPromise.then(function(){return hd(p,g,C,x)})}else{var E=p._createTransaction(g,C,p._dbSchema);try{E.create(),p._state.PR1398_maxLoop=3}catch(D){return D.name===k.InvalidState&&p.isOpen()&&--p._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),p.close({disableAutoOpen:!1}),p.open().then(function(){return hd(p,g,C,x)})):ao(D)}return E._promise(g,function(D,$){return _i(function(){return ct.trans=E,x(D,$,E)})}).then(function(D){if(g==="readwrite")try{E.idbtrans.commit()}catch{}return g==="readonly"?D:E._completion.then(function(){return D})})}}var Cg="4.0.11",os="￿",fd=-1/0,Jn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bg="String expected.",Js=[],Vl="__dbnames",pd="readonly",gd="readwrite";function ns(p,g){return p?g?function(){return p.apply(this,arguments)&&g.apply(this,arguments)}:p:g}var wg={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function zl(p){return typeof p=="string"&&!/\./.test(p)?function(g){return g[p]===void 0&&p in g&&(g=le(g),delete g[p]),g}:function(g){return g}}function Sg(){throw G.Type()}function kt(p,g){try{var C=xg(p),x=xg(g);if(C!==x)return C==="Array"?1:x==="Array"?-1:C==="binary"?1:x==="binary"?-1:C==="string"?1:x==="string"?-1:C==="Date"?1:x!=="Date"?NaN:-1;switch(C){case"number":case"Date":case"string":return p>g?1:p<g?-1:0;case"binary":return hR(Rg(p),Rg(g));case"Array":return dR(p,g)}}catch{}return NaN}function dR(p,g){for(var C=p.length,x=g.length,E=C<x?C:x,D=0;D<E;++D){var $=kt(p[D],g[D]);if($!==0)return $}return C===x?0:C<x?-1:1}function hR(p,g){for(var C=p.length,x=g.length,E=C<x?C:x,D=0;D<E;++D)if(p[D]!==g[D])return p[D]<g[D]?-1:1;return C===x?0:C<x?-1:1}function xg(p){var g=typeof p;if(g!=="object")return g;if(ArrayBuffer.isView(p))return"binary";var C=be(p);return C==="ArrayBuffer"?"binary":C}function Rg(p){return p instanceof Uint8Array?p:ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p)}var _g=function(){function p(){}return p.prototype._trans=function(g,C,x){var E=this._tx||ct.trans,D=this.name,$=lt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(g==="readonly"?"read":"write"," ").concat(this.name));function Z(Re,ve,Me){if(!Me.schema[D])throw new G.NotFound("Table "+D+" not part of transaction");return C(Me.idbtrans,Me)}var te=qs();try{var he=E&&E.db._novip===this.db._novip?E===ct.trans?E._promise(g,Z,x):_i(function(){return E._promise(g,Z,x)},{trans:E,transless:ct.transless||ct}):hd(this.db,g,[this.name],Z);return $&&(he._consoleTask=$,he=he.catch(function(Re){return console.trace(Re),ao(Re)})),he}finally{te&&Qs()}},p.prototype.get=function(g,C){var x=this;return g&&g.constructor===Object?this.where(g).first(C):g==null?ao(new G.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return x.core.get({trans:E,key:g}).then(function(D){return x.hook.reading.fire(D)})}).then(C)},p.prototype.where=function(g){if(typeof g=="string")return new this.db.WhereClause(this,g);if(l(g))return new this.db.WhereClause(this,"[".concat(g.join("+"),"]"));var C=a(g);if(C.length===1)return this.where(C[0]).equals(g[C[0]]);var x=this.schema.indexes.concat(this.schema.primKey).filter(function(Re){if(Re.compound&&C.every(function(Me){return Re.keyPath.indexOf(Me)>=0})){for(var ve=0;ve<C.length;++ve)if(C.indexOf(Re.keyPath[ve])===-1)return!1;return!0}return!1}).sort(function(Re,ve){return Re.keyPath.length-ve.keyPath.length})[0];if(x&&this.db._maxKey!==os){var E=x.keyPath.slice(0,C.length);return this.where(E).equals(E.map(function(Re){return g[Re]}))}!x&&lt&&console.warn("The query ".concat(JSON.stringify(g)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(C.join("+"),"]"));var D=this.schema.idxByName;function $(Re,ve){return kt(Re,ve)===0}var Z=C.reduce(function(Re,ve){var Me=Re[0],$e=Re[1],Ce=D[ve],Pe=g[ve];return[Me||Ce,Me||!Ce?ns($e,Ce&&Ce.multi?function(Ae){var Ge=K(Ae,ve);return l(Ge)&&Ge.some(function(Be){return $(Pe,Be)})}:function(Ae){return $(Pe,K(Ae,ve))}):$e]},[null,null]),te=Z[0],he=Z[1];return te?this.where(te.name).equals(g[te.keyPath]).filter(he):x?this.filter(he):this.where(C).equals("")},p.prototype.filter=function(g){return this.toCollection().and(g)},p.prototype.count=function(g){return this.toCollection().count(g)},p.prototype.offset=function(g){return this.toCollection().offset(g)},p.prototype.limit=function(g){return this.toCollection().limit(g)},p.prototype.each=function(g){return this.toCollection().each(g)},p.prototype.toArray=function(g){return this.toCollection().toArray(g)},p.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},p.prototype.orderBy=function(g){return new this.db.Collection(new this.db.WhereClause(this,l(g)?"[".concat(g.join("+"),"]"):g))},p.prototype.reverse=function(){return this.toCollection().reverse()},p.prototype.mapToClass=function(g){var C=this,x=C.db,E=C.name;this.schema.mappedClass=g,g.prototype instanceof Sg&&(g=function(te){n(he,te);function he(){return te!==null&&te.apply(this,arguments)||this}return Object.defineProperty(he.prototype,"db",{get:function(){return x},enumerable:!1,configurable:!0}),he.prototype.table=function(){return E},he}(g));for(var D=new Set,$=g.prototype;$;$=u($))Object.getOwnPropertyNames($).forEach(function(te){return D.add(te)});var Z=function(te){if(!te)return te;var he=Object.create(g.prototype);for(var Re in te)if(!D.has(Re))try{he[Re]=te[Re]}catch{}return he};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Z,this.hook("reading",Z),g},p.prototype.defineClass=function(){function g(C){c(this,C)}return this.mapToClass(g)},p.prototype.add=function(g,C){var x=this,E=this.schema.primKey,D=E.auto,$=E.keyPath,Z=g;return $&&D&&(Z=zl($)(g)),this._trans("readwrite",function(te){return x.core.mutate({trans:te,type:"add",keys:C!=null?[C]:null,values:[Z]})}).then(function(te){return te.numFailures?tt.reject(te.failures[0]):te.lastResult}).then(function(te){if($)try{O(g,$,te)}catch{}return te})},p.prototype.update=function(g,C){if(typeof g=="object"&&!l(g)){var x=K(g,this.schema.primKey.keyPath);return x===void 0?ao(new G.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(x).modify(C)}else return this.where(":id").equals(g).modify(C)},p.prototype.put=function(g,C){var x=this,E=this.schema.primKey,D=E.auto,$=E.keyPath,Z=g;return $&&D&&(Z=zl($)(g)),this._trans("readwrite",function(te){return x.core.mutate({trans:te,type:"put",values:[Z],keys:C!=null?[C]:null})}).then(function(te){return te.numFailures?tt.reject(te.failures[0]):te.lastResult}).then(function(te){if($)try{O(g,$,te)}catch{}return te})},p.prototype.delete=function(g){var C=this;return this._trans("readwrite",function(x){return C.core.mutate({trans:x,type:"delete",keys:[g]})}).then(function(x){return x.numFailures?tt.reject(x.failures[0]):void 0})},p.prototype.clear=function(){var g=this;return this._trans("readwrite",function(C){return g.core.mutate({trans:C,type:"deleteRange",range:wg})}).then(function(C){return C.numFailures?tt.reject(C.failures[0]):void 0})},p.prototype.bulkGet=function(g){var C=this;return this._trans("readonly",function(x){return C.core.getMany({keys:g,trans:x}).then(function(E){return E.map(function(D){return C.hook.reading.fire(D)})})})},p.prototype.bulkAdd=function(g,C,x){var E=this,D=Array.isArray(C)?C:void 0;x=x||(D?void 0:C);var $=x?x.allKeys:void 0;return this._trans("readwrite",function(Z){var te=E.schema.primKey,he=te.auto,Re=te.keyPath;if(Re&&D)throw new G.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(D&&D.length!==g.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var ve=g.length,Me=Re&&he?g.map(zl(Re)):g;return E.core.mutate({trans:Z,type:"add",keys:D,values:Me,wantResults:$}).then(function($e){var Ce=$e.numFailures,Pe=$e.results,Ae=$e.lastResult,Ge=$e.failures,Be=$?Pe:Ae;if(Ce===0)return Be;throw new A("".concat(E.name,".bulkAdd(): ").concat(Ce," of ").concat(ve," operations failed"),Ge)})})},p.prototype.bulkPut=function(g,C,x){var E=this,D=Array.isArray(C)?C:void 0;x=x||(D?void 0:C);var $=x?x.allKeys:void 0;return this._trans("readwrite",function(Z){var te=E.schema.primKey,he=te.auto,Re=te.keyPath;if(Re&&D)throw new G.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(D&&D.length!==g.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var ve=g.length,Me=Re&&he?g.map(zl(Re)):g;return E.core.mutate({trans:Z,type:"put",keys:D,values:Me,wantResults:$}).then(function($e){var Ce=$e.numFailures,Pe=$e.results,Ae=$e.lastResult,Ge=$e.failures,Be=$?Pe:Ae;if(Ce===0)return Be;throw new A("".concat(E.name,".bulkPut(): ").concat(Ce," of ").concat(ve," operations failed"),Ge)})})},p.prototype.bulkUpdate=function(g){var C=this,x=this.core,E=g.map(function(Z){return Z.key}),D=g.map(function(Z){return Z.changes}),$=[];return this._trans("readwrite",function(Z){return x.getMany({trans:Z,keys:E,cache:"clone"}).then(function(te){var he=[],Re=[];g.forEach(function(Me,$e){var Ce=Me.key,Pe=Me.changes,Ae=te[$e];if(Ae){for(var Ge=0,Be=Object.keys(Pe);Ge<Be.length;Ge++){var He=Be[Ge],ze=Pe[He];if(He===C.schema.primKey.keyPath){if(kt(ze,Ce)!==0)throw new G.Constraint("Cannot update primary key in bulkUpdate()")}else O(Ae,He,ze)}$.push($e),he.push(Ce),Re.push(Ae)}});var ve=he.length;return x.mutate({trans:Z,type:"put",keys:he,values:Re,updates:{keys:E,changeSpecs:D}}).then(function(Me){var $e=Me.numFailures,Ce=Me.failures;if($e===0)return ve;for(var Pe=0,Ae=Object.keys(Ce);Pe<Ae.length;Pe++){var Ge=Ae[Pe],Be=$[Number(Ge)];if(Be!=null){var He=Ce[Ge];delete Ce[Ge],Ce[Be]=He}}throw new A("".concat(C.name,".bulkUpdate(): ").concat($e," of ").concat(ve," operations failed"),Ce)})})})},p.prototype.bulkDelete=function(g){var C=this,x=g.length;return this._trans("readwrite",function(E){return C.core.mutate({trans:E,type:"delete",keys:g})}).then(function(E){var D=E.numFailures,$=E.lastResult,Z=E.failures;if(D===0)return $;throw new A("".concat(C.name,".bulkDelete(): ").concat(D," of ").concat(x," operations failed"),Z)})},p}();function Xr(p){var g={},C=function(Z,te){if(te){for(var he=arguments.length,Re=new Array(he-1);--he;)Re[he-1]=arguments[he];return g[Z].subscribe.apply(null,Re),p}else if(typeof Z=="string")return g[Z]};C.addEventType=D;for(var x=1,E=arguments.length;x<E;++x)D(arguments[x]);return C;function D(Z,te,he){if(typeof Z=="object")return $(Z);te||(te=bt),he||(he=V);var Re={subscribers:[],fire:he,subscribe:function(ve){Re.subscribers.indexOf(ve)===-1&&(Re.subscribers.push(ve),Re.fire=te(Re.fire,ve))},unsubscribe:function(ve){Re.subscribers=Re.subscribers.filter(function(Me){return Me!==ve}),Re.fire=Re.subscribers.reduce(te,he)}};return g[Z]=C[Z]=Re,Re}function $(Z){a(Z).forEach(function(te){var he=Z[te];if(l(he))D(te,Z[te][0],Z[te][1]);else if(he==="asap")var Re=D(te,X,function(){for(var Me=arguments.length,$e=new Array(Me);Me--;)$e[Me]=arguments[Me];Re.subscribers.forEach(function(Ce){z(function(){Ce.apply(null,$e)})})});else throw new G.InvalidArgument("Invalid event config")})}}function ea(p,g){return b(g).from({prototype:p}),g}function fR(p){return ea(_g.prototype,function(C,x,E){this.db=p,this._tx=E,this.name=C,this.schema=x,this.hook=p._allTables[C]?p._allTables[C].hook:Xr(null,{creating:[ke,V],reading:[fe,X],updating:[xt,V],deleting:[Ne,V]})})}function Zs(p,g){return!(p.filter||p.algorithm||p.or)&&(g?p.justLimit:!p.replayFilter)}function md(p,g){p.filter=ns(p.filter,g)}function vd(p,g,C){var x=p.replayFilter;p.replayFilter=x?function(){return ns(x(),g())}:g,p.justLimit=C&&!x}function pR(p,g){p.isMatch=ns(p.isMatch,g)}function Wl(p,g){if(p.isPrimKey)return g.primaryKey;var C=g.getIndexByKeyPath(p.index);if(!C)throw new G.Schema("KeyPath "+p.index+" on object store "+g.name+" is not indexed");return C}function Eg(p,g,C){var x=Wl(p,g.schema);return g.openCursor({trans:C,values:!p.keysOnly,reverse:p.dir==="prev",unique:!!p.unique,query:{index:x,range:p.range}})}function Ul(p,g,C,x){var E=p.replayFilter?ns(p.filter,p.replayFilter()):p.filter;if(p.or){var D={},$=function(Z,te,he){if(!E||E(te,he,function(Me){return te.stop(Me)},function(Me){return te.fail(Me)})){var Re=te.primaryKey,ve=""+Re;ve==="[object ArrayBuffer]"&&(ve=""+new Uint8Array(Re)),h(D,ve)||(D[ve]=!0,g(Z,te,he))}};return Promise.all([p.or._iterate($,C),Pg(Eg(p,x,C),p.algorithm,$,!p.keysOnly&&p.valueMapper)])}else return Pg(Eg(p,x,C),ns(p.algorithm,E),g,!p.keysOnly&&p.valueMapper)}function Pg(p,g,C,x){var E=x?function($,Z,te){return C(x($),Z,te)}:C,D=Zt(E);return p.then(function($){if($)return $.start(function(){var Z=function(){return $.continue()};(!g||g($,function(te){return Z=te},function(te){$.stop(te),Z=V},function(te){$.fail(te),Z=V}))&&D($.value,$,function(te){return Z=te}),Z()})})}var ta=function(){function p(g){this["@@propmod"]=g}return p.prototype.execute=function(g){var C,x=this["@@propmod"];if(x.add!==void 0){var E=x.add;if(l(E))return s(s([],l(g)?g:[],!0),E).sort();if(typeof E=="number")return(Number(g)||0)+E;if(typeof E=="bigint")try{return BigInt(g)+E}catch{return BigInt(0)+E}throw new TypeError("Invalid term ".concat(E))}if(x.remove!==void 0){var D=x.remove;if(l(D))return l(g)?g.filter(function(Z){return!D.includes(Z)}).sort():[];if(typeof D=="number")return Number(g)-D;if(typeof D=="bigint")try{return BigInt(g)-D}catch{return BigInt(0)-D}throw new TypeError("Invalid subtrahend ".concat(D))}var $=(C=x.replacePrefix)===null||C===void 0?void 0:C[0];return $&&typeof g=="string"&&g.startsWith($)?x.replacePrefix[1]+g.substring($.length):g},p}(),gR=function(){function p(){}return p.prototype._read=function(g,C){var x=this._ctx;return x.error?x.table._trans(null,ao.bind(null,x.error)):x.table._trans("readonly",g).then(C)},p.prototype._write=function(g){var C=this._ctx;return C.error?C.table._trans(null,ao.bind(null,C.error)):C.table._trans("readwrite",g,"locked")},p.prototype._addAlgorithm=function(g){var C=this._ctx;C.algorithm=ns(C.algorithm,g)},p.prototype._iterate=function(g,C){return Ul(this._ctx,g,C,this._ctx.table.core)},p.prototype.clone=function(g){var C=Object.create(this.constructor.prototype),x=Object.create(this._ctx);return g&&c(x,g),C._ctx=x,C},p.prototype.raw=function(){return this._ctx.valueMapper=null,this},p.prototype.each=function(g){var C=this._ctx;return this._read(function(x){return Ul(C,g,x,C.table.core)})},p.prototype.count=function(g){var C=this;return this._read(function(x){var E=C._ctx,D=E.table.core;if(Zs(E,!0))return D.count({trans:x,query:{index:Wl(E,D.schema),range:E.range}}).then(function(Z){return Math.min(Z,E.limit)});var $=0;return Ul(E,function(){return++$,!1},x,D).then(function(){return $})}).then(g)},p.prototype.sortBy=function(g,C){var x=g.split(".").reverse(),E=x[0],D=x.length-1;function $(he,Re){return Re?$(he[x[Re]],Re-1):he[E]}var Z=this._ctx.dir==="next"?1:-1;function te(he,Re){var ve=$(he,D),Me=$(Re,D);return kt(ve,Me)*Z}return this.toArray(function(he){return he.sort(te)}).then(C)},p.prototype.toArray=function(g){var C=this;return this._read(function(x){var E=C._ctx;if(E.dir==="next"&&Zs(E,!0)&&E.limit>0){var D=E.valueMapper,$=Wl(E,E.table.core.schema);return E.table.core.query({trans:x,limit:E.limit,values:!0,query:{index:$,range:E.range}}).then(function(te){var he=te.result;return D?he.map(D):he})}else{var Z=[];return Ul(E,function(te){return Z.push(te)},x,E.table.core).then(function(){return Z})}},g)},p.prototype.offset=function(g){var C=this._ctx;return g<=0?this:(C.offset+=g,Zs(C)?vd(C,function(){var x=g;return function(E,D){return x===0?!0:x===1?(--x,!1):(D(function(){E.advance(x),x=0}),!1)}}):vd(C,function(){var x=g;return function(){return--x<0}}),this)},p.prototype.limit=function(g){return this._ctx.limit=Math.min(this._ctx.limit,g),vd(this._ctx,function(){var C=g;return function(x,E,D){return--C<=0&&E(D),C>=0}},!0),this},p.prototype.until=function(g,C){return md(this._ctx,function(x,E,D){return g(x.value)?(E(D),C):!0}),this},p.prototype.first=function(g){return this.limit(1).toArray(function(C){return C[0]}).then(g)},p.prototype.last=function(g){return this.reverse().first(g)},p.prototype.filter=function(g){return md(this._ctx,function(C){return g(C.value)}),pR(this._ctx,g),this},p.prototype.and=function(g){return this.filter(g)},p.prototype.or=function(g){return new this.db.WhereClause(this._ctx.table,g,this)},p.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},p.prototype.desc=function(){return this.reverse()},p.prototype.eachKey=function(g){var C=this._ctx;return C.keysOnly=!C.isMatch,this.each(function(x,E){g(E.key,E)})},p.prototype.eachUniqueKey=function(g){return this._ctx.unique="unique",this.eachKey(g)},p.prototype.eachPrimaryKey=function(g){var C=this._ctx;return C.keysOnly=!C.isMatch,this.each(function(x,E){g(E.primaryKey,E)})},p.prototype.keys=function(g){var C=this._ctx;C.keysOnly=!C.isMatch;var x=[];return this.each(function(E,D){x.push(D.key)}).then(function(){return x}).then(g)},p.prototype.primaryKeys=function(g){var C=this._ctx;if(C.dir==="next"&&Zs(C,!0)&&C.limit>0)return this._read(function(E){var D=Wl(C,C.table.core.schema);return C.table.core.query({trans:E,values:!1,limit:C.limit,query:{index:D,range:C.range}})}).then(function(E){var D=E.result;return D}).then(g);C.keysOnly=!C.isMatch;var x=[];return this.each(function(E,D){x.push(D.primaryKey)}).then(function(){return x}).then(g)},p.prototype.uniqueKeys=function(g){return this._ctx.unique="unique",this.keys(g)},p.prototype.firstKey=function(g){return this.limit(1).keys(function(C){return C[0]}).then(g)},p.prototype.lastKey=function(g){return this.reverse().firstKey(g)},p.prototype.distinct=function(){var g=this._ctx,C=g.index&&g.table.schema.idxByName[g.index];if(!C||!C.multi)return this;var x={};return md(this._ctx,function(E){var D=E.primaryKey.toString(),$=h(x,D);return x[D]=!0,!$}),this},p.prototype.modify=function(g){var C=this,x=this._ctx;return this._write(function(E){var D;if(typeof g=="function")D=g;else{var $=a(g),Z=$.length;D=function(Be){for(var He=!1,ze=0;ze<Z;++ze){var Oe=$[ze],qe=g[Oe],ot=K(Be,Oe);qe instanceof ta?(O(Be,Oe,qe.execute(ot)),He=!0):ot!==qe&&(O(Be,Oe,qe),He=!0)}return He}}var te=x.table.core,he=te.schema.primaryKey,Re=he.outbound,ve=he.extractKey,Me=200,$e=C.db._options.modifyChunkSize;$e&&(typeof $e=="object"?Me=$e[te.name]||$e["*"]||200:Me=$e);var Ce=[],Pe=0,Ae=[],Ge=function(Be,He){var ze=He.failures,Oe=He.numFailures;Pe+=Be-Oe;for(var qe=0,ot=a(ze);qe<ot.length;qe++){var et=ot[qe];Ce.push(ze[et])}};return C.clone().primaryKeys().then(function(Be){var He=Zs(x)&&x.limit===1/0&&(typeof g!="function"||g===yd)&&{index:x.index,range:x.range},ze=function(Oe){var qe=Math.min(Me,Be.length-Oe);return te.getMany({trans:E,keys:Be.slice(Oe,Oe+qe),cache:"immutable"}).then(function(ot){for(var et=[],ft=[],Et=Re?[]:null,st=[],_t=0;_t<qe;++_t){var gt=ot[_t],It={value:le(gt),primKey:Be[Oe+_t]};D.call(It,It.value,It)!==!1&&(It.value==null?st.push(Be[Oe+_t]):!Re&&kt(ve(gt),ve(It.value))!==0?(st.push(Be[Oe+_t]),et.push(It.value)):(ft.push(It.value),Re&&Et.push(Be[Oe+_t])))}return Promise.resolve(et.length>0&&te.mutate({trans:E,type:"add",values:et}).then(function(ht){for(var io in ht.failures)st.splice(parseInt(io),1);Ge(et.length,ht)})).then(function(){return(ft.length>0||He&&typeof g=="object")&&te.mutate({trans:E,type:"put",keys:Et,values:ft,criteria:He,changeSpec:typeof g!="function"&&g,isAdditionalChunk:Oe>0}).then(function(ht){return Ge(ft.length,ht)})}).then(function(){return(st.length>0||He&&g===yd)&&te.mutate({trans:E,type:"delete",keys:st,criteria:He,isAdditionalChunk:Oe>0}).then(function(ht){return Ge(st.length,ht)})}).then(function(){return Be.length>Oe+qe&&ze(Oe+Me)})})};return ze(0).then(function(){if(Ce.length>0)throw new re("Error modifying one or more objects",Ce,Pe,Ae);return Be.length})})})},p.prototype.delete=function(){var g=this._ctx,C=g.range;return Zs(g)&&(g.isPrimKey||C.type===3)?this._write(function(x){var E=g.table.core.schema.primaryKey,D=C;return g.table.core.count({trans:x,query:{index:E,range:D}}).then(function($){return g.table.core.mutate({trans:x,type:"deleteRange",range:D}).then(function(Z){var te=Z.failures;Z.lastResult,Z.results;var he=Z.numFailures;if(he)throw new re("Could not delete some values",Object.keys(te).map(function(Re){return te[Re]}),$-he);return $-he})})}):this.modify(yd)},p}(),yd=function(p,g){return g.value=null};function mR(p){return ea(gR.prototype,function(C,x){this.db=p;var E=wg,D=null;if(x)try{E=x()}catch(he){D=he}var $=C._ctx,Z=$.table,te=Z.hook.reading.fire;this._ctx={table:Z,index:$.index,isPrimKey:!$.index||Z.schema.primKey.keyPath&&$.index===Z.schema.primKey.name,range:E,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:D,or:$.or,valueMapper:te!==X?te:null}})}function vR(p,g){return p<g?-1:p===g?0:1}function yR(p,g){return p>g?-1:p===g?0:1}function $o(p,g,C){var x=p instanceof Dg?new p.Collection(p):p;return x._ctx.error=C?new C(g):new TypeError(g),x}function Xs(p){return new p.Collection(p,function(){return Fg("")}).limit(0)}function CR(p){return p==="next"?function(g){return g.toUpperCase()}:function(g){return g.toLowerCase()}}function bR(p){return p==="next"?function(g){return g.toLowerCase()}:function(g){return g.toUpperCase()}}function wR(p,g,C,x,E,D){for(var $=Math.min(p.length,x.length),Z=-1,te=0;te<$;++te){var he=g[te];if(he!==x[te])return E(p[te],C[te])<0?p.substr(0,te)+C[te]+C.substr(te+1):E(p[te],x[te])<0?p.substr(0,te)+x[te]+C.substr(te+1):Z>=0?p.substr(0,Z)+g[Z]+C.substr(Z+1):null;E(p[te],he)<0&&(Z=te)}return $<x.length&&D==="next"?p+C.substr(p.length):$<p.length&&D==="prev"?p.substr(0,C.length):Z<0?null:p.substr(0,Z)+x[Z]+C.substr(Z+1)}function $l(p,g,C,x){var E,D,$,Z,te,he,Re,ve=C.length;if(!C.every(function(Pe){return typeof Pe=="string"}))return $o(p,bg);function Me(Pe){E=CR(Pe),D=bR(Pe),$=Pe==="next"?vR:yR;var Ae=C.map(function(Ge){return{lower:D(Ge),upper:E(Ge)}}).sort(function(Ge,Be){return $(Ge.lower,Be.lower)});Z=Ae.map(function(Ge){return Ge.upper}),te=Ae.map(function(Ge){return Ge.lower}),he=Pe,Re=Pe==="next"?"":x}Me("next");var $e=new p.Collection(p,function(){return Fi(Z[0],te[ve-1]+x)});$e._ondirectionchange=function(Pe){Me(Pe)};var Ce=0;return $e._addAlgorithm(function(Pe,Ae,Ge){var Be=Pe.key;if(typeof Be!="string")return!1;var He=D(Be);if(g(He,te,Ce))return!0;for(var ze=null,Oe=Ce;Oe<ve;++Oe){var qe=wR(Be,He,Z[Oe],te[Oe],$,he);qe===null&&ze===null?Ce=Oe+1:(ze===null||$(ze,qe)>0)&&(ze=qe)}return Ae(ze!==null?function(){Pe.continue(ze+Re)}:Ge),!1}),$e}function Fi(p,g,C,x){return{type:2,lower:p,upper:g,lowerOpen:C,upperOpen:x}}function Fg(p){return{type:1,lower:p,upper:p}}var Dg=function(){function p(){}return Object.defineProperty(p.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),p.prototype.between=function(g,C,x,E){x=x!==!1,E=E===!0;try{return this._cmp(g,C)>0||this._cmp(g,C)===0&&(x||E)&&!(x&&E)?Xs(this):new this.Collection(this,function(){return Fi(g,C,!x,!E)})}catch{return $o(this,Jn)}},p.prototype.equals=function(g){return g==null?$o(this,Jn):new this.Collection(this,function(){return Fg(g)})},p.prototype.above=function(g){return g==null?$o(this,Jn):new this.Collection(this,function(){return Fi(g,void 0,!0)})},p.prototype.aboveOrEqual=function(g){return g==null?$o(this,Jn):new this.Collection(this,function(){return Fi(g,void 0,!1)})},p.prototype.below=function(g){return g==null?$o(this,Jn):new this.Collection(this,function(){return Fi(void 0,g,!1,!0)})},p.prototype.belowOrEqual=function(g){return g==null?$o(this,Jn):new this.Collection(this,function(){return Fi(void 0,g)})},p.prototype.startsWith=function(g){return typeof g!="string"?$o(this,bg):this.between(g,g+os,!0,!0)},p.prototype.startsWithIgnoreCase=function(g){return g===""?this.startsWith(g):$l(this,function(C,x){return C.indexOf(x[0])===0},[g],os)},p.prototype.equalsIgnoreCase=function(g){return $l(this,function(C,x){return C===x[0]},[g],"")},p.prototype.anyOfIgnoreCase=function(){var g=pe.apply(ne,arguments);return g.length===0?Xs(this):$l(this,function(C,x){return x.indexOf(C)!==-1},g,"")},p.prototype.startsWithAnyOfIgnoreCase=function(){var g=pe.apply(ne,arguments);return g.length===0?Xs(this):$l(this,function(C,x){return x.some(function(E){return C.indexOf(E)===0})},g,os)},p.prototype.anyOf=function(){var g=this,C=pe.apply(ne,arguments),x=this._cmp;try{C.sort(x)}catch{return $o(this,Jn)}if(C.length===0)return Xs(this);var E=new this.Collection(this,function(){return Fi(C[0],C[C.length-1])});E._ondirectionchange=function($){x=$==="next"?g._ascending:g._descending,C.sort(x)};var D=0;return E._addAlgorithm(function($,Z,te){for(var he=$.key;x(he,C[D])>0;)if(++D,D===C.length)return Z(te),!1;return x(he,C[D])===0?!0:(Z(function(){$.continue(C[D])}),!1)}),E},p.prototype.notEqual=function(g){return this.inAnyRange([[fd,g],[g,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},p.prototype.noneOf=function(){var g=pe.apply(ne,arguments);if(g.length===0)return new this.Collection(this);try{g.sort(this._ascending)}catch{return $o(this,Jn)}var C=g.reduce(function(x,E){return x?x.concat([[x[x.length-1][1],E]]):[[fd,E]]},null);return C.push([g[g.length-1],this.db._maxKey]),this.inAnyRange(C,{includeLowers:!1,includeUppers:!1})},p.prototype.inAnyRange=function(g,C){var x=this,E=this._cmp,D=this._ascending,$=this._descending,Z=this._min,te=this._max;if(g.length===0)return Xs(this);if(!g.every(function(Oe){return Oe[0]!==void 0&&Oe[1]!==void 0&&D(Oe[0],Oe[1])<=0}))return $o(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",G.InvalidArgument);var he=!C||C.includeLowers!==!1,Re=C&&C.includeUppers===!0;function ve(Oe,qe){for(var ot=0,et=Oe.length;ot<et;++ot){var ft=Oe[ot];if(E(qe[0],ft[1])<0&&E(qe[1],ft[0])>0){ft[0]=Z(ft[0],qe[0]),ft[1]=te(ft[1],qe[1]);break}}return ot===et&&Oe.push(qe),Oe}var Me=D;function $e(Oe,qe){return Me(Oe[0],qe[0])}var Ce;try{Ce=g.reduce(ve,[]),Ce.sort($e)}catch{return $o(this,Jn)}var Pe=0,Ae=Re?function(Oe){return D(Oe,Ce[Pe][1])>0}:function(Oe){return D(Oe,Ce[Pe][1])>=0},Ge=he?function(Oe){return $(Oe,Ce[Pe][0])>0}:function(Oe){return $(Oe,Ce[Pe][0])>=0};function Be(Oe){return!Ae(Oe)&&!Ge(Oe)}var He=Ae,ze=new this.Collection(this,function(){return Fi(Ce[0][0],Ce[Ce.length-1][1],!he,!Re)});return ze._ondirectionchange=function(Oe){Oe==="next"?(He=Ae,Me=D):(He=Ge,Me=$),Ce.sort($e)},ze._addAlgorithm(function(Oe,qe,ot){for(var et=Oe.key;He(et);)if(++Pe,Pe===Ce.length)return qe(ot),!1;return Be(et)?!0:(x._cmp(et,Ce[Pe][1])===0||x._cmp(et,Ce[Pe][0])===0||qe(function(){Me===D?Oe.continue(Ce[Pe][0]):Oe.continue(Ce[Pe][1])}),!1)}),ze},p.prototype.startsWithAnyOf=function(){var g=pe.apply(ne,arguments);return g.every(function(C){return typeof C=="string"})?g.length===0?Xs(this):this.inAnyRange(g.map(function(C){return[C,C+os]})):$o(this,"startsWithAnyOf() only works with strings")},p}();function SR(p){return ea(Dg.prototype,function(C,x,E){if(this.db=p,this._ctx={table:C,index:x===":id"?null:x,or:E},this._cmp=this._ascending=kt,this._descending=function(D,$){return kt($,D)},this._max=function(D,$){return kt(D,$)>0?D:$},this._min=function(D,$){return kt(D,$)<0?D:$},this._IDBKeyRange=p._deps.IDBKeyRange,!this._IDBKeyRange)throw new G.MissingAPI})}function En(p){return Zt(function(g){return oa(g),p(g.target.error),!1})}function oa(p){p.stopPropagation&&p.stopPropagation(),p.preventDefault&&p.preventDefault()}var na="storagemutated",Cd="x-storagemutated-1",Di=Xr(null,na),xR=function(){function p(){}return p.prototype._lock=function(){return W(!ct.global),++this._reculock,this._reculock===1&&!ct.global&&(ct.lockOwnerFor=this),this},p.prototype._unlock=function(){if(W(!ct.global),--this._reculock===0)for(ct.global||(ct.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var g=this._blockedFuncs.shift();try{ts(g[1],g[0])}catch{}}return this},p.prototype._locked=function(){return this._reculock&&ct.lockOwnerFor!==this},p.prototype.create=function(g){var C=this;if(!this.mode)return this;var x=this.db.idbdb,E=this.db._state.dbOpenError;if(W(!this.idbtrans),!g&&!x)switch(E&&E.name){case"DatabaseClosedError":throw new G.DatabaseClosed(E);case"MissingAPIError":throw new G.MissingAPI(E.message,E);default:throw new G.OpenFailed(E)}if(!this.active)throw new G.TransactionInactive;return W(this._completion._state===null),g=this.idbtrans=g||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):x.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),g.onerror=Zt(function(D){oa(D),C._reject(g.error)}),g.onabort=Zt(function(D){oa(D),C.active&&C._reject(new G.Abort(g.error)),C.active=!1,C.on("abort").fire(D)}),g.oncomplete=Zt(function(){C.active=!1,C._resolve(),"mutatedParts"in g&&Di.storagemutated.fire(g.mutatedParts)}),this},p.prototype._promise=function(g,C,x){var E=this;if(g==="readwrite"&&this.mode!=="readwrite")return ao(new G.ReadOnly("Transaction is readonly"));if(!this.active)return ao(new G.TransactionInactive);if(this._locked())return new tt(function($,Z){E._blockedFuncs.push([function(){E._promise(g,C,x).then($,Z)},ct])});if(x)return _i(function(){var $=new tt(function(Z,te){E._lock();var he=C(Z,te,E);he&&he.then&&he.then(Z,te)});return $.finally(function(){return E._unlock()}),$._lib=!0,$});var D=new tt(function($,Z){var te=C($,Z,E);te&&te.then&&te.then($,Z)});return D._lib=!0,D},p.prototype._root=function(){return this.parent?this.parent._root():this},p.prototype.waitFor=function(g){var C=this._root(),x=tt.resolve(g);if(C._waitingFor)C._waitingFor=C._waitingFor.then(function(){return x});else{C._waitingFor=x,C._waitingQueue=[];var E=C.idbtrans.objectStore(C.storeNames[0]);(function $(){for(++C._spinCount;C._waitingQueue.length;)C._waitingQueue.shift()();C._waitingFor&&(E.get(-1/0).onsuccess=$)})()}var D=C._waitingFor;return new tt(function($,Z){x.then(function(te){return C._waitingQueue.push(Zt($.bind(null,te)))},function(te){return C._waitingQueue.push(Zt(Z.bind(null,te)))}).finally(function(){C._waitingFor===D&&(C._waitingFor=null)})})},p.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new G.Abort))},p.prototype.table=function(g){var C=this._memoizedTables||(this._memoizedTables={});if(h(C,g))return C[g];var x=this.schema[g];if(!x)throw new G.NotFound("Table "+g+" not part of transaction");var E=new this.db.Table(g,x,this);return E.core=this.db.core.table(g),C[g]=E,E},p}();function RR(p){return ea(xR.prototype,function(C,x,E,D,$){var Z=this;this.db=p,this.mode=C,this.storeNames=x,this.schema=E,this.chromeTransactionDurability=D,this.idbtrans=null,this.on=Xr(this,"complete","error","abort"),this.parent=$||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new tt(function(te,he){Z._resolve=te,Z._reject=he}),this._completion.then(function(){Z.active=!1,Z.on.complete.fire()},function(te){var he=Z.active;return Z.active=!1,Z.on.error.fire(te),Z.parent?Z.parent._reject(te):he&&Z.idbtrans&&Z.idbtrans.abort(),ao(te)})})}function bd(p,g,C,x,E,D,$){return{name:p,keyPath:g,unique:C,multi:x,auto:E,compound:D,src:(C&&!$?"&":"")+(x?"*":"")+(E?"++":"")+Tg(g)}}function Tg(p){return typeof p=="string"?p:p?"["+[].join.call(p,"+")+"]":""}function wd(p,g,C){return{name:p,primKey:g,indexes:C,mappedClass:null,idxByName:de(C,function(x){return[x.name,x]})}}function _R(p){return p.length===1?p[0]:p}var ia=function(p){try{return p.only([[]]),ia=function(){return[[]]},[[]]}catch{return ia=function(){return os},os}};function Sd(p){return p==null?function(){}:typeof p=="string"?ER(p):function(g){return K(g,p)}}function ER(p){var g=p.split(".");return g.length===1?function(C){return C[p]}:function(C){return K(C,p)}}function kg(p){return[].slice.call(p)}var PR=0;function sa(p){return p==null?":id":typeof p=="string"?p:"[".concat(p.join("+"),"]")}function FR(p,g,C){function x(ve,Me){var $e=kg(ve.objectStoreNames);return{schema:{name:ve.name,tables:$e.map(function(Ce){return Me.objectStore(Ce)}).map(function(Ce){var Pe=Ce.keyPath,Ae=Ce.autoIncrement,Ge=l(Pe),Be=Pe==null,He={},ze={name:Ce.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Be,compound:Ge,keyPath:Pe,autoIncrement:Ae,unique:!0,extractKey:Sd(Pe)},indexes:kg(Ce.indexNames).map(function(Oe){return Ce.index(Oe)}).map(function(Oe){var qe=Oe.name,ot=Oe.unique,et=Oe.multiEntry,ft=Oe.keyPath,Et=l(ft),st={name:qe,compound:Et,keyPath:ft,unique:ot,multiEntry:et,extractKey:Sd(ft)};return He[sa(ft)]=st,st}),getIndexByKeyPath:function(Oe){return He[sa(Oe)]}};return He[":id"]=ze.primaryKey,Pe!=null&&(He[sa(Pe)]=ze.primaryKey),ze})},hasGetAll:$e.length>0&&"getAll"in Me.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function E(ve){if(ve.type===3)return null;if(ve.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Me=ve.lower,$e=ve.upper,Ce=ve.lowerOpen,Pe=ve.upperOpen,Ae=Me===void 0?$e===void 0?null:g.upperBound($e,!!Pe):$e===void 0?g.lowerBound(Me,!!Ce):g.bound(Me,$e,!!Ce,!!Pe);return Ae}function D(ve){var Me=ve.name;function $e(Ae){var Ge=Ae.trans,Be=Ae.type,He=Ae.keys,ze=Ae.values,Oe=Ae.range;return new Promise(function(qe,ot){qe=Zt(qe);var et=Ge.objectStore(Me),ft=et.keyPath==null,Et=Be==="put"||Be==="add";if(!Et&&Be!=="delete"&&Be!=="deleteRange")throw new Error("Invalid operation type: "+Be);var st=(He||ze||{length:1}).length;if(He&&ze&&He.length!==ze.length)throw new Error("Given keys array must have same length as given values array.");if(st===0)return qe({numFailures:0,failures:{},results:[],lastResult:void 0});var _t,gt=[],It=[],ht=0,io=function(Fn){++ht,oa(Fn)};if(Be==="deleteRange"){if(Oe.type===4)return qe({numFailures:ht,failures:It,results:[],lastResult:void 0});Oe.type===3?gt.push(_t=et.clear()):gt.push(_t=et.delete(E(Oe)))}else{var xo=Et?ft?[ze,He]:[ze,null]:[He,null],Pn=xo[0],Ho=xo[1];if(Et)for(var Xo=0;Xo<st;++Xo)gt.push(_t=Ho&&Ho[Xo]!==void 0?et[Be](Pn[Xo],Ho[Xo]):et[Be](Pn[Xo])),_t.onerror=io;else for(var Xo=0;Xo<st;++Xo)gt.push(_t=et[Be](Pn[Xo])),_t.onerror=io}var Ai=function(Fn){var la=Fn.target.result;gt.forEach(function(fn,nc){return fn.error!=null&&(It[nc]=fn.error)}),qe({numFailures:ht,failures:It,results:Be==="delete"?He:gt.map(function(fn){return fn.result}),lastResult:la})};_t.onerror=function(Fn){io(Fn),Ai(Fn)},_t.onsuccess=Ai})}function Ce(Ae){var Ge=Ae.trans,Be=Ae.values,He=Ae.query,ze=Ae.reverse,Oe=Ae.unique;return new Promise(function(qe,ot){qe=Zt(qe);var et=He.index,ft=He.range,Et=Ge.objectStore(Me),st=et.isPrimaryKey?Et:Et.index(et.name),_t=ze?Oe?"prevunique":"prev":Oe?"nextunique":"next",gt=Be||!("openKeyCursor"in st)?st.openCursor(E(ft),_t):st.openKeyCursor(E(ft),_t);gt.onerror=En(ot),gt.onsuccess=Zt(function(It){var ht=gt.result;if(!ht){qe(null);return}ht.___id=++PR,ht.done=!1;var io=ht.continue.bind(ht),xo=ht.continuePrimaryKey;xo&&(xo=xo.bind(ht));var Pn=ht.advance.bind(ht),Ho=function(){throw new Error("Cursor not started")},Xo=function(){throw new Error("Cursor not stopped")};ht.trans=Ge,ht.stop=ht.continue=ht.continuePrimaryKey=ht.advance=Ho,ht.fail=Zt(ot),ht.next=function(){var Ai=this,Fn=1;return this.start(function(){return Fn--?Ai.continue():Ai.stop()}).then(function(){return Ai})},ht.start=function(Ai){var Fn=new Promise(function(fn,nc){fn=Zt(fn),gt.onerror=En(nc),ht.fail=nc,ht.stop=function(g_){ht.stop=ht.continue=ht.continuePrimaryKey=ht.advance=Xo,fn(g_)}}),la=function(){if(gt.result)try{Ai()}catch(fn){ht.fail(fn)}else ht.done=!0,ht.start=function(){throw new Error("Cursor behind last entry")},ht.stop()};return gt.onsuccess=Zt(function(fn){gt.onsuccess=la,la()}),ht.continue=io,ht.continuePrimaryKey=xo,ht.advance=Pn,la(),Fn},qe(ht)},ot)})}function Pe(Ae){return function(Ge){return new Promise(function(Be,He){Be=Zt(Be);var ze=Ge.trans,Oe=Ge.values,qe=Ge.limit,ot=Ge.query,et=qe===1/0?void 0:qe,ft=ot.index,Et=ot.range,st=ze.objectStore(Me),_t=ft.isPrimaryKey?st:st.index(ft.name),gt=E(Et);if(qe===0)return Be({result:[]});if(Ae){var It=Oe?_t.getAll(gt,et):_t.getAllKeys(gt,et);It.onsuccess=function(Pn){return Be({result:Pn.target.result})},It.onerror=En(He)}else{var ht=0,io=Oe||!("openKeyCursor"in _t)?_t.openCursor(gt):_t.openKeyCursor(gt),xo=[];io.onsuccess=function(Pn){var Ho=io.result;if(!Ho)return Be({result:xo});if(xo.push(Oe?Ho.value:Ho.primaryKey),++ht===qe)return Be({result:xo});Ho.continue()},io.onerror=En(He)}})}}return{name:Me,schema:ve,mutate:$e,getMany:function(Ae){var Ge=Ae.trans,Be=Ae.keys;return new Promise(function(He,ze){He=Zt(He);for(var Oe=Ge.objectStore(Me),qe=Be.length,ot=new Array(qe),et=0,ft=0,Et,st=function(ht){var io=ht.target;(ot[io._pos]=io.result)!=null,++ft===et&&He(ot)},_t=En(ze),gt=0;gt<qe;++gt){var It=Be[gt];It!=null&&(Et=Oe.get(Be[gt]),Et._pos=gt,Et.onsuccess=st,Et.onerror=_t,++et)}et===0&&He(ot)})},get:function(Ae){var Ge=Ae.trans,Be=Ae.key;return new Promise(function(He,ze){He=Zt(He);var Oe=Ge.objectStore(Me),qe=Oe.get(Be);qe.onsuccess=function(ot){return He(ot.target.result)},qe.onerror=En(ze)})},query:Pe(te),openCursor:Ce,count:function(Ae){var Ge=Ae.query,Be=Ae.trans,He=Ge.index,ze=Ge.range;return new Promise(function(Oe,qe){var ot=Be.objectStore(Me),et=He.isPrimaryKey?ot:ot.index(He.name),ft=E(ze),Et=ft?et.count(ft):et.count();Et.onsuccess=Zt(function(st){return Oe(st.target.result)}),Et.onerror=En(qe)})}}}var $=x(p,C),Z=$.schema,te=$.hasGetAll,he=Z.tables.map(function(ve){return D(ve)}),Re={};return he.forEach(function(ve){return Re[ve.name]=ve}),{stack:"dbcore",transaction:p.transaction.bind(p),table:function(ve){var Me=Re[ve];if(!Me)throw new Error("Table '".concat(ve,"' not found"));return Re[ve]},MIN_KEY:-1/0,MAX_KEY:ia(g),schema:Z}}function DR(p,g){return g.reduce(function(C,x){var E=x.create;return i(i({},C),E(C))},p)}function TR(p,g,C,x){var E=C.IDBKeyRange;C.indexedDB;var D=DR(FR(g,E,x),p.dbcore);return{dbcore:D}}function jl(p,g){var C=g.db,x=TR(p._middlewares,C,p._deps,g);p.core=x.dbcore,p.tables.forEach(function(E){var D=E.name;p.core.schema.tables.some(function($){return $.name===D})&&(E.core=p.core.table(D),p[D]instanceof p.Table&&(p[D].core=E.core))})}function Kl(p,g,C,x){C.forEach(function(E){var D=x[E];g.forEach(function($){var Z=R($,E);(!Z||"value"in Z&&Z.value===void 0)&&($===p.Transaction.prototype||$ instanceof p.Transaction?m($,E,{get:function(){return this.table(E)},set:function(te){v(this,E,{value:te,writable:!0,configurable:!0,enumerable:!0})}}):$[E]=new p.Table(E,D))})})}function xd(p,g){g.forEach(function(C){for(var x in C)C[x]instanceof p.Table&&delete C[x]})}function kR(p,g){return p._cfg.version-g._cfg.version}function AR(p,g,C,x){var E=p._dbSchema;C.objectStoreNames.contains("$meta")&&!E.$meta&&(E.$meta=wd("$meta",Ig("")[0],[]),p._storeNames.push("$meta"));var D=p._createTransaction("readwrite",p._storeNames,E);D.create(C),D._completion.catch(x);var $=D._reject.bind(D),Z=ct.transless||ct;_i(function(){if(ct.trans=D,ct.transless=Z,g===0)a(E).forEach(function(te){_d(C,te,E[te].primKey,E[te].indexes)}),jl(p,C),tt.follow(function(){return p.on.populate.fire(D)}).catch($);else return jl(p,C),MR(p,D,g).then(function(te){return OR(p,te,D,C)}).catch($)})}function IR(p,g){Ag(p._dbSchema,g),g.db.version%10===0&&!g.objectStoreNames.contains("$meta")&&g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var C=Ql(p,p.idbdb,g);Yl(p,p._dbSchema,g);for(var x=Rd(C,p._dbSchema),E=function(he){if(he.change.length||he.recreate)return console.warn("Unable to patch indexes of table ".concat(he.name," because it has changes on the type of index or primary key.")),{value:void 0};var Re=g.objectStore(he.name);he.add.forEach(function(ve){lt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(he.name,".").concat(ve.src)),ql(Re,ve)})},D=0,$=x.change;D<$.length;D++){var Z=$[D],te=E(Z);if(typeof te=="object")return te.value}}function MR(p,g,C){return g.storeNames.includes("$meta")?g.table("$meta").get("version").then(function(x){return x??C}):tt.resolve(C)}function OR(p,g,C,x){var E=[],D=p._versions,$=p._dbSchema=Ql(p,p.idbdb,x),Z=D.filter(function(he){return he._cfg.version>=g});if(Z.length===0)return tt.resolve();Z.forEach(function(he){E.push(function(){var Re=$,ve=he._cfg.dbschema;Yl(p,Re,x),Yl(p,ve,x),$=p._dbSchema=ve;var Me=Rd(Re,ve);Me.add.forEach(function(Be){_d(x,Be[0],Be[1].primKey,Be[1].indexes)}),Me.change.forEach(function(Be){if(Be.recreate)throw new G.Upgrade("Not yet support for changing primary key");var He=x.objectStore(Be.name);Be.add.forEach(function(ze){return ql(He,ze)}),Be.change.forEach(function(ze){He.deleteIndex(ze.name),ql(He,ze)}),Be.del.forEach(function(ze){return He.deleteIndex(ze)})});var $e=he._cfg.contentUpgrade;if($e&&he._cfg.version>g){jl(p,x),C._memoizedTables={};var Ce=N(ve);Me.del.forEach(function(Be){Ce[Be]=Re[Be]}),xd(p,[p.Transaction.prototype]),Kl(p,[p.Transaction.prototype],a(Ce),Ce),C.schema=Ce;var Pe=ae($e);Pe&&Ys();var Ae,Ge=tt.follow(function(){if(Ae=$e(C),Ae&&Pe){var Be=Ei.bind(null,null);Ae.then(Be,Be)}});return Ae&&typeof Ae.then=="function"?tt.resolve(Ae):Ge.then(function(){return Ae})}}),E.push(function(Re){var ve=he._cfg.dbschema;LR(ve,Re),xd(p,[p.Transaction.prototype]),Kl(p,[p.Transaction.prototype],p._storeNames,p._dbSchema),C.schema=p._dbSchema}),E.push(function(Re){p.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(p.idbdb.version/10)===he._cfg.version?(p.idbdb.deleteObjectStore("$meta"),delete p._dbSchema.$meta,p._storeNames=p._storeNames.filter(function(ve){return ve!=="$meta"})):Re.objectStore("$meta").put(he._cfg.version,"version"))})});function te(){return E.length?tt.resolve(E.shift()(C.idbtrans)).then(te):tt.resolve()}return te().then(function(){Ag($,x)})}function Rd(p,g){var C={del:[],add:[],change:[]},x;for(x in p)g[x]||C.del.push(x);for(x in g){var E=p[x],D=g[x];if(!E)C.add.push([x,D]);else{var $={name:x,def:D,recreate:!1,del:[],add:[],change:[]};if(""+(E.primKey.keyPath||"")!=""+(D.primKey.keyPath||"")||E.primKey.auto!==D.primKey.auto)$.recreate=!0,C.change.push($);else{var Z=E.idxByName,te=D.idxByName,he=void 0;for(he in Z)te[he]||$.del.push(he);for(he in te){var Re=Z[he],ve=te[he];Re?Re.src!==ve.src&&$.change.push(ve):$.add.push(ve)}($.del.length>0||$.add.length>0||$.change.length>0)&&C.change.push($)}}}return C}function _d(p,g,C,x){var E=p.db.createObjectStore(g,C.keyPath?{keyPath:C.keyPath,autoIncrement:C.auto}:{autoIncrement:C.auto});return x.forEach(function(D){return ql(E,D)}),E}function Ag(p,g){a(p).forEach(function(C){g.db.objectStoreNames.contains(C)||(lt&&console.debug("Dexie: Creating missing table",C),_d(g,C,p[C].primKey,p[C].indexes))})}function LR(p,g){[].slice.call(g.db.objectStoreNames).forEach(function(C){return p[C]==null&&g.db.deleteObjectStore(C)})}function ql(p,g){p.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function Ql(p,g,C){var x={},E=M(g.objectStoreNames,0);return E.forEach(function(D){for(var $=C.objectStore(D),Z=$.keyPath,te=bd(Tg(Z),Z||"",!0,!1,!!$.autoIncrement,Z&&typeof Z!="string",!0),he=[],Re=0;Re<$.indexNames.length;++Re){var ve=$.index($.indexNames[Re]);Z=ve.keyPath;var Me=bd(ve.name,Z,!!ve.unique,!!ve.multiEntry,!1,Z&&typeof Z!="string",!1);he.push(Me)}x[D]=wd(D,te,he)}),x}function BR(p,g,C){p.verno=g.version/10;var x=p._dbSchema=Ql(p,g,C);p._storeNames=M(g.objectStoreNames,0),Kl(p,[p._allTables],a(x),x)}function NR(p,g){var C=Ql(p,p.idbdb,g),x=Rd(C,p._dbSchema);return!(x.add.length||x.change.some(function(E){return E.add.length||E.change.length}))}function Yl(p,g,C){for(var x=C.db.objectStoreNames,E=0;E<x.length;++E){var D=x[E],$=C.objectStore(D);p._hasGetAll="getAll"in $;for(var Z=0;Z<$.indexNames.length;++Z){var te=$.indexNames[Z],he=$.index(te).keyPath,Re=typeof he=="string"?he:"["+M(he).join("+")+"]";if(g[D]){var ve=g[D].idxByName[Re];ve&&(ve.name=te,delete g[D].idxByName[Re],g[D].idxByName[te]=ve)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(p._hasGetAll=!1)}function Ig(p){return p.split(",").map(function(g,C){g=g.trim();var x=g.replace(/([&*]|\+\+)/g,""),E=/^\[/.test(x)?x.match(/^\[(.*)\]$/)[1].split("+"):x;return bd(x,E||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),l(E),C===0)})}var HR=function(){function p(){}return p.prototype._parseStoresSpec=function(g,C){a(g).forEach(function(x){if(g[x]!==null){var E=Ig(g[x]),D=E.shift();if(D.unique=!0,D.multi)throw new G.Schema("Primary key cannot be multi-valued");E.forEach(function($){if($.auto)throw new G.Schema("Only primary key can be marked as autoIncrement (++)");if(!$.keyPath)throw new G.Schema("Index must have a name and cannot be an empty string")}),C[x]=wd(x,D,E)}})},p.prototype.stores=function(g){var C=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,g):g;var x=C._versions,E={},D={};return x.forEach(function($){c(E,$._cfg.storesSource),D=$._cfg.dbschema={},$._parseStoresSpec(E,D)}),C._dbSchema=D,xd(C,[C._allTables,C,C.Transaction.prototype]),Kl(C,[C._allTables,C,C.Transaction.prototype,this._cfg.tables],a(D),D),C._storeNames=a(D),this},p.prototype.upgrade=function(g){return this._cfg.contentUpgrade=Ot(this._cfg.contentUpgrade||V,g),this},p}();function GR(p){return ea(HR.prototype,function(C){this.db=p,this._cfg={version:C,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Ed(p,g){var C=p._dbNamesDB;return C||(C=p._dbNamesDB=new Zn(Vl,{addons:[],indexedDB:p,IDBKeyRange:g}),C.version(1).stores({dbnames:"name"})),C.table("dbnames")}function Pd(p){return p&&typeof p.databases=="function"}function VR(p){var g=p.indexedDB,C=p.IDBKeyRange;return Pd(g)?Promise.resolve(g.databases()).then(function(x){return x.map(function(E){return E.name}).filter(function(E){return E!==Vl})}):Ed(g,C).toCollection().primaryKeys()}function zR(p,g){var C=p.indexedDB,x=p.IDBKeyRange;!Pd(C)&&g!==Vl&&Ed(C,x).put({name:g}).catch(V)}function WR(p,g){var C=p.indexedDB,x=p.IDBKeyRange;!Pd(C)&&g!==Vl&&Ed(C,x).delete(g).catch(V)}function Fd(p){return _i(function(){return ct.letThrough=!0,p()})}function UR(){var p=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!p||!indexedDB.databases)return Promise.resolve();var g;return new Promise(function(C){var x=function(){return indexedDB.databases().finally(C)};g=setInterval(x,100),x()}).finally(function(){return clearInterval(g)})}var Dd;function Td(p){return!("from"in p)}var So=function(p,g){if(this)c(this,arguments.length?{d:1,from:p,to:arguments.length>1?g:p}:{d:0});else{var C=new So;return p&&"d"in p&&c(C,p),C}};f(So.prototype,(Dd={add:function(p){return aa(this,p),this},addKey:function(p){return ra(this,p,p),this},addKeys:function(p){var g=this;return p.forEach(function(C){return ra(g,C,C)}),this},hasKey:function(p){var g=Jl(this).next(p).value;return g&&kt(g.from,p)<=0&&kt(g.to,p)>=0}},Dd[ue]=function(){return Jl(this)},Dd));function ra(p,g,C){var x=kt(g,C);if(!isNaN(x)){if(x>0)throw RangeError();if(Td(p))return c(p,{from:g,to:C,d:1});var E=p.l,D=p.r;if(kt(C,p.from)<0)return E?ra(E,g,C):p.l={from:g,to:C,d:1,l:null,r:null},Og(p);if(kt(g,p.to)>0)return D?ra(D,g,C):p.r={from:g,to:C,d:1,l:null,r:null},Og(p);kt(g,p.from)<0&&(p.from=g,p.l=null,p.d=D?D.d+1:1),kt(C,p.to)>0&&(p.to=C,p.r=null,p.d=p.l?p.l.d+1:1);var $=!p.r;E&&!p.l&&aa(p,E),D&&$&&aa(p,D)}}function aa(p,g){function C(x,E){var D=E.from,$=E.to,Z=E.l,te=E.r;ra(x,D,$),Z&&C(x,Z),te&&C(x,te)}Td(g)||C(p,g)}function Mg(p,g){var C=Jl(g),x=C.next();if(x.done)return!1;for(var E=x.value,D=Jl(p),$=D.next(E.from),Z=$.value;!x.done&&!$.done;){if(kt(Z.from,E.to)<=0&&kt(Z.to,E.from)>=0)return!0;kt(E.from,Z.from)<0?E=(x=C.next(Z.from)).value:Z=($=D.next(E.from)).value}return!1}function Jl(p){var g=Td(p)?null:{s:0,n:p};return{next:function(C){for(var x=arguments.length>0;g;)switch(g.s){case 0:if(g.s=1,x)for(;g.n.l&&kt(C,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!x||kt(C,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function Og(p){var g,C,x=(((g=p.r)===null||g===void 0?void 0:g.d)||0)-(((C=p.l)===null||C===void 0?void 0:C.d)||0),E=x>1?"r":x<-1?"l":"";if(E){var D=E==="r"?"l":"r",$=i({},p),Z=p[E];p.from=Z.from,p.to=Z.to,p[E]=Z[E],$[E]=Z[D],p[D]=$,$.d=Lg($)}p.d=Lg(p)}function Lg(p){var g=p.r,C=p.l;return(g?C?Math.max(g.d,C.d):g.d:C?C.d:0)+1}function Zl(p,g){return a(g).forEach(function(C){p[C]?aa(p[C],g[C]):p[C]=L(g[C])}),p}function kd(p,g){return p.all||g.all||Object.keys(p).some(function(C){return g[C]&&Mg(g[C],p[C])})}var is={},Ad={},Id=!1;function Xl(p,g){Zl(Ad,p),Id||(Id=!0,setTimeout(function(){Id=!1;var C=Ad;Ad={},Md(C,!1)},0))}function Md(p,g){g===void 0&&(g=!1);var C=new Set;if(p.all)for(var x=0,E=Object.values(is);x<E.length;x++){var D=E[x];Bg(D,p,C,g)}else for(var $ in p){var Z=/^idb\:\/\/(.*)\/(.*)\//.exec($);if(Z){var te=Z[1],he=Z[2],D=is["idb://".concat(te,"/").concat(he)];D&&Bg(D,p,C,g)}}C.forEach(function(Re){return Re()})}function Bg(p,g,C,x){for(var E=[],D=0,$=Object.entries(p.queries.query);D<$.length;D++){for(var Z=$[D],te=Z[0],he=Z[1],Re=[],ve=0,Me=he;ve<Me.length;ve++){var $e=Me[ve];kd(g,$e.obsSet)?$e.subscribers.forEach(function(Ge){return C.add(Ge)}):x&&Re.push($e)}x&&E.push([te,Re])}if(x)for(var Ce=0,Pe=E;Ce<Pe.length;Ce++){var Ae=Pe[Ce],te=Ae[0],Re=Ae[1];p.queries.query[te]=Re}}function $R(p){var g=p._state,C=p._deps.indexedDB;if(g.isBeingOpened||p.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?ao(g.dbOpenError):p});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var x=g.openCanceller,E=Math.round(p.verno*10),D=!1;function $(){if(g.openCanceller!==x)throw new G.DatabaseClosed("db.open() was cancelled")}var Z=g.dbReadyResolve,te=null,he=!1,Re=function(){return new tt(function(ve,Me){if($(),!C)throw new G.MissingAPI;var $e=p.name,Ce=g.autoSchema||!E?C.open($e):C.open($e,E);if(!Ce)throw new G.MissingAPI;Ce.onerror=En(Me),Ce.onblocked=Zt(p._fireOnBlocked),Ce.onupgradeneeded=Zt(function(Pe){if(te=Ce.transaction,g.autoSchema&&!p._options.allowEmptyDB){Ce.onerror=oa,te.abort(),Ce.result.close();var Ae=C.deleteDatabase($e);Ae.onsuccess=Ae.onerror=Zt(function(){Me(new G.NoSuchDatabase("Database ".concat($e," doesnt exist")))})}else{te.onerror=En(Me);var Ge=Pe.oldVersion>Math.pow(2,62)?0:Pe.oldVersion;he=Ge<1,p.idbdb=Ce.result,D&&IR(p,te),AR(p,Ge/10,te,Me)}},Me),Ce.onsuccess=Zt(function(){te=null;var Pe=p.idbdb=Ce.result,Ae=M(Pe.objectStoreNames);if(Ae.length>0)try{var Ge=Pe.transaction(_R(Ae),"readonly");if(g.autoSchema)BR(p,Pe,Ge);else if(Yl(p,p._dbSchema,Ge),!NR(p,Ge)&&!D)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Pe.close(),E=Pe.version+1,D=!0,ve(Re());jl(p,Ge)}catch{}Js.push(p),Pe.onversionchange=Zt(function(Be){g.vcFired=!0,p.on("versionchange").fire(Be)}),Pe.onclose=Zt(function(Be){p.on("close").fire(Be)}),he&&zR(p._deps,$e),ve()},Me)}).catch(function(ve){switch(ve==null?void 0:ve.name){case"UnknownError":if(g.PR1398_maxLoop>0)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Re();break;case"VersionError":if(E>0)return E=0,Re();break}return tt.reject(ve)})};return tt.race([x,(typeof navigator>"u"?tt.resolve():UR()).then(Re)]).then(function(){return $(),g.onReadyBeingFired=[],tt.resolve(Fd(function(){return p.on.ready.fire(p.vip)})).then(function ve(){if(g.onReadyBeingFired.length>0){var Me=g.onReadyBeingFired.reduce(Ot,V);return g.onReadyBeingFired=[],tt.resolve(Fd(function(){return Me(p.vip)})).then(ve)}})}).finally(function(){g.openCanceller===x&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(ve){g.dbOpenError=ve;try{te&&te.abort()}catch{}return x===g.openCanceller&&p._close(),ao(ve)}).finally(function(){g.openComplete=!0,Z()}).then(function(){if(he){var ve={};p.tables.forEach(function(Me){Me.schema.indexes.forEach(function($e){$e.name&&(ve["idb://".concat(p.name,"/").concat(Me.name,"/").concat($e.name)]=new So(-1/0,[[[]]]))}),ve["idb://".concat(p.name,"/").concat(Me.name,"/")]=ve["idb://".concat(p.name,"/").concat(Me.name,"/:dels")]=new So(-1/0,[[[]]])}),Di(na).fire(ve),Md(ve,!0)}return p})}function Od(p){var g=function($){return p.next($)},C=function($){return p.throw($)},x=D(g),E=D(C);function D($){return function(Z){var te=$(Z),he=te.value;return te.done?he:!he||typeof he.then!="function"?l(he)?Promise.all(he).then(x,E):x(he):he.then(x,E)}}return D(g)()}function jR(p,g,C){var x=arguments.length;if(x<2)throw new G.InvalidArgument("Too few arguments");for(var E=new Array(x-1);--x;)E[x-1]=arguments[x];C=E.pop();var D=F(E);return[p,D,C]}function Ng(p,g,C,x,E){return tt.resolve().then(function(){var D=ct.transless||ct,$=p._createTransaction(g,C,p._dbSchema,x);$.explicit=!0;var Z={trans:$,transless:D};if(x)$.idbtrans=x.idbtrans;else try{$.create(),$.idbtrans._explicit=!0,p._state.PR1398_maxLoop=3}catch(ve){return ve.name===k.InvalidState&&p.isOpen()&&--p._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),p.close({disableAutoOpen:!1}),p.open().then(function(){return Ng(p,g,C,null,E)})):ao(ve)}var te=ae(E);te&&Ys();var he,Re=tt.follow(function(){if(he=E.call($,$),he)if(te){var ve=Ei.bind(null,null);he.then(ve,ve)}else typeof he.next=="function"&&typeof he.throw=="function"&&(he=Od(he))},Z);return(he&&typeof he.then=="function"?tt.resolve(he).then(function(ve){return $.active?ve:ao(new G.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Re.then(function(){return he})).then(function(ve){return x&&$._resolve(),$._completion.then(function(){return ve})}).catch(function(ve){return $._reject(ve),ao(ve)})})}function ec(p,g,C){for(var x=l(p)?p.slice():[p],E=0;E<C;++E)x.push(g);return x}function KR(p){return i(i({},p),{table:function(g){var C=p.table(g),x=C.schema,E={},D=[];function $(Pe,Ae,Ge){var Be=sa(Pe),He=E[Be]=E[Be]||[],ze=Pe==null?0:typeof Pe=="string"?1:Pe.length,Oe=Ae>0,qe=i(i({},Ge),{name:Oe?"".concat(Be,"(virtual-from:").concat(Ge.name,")"):Ge.name,lowLevelIndex:Ge,isVirtual:Oe,keyTail:Ae,keyLength:ze,extractKey:Sd(Pe),unique:!Oe&&Ge.unique});if(He.push(qe),qe.isPrimaryKey||D.push(qe),ze>1){var ot=ze===2?Pe[0]:Pe.slice(0,ze-1);$(ot,Ae+1,Ge)}return He.sort(function(et,ft){return et.keyTail-ft.keyTail}),qe}var Z=$(x.primaryKey.keyPath,0,x.primaryKey);E[":id"]=[Z];for(var te=0,he=x.indexes;te<he.length;te++){var Re=he[te];$(Re.keyPath,0,Re)}function ve(Pe){var Ae=E[sa(Pe)];return Ae&&Ae[0]}function Me(Pe,Ae){return{type:Pe.type===1?2:Pe.type,lower:ec(Pe.lower,Pe.lowerOpen?p.MAX_KEY:p.MIN_KEY,Ae),lowerOpen:!0,upper:ec(Pe.upper,Pe.upperOpen?p.MIN_KEY:p.MAX_KEY,Ae),upperOpen:!0}}function $e(Pe){var Ae=Pe.query.index;return Ae.isVirtual?i(i({},Pe),{query:{index:Ae.lowLevelIndex,range:Me(Pe.query.range,Ae.keyTail)}}):Pe}var Ce=i(i({},C),{schema:i(i({},x),{primaryKey:Z,indexes:D,getIndexByKeyPath:ve}),count:function(Pe){return C.count($e(Pe))},query:function(Pe){return C.query($e(Pe))},openCursor:function(Pe){var Ae=Pe.query.index,Ge=Ae.keyTail,Be=Ae.isVirtual,He=Ae.keyLength;if(!Be)return C.openCursor(Pe);function ze(Oe){function qe(et){et!=null?Oe.continue(ec(et,Pe.reverse?p.MAX_KEY:p.MIN_KEY,Ge)):Pe.unique?Oe.continue(Oe.key.slice(0,He).concat(Pe.reverse?p.MIN_KEY:p.MAX_KEY,Ge)):Oe.continue()}var ot=Object.create(Oe,{continue:{value:qe},continuePrimaryKey:{value:function(et,ft){Oe.continuePrimaryKey(ec(et,p.MAX_KEY,Ge),ft)}},primaryKey:{get:function(){return Oe.primaryKey}},key:{get:function(){var et=Oe.key;return He===1?et[0]:et.slice(0,He)}},value:{get:function(){return Oe.value}}});return ot}return C.openCursor($e(Pe)).then(function(Oe){return Oe&&ze(Oe)})}});return Ce}})}var qR={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:KR};function Ld(p,g,C,x){return C=C||{},x=x||"",a(p).forEach(function(E){if(!h(g,E))C[x+E]=void 0;else{var D=p[E],$=g[E];if(typeof D=="object"&&typeof $=="object"&&D&&$){var Z=be(D),te=be($);Z!==te?C[x+E]=g[E]:Z==="Object"?Ld(D,$,C,x+E+"."):D!==$&&(C[x+E]=g[E])}else D!==$&&(C[x+E]=g[E])}}),a(g).forEach(function(E){h(p,E)||(C[x+E]=g[E])}),C}function Bd(p,g){return g.type==="delete"?g.keys:g.keys||g.values.map(p.extractKey)}var QR={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(p){return i(i({},p),{table:function(g){var C=p.table(g),x=C.schema.primaryKey,E=i(i({},C),{mutate:function(D){var $=ct.trans,Z=$.table(g).hook,te=Z.deleting,he=Z.creating,Re=Z.updating;switch(D.type){case"add":if(he.fire===V)break;return $._promise("readwrite",function(){return ve(D)},!0);case"put":if(he.fire===V&&Re.fire===V)break;return $._promise("readwrite",function(){return ve(D)},!0);case"delete":if(te.fire===V)break;return $._promise("readwrite",function(){return ve(D)},!0);case"deleteRange":if(te.fire===V)break;return $._promise("readwrite",function(){return Me(D)},!0)}return C.mutate(D);function ve(Ce){var Pe=ct.trans,Ae=Ce.keys||Bd(x,Ce);if(!Ae)throw new Error("Keys missing");return Ce=Ce.type==="add"||Ce.type==="put"?i(i({},Ce),{keys:Ae}):i({},Ce),Ce.type!=="delete"&&(Ce.values=s([],Ce.values)),Ce.keys&&(Ce.keys=s([],Ce.keys)),YR(C,Ce,Ae).then(function(Ge){var Be=Ae.map(function(He,ze){var Oe=Ge[ze],qe={onerror:null,onsuccess:null};if(Ce.type==="delete")te.fire.call(qe,He,Oe,Pe);else if(Ce.type==="add"||Oe===void 0){var ot=he.fire.call(qe,He,Ce.values[ze],Pe);He==null&&ot!=null&&(He=ot,Ce.keys[ze]=He,x.outbound||O(Ce.values[ze],x.keyPath,He))}else{var et=Ld(Oe,Ce.values[ze]),ft=Re.fire.call(qe,et,He,Oe,Pe);if(ft){var Et=Ce.values[ze];Object.keys(ft).forEach(function(st){h(Et,st)?Et[st]=ft[st]:O(Et,st,ft[st])})}}return qe});return C.mutate(Ce).then(function(He){for(var ze=He.failures,Oe=He.results,qe=He.numFailures,ot=He.lastResult,et=0;et<Ae.length;++et){var ft=Oe?Oe[et]:Ae[et],Et=Be[et];ft==null?Et.onerror&&Et.onerror(ze[et]):Et.onsuccess&&Et.onsuccess(Ce.type==="put"&&Ge[et]?Ce.values[et]:ft)}return{failures:ze,results:Oe,numFailures:qe,lastResult:ot}}).catch(function(He){return Be.forEach(function(ze){return ze.onerror&&ze.onerror(He)}),Promise.reject(He)})})}function Me(Ce){return $e(Ce.trans,Ce.range,1e4)}function $e(Ce,Pe,Ae){return C.query({trans:Ce,values:!1,query:{index:x,range:Pe},limit:Ae}).then(function(Ge){var Be=Ge.result;return ve({type:"delete",keys:Be,trans:Ce}).then(function(He){return He.numFailures>0?Promise.reject(He.failures[0]):Be.length<Ae?{failures:[],numFailures:0,lastResult:void 0}:$e(Ce,i(i({},Pe),{lower:Be[Be.length-1],lowerOpen:!0}),Ae)})})}}});return E}})}};function YR(p,g,C){return g.type==="add"?Promise.resolve([]):p.getMany({trans:g.trans,keys:C,cache:"immutable"})}function Hg(p,g,C){try{if(!g||g.keys.length<p.length)return null;for(var x=[],E=0,D=0;E<g.keys.length&&D<p.length;++E)kt(g.keys[E],p[D])===0&&(x.push(C?le(g.values[E]):g.values[E]),++D);return x.length===p.length?x:null}catch{return null}}var JR={stack:"dbcore",level:-1,create:function(p){return{table:function(g){var C=p.table(g);return i(i({},C),{getMany:function(x){if(!x.cache)return C.getMany(x);var E=Hg(x.keys,x.trans._cache,x.cache==="clone");return E?tt.resolve(E):C.getMany(x).then(function(D){return x.trans._cache={keys:x.keys,values:x.cache==="clone"?le(D):D},D})},mutate:function(x){return x.type!=="add"&&(x.trans._cache=null),C.mutate(x)}})}}}};function Gg(p,g){return p.trans.mode==="readonly"&&!!p.subscr&&!p.trans.explicit&&p.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function Vg(p,g){switch(p){case"query":return g.values&&!g.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var ZR={stack:"dbcore",level:0,name:"Observability",create:function(p){var g=p.schema.name,C=new So(p.MIN_KEY,p.MAX_KEY);return i(i({},p),{transaction:function(x,E,D){if(ct.subscr&&E!=="readonly")throw new G.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ct.querier));return p.transaction(x,E,D)},table:function(x){var E=p.table(x),D=E.schema,$=D.primaryKey,Z=D.indexes,te=$.extractKey,he=$.outbound,Re=$.autoIncrement&&Z.filter(function(Ce){return Ce.compound&&Ce.keyPath.includes($.keyPath)}),ve=i(i({},E),{mutate:function(Ce){var Pe,Ae,Ge=Ce.trans,Be=Ce.mutatedParts||(Ce.mutatedParts={}),He=function(gt){var It="idb://".concat(g,"/").concat(x,"/").concat(gt);return Be[It]||(Be[It]=new So)},ze=He(""),Oe=He(":dels"),qe=Ce.type,ot=Ce.type==="deleteRange"?[Ce.range]:Ce.type==="delete"?[Ce.keys]:Ce.values.length<50?[Bd($,Ce).filter(function(gt){return gt}),Ce.values]:[],et=ot[0],ft=ot[1],Et=Ce.trans._cache;if(l(et)){ze.addKeys(et);var st=qe==="delete"||et.length===ft.length?Hg(et,Et):null;st||Oe.addKeys(et),(st||ft)&&XR(He,D,st,ft)}else if(et){var _t={from:(Pe=et.lower)!==null&&Pe!==void 0?Pe:p.MIN_KEY,to:(Ae=et.upper)!==null&&Ae!==void 0?Ae:p.MAX_KEY};Oe.add(_t),ze.add(_t)}else ze.add(C),Oe.add(C),D.indexes.forEach(function(gt){return He(gt.name).add(C)});return E.mutate(Ce).then(function(gt){return et&&(Ce.type==="add"||Ce.type==="put")&&(ze.addKeys(gt.results),Re&&Re.forEach(function(It){for(var ht=Ce.values.map(function(Ho){return It.extractKey(Ho)}),io=It.keyPath.findIndex(function(Ho){return Ho===$.keyPath}),xo=0,Pn=gt.results.length;xo<Pn;++xo)ht[xo][io]=gt.results[xo];He(It.name).addKeys(ht)})),Ge.mutatedParts=Zl(Ge.mutatedParts||{},Be),gt})}}),Me=function(Ce){var Pe,Ae,Ge=Ce.query,Be=Ge.index,He=Ge.range;return[Be,new So((Pe=He.lower)!==null&&Pe!==void 0?Pe:p.MIN_KEY,(Ae=He.upper)!==null&&Ae!==void 0?Ae:p.MAX_KEY)]},$e={get:function(Ce){return[$,new So(Ce.key)]},getMany:function(Ce){return[$,new So().addKeys(Ce.keys)]},count:Me,query:Me,openCursor:Me};return a($e).forEach(function(Ce){ve[Ce]=function(Pe){var Ae=ct.subscr,Ge=!!Ae,Be=Gg(ct,E)&&Vg(Ce,Pe),He=Be?Pe.obsSet={}:Ae;if(Ge){var ze=function(st){var _t="idb://".concat(g,"/").concat(x,"/").concat(st);return He[_t]||(He[_t]=new So)},Oe=ze(""),qe=ze(":dels"),ot=$e[Ce](Pe),et=ot[0],ft=ot[1];if(Ce==="query"&&et.isPrimaryKey&&!Pe.values?qe.add(ft):ze(et.name||"").add(ft),!et.isPrimaryKey)if(Ce==="count")qe.add(C);else{var Et=Ce==="query"&&he&&Pe.values&&E.query(i(i({},Pe),{values:!1}));return E[Ce].apply(this,arguments).then(function(st){if(Ce==="query"){if(he&&Pe.values)return Et.then(function(ht){var io=ht.result;return Oe.addKeys(io),st});var _t=Pe.values?st.result.map(te):st.result;Pe.values?Oe.addKeys(_t):qe.addKeys(_t)}else if(Ce==="openCursor"){var gt=st,It=Pe.values;return gt&&Object.create(gt,{key:{get:function(){return qe.addKey(gt.primaryKey),gt.key}},primaryKey:{get:function(){var ht=gt.primaryKey;return qe.addKey(ht),ht}},value:{get:function(){return It&&Oe.addKey(gt.primaryKey),gt.value}}})}return st})}}return E[Ce].apply(this,arguments)}}),ve}})}};function XR(p,g,C,x){function E(D){var $=p(D.name||"");function Z(he){return he!=null?D.extractKey(he):null}var te=function(he){return D.multiEntry&&l(he)?he.forEach(function(Re){return $.addKey(Re)}):$.addKey(he)};(C||x).forEach(function(he,Re){var ve=C&&Z(C[Re]),Me=x&&Z(x[Re]);kt(ve,Me)!==0&&(ve!=null&&te(ve),Me!=null&&te(Me))})}g.indexes.forEach(E)}function zg(p,g,C){if(C.numFailures===0)return g;if(g.type==="deleteRange")return null;var x=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;if(C.numFailures===x)return null;var E=i({},g);return l(E.keys)&&(E.keys=E.keys.filter(function(D,$){return!($ in C.failures)})),"values"in E&&l(E.values)&&(E.values=E.values.filter(function(D,$){return!($ in C.failures)})),E}function e_(p,g){return g.lower===void 0?!0:g.lowerOpen?kt(p,g.lower)>0:kt(p,g.lower)>=0}function t_(p,g){return g.upper===void 0?!0:g.upperOpen?kt(p,g.upper)<0:kt(p,g.upper)<=0}function Nd(p,g){return e_(p,g)&&t_(p,g)}function Wg(p,g,C,x,E,D){if(!C||C.length===0)return p;var $=g.query.index,Z=$.multiEntry,te=g.query.range,he=x.schema.primaryKey,Re=he.extractKey,ve=$.extractKey,Me=($.lowLevelIndex||$).extractKey,$e=C.reduce(function(Ce,Pe){var Ae=Ce,Ge=[];if(Pe.type==="add"||Pe.type==="put")for(var Be=new So,He=Pe.values.length-1;He>=0;--He){var ze=Pe.values[He],Oe=Re(ze);if(!Be.hasKey(Oe)){var qe=ve(ze);(Z&&l(qe)?qe.some(function(st){return Nd(st,te)}):Nd(qe,te))&&(Be.addKey(Oe),Ge.push(ze))}}switch(Pe.type){case"add":{var ot=new So().addKeys(g.values?Ce.map(function(st){return Re(st)}):Ce);Ae=Ce.concat(g.values?Ge.filter(function(st){var _t=Re(st);return ot.hasKey(_t)?!1:(ot.addKey(_t),!0)}):Ge.map(function(st){return Re(st)}).filter(function(st){return ot.hasKey(st)?!1:(ot.addKey(st),!0)}));break}case"put":{var et=new So().addKeys(Pe.values.map(function(st){return Re(st)}));Ae=Ce.filter(function(st){return!et.hasKey(g.values?Re(st):st)}).concat(g.values?Ge:Ge.map(function(st){return Re(st)}));break}case"delete":var ft=new So().addKeys(Pe.keys);Ae=Ce.filter(function(st){return!ft.hasKey(g.values?Re(st):st)});break;case"deleteRange":var Et=Pe.range;Ae=Ce.filter(function(st){return!Nd(Re(st),Et)});break}return Ae},p);return $e===p?p:($e.sort(function(Ce,Pe){return kt(Me(Ce),Me(Pe))||kt(Re(Ce),Re(Pe))}),g.limit&&g.limit<1/0&&($e.length>g.limit?$e.length=g.limit:p.length===g.limit&&$e.length<g.limit&&(E.dirty=!0)),D?Object.freeze($e):$e)}function Ug(p,g){return kt(p.lower,g.lower)===0&&kt(p.upper,g.upper)===0&&!!p.lowerOpen==!!g.lowerOpen&&!!p.upperOpen==!!g.upperOpen}function o_(p,g,C,x){if(p===void 0)return g!==void 0?-1:0;if(g===void 0)return 1;var E=kt(p,g);if(E===0){if(C&&x)return 0;if(C)return 1;if(x)return-1}return E}function n_(p,g,C,x){if(p===void 0)return g!==void 0?1:0;if(g===void 0)return-1;var E=kt(p,g);if(E===0){if(C&&x)return 0;if(C)return-1;if(x)return 1}return E}function i_(p,g){return o_(p.lower,g.lower,p.lowerOpen,g.lowerOpen)<=0&&n_(p.upper,g.upper,p.upperOpen,g.upperOpen)>=0}function s_(p,g,C,x){var E=is["idb://".concat(p,"/").concat(g)];if(!E)return[];var D=E.queries[C];if(!D)return[null,!1,E,null];var $=x.query?x.query.index.name:null,Z=D[$||""];if(!Z)return[null,!1,E,null];switch(C){case"query":var te=Z.find(function(ve){return ve.req.limit===x.limit&&ve.req.values===x.values&&Ug(ve.req.query.range,x.query.range)});if(te)return[te,!0,E,Z];var he=Z.find(function(ve){var Me="limit"in ve.req?ve.req.limit:1/0;return Me>=x.limit&&(x.values?ve.req.values:!0)&&i_(ve.req.query.range,x.query.range)});return[he,!1,E,Z];case"count":var Re=Z.find(function(ve){return Ug(ve.req.query.range,x.query.range)});return[Re,!!Re,E,Z]}}function r_(p,g,C,x){p.subscribers.add(C),x.addEventListener("abort",function(){p.subscribers.delete(C),p.subscribers.size===0&&a_(p,g)})}function a_(p,g){setTimeout(function(){p.subscribers.size===0&&Ee(g,p)},3e3)}var l_={stack:"dbcore",level:0,name:"Cache",create:function(p){var g=p.schema.name,C=i(i({},p),{transaction:function(x,E,D){var $=p.transaction(x,E,D);if(E==="readwrite"){var Z=new AbortController,te=Z.signal,he=function(Re){return function(){if(Z.abort(),E==="readwrite"){for(var ve=new Set,Me=0,$e=x;Me<$e.length;Me++){var Ce=$e[Me],Pe=is["idb://".concat(g,"/").concat(Ce)];if(Pe){var Ae=p.table(Ce),Ge=Pe.optimisticOps.filter(function(It){return It.trans===$});if($._explicit&&Re&&$.mutatedParts)for(var Be=0,He=Object.values(Pe.queries.query);Be<He.length;Be++)for(var ze=He[Be],Oe=0,qe=ze.slice();Oe<qe.length;Oe++){var ot=qe[Oe];kd(ot.obsSet,$.mutatedParts)&&(Ee(ze,ot),ot.subscribers.forEach(function(It){return ve.add(It)}))}else if(Ge.length>0){Pe.optimisticOps=Pe.optimisticOps.filter(function(It){return It.trans!==$});for(var et=0,ft=Object.values(Pe.queries.query);et<ft.length;et++)for(var ze=ft[et],Et=0,st=ze.slice();Et<st.length;Et++){var ot=st[Et];if(ot.res!=null&&$.mutatedParts)if(Re&&!ot.dirty){var _t=Object.isFrozen(ot.res),gt=Wg(ot.res,ot.req,Ge,Ae,ot,_t);ot.dirty?(Ee(ze,ot),ot.subscribers.forEach(function(io){return ve.add(io)})):gt!==ot.res&&(ot.res=gt,ot.promise=tt.resolve({result:gt}))}else ot.dirty&&Ee(ze,ot),ot.subscribers.forEach(function(io){return ve.add(io)})}}}}ve.forEach(function(It){return It()})}}};$.addEventListener("abort",he(!1),{signal:te}),$.addEventListener("error",he(!1),{signal:te}),$.addEventListener("complete",he(!0),{signal:te})}return $},table:function(x){var E=p.table(x),D=E.schema.primaryKey,$=i(i({},E),{mutate:function(Z){var te=ct.trans;if(D.outbound||te.db._options.cache==="disabled"||te.explicit||te.idbtrans.mode!=="readwrite")return E.mutate(Z);var he=is["idb://".concat(g,"/").concat(x)];if(!he)return E.mutate(Z);var Re=E.mutate(Z);return(Z.type==="add"||Z.type==="put")&&(Z.values.length>=50||Bd(D,Z).some(function(ve){return ve==null}))?Re.then(function(ve){var Me=i(i({},Z),{values:Z.values.map(function(Ce,Pe){var Ae;if(ve.failures[Pe])return Ce;var Ge=!((Ae=D.keyPath)===null||Ae===void 0)&&Ae.includes(".")?le(Ce):i({},Ce);return O(Ge,D.keyPath,ve.results[Pe]),Ge})}),$e=zg(he,Me,ve);he.optimisticOps.push($e),queueMicrotask(function(){return Z.mutatedParts&&Xl(Z.mutatedParts)})}):(he.optimisticOps.push(Z),Z.mutatedParts&&Xl(Z.mutatedParts),Re.then(function(ve){if(ve.numFailures>0){Ee(he.optimisticOps,Z);var Me=zg(he,Z,ve);Me&&he.optimisticOps.push(Me),Z.mutatedParts&&Xl(Z.mutatedParts)}}),Re.catch(function(){Ee(he.optimisticOps,Z),Z.mutatedParts&&Xl(Z.mutatedParts)})),Re},query:function(Z){var te;if(!Gg(ct,E)||!Vg("query",Z))return E.query(Z);var he=((te=ct.trans)===null||te===void 0?void 0:te.db._options.cache)==="immutable",Re=ct,ve=Re.requery,Me=Re.signal,$e=s_(g,x,"query",Z),Ce=$e[0],Pe=$e[1],Ae=$e[2],Ge=$e[3];if(Ce&&Pe)Ce.obsSet=Z.obsSet;else{var Be=E.query(Z).then(function(He){var ze=He.result;if(Ce&&(Ce.res=ze),he){for(var Oe=0,qe=ze.length;Oe<qe;++Oe)Object.freeze(ze[Oe]);Object.freeze(ze)}else He.result=le(ze);return He}).catch(function(He){return Ge&&Ce&&Ee(Ge,Ce),Promise.reject(He)});Ce={obsSet:Z.obsSet,promise:Be,subscribers:new Set,type:"query",req:Z,dirty:!1},Ge?Ge.push(Ce):(Ge=[Ce],Ae||(Ae=is["idb://".concat(g,"/").concat(x)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),Ae.queries.query[Z.query.index.name||""]=Ge)}return r_(Ce,Ge,ve,Me),Ce.promise.then(function(He){return{result:Wg(He.result,Z,Ae==null?void 0:Ae.optimisticOps,E,Ce,he)}})}});return $}});return C}};function tc(p,g){return new Proxy(p,{get:function(C,x,E){return x==="db"?g:Reflect.get(C,x,E)}})}var Zn=function(){function p(g,C){var x=this;this._middlewares={},this.verno=0;var E=p.dependencies;this._options=C=i({addons:p.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},C),this._deps={indexedDB:C.indexedDB,IDBKeyRange:C.IDBKeyRange};var D=C.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var $={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:V,dbReadyPromise:null,cancelOpen:V,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:C.autoOpen};$.dbReadyPromise=new tt(function(te){$.dbReadyResolve=te}),$.openCanceller=new tt(function(te,he){$.cancelOpen=he}),this._state=$,this.name=g,this.on=Xr(this,"populate","blocked","versionchange","close",{ready:[Ot,V]}),this.on.ready.subscribe=I(this.on.ready.subscribe,function(te){return function(he,Re){p.vip(function(){var ve=x._state;if(ve.openComplete)ve.dbOpenError||tt.resolve().then(he),Re&&te(he);else if(ve.onReadyBeingFired)ve.onReadyBeingFired.push(he),Re&&te(he);else{te(he);var Me=x;Re||te(function $e(){Me.on.ready.unsubscribe(he),Me.on.ready.unsubscribe($e)})}})}}),this.Collection=mR(this),this.Table=fR(this),this.Transaction=RR(this),this.Version=GR(this),this.WhereClause=SR(this),this.on("versionchange",function(te){te.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(x.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(x.name,"'. Closing db now to resume the delete request.")),x.close({disableAutoOpen:!1})}),this.on("blocked",function(te){!te.newVersion||te.newVersion<te.oldVersion?console.warn("Dexie.delete('".concat(x.name,"') was blocked")):console.warn("Upgrade '".concat(x.name,"' blocked by other connection holding version ").concat(te.oldVersion/10))}),this._maxKey=ia(C.IDBKeyRange),this._createTransaction=function(te,he,Re,ve){return new x.Transaction(te,he,Re,x._options.chromeTransactionDurability,ve)},this._fireOnBlocked=function(te){x.on("blocked").fire(te),Js.filter(function(he){return he.name===x.name&&he!==x&&!he._state.vcFired}).map(function(he){return he.on("versionchange").fire(te)})},this.use(JR),this.use(l_),this.use(ZR),this.use(qR),this.use(QR);var Z=new Proxy(this,{get:function(te,he,Re){if(he==="_vip")return!0;if(he==="table")return function(Me){return tc(x.table(Me),Z)};var ve=Reflect.get(te,he,Re);return ve instanceof _g?tc(ve,Z):he==="tables"?ve.map(function(Me){return tc(Me,Z)}):he==="_createTransaction"?function(){var Me=ve.apply(this,arguments);return tc(Me,Z)}:ve}});this.vip=Z,D.forEach(function(te){return te(x)})}return p.prototype.version=function(g){if(isNaN(g)||g<.1)throw new G.Type("Given version is not a positive number");if(g=Math.round(g*10)/10,this.idbdb||this._state.isBeingOpened)throw new G.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,g);var C=this._versions,x=C.filter(function(E){return E._cfg.version===g})[0];return x||(x=new this.Version(g),C.push(x),C.sort(kR),x.stores({}),this._state.autoSchema=!1,x)},p.prototype._whenReady=function(g){var C=this;return this.idbdb&&(this._state.openComplete||ct.letThrough||this._vip)?g():new tt(function(x,E){if(C._state.openComplete)return E(new G.DatabaseClosed(C._state.dbOpenError));if(!C._state.isBeingOpened){if(!C._state.autoOpen){E(new G.DatabaseClosed);return}C.open().catch(V)}C._state.dbReadyPromise.then(x,E)}).then(g)},p.prototype.use=function(g){var C=g.stack,x=g.create,E=g.level,D=g.name;D&&this.unuse({stack:C,name:D});var $=this._middlewares[C]||(this._middlewares[C]=[]);return $.push({stack:C,create:x,level:E??10,name:D}),$.sort(function(Z,te){return Z.level-te.level}),this},p.prototype.unuse=function(g){var C=g.stack,x=g.name,E=g.create;return C&&this._middlewares[C]&&(this._middlewares[C]=this._middlewares[C].filter(function(D){return E?D.create!==E:x?D.name!==x:!1})),this},p.prototype.open=function(){var g=this;return ts(Uo,function(){return $R(g)})},p.prototype._close=function(){var g=this._state,C=Js.indexOf(this);if(C>=0&&Js.splice(C,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}g.isBeingOpened||(g.dbReadyPromise=new tt(function(x){g.dbReadyResolve=x}),g.openCanceller=new tt(function(x,E){g.cancelOpen=E}))},p.prototype.close=function(g){var C=g===void 0?{disableAutoOpen:!0}:g,x=C.disableAutoOpen,E=this._state;x?(E.isBeingOpened&&E.cancelOpen(new G.DatabaseClosed),this._close(),E.autoOpen=!1,E.dbOpenError=new G.DatabaseClosed):(this._close(),E.autoOpen=this._options.autoOpen||E.isBeingOpened,E.openComplete=!1,E.dbOpenError=null)},p.prototype.delete=function(g){var C=this;g===void 0&&(g={disableAutoOpen:!0});var x=arguments.length>0&&typeof arguments[0]!="object",E=this._state;return new tt(function(D,$){var Z=function(){C.close(g);var te=C._deps.indexedDB.deleteDatabase(C.name);te.onsuccess=Zt(function(){WR(C._deps,C.name),D()}),te.onerror=En($),te.onblocked=C._fireOnBlocked};if(x)throw new G.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(Z):Z()})},p.prototype.backendDB=function(){return this.idbdb},p.prototype.isOpen=function(){return this.idbdb!==null},p.prototype.hasBeenClosed=function(){var g=this._state.dbOpenError;return g&&g.name==="DatabaseClosed"},p.prototype.hasFailed=function(){return this._state.dbOpenError!==null},p.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(p.prototype,"tables",{get:function(){var g=this;return a(this._allTables).map(function(C){return g._allTables[C]})},enumerable:!1,configurable:!0}),p.prototype.transaction=function(){var g=jR.apply(this,arguments);return this._transaction.apply(this,g)},p.prototype._transaction=function(g,C,x){var E=this,D=ct.trans;(!D||D.db!==this||g.indexOf("!")!==-1)&&(D=null);var $=g.indexOf("?")!==-1;g=g.replace("!","").replace("?","");var Z,te;try{if(te=C.map(function(Re){var ve=Re instanceof E.Table?Re.name:Re;if(typeof ve!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ve}),g=="r"||g===pd)Z=pd;else if(g=="rw"||g==gd)Z=gd;else throw new G.InvalidArgument("Invalid transaction mode: "+g);if(D){if(D.mode===pd&&Z===gd)if($)D=null;else throw new G.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");D&&te.forEach(function(Re){if(D&&D.storeNames.indexOf(Re)===-1)if($)D=null;else throw new G.SubTransaction("Table "+Re+" not included in parent transaction.")}),$&&D&&!D.active&&(D=null)}}catch(Re){return D?D._promise(null,function(ve,Me){Me(Re)}):ao(Re)}var he=Ng.bind(null,this,Z,te,D,x);return D?D._promise(Z,he,"lock"):ct.trans?ts(ct.transless,function(){return E._whenReady(he)}):this._whenReady(he)},p.prototype.table=function(g){if(!h(this._allTables,g))throw new G.InvalidTable("Table ".concat(g," does not exist"));return this._allTables[g]},p}(),c_=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",u_=function(){function p(g){this._subscribe=g}return p.prototype.subscribe=function(g,C,x){return this._subscribe(!g||typeof g=="function"?{next:g,error:C,complete:x}:g)},p.prototype[c_]=function(){return this},p}(),oc;try{oc={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch{oc={indexedDB:null,IDBKeyRange:null}}function $g(p){var g=!1,C,x=new u_(function(E){var D=ae(p);function $(Ge){var Be=qs();try{D&&Ys();var He=_i(p,Ge);return D&&(He=He.finally(Ei)),He}finally{Be&&Qs()}}var Z=!1,te,he={},Re={},ve={get closed(){return Z},unsubscribe:function(){Z||(Z=!0,te&&te.abort(),Me&&Di.storagemutated.unsubscribe(Pe))}};E.start&&E.start(ve);var Me=!1,$e=function(){return dd(Ae)};function Ce(){return kd(Re,he)}var Pe=function(Ge){Zl(he,Ge),Ce()&&$e()},Ae=function(){if(!(Z||!oc.indexedDB)){he={};var Ge={};te&&te.abort(),te=new AbortController;var Be={subscr:Ge,signal:te.signal,requery:$e,querier:p,trans:null},He=$(Be);Promise.resolve(He).then(function(ze){g=!0,C=ze,!(Z||Be.signal.aborted)&&(he={},Re=Ge,!ce(Re)&&!Me&&(Di(na,Pe),Me=!0),dd(function(){return!Z&&E.next&&E.next(ze)}))},function(ze){g=!1,["DatabaseClosedError","AbortError"].includes(ze==null?void 0:ze.name)||Z||dd(function(){Z||E.error&&E.error(ze)})})}};return setTimeout($e,0),ve});return x.hasValue=function(){return g},x.getValue=function(){return C},x}var ss=Zn;f(ss,i(i({},B),{delete:function(p){var g=new ss(p,{addons:[]});return g.delete()},exists:function(p){return new ss(p,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(p){try{return VR(ss.dependencies).then(p)}catch{return ao(new G.MissingAPI)}},defineClass:function(){function p(g){c(this,g)}return p},ignoreTransaction:function(p){return ct.trans?ts(ct.transless,p):p()},vip:Fd,async:function(p){return function(){try{var g=Od(p.apply(this,arguments));return!g||typeof g.then!="function"?tt.resolve(g):g}catch(C){return ao(C)}}},spawn:function(p,g,C){try{var x=Od(p.apply(C,g||[]));return!x||typeof x.then!="function"?tt.resolve(x):x}catch(E){return ao(E)}},currentTransaction:{get:function(){return ct.trans||null}},waitFor:function(p,g){var C=tt.resolve(typeof p=="function"?ss.ignoreTransaction(p):p).timeout(g||6e4);return ct.trans?ct.trans.waitFor(C):C},Promise:tt,debug:{get:function(){return lt},set:function(p){oo(p)}},derive:b,extend:c,props:f,override:I,Events:Xr,on:Di,liveQuery:$g,extendObservabilitySet:Zl,getByKeyPath:K,setByKeyPath:O,delByKeyPath:ie,shallowClone:N,deepClone:le,getObjectDiff:Ld,cmp:kt,asap:z,minKey:fd,addons:[],connections:Js,errnames:k,dependencies:oc,cache:is,semVer:Cg,version:Cg.split(".").map(function(p){return parseInt(p)}).reduce(function(p,g,C){return p+g/Math.pow(10,C*2)})})),ss.maxKey=ia(ss.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Di(na,function(p){if(!Ti){var g;g=new CustomEvent(Cd,{detail:p}),Ti=!0,dispatchEvent(g),Ti=!1}}),addEventListener(Cd,function(p){var g=p.detail;Ti||Hd(g)}));function Hd(p){var g=Ti;try{Ti=!0,Di.storagemutated.fire(p),Md(p,!0)}finally{Ti=g}}var Ti=!1,ki,Gd=function(){};typeof BroadcastChannel<"u"&&(Gd=function(){ki=new BroadcastChannel(Cd),ki.onmessage=function(p){return p.data&&Hd(p.data)}},Gd(),typeof ki.unref=="function"&&ki.unref(),Di(na,function(p){Ti||ki.postMessage(p)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(p){if(!Zn.disableBfCache&&p.persisted){lt&&console.debug("Dexie: handling persisted pagehide"),ki==null||ki.close();for(var g=0,C=Js;g<C.length;g++){var x=C[g];x.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(p){!Zn.disableBfCache&&p.persisted&&(lt&&console.debug("Dexie: handling persisted pageshow"),Gd(),Hd({all:new So(-1/0,[[]])}))}));function d_(p){return new ta({add:p})}function h_(p){return new ta({remove:p})}function f_(p,g){return new ta({replacePrefix:[p,g]})}tt.rejectionMapper=P,oo(lt);var p_=Object.freeze({__proto__:null,Dexie:Zn,liveQuery:$g,Entity:Sg,cmp:kt,PropModification:ta,replacePrefix:f_,add:d_,remove:h_,default:Zn,RangeSet:So,mergeRanges:aa,rangesOverlap:Mg});return i(Zn,p_,{default:Zn}),Zn})})(qx);var XW=qx.exports;const jf=Kx(XW),pC=Symbol.for("Dexie"),Au=globalThis[pC]||(globalThis[pC]=jf);if(jf.semVer!==Au.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${jf.semVer} and ${Au.semVer}`);const{liveQuery:eX,mergeRanges:tX,rangesOverlap:oX,RangeSet:nX,cmp:iX,Entity:sX,PropModification:rX,replacePrefix:aX,add:lX,remove:cX}=Au;function gC(e){if(!e)throw new Error("Job data is required");const t=["job_id","order_id","job_type","external_job_id","contractor_fleet_carrier","job_name","subcontractor_jobId","job_cost","payout_tickets","start_date","due_date","completed_date","status","created_at","updated_at","invalidated_at","invalidated_reason"],o={};return t.forEach(n=>{if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];switch(n){case"job_cost":case"payout_tickets":o[n]=typeof i=="number"?i:0;break;case"start_date":case"due_date":case"completed_date":case"created_at":case"updated_at":case"invalidated_at":o[n]=typeof i=="string"?i:null;break;case"status":o[n]=typeof i=="string"?i:"pending";break;case"invalidated_reason":o[n]=typeof i=="string"?i:null;break;default:o[n]=typeof i=="string"?i:String(i||"")}}}),o}function e6(e){if(!e)throw new Error("Order data is required");const t=["order_id","system_name","client_name","created_at","status","order_value","start_date","due_date","end_date","system_distance_from_sol","external_order_id","updated_at"],o={};return t.forEach(n=>{if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];switch(n){case"order_value":case"system_distance_from_sol":o[n]=typeof i=="number"?i:0;break;case"start_date":case"due_date":case"end_date":case"created_at":case"updated_at":o[n]=typeof i=="string"?i:null;break;case"status":o[n]=typeof i=="string"?i:"pending";break;default:o[n]=typeof i=="string"?i:String(i||"")}}}),o}function t6(e){if(!e)throw new Error("Site data is required");const t=["order_id","site_id","site_name","type","planet_name","planet_index"],o={};return t.forEach(n=>{if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];o[n]=typeof i=="string"?i:String(i||"")}}),o}class o6{constructor(){this.BASE_RATES={fac:8e4,gaia:8e4,"small batch":1e5,other:1e5,contractor:8e4,subcontractor:8e4,orbital:8e4,ground:8e4},this.DEFAULT_RATE=8e4,this.PLANETARY_BONUS_PERCENTAGE=.1,this.DISTANCE_BONUS_PER_500LY=.1}getBaseRate(t){return this.BASE_RATES[t]||this.DEFAULT_RATE}calculateJobCost(t,o,n=0){if(!t.commodities||!Array.isArray(t.commodities))return{totalCost:0,baseCost:0,planetaryBonus:0,distanceBonus:0,breakdown:[],summary:{totalTonnage:0,planetarySites:0,orbitalSites:0}};const i=new Map;o.forEach(f=>{i.set(f.site_id,f)});let s=0,r=0,a=0,l=0;const c=[],u={totalTonnage:0,planetarySites:0,orbitalSites:0},d=this.calculateDistanceBonus(n),h=this.getBaseRate(t.job_type);return t.commodities.forEach(f=>{const v=i.get(f.site_id),m=v?v.type:"unknown",b=f.quantity||0,S=b*h;r+=S;let R=0,_=0;m==="planet"?(R=S*this.PLANETARY_BONUS_PERCENTAGE,a+=R,u.planetarySites+=b):u.orbitalSites+=b,_=S*d,l+=_;const M=S+R+_;s+=M,c.push({commodity_type:f.commodity_type,site_id:f.site_id,site_name:v?v.site_name:"Unknown Site",site_type:m,quantity:b,base_cost:S,planetary_bonus:R,distance_bonus:_,total_cost:M}),u.totalTonnage+=b}),{totalCost:Math.round(s),baseCost:Math.round(r),planetaryBonus:Math.round(a),distanceBonus:Math.round(l),breakdown:c,summary:u,distanceBonusPercentage:d,jobType:t.job_type,baseRatePerTon:h}}calculateDistanceBonus(t){if(!t||t<=0)return 0;const o=Math.floor(t/500)*this.DISTANCE_BONUS_PER_500LY;return Math.min(o,2)}calculateCommodityCost(t,o,n=0,i="contractor"){const s=t.quantity||0,r=o?o.type:"unknown",a=this.getBaseRate(i),l=s*a,c=this.calculateDistanceBonus(n),u=r==="planet"?l*this.PLANETARY_BONUS_PERCENTAGE:0,d=l*c,h=l+u+d;return{baseCost:Math.round(l),planetaryBonus:Math.round(u),distanceBonus:Math.round(d),totalCost:Math.round(h),distanceBonusPercentage:c}}formatCostBreakdown(t){const{totalCost:o,baseCost:n,planetaryBonus:i,distanceBonus:s,summary:r,distanceBonusPercentage:a}=t;let l=`Job Cost Breakdown:
`;l+=`Total Cost: ${o.toLocaleString()} Cr
`;const c=this.getBaseRate(t.jobType||"contractor");return l+=`Base Cost (${r.totalTonnage}t @ ${(c/1e3).toFixed(0)}k/t): ${n.toLocaleString()} Cr
`,i>0&&(l+=`Planetary Bonus (${r.planetarySites}t @ +10%): ${i.toLocaleString()} Cr
`),s>0&&(l+=`Distance Bonus (${(a*100).toFixed(1)}%): ${s.toLocaleString()} Cr
`),l+=`
Summary:
`,l+=`Total Tonnage: ${r.totalTonnage}t
`,l+=`Planetary Sites: ${r.planetarySites}t
`,l+=`Orbital Sites: ${r.orbitalSites}t
`,l}getCostSummary(t){const{totalCost:o,baseCost:n,planetaryBonus:i,distanceBonus:s,summary:r}=t;return{totalCost:o,baseCost:n,planetaryBonus:i,distanceBonus:s,totalTonnage:r.totalTonnage,hasPlanetaryBonus:i>0,hasDistanceBonus:s>0,costPerTon:r.totalTonnage>0?Math.round(o/r.totalTonnage):0}}}const Cc=new o6,Jr=new Au("LedgerDB"),Mt={ORDER_PLACED:"ORDER_PLACED",ORDER_CANCELLED:"ORDER_CANCELLED",ALLOCATED_TO_JOB:"ALLOCATED_TO_JOB",JOB_CANCELLED:"JOB_CANCELLED",LOADED:"LOADED",IN_TRANSIT:"IN_TRANSIT",DELIVERED:"DELIVERED",LOST:"LOST",RECONCILE_DELIVERY:"RECONCILE_DELIVERY",ADJUSTMENT:"ADJUSTMENT"},n6={[Mt.ORDER_PLACED]:{required:["order_id"],optional:["site_id"],forbidden:["job_id"]},[Mt.ALLOCATED_TO_JOB]:{required:["order_id","job_id"],optional:["site_id"]},[Mt.DELIVERED]:{required:["job_id"],optional:["order_id","site_id"]},[Mt.RECONCILE_DELIVERY]:{required:["job_id"],optional:["order_id","site_id"]},[Mt.ADJUSTMENT]:{required:[],optional:["order_id","job_id","site_id"]},[Mt.LOST]:{required:["job_id"],optional:["order_id","site_id"]},[Mt.IN_TRANSIT]:{required:["job_id"],optional:["order_id","site_id"]},[Mt.LOADED]:{required:["job_id"],optional:["order_id","site_id"]}},i6=()=>{const e=new Date,t=e.getFullYear().toString().slice(-2),o=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),i=Math.random().toString(36).substring(2,8).toUpperCase();return`ORD-${t}${o}${n}-${i}`},s6=()=>{const e=new Date,t=e.getFullYear().toString().slice(-2),o=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),i=Math.random().toString(36).substring(2,8).toUpperCase();return`JOB-${t}${o}${n}-${i}`};Jr.version(3).stores({orders:"++id, order_id, system_name, client_name, created_at, status, order_value, start_date, due_date, end_date, system_distance_from_sol, external_order_id, [order_id]",sites:"++id, order_id, site_id, site_name, type, [order_id], [order_id+site_id]",jobs:"++id, job_id, order_id, job_type, status, created_at, [job_id], [order_id]",ledger:"&entry_id, order_id, job_id, commodity_type, action_type, quantity, timestamp, [order_id+commodity_type], [job_id+commodity_type], [job_id+action_type], [job_id+commodity_type+action_type], [order_id+action_type]"});Jr.version(4).stores({orders:"++id, order_id, system_name, client_name, created_at, status, order_value, start_date, due_date, end_date, system_distance_from_sol, external_order_id, [order_id]",sites:"++id, order_id, site_id, site_name, type, [order_id], [order_id+site_id]",jobs:"++id, job_id, order_id, job_type, status, created_at, [job_id], [order_id]",ledger:"&entry_id, order_id, job_id, commodity_type, action_type, quantity, timestamp, site_id, [order_id+commodity_type], [job_id+commodity_type], [job_id+action_type], [job_id+commodity_type+action_type], [order_id+action_type]"});Jr.version(5).stores({orders:"++id, order_id, system_name, client_name, created_at, status, order_value, start_date, due_date, end_date, system_distance_from_sol, external_order_id, [order_id]",sites:"++id, order_id, site_id, site_name, type, [order_id], [order_id+site_id]",jobs:"++id, job_id, order_id, job_type, status, created_at, [job_id], [order_id]",ledger:"&entry_id, order_id, job_id, commodity_type, action_type, quantity, timestamp, site_id, [order_id+commodity_type], [job_id+commodity_type], [job_id+action_type], [job_id+commodity_type+action_type], [order_id+action_type]",processedEvents:"&event_id, timestamp, event_type, market_id, station_name, commander, processed_at, file_name, line_number, [timestamp+event_type], [market_id+timestamp]"});Jr.version(6).stores({orders:"++id, order_id, system_name, client_name, created_at, status, order_value, start_date, due_date, end_date, system_distance_from_sol, external_order_id, [order_id]",sites:"++id, order_id, site_id, site_name, type, planet_name, planet_index, [order_id], [order_id+site_id]",jobs:"++id, job_id, order_id, job_type, status, created_at, [job_id], [order_id]",ledger:"&entry_id, order_id, job_id, commodity_type, action_type, quantity, timestamp, site_id, [order_id+commodity_type], [job_id+commodity_type], [job_id+action_type], [job_id+commodity_type+action_type], [order_id+action_type]",processedEvents:"&event_id, timestamp, event_type, market_id, station_name, commander, processed_at, file_name, line_number, [timestamp+event_type], [market_id+timestamp]"});Jr.version(7).stores({orders:"++id, order_id, system_name, client_name, created_at, status, order_value, start_date, due_date, end_date, system_distance_from_sol, external_order_id, [order_id]",sites:"++id, order_id, site_id, site_name, type, planet_name, planet_index, [order_id], [order_id+site_id]",jobs:"++id, job_id, order_id, job_type, job_name, status, created_at, [job_id], [order_id]",ledger:"&entry_id, order_id, job_id, commodity_type, action_type, quantity, timestamp, site_id, [order_id+commodity_type], [job_id+commodity_type], [job_id+action_type], [job_id+commodity_type+action_type], [order_id+action_type]",processedEvents:"&event_id, timestamp, event_type, market_id, station_name, commander, processed_at, file_name, line_number, [timestamp+event_type], [market_id+timestamp]"});class Kf{constructor(t=!1){this.db=Jr,this.debug=t}debugLog(...t){this.debug&&console.log(...t)}isGroundMaterial(t){return["CMM Composite","Ceramic Composites"].includes(t)}isSmallBatchMaterial(t){const o=["Steel","Titanium","Aluminium","Copper"],n=["Liquid oxygen"];return!this.isGroundMaterial(t)&&!o.includes(t)&&!n.includes(t)}createSubcontractingJobs(t,o){const n=[];if(!o||!Array.isArray(o))return this.debugLog("createSubcontractingJobs: availableCommodities is not a valid array:",o),n;if(o.length===0)return this.debugLog("createSubcontractingJobs: No available commodities provided"),n;const a=o.reduce((m,b)=>m+b.available_quantity,0),l=Math.ceil(a/1e4),c=Math.floor(a/l);this.debugLog("🔍 [DEBUG] Starting fair bin packing with",o.length,"commodities, total:",a,"estimated jobs:",l,"fair target:",c);const u=o.map(m=>({...m,allocated_quantity:0}));for(;u.some(m=>m.available_quantity>m.allocated_quantity);){const m={commodities:[],totalQuantity:0,commodityTypes:new Set,sites:new Set},b=u.filter(I=>I.available_quantity>I.allocated_quantity),S=b.reduce((I,W)=>I+(W.available_quantity-W.allocated_quantity),0),R=Math.ceil(S/1e4),_=Math.min(1e4,Math.floor(S/R)),M=b.sort((I,W)=>W.available_quantity-W.allocated_quantity-(I.available_quantity-I.allocated_quantity));this.debugLog("🔍 [DEBUG] Processing job with",M.length,"remaining commodities, adjusted target:",_);for(const I of M){const W=I.available_quantity-I.allocated_quantity;if(W<=0)continue;const z=m.totalQuantity+W>2e4,de=m.totalQuantity+W>_;if(!z){if(de&&m.totalQuantity>=1e3){const K=Math.min(W,_-m.totalQuantity);K>0&&(m.commodities.push({...I,quantity:K}),m.totalQuantity+=K,m.commodityTypes.add(I.commodity_type),m.sites.add(I.site_id),I.allocated_quantity+=K);break}m.commodities.push({...I,quantity:W}),m.totalQuantity+=W,m.commodityTypes.add(I.commodity_type),m.sites.add(I.site_id),I.allocated_quantity=I.available_quantity}}m.commodities.length>0&&(n.push({commodities:m.commodities,totalQuantity:m.totalQuantity,commodityTypes:Array.from(m.commodityTypes),sites:Array.from(m.sites),efficiency:m.totalQuantity/1e4}),this.debugLog("🔍 [DEBUG] Created job with",m.totalQuantity,"commodities across",m.commodityTypes.size,"types and",m.sites.size,"sites","efficiency:",(m.totalQuantity/1e4*100).toFixed(1)+"%"))}const d=n.map(m=>m.totalQuantity),h=Math.min(...d);return Math.max(...d)-h>1e4*.5&&n.length>1?(this.debugLog("🔍 [DEBUG] Jobs are uneven, attempting rebalancing..."),this.rebalanceJobs(n,1e4,2e4)):(this.debugLog("🔍 [DEBUG] Fair bin packing complete. Created",n.length,"jobs"),n)}rebalanceJobs(t,o,n){this.debugLog("🔍 [DEBUG] Rebalancing jobs for better fairness...");const i=[];t.forEach(c=>{c.commodities.forEach(u=>{i.push({...u,allocated_quantity:0})})});const s=[],r=i.reduce((c,u)=>c+u.quantity,0),a=Math.ceil(r/o),l=Math.floor(r/a);i.sort((c,u)=>u.quantity-c.quantity);for(let c=0;c<a;c++){const u={commodities:[],totalQuantity:0,commodityTypes:new Set,sites:new Set};for(const d of i){if(d.allocated_quantity>=d.quantity)continue;const h=d.quantity-d.allocated_quantity,f=u.totalQuantity+h>n,v=u.totalQuantity+h>l;if(!f)if(v){const m=Math.min(h,l-u.totalQuantity);m>0&&(u.commodities.push({...d,quantity:m}),u.totalQuantity+=m,u.commodityTypes.add(d.commodity_type),u.sites.add(d.site_id),d.allocated_quantity+=m);break}else u.commodities.push({...d,quantity:h}),u.totalQuantity+=h,u.commodityTypes.add(d.commodity_type),u.sites.add(d.site_id),d.allocated_quantity=d.quantity}u.commodities.length>0&&s.push({commodities:u.commodities,totalQuantity:u.totalQuantity,commodityTypes:Array.from(u.commodityTypes),sites:Array.from(u.sites),efficiency:u.totalQuantity/o})}return this.debugLog("🔍 [DEBUG] Rebalancing complete. Created",s.length,"more balanced jobs"),s}async createGroundMaterialsSubcontractingJobs(t){this.debugLog("🔍 [DEBUG] createGroundMaterialsSubcontractingJobs called for orderId:",t);const o=await this.getAvailableCommodities(t);this.debugLog("🔍 [DEBUG] Available commodities:",o);const n=o.filter(s=>this.isGroundMaterial(s.commodity_type));if(this.debugLog("🔍 [DEBUG] Ground materials found:",n),n.length===0)return{jobs:[],message:"No ground materials available for subcontracting"};const i=this.createSubcontractingJobs(t,n);return this.debugLog("🔍 [DEBUG] Ground materials jobs created:",i),{jobs:i,message:`Created ${i.length} ground materials subcontracting jobs using bin packing algorithm`}}async createSmallBatchSubcontractingJobs(t){this.debugLog("🔍 [DEBUG] createSmallBatchSubcontractingJobs called for orderId:",t);const o=await this.getAvailableCommodities(t);this.debugLog("🔍 [DEBUG] Available commodities:",o);const n=o.filter(s=>this.isSmallBatchMaterial(s.commodity_type));if(this.debugLog("🔍 [DEBUG] Small batch materials found:",n),n.length===0)return{jobs:[],message:"No small batch materials available for subcontracting"};const i=this.createSubcontractingJobs(t,n);return this.debugLog("🔍 [DEBUG] Small batch materials jobs created:",i),{jobs:i,message:`Created ${i.length} small batch materials subcontracting jobs using bin packing algorithm`}}async createBulkOrders(t,o,n){this.debugLog("🔍 [DEBUG] createBulkOrders called for orderId:",t,"jobTypes:",o,"maxCargo:",n);const i=await this.getAvailableCommodities(t);if(this.debugLog("🔍 [DEBUG] Available commodities:",i),!i||i.length===0)return{jobs:[],message:"No available commodities found for this order"};const s=[],r=new Set;for(let a=0;a<o.length;a++){const l=o[a],c=n[a]||1e4;this.debugLog(`🔍 [DEBUG] Processing job type: ${l} with cargo limit: ${c}`);const u=i.filter(v=>!r.has(v.commodity_type+"_"+v.site_id));if(u.length===0){this.debugLog(`🔍 [DEBUG] No available commodities for job type: ${l}`);continue}let d=c;const h=[],f=u.sort((v,m)=>m.available_quantity-v.available_quantity);for(const v of f){if(d<=0)break;const m=v.commodity_type+"_"+v.site_id;if(r.has(m))continue;const b=Math.min(v.available_quantity,d);b>0&&(h.push({commodity_type:v.commodity_type,quantity:b,site_id:v.site_id,available_quantity:v.available_quantity}),d-=b,r.add(m))}if(h.length>0){const v=h.reduce((m,b)=>m+b.quantity,0);s.push({jobType:l,commodities:h,totalQuantity:v,cargoUsed:v,cargoLimit:c,efficiency:v/c*100}),this.debugLog(`🔍 [DEBUG] Created ${l} job with ${v} commodities (${(v/c*100).toFixed(1)}% cargo efficiency)`)}}return this.debugLog("🔍 [DEBUG] Bulk orders created:",s),{jobs:s,message:`Created ${s.length} bulk orders with custom job types and cargo constraints`}}async debugDatabaseState(){try{const t=await this.db.orders.toArray(),o=await this.db.jobs.toArray(),n=await this.db.ledger.toArray();return this.debugLog("Database Debug Info:"),this.debugLog("Orders:",t.length,t),this.debugLog("Jobs:",o.length,o),this.debugLog("Ledger:",n.length,n),{orders:t,jobs:o,ledger:n}}catch(t){return console.error("Debug database state error:",t),null}}async debugOrder(t){try{this.debugLog("🔍 [DEBUG] Debugging order:",t);const o=await this.db.orders.where("order_id").equals(t).first();if(this.debugLog("🔍 [DEBUG] Order found:",o),!o)return this.debugLog("🔍 [DEBUG] Order not found in database"),null;const n=await this.db.sites.where("order_id").equals(t).toArray();this.debugLog("🔍 [DEBUG] Sites for order:",n);const i=await this.db.ledger.where("order_id").equals(o.id).toArray();this.debugLog("🔍 [DEBUG] Ledger entries for order:",i);const s=await this.db.jobs.where("order_id").equals(t).toArray();return this.debugLog("🔍 [DEBUG] Jobs for order:",s),{order:o,sites:n,ledgerEntries:i,jobs:s}}catch(o){return console.error("Debug order error:",o),null}}async nukeDatabase(){try{return this.debugLog("Nuking database..."),await this.db.delete(),this.debugLog("Database nuked successfully"),!0}catch(t){return console.error("Error nuking database:",t),!1}}async createLedgerEntry(t){this.debugLog("Creating ledger entry:",t);let o=null,n=null;if(t.order_id){const s=await this.db.orders.where("order_id").equals(t.order_id).first();this.debugLog("Found order for",t.order_id,":",s),s&&(o=s.id)}if(t.job_id){const s=await this.db.jobs.where("job_id").equals(t.job_id).first();this.debugLog("Found job for",t.job_id,":",s),s&&(n=s.id)}const i={entry_id:t.entry_id,order_id:o,job_id:n,commodity_type:t.commodity_type,action_type:t.action_type,quantity:t.quantity,timestamp:t.timestamp,site_id:t.site_id,metadata:t.metadata};return this.debugLog("Final ledger entry to add:",i),this.debugLog("orderDbId:",o,"jobDbId:",n),await this.db.ledger.add(i)}async createLedgerEntryShim(t,o={}){if(this.debugLog("Creating ledger entry via shim:",{entry:t,context:o}),t.entry_id||(t.entry_id=crypto.randomUUID()),t.timestamp||(t.timestamp=new Date().toISOString()),!t.action_type)throw new Error("action_type is required for ledger entries");if(!t.commodity_type)throw new Error("commodity_type is required for ledger entries");if(t.quantity===void 0||t.quantity===null)throw new Error("quantity is required for ledger entries");this.validateDimensionsForActionType(t);const n={...t,metadata:{...t.metadata,created_at:new Date().toISOString(),context:o}};return await this.createLedgerEntry(n)}validateDimensionsForActionType(t){const{action_type:o,order_id:n,job_id:i}=t,s=n6[o];if(!s){this.debugLog(`No validation rules defined for action_type: ${o}`);return}for(const r of s.required)if(!t[r])throw new Error(`${r} is required for action_type: ${o}`);for(const r of s.forbidden||[])t[r]&&this.debugLog(`${r} should not be present for action_type: ${o}`);if(o===Mt.ADJUSTMENT&&!n&&!i)throw new Error("Either order_id or job_id is required for ADJUSTMENT entries");i&&!n&&this.debugLog("job_id is present but order_id is missing - this may cause traceability issues")}async getOrderStatus(t){var r;const o=await this.db.orders.get(t);if(!o)return null;const n=await this.db.ledger.where("order_id").equals(t).toArray(),i={},s={};for(const a of n)a.action_type==="CREATE_ORDER"?(i[a.commodity_type]=a.quantity,(r=a.metadata)!=null&&r.location&&(s[a.commodity_type]=a.metadata.location)):a.action_type==="RECORD_DELIVERY"&&(i[a.commodity_type]=(i[a.commodity_type]||0)-a.quantity);return{ordered:i,metadata:{...o,commodityLocations:s}}}async getAllOrders(){try{const t=await this.db.orders.toArray(),o={};for(const s of t)o[s.order_id]={ordered:{},metadata:{system_name:s.system_name,status:s.status,created_at:s.created_at}};const n=await this.db.ledger.where("action_type").equals("CREATE_ORDER").toArray();for(const s of n)o[s.order_id]&&(o[s.order_id].ordered[s.commodity_type]=s.quantity);const i=await this.db.ledger.where("action_type").anyOf(["RECORD_DELIVERY","LOSS_ADJUSTMENT"]).toArray();for(const s of i)o[s.order_id]&&s.action_type==="RECORD_DELIVERY"&&(o[s.order_id].ordered[s.commodity_type]=(o[s.order_id].ordered[s.commodity_type]||0)-s.quantity);return o}catch(t){return console.error("Error getting all orders:",t),{}}}async getJobsForOrder(t){return await this.db.jobs.where("order_id").equals(t).toArray()}async getJobStatus(t){const o=await this.db.jobs.get(t);if(!o)return null;const n=await this.db.ledger.where("job_id").equals(t).toArray(),i={};for(const s of n)i[s.commodity_type]||(i[s.commodity_type]={type:s.commodity_type,actions:[]}),i[s.commodity_type].actions.push({action_type:s.action_type,quantity:s.quantity,timestamp:s.timestamp,metadata:s.metadata||{},delivery_id:s.delivery_id});return{job_id:o.job_id,order_id:o.order_id,system_name:o.system_name,status:o.status,created_at:o.created_at,commodities:Object.values(i),metadata:o.metadata||{},timestamp:o.created_at}}async getDeliveriesForOrder(t){return await this.db.ledger.where(["order_id","action_type"]).equals([t,"RECORD_DELIVERY"]).toArray()}async getDeliveriesForJob(t){return await this.db.ledger.where(["job_id","action_type"]).equals([t,"RECORD_DELIVERY"]).toArray()}async recordDelivery(t,o,n){var l;const i=await this.db.jobs.where("job_id").equals(o).first();if(!i)throw new Error("Job not found");const s=i.order_id,r=new Date().toISOString(),a=await this.db.orders.where("order_id").equals(s).first();if(!a)throw new Error(`Order not found: ${s}`);for(const c of n){const u={order_id:a.order_id,job_id:i.job_id,commodity_type:c.type,action_type:"RECORD_DELIVERY",quantity:c.quantity,timestamp:r,site_id:(l=c.metadata)==null?void 0:l.site_id,metadata:{...c.metadata,delivery_id:t}};await this.createLedgerEntryShim(u,{delivery_id:t,commodity_type:c.type})}return t}async createNewOrder(t,o=null){const n=o||i6(),i=new Date().toISOString(),s={order_id:n,system_name:t.system_name,client_name:t.client_name,created_at:i,start_date:t.start_date||null,due_date:t.due_date||null,end_date:null,order_value:t.order_value||0,system_distance_from_sol:t.system_distance_from_sol||0,external_order_id:t.external_order_id||null,status:"pending"},r=e6(s);await this.db.orders.add(r);for(const a of t.sites||[]){const l={order_id:n,site_id:a.site_id,site_name:a.site_name,type:a.type},c=t6(l);await this.db.sites.add(c);for(const u of a.orderCommodities){const d={order_id:n,job_id:null,commodity_type:u.commodity_type,action_type:Mt.ORDER_PLACED,quantity:u.quantity,timestamp:i,site_id:a.site_id};await this.createLedgerEntryShim(d,{site_name:a.site_name,site_type:a.type})}}return s}async createJobFromOrder(t,o,n=null){const i=n||s6(),s=new Date().toISOString();let r=o.job_cost||0;if(!o.job_cost&&o.commodities&&o.commodities.length>0){const d=await this.db.orders.where("order_id").equals(t).first(),h=await this.db.sites.where("order_id").equals(t).toArray(),f=(d==null?void 0:d.system_distance_from_sol)||0;r=Cc.calculateJobCost({commodities:o.commodities},h,f).totalCost}const a={job_id:i,order_id:t,job_type:o.job_type,job_name:o.job_name||null,external_job_id:o.external_job_id||null,contractor_fleet_carrier:o.contractor_fleet_carrier||null,subcontractor_jobId:o.subcontractor_jobId||null,job_cost:r,start_date:o.start_date||null,due_date:o.due_date||null,completed_date:null,status:"pending",created_at:s},l=gC(a),c=await this.db.jobs.add(l),u=await this.db.orders.where("order_id").equals(t).first();if(!u)throw new Error(`Order not found: ${t}`);for(const d of o.commodities||[]){const h={order_id:u.order_id,job_id:i,commodity_type:d.commodity_type,action_type:Mt.ALLOCATED_TO_JOB,quantity:d.quantity,timestamp:s,site_id:d.site_id};await this.createLedgerEntryShim(h,{job_type:o.job_type,order_system_name:u.system_name})}return c}async recordCommodityDelivery(t,o,n,i,s={}){const r=new Date().toISOString(),a=await this.db.jobs.where("job_id").equals(o).first();if(!a)throw new Error(`Job not found: ${o}`);const l=await this.db.orders.where("order_id").equals(t).first();if(!l)throw new Error(`Order not found: ${t}`);const c={order_id:l.order_id,job_id:a.job_id,commodity_type:n,action_type:Mt.DELIVERED,quantity:i,timestamp:r,site_id:s.site_id,metadata:s};await this.createLedgerEntryShim(c,{delivery_method:s.delivery_method,carrier:s.carrier}),await this.updateJobStatusIfComplete(o)}async updateJobStatusIfComplete(t){const o=await this.db.jobs.where("job_id").equals(t).first();if(!o)return;const n=o.commodities;let i=!0;for(const s of n){const r=await this.db.ledger.where(["job_id","commodity_type","action_type"]).equals([t,s.commodity_type,Mt.DELIVERED]).sum("quantity"),a=await this.db.ledger.where(["job_id","commodity_type","action_type"]).equals([o.id,s.commodity_type,Mt.DELIVERED]).sum("quantity");if(r+a<s.quantity){i=!1;break}}i&&o.status!=="completed"&&await this.db.jobs.update(o.id,{status:"completed",completed_date:new Date().toISOString()})}async getCommodityFlowSummary(t){const o=await this.db.orders.where("order_id").equals(t).first();if(!o)return[];const n=await this.db.ledger.where("order_id").equals(o.id).toArray(),i={};return n.forEach(s=>{const r=`${s.commodity_type}_${s.action_type}`;i[r]||(i[r]={commodity_type:s.commodity_type,action_type:s.action_type,total_quantity:0,entries:[]}),i[r].total_quantity+=s.quantity,i[r].entries.push(s)}),Object.values(i)}async getDeliveryRateStats(t){this.debugLog(`🔍 [DEBUG] getDeliveryRateStats called for orderId: ${t}`),this.debugLog("🔧 [DEBUG] COMMODITY_ACTIONS constants:",Mt);const o=await this.db.orders.where("order_id").equals(t).first();if(!o)return this.debugLog(`❌ [DEBUG] Order not found for orderId: ${t}`),null;this.debugLog(`✅ [DEBUG] Found order with id: ${o.id}, order_id: ${o.order_id}`);const n=await this.db.ledger.where("order_id").equals(o.id).toArray();this.debugLog(`📊 [DEBUG] Found ${n.length} ledger entries for order ${t}`),n.forEach((s,r)=>{this.debugLog(`📝 [DEBUG] Entry ${r+1}:`,{id:s.id,commodity_type:s.commodity_type,action_type:s.action_type,quantity:s.quantity,order_id:s.order_id})});const i={};return n.forEach(s=>{switch(i[s.commodity_type]||(i[s.commodity_type]={commodity_type:s.commodity_type,ordered:0,in_jobs:0,delivered:0}),s.action_type){case Mt.ORDER_PLACED:i[s.commodity_type].ordered+=s.quantity,this.debugLog(`📦 [DEBUG] ORDER_PLACED: ${s.commodity_type} +${s.quantity} (total: ${i[s.commodity_type].ordered})`);break;case Mt.ALLOCATED_TO_JOB:i[s.commodity_type].in_jobs+=s.quantity,this.debugLog(`🚛 [DEBUG] ALLOCATED_TO_JOB: ${s.commodity_type} +${s.quantity} (total: ${i[s.commodity_type].in_jobs})`);break;case Mt.DELIVERED:case"RECORD_DELIVERY":case Mt.RECONCILE_DELIVERY:i[s.commodity_type].delivered+=s.quantity,this.debugLog(`✅ [DEBUG] DELIVERED/RECORD_DELIVERY/RECONCILE_DELIVERY: ${s.commodity_type} +${s.quantity} (total: ${i[s.commodity_type].delivered})`);break;default:this.debugLog(`❓ [DEBUG] Unknown action_type: ${s.action_type} for ${s.commodity_type}`)}}),this.debugLog("📈 [DEBUG] Final stats before percentage calculation:",i),Object.values(i).map(s=>{const r=s.ordered;if(this.debugLog(`🧮 [DEBUG] Calculating percentages for ${s.commodity_type}:`,{ordered:s.ordered,in_jobs:s.in_jobs,delivered:s.delivered,total:r}),r===0)return this.debugLog(`⚠️ [DEBUG] Total is 0 for ${s.commodity_type}, returning zero percentages`),{...s,ordered_percent:0,in_jobs_percent:0,delivered_percent:0};const a=s.delivered,l=Math.max(0,s.in_jobs-s.delivered),c=Math.max(0,s.ordered-s.in_jobs),u=Math.max(0,l+a-s.ordered),d={...s,ordered_percent:Math.round(c/r*100),in_jobs_percent:Math.round(l/r*100),delivered_percent:Math.round(a/r*100),over_allocated_percent:Math.round(u/r*100),has_over_allocation:u>0};return this.debugLog(`📊 [DEBUG] Final percentages for ${s.commodity_type}:`,{delivered_percent:d.delivered_percent,in_jobs_percent:d.in_jobs_percent,ordered_percent:d.ordered_percent,over_allocated_percent:d.over_allocated_percent,calculations:{delivered:a,in_jobs_not_delivered:l,remaining_ordered:c,over_allocated:u}}),d})}async getDeliveryRateStatsForCommodity(t,o){const n=await this.getDeliveryRateStats(t);return(n==null?void 0:n.find(i=>i.commodity_type===o))||null}async getDeliveryRateStatsForCommoditySite(t,o,n){const i=await this.db.orders.where("order_id").equals(t).first();if(!i)return this.debugLog("Order not found for orderId:",t),null;this.debugLog("Found order:",i),this.debugLog("Looking for commodity:",o,"site:",n);const s=await this.db.ledger.where("order_id").equals(i.id).toArray();this.debugLog("All ledger entries for order:",s);const r=await this.db.ledger.where("order_id").equals(i.id).and(f=>f.commodity_type===o&&f.site_id===n).toArray();this.debugLog("Filtered entries for commodity-site:",r);const a={commodity_type:o,site_id:n,ordered:0,in_jobs:0,delivered:0};r.forEach(f=>{switch(f.action_type){case Mt.ORDER_PLACED:a.ordered+=f.quantity;break;case Mt.ALLOCATED_TO_JOB:a.in_jobs+=f.quantity;break;case Mt.DELIVERED:case"RECORD_DELIVERY":case Mt.RECONCILE_DELIVERY:a.delivered+=f.quantity;break}});const l=a.ordered;if(l===0)return this.debugLog("No ledger data found for commodity-site combination, returning null"),null;const c=a.delivered,u=Math.max(0,a.in_jobs-a.delivered),d=Math.max(0,a.ordered-a.in_jobs),h=Math.max(0,u+c-a.ordered);return{...a,ordered_percent:Math.round(d/l*100),in_jobs_percent:Math.round(u/l*100),delivered_percent:Math.round(c/l*100),over_allocated_percent:Math.round(h/l*100),has_over_allocation:h>0}}async getOverallDeliveryRateStats(t){const o=await this.getDeliveryRateStats(t);if(!o||o.length===0)return{ordered:0,in_jobs:0,delivered:0,ordered_percent:0,in_jobs_percent:0,delivered_percent:0};const n=o.reduce((c,u)=>({ordered:c.ordered+u.ordered,in_jobs:c.in_jobs+u.in_jobs,delivered:c.delivered+u.delivered}),{ordered:0,in_jobs:0,delivered:0}),i=n.ordered;if(i===0)return{...n,ordered_percent:0,in_jobs_percent:0,delivered_percent:0};const s=n.delivered,r=Math.max(0,n.in_jobs-n.delivered),a=Math.max(0,n.ordered-n.in_jobs),l=Math.max(0,r+s-n.ordered);return{...n,ordered_percent:Math.round(a/i*100),in_jobs_percent:Math.round(r/i*100),delivered_percent:Math.round(s/i*100),over_allocated_percent:Math.round(l/i*100),has_over_allocation:l>0}}async getAvailableCommodities(t){this.debugLog("🔍 [DEBUG] getAvailableCommodities called for orderId:",t);const o=await this.db.orders.where("order_id").equals(t).first();if(this.debugLog("🔍 [DEBUG] Found order:",o),!o)return this.debugLog("🔍 [DEBUG] No order found, returning empty array"),[];const n=await this.db.sites.where("order_id").equals(t).toArray();this.debugLog("🔍 [DEBUG] Found sites:",n);const i=await this.db.ledger.where("order_id").equals(o.id).and(l=>l.action_type==="ORDER_PLACED").toArray();this.debugLog("🔍 [DEBUG] Found ledger entries:",i);const s=await this.db.jobs.where("order_id").equals(t).toArray();this.debugLog("🔍 [DEBUG] Found jobs:",s);const r={};for(const l of s){const c=await this.db.ledger.where(["job_id","action_type"]).equals([l.id,Mt.ALLOCATED_TO_JOB]).toArray();for(const u of c){const d=`${u.site_id}-${u.commodity_type}`;r[d]||(r[d]=0),r[d]+=u.quantity}}const a=[];for(const l of n){const c=i.filter(u=>{var d;return((d=u.metadata)==null?void 0:d.site_id)===l.site_id}).map(u=>({commodity_type:u.commodity_type,quantity:u.quantity}));for(const u of c){const d=`${l.site_id}-${u.commodity_type}`,h=r[d]||0,f=u.quantity-h;f>0&&a.push({site_id:l.site_id,site_name:l.site_name,commodity_type:u.commodity_type,total_quantity:u.quantity,allocated_quantity:h,available_quantity:f})}}return this.debugLog("🔍 [DEBUG] Final available commodities:",a),a}async updateJob(t,o){const n=await this.db.jobs.where("job_id").equals(t).first();if(!n)throw new Error(`Job with ID ${t} not found`);const i={job_type:o.job_type,contractor_fleet_carrier:o.contractor_fleet_carrier||null,subcontractor_jobId:o.subcontractor_jobId||null,job_cost:o.job_cost||0,start_date:o.start_date||null,due_date:o.due_date||null,completed_date:o.completed_date||null,status:o.status!==void 0?o.status:n.status,updated_at:new Date().toISOString()},s=gC(i);if(await this.db.jobs.update(n.id,s),o.commodities!==void 0){const a=await this.db.ledger.where(["job_id","action_type"]).equals([n.id,Mt.ALLOCATED_TO_JOB]).toArray();let l=!1;if(o.commodities.length<a.length)l=!0;else for(const c of a){const u=o.commodities.find(d=>d.commodity_type===c.commodity_type&&d.site_id===c.site_id);if(!u||u.quantity<c.quantity){l=!0;break}}if(l&&(await this.db.ledger.where("job_id").equals(n.id).delete(),o.commodities&&o.commodities.length>0))for(const c of o.commodities){const u={order_id:n.order_id,job_id:n.job_id,commodity_type:c.commodity_type,action_type:Mt.ALLOCATED_TO_JOB,quantity:c.quantity,timestamp:new Date().toISOString(),site_id:c.site_id};await this.createLedgerEntryShim(u,{operation:"update_job",job_type:n.job_type})}}return await this.db.jobs.where("job_id").equals(t).first()}async deleteJob(t){const o=await this.db.jobs.where("job_id").equals(t).first();if(!o)throw new Error(`Job with ID ${t} not found`);return await this.db.ledger.where("job_id").equals(o.id).delete(),await this.db.jobs.delete(o.id),!0}async updateOrder(t,o){console.log("🔍 [DEBUG] updateOrder called with:",{orderId:t,orderData:o});const n=await this.db.orders.where("order_id").equals(t).first();if(!n)throw new Error(`Order with ID ${t} not found`);console.log("🔍 [DEBUG] Found order in database:",n);const i={order_id:o.order_id||n.order_id,system_name:o.system_name||n.system_name,client_name:o.client_name||n.client_name,order_value:o.order_value||n.order_value,start_date:o.start_date||n.start_date,due_date:o.due_date||n.due_date,end_date:o.end_date||n.end_date,system_distance_from_sol:o.system_distance_from_sol!==void 0?o.system_distance_from_sol:n.system_distance_from_sol,external_order_id:o.external_order_id!==void 0?o.external_order_id:n.external_order_id,status:o.status!==void 0?o.status:n.status,updated_at:new Date().toISOString()};if(console.log("🔍 [DEBUG] Updating order with fields:",i),await this.db.orders.update(n.id,i),console.log("🔍 [DEBUG] Database update completed"),o.sites){const r=await this.db.sites.where("order_id").equals(t).toArray(),a=await this.db.ledger.where("order_id").equals(n.id).and(f=>f.action_type===Mt.ORDER_PLACED).toArray(),l=f=>f.map(v=>({site_id:v.site_id,site_name:v.site_name,type:v.type,commodities:v.orderCommodities?v.orderCommodities.map(m=>({commodity_type:m.commodity_type,quantity:m.quantity,site_id:m.site_id})).sort((m,b)=>`${m.commodity_type}-${m.site_id}`.localeCompare(`${b.commodity_type}-${b.site_id}`)):[]})).sort((v,m)=>v.site_id.localeCompare(m.site_id)),c=l(r.map(f=>({...f,orderCommodities:a.filter(v=>v.site_id===f.site_id).map(v=>({commodity_type:v.commodity_type,quantity:v.quantity,site_id:v.site_id}))}))),u=l(o.sites),d=(()=>{const f=new Map,v=new Map;c.forEach(m=>{m.commodities.forEach(b=>{const S=`${m.site_id}-${b.commodity_type}`;f.set(S,b.quantity)})}),u.forEach(m=>{m.commodities.forEach(b=>{const S=`${m.site_id}-${b.commodity_type}`;v.set(S,b.quantity)})});for(const[m,b]of f){const S=v.get(m);if(S===void 0||S<b)return!0}return!1})();await this.db.sites.where("order_id").equals(t).delete(),await this.db.ledger.where("order_id").equals(n.id).and(f=>f.action_type===Mt.ORDER_PLACED).delete();const h=new Date().toISOString();for(const f of o.sites){await this.db.sites.add({order_id:t,site_id:f.site_id,site_name:f.site_name,type:f.type});for(const v of f.orderCommodities){const m={order_id:t,job_id:null,commodity_type:v.commodity_type,action_type:Mt.ORDER_PLACED,quantity:v.quantity,timestamp:h,site_id:f.site_id,metadata:{site_id:f.site_id}};await this.createLedgerEntryShim(m,{operation:"update_order",site_name:f.site_name})}}if(d){const f=await this.db.jobs.where("order_id").equals(t).toArray();for(const v of f){const m={status:"invalidated",commodities:[],invalidated_at:new Date().toISOString(),invalidated_reason:"Order structure modified - commodities reduced or removed"};await this.db.jobs.update(v.id,m),await this.db.ledger.where("job_id").equals(v.id).delete()}}}return await this.db.orders.where("order_id").equals(t).first()}async deleteOrder(t){const o=await this.db.orders.where("order_id").equals(t).first();if(!o)throw new Error(`Order with ID ${t} not found`);const n=await this.db.jobs.where("order_id").equals(t).toArray();await this.db.ledger.where("order_id").equals(o.id).delete();for(const i of n)await this.db.jobs.delete(i.id);return await this.db.orders.delete(o.id),!0}async calculateJobCost(t){const o=await this.db.jobs.where("job_id").equals(t).first();if(!o)throw new Error(`Job with ID ${t} not found`);const n=await this.db.orders.where("order_id").equals(o.order_id).first(),i=await this.db.sites.where("order_id").equals(o.order_id).toArray(),s=(n==null?void 0:n.system_distance_from_sol)||0,r=o.id,l=(await this.db.ledger.where(["job_id","action_type"]).equals([r,"ALLOCATED_TO_JOB"]).toArray()).map(u=>({commodity_type:u.commodity_type,quantity:u.quantity,site_id:u.site_id})),c={...o,commodities:l};return Cc.calculateJobCost(c,i,s)}async recalculateJobCost(t){const o=await this.calculateJobCost(t),n=await this.db.jobs.where("job_id").equals(t).first();if(!n)throw new Error(`Job with ID ${t} not found`);return await this.db.jobs.update(n.id,{job_cost:o.totalCost,updated_at:new Date().toISOString()}),{job:await this.db.jobs.where("job_id").equals(t).first(),costBreakdown:o}}async getJobCostBreakdown(t){const o=await this.calculateJobCost(t);return{formatted:Cc.formatCostBreakdown(o),summary:Cc.getCostSummary(o),breakdown:o}}async getAllLedgerEntriesWithBusinessKeys(){try{const t=await this.db.ledger.orderBy("timestamp").reverse().toArray(),o=await this.db.orders.toArray(),n=await this.db.jobs.toArray(),i=new Map,s=new Map;return o.forEach(a=>{i.set(a.id,a.order_id)}),n.forEach(a=>{s.set(a.id,a.job_id)}),t.map(a=>({...a,business_order_id:a.order_id?i.get(a.order_id):null,business_job_id:a.job_id?s.get(a.job_id):null}))}catch(t){throw console.error("Error getting ledger entries with business keys:",t),t}}async getLedgerEntriesForOrderWithBusinessKeys(t){try{const o=await this.db.orders.where("order_id").equals(t).first();if(!o)return[];const n=await this.db.ledger.where("order_id").equals(o.id).orderBy("timestamp").reverse().toArray(),i=await this.db.jobs.toArray(),s=new Map;return i.forEach(a=>{s.set(a.id,a.job_id)}),n.map(a=>({...a,business_order_id:t,business_job_id:a.job_id?s.get(a.job_id):null}))}catch(o){throw console.error("Error getting ledger entries for order:",o),o}}async getLedgerEntriesForJobWithBusinessKeys(t){try{const o=await this.db.jobs.where("job_id").equals(t).first();if(!o)return[];const n=await this.db.ledger.where("job_id").equals(o.id).toArray();n.sort((r,a)=>new Date(a.timestamp)-new Date(r.timestamp));const i=await this.db.orders.where("order_id").equals(o.order_id).first();return n.map(r=>({...r,business_order_id:i?i.order_id:null,business_job_id:t}))}catch(o){throw console.error("Error getting ledger entries for job:",o),o}}async fixLedgerEntries(t){try{this.debugLog("Fixing ledger entries for order:",t);const o=await this.db.orders.where("order_id").equals(t).first();if(!o)throw new Error(`Order ${t} not found`);const n=await this.db.jobs.where("order_id").equals(t).toArray(),i=new Set(n.map(m=>m.id)),s=new Set(n.map(m=>m.job_id)),r=await this.db.sites.where("order_id").equals(t).toArray(),a=new Set(r.map(m=>m.site_id));this.debugLog("Current job database IDs:",Array.from(i)),this.debugLog("Current job business IDs:",Array.from(s)),this.debugLog("Current site business IDs:",Array.from(a));const l=await this.db.ledger.where("order_id").equals(o.id).toArray();this.debugLog("Total ledger entries:",l.length),this.debugLog("Sample ledger entries:",l.slice(0,3).map(m=>({entry_id:m.entry_id,job_id:m.job_id,site_id:m.site_id,action_type:m.action_type})));const c=l.filter(m=>{if(m.action_type===Mt.ORDER_PLACED)return!1;if(m.job_id){const b=i.has(m.job_id),S=s.has(m.job_id),R=b||S;if(this.debugLog(`Checking job ${m.job_id}: dbId=${b}, businessId=${S}, exists=${R}`),this.debugLog(`Current job DB IDs: ${Array.from(i)}`),this.debugLog(`Current job business IDs: ${Array.from(s)}`),!R)return this.debugLog(`Found orphaned job entry: ${m.entry_id} references non-existent job ${m.job_id}`),!0}return m.site_id&&!a.has(m.site_id)?(this.debugLog(`Found orphaned site entry: ${m.entry_id} references non-existent site ${m.site_id}`),!0):!1});let u=0;for(const m of c)await this.db.ledger.delete(m.entry_id),u++;const d=l.filter(m=>m.action_type===Mt.ORDER_PLACED).length,h=l.filter(m=>m.job_id).length,f=l.filter(m=>m.site_id).length,v={totalEntries:l.length,orderPlacedEntries:d,jobRelatedEntries:h,siteRelatedEntries:f,orphanedEntries:c.length,removedCount:u,remainingEntries:l.length-u};return this.debugLog("Ledger fix completed:",v),v}catch(o){throw console.error("Error fixing ledger entries:",o),o}}generateEventId(t,o,n){const i=t.timestamp||new Date().toISOString(),s=t.event||"unknown",r=t.MarketID||"unknown",a=t.Commander||"unknown",l=t.StationName||t.Body||"unknown";let c="";s==="ColonisationContribution"&&t.Contributions&&(c=JSON.stringify(t.Contributions));const u=`${i}-${s}-${r}-${a}-${l}-${o}-${n}-${c}`;let d=0;for(let m=0;m<u.length;m++){const b=u.charCodeAt(m);d=(d<<5)-d+b,d=d&d}const h=Math.abs(d).toString(16).padStart(8,"0"),f=o.split("").reduce((m,b)=>(m=(m<<5)-m+b.charCodeAt(0),m&m),0),v=Math.abs(f).toString(16).padStart(8,"0");return`${h}${v}${n.toString().padStart(6,"0")}`}async isEventProcessed(t){try{return!!await this.db.processedEvents.get(t)}catch(o){return this.debugLog("Error checking if event is processed:",o),!1}}async markEventAsProcessed(t,o,n){try{const i=this.generateEventId(t,o,n);if(await this.db.processedEvents.get(i))return this.debugLog("Event already processed:",i),i;const r={event_id:i,timestamp:t.timestamp||new Date().toISOString(),event_type:t.event||"unknown",market_id:t.MarketID||null,station_name:t.StationName||t.Body||null,commander:t.Commander||null,processed_at:new Date().toISOString(),file_name:o,line_number:n,raw_event:JSON.stringify(t)};return await this.db.processedEvents.add(r),this.debugLog("Marked event as processed:",i),i}catch(i){throw this.debugLog("Error marking event as processed:",i),i}}async markEventsAsProcessed(t){try{const o=[];for(const{event:n,fileName:i,lineNumber:s}of t){const r=await this.markEventAsProcessed(n,i,s);o.push(r)}return o}catch(o){throw this.debugLog("Error marking multiple events as processed:",o),o}}async getProcessedEvents(t={}){try{let o=this.db.processedEvents.orderBy("processed_at").reverse();return t.eventType&&(o=o.filter(n=>n.event_type===t.eventType)),t.commander&&(o=o.filter(n=>n.commander===t.commander)),t.stationName&&(o=o.filter(n=>n.station_name===t.stationName)),t.fromDate&&(o=o.filter(n=>n.timestamp>=t.fromDate)),t.toDate&&(o=o.filter(n=>n.timestamp<=t.toDate)),await o.toArray()}catch(o){throw this.debugLog("Error getting processed events:",o),o}}async invalidateProcessedEvents(t){try{let o=0;for(const n of t)await this.db.processedEvents.delete(n),o++;return this.debugLog(`Invalidated ${o} processed events`),o}catch(o){throw this.debugLog("Error invalidating processed events:",o),o}}async clearAllProcessedEvents(){try{const t=await this.db.processedEvents.count();return await this.db.processedEvents.clear(),this.debugLog(`Cleared all ${t} processed events`),t}catch(t){throw this.debugLog("Error clearing all processed events:",t),t}}}const hi=bi("order",()=>{const e=De([]),t=De([]),o=new Kf,n=async(Y,J=null)=>{try{const L=await o.createNewOrder(Y,J);return e.value.push(L),t.value.push(L),L}catch(L){throw console.error("Error creating order:",L),L}},i=async Y=>{try{const J=await o.db.orders.where("order_id").equals(Y).first();if(!J)return null;const L=await o.db.sites.where("order_id").equals(Y).toArray(),ce=await o.db.orders.where("order_id").equals(Y).first(),U=await o.db.ledger.where("order_id").equals(ce.id).and(j=>j.action_type==="ORDER_PLACED").toArray(),le=L.map(j=>{const Ee=U.filter(ne=>ne.site_id===j.site_id).map(ne=>({commodity_type:ne.commodity_type,quantity:ne.quantity}));return{site_id:j.site_id,site_name:j.site_name,type:j.type,orderCommodities:Ee}}),q=await o.db.jobs.where("order_id").equals(Y).toArray(),se=await Promise.all(q.map(async j=>{const ne=(await o.db.ledger.where(["job_id","action_type"]).equals([j.id,Mt.ALLOCATED_TO_JOB]).toArray()).map(pe=>({commodity_type:pe.commodity_type,quantity:pe.quantity,site_id:pe.site_id}));return{...j,commodities:ne}})),be={...J,sites:le,jobOrders:se},ue=e.value.findIndex(j=>j.order_id===Y);return ue!==-1?e.value[ue]=be:e.value.push(be),be}catch(J){throw console.error("Error getting order:",J),J}},s=async()=>{try{const Y=await o.db.orders.toArray(),J=await Promise.all(Y.map(async L=>{const ce=await o.db.sites.where("order_id").equals(L.order_id).toArray(),U=await o.db.ledger.where("order_id").equals(L.id).and(be=>be.action_type==="ORDER_PLACED").toArray(),le=ce.map(be=>{const ue=U.filter(j=>j.site_id===be.site_id).map(j=>({commodity_type:j.commodity_type,quantity:j.quantity}));return{site_id:be.site_id,site_name:be.site_name,type:be.type,orderCommodities:ue}}),q=await o.db.jobs.where("order_id").equals(L.order_id).toArray(),se=await Promise.all(q.map(async be=>{const j=(await o.db.ledger.where(["job_id","action_type"]).equals([be.id,Mt.ALLOCATED_TO_JOB]).toArray()).map(Ee=>({commodity_type:Ee.commodity_type,quantity:Ee.quantity,site_id:Ee.site_id}));return{...be,commodities:j}}));return{...L,sites:le,jobOrders:se}}));return e.value=J,J}catch(Y){throw console.error("Error getting all orders:",Y),Y}},r=async(Y,J,L=null)=>{try{const ce=await o.createJobFromOrder(Y,J,L),U=e.value.find(le=>le.order_id===Y);return U&&U.jobOrders.push(ce),ce}catch(ce){throw console.error("Error creating job:",ce),ce}},a=async Y=>{try{return await o.db.jobs.where("order_id").equals(Y).toArray()}catch(J){throw console.error("Error getting order jobs:",J),J}},l=async(Y,J)=>{try{await o.db.jobs.update(Y,{status:J});const L=e.value.find(ce=>ce.jobOrders.some(U=>U.job_id===Y));if(L){const ce=L.jobOrders.find(U=>U.job_id===Y);ce&&(ce.status=J)}}catch(L){throw console.error("Error updating job status:",L),L}},c=async(Y,J,L,ce,U={})=>{try{await o.recordCommodityDelivery(Y,J,L,ce,U)}catch(le){throw console.error("Error recording delivery:",le),le}},u=async Y=>{try{return await o.getCommodityFlowSummary(Y)}catch(J){throw console.error("Error getting commodity flow summary:",J),J}},d=async Y=>{try{return await o.getDeliveryRateStats(Y)}catch(J){throw console.error("Error getting delivery rate stats:",J),J}},h=async(Y,J)=>{try{return await o.getDeliveryRateStatsForCommodity(Y,J)}catch(L){throw console.error("Error getting delivery rate stats for commodity:",L),L}},f=async(Y,J,L)=>{try{console.log("Store: Getting delivery rate stats for commodity-site:",{orderId:Y,commodityType:J,siteId:L});const ce=await o.getDeliveryRateStatsForCommoditySite(Y,J,L);return console.log("Store: Result:",ce),ce}catch(ce){throw console.error("Error getting delivery rate stats for commodity-site:",ce),ce}},v=async Y=>{try{return await o.getOverallDeliveryRateStats(Y)}catch(J){throw console.error("Error getting overall delivery rate stats:",J),J}},m=async Y=>{try{return await o.db.jobs.where("status").equals(Y).toArray()}catch(J){throw console.error("Error getting jobs by status:",J),J}},b=Ze(async()=>{try{return await o.db.jobs.where("status").anyOf(["pending","in-progress","assigned"]).toArray()}catch(Y){return console.error("Error getting active jobs:",Y),[]}}),S=Ze(async()=>{try{return await o.db.jobs.where("status").equals("completed").toArray()}catch(Y){return console.error("Error getting completed jobs:",Y),[]}});return{orders:e,orderHistory:t,createOrder:n,getOrder:i,getAllOrders:s,createJob:r,getOrderJobs:a,updateJob:async(Y,J)=>{try{const L=await o.updateJob(Y,J),ce=e.value.find(U=>U.jobOrders.some(le=>le.job_id===Y));if(ce){const U=ce.jobOrders.findIndex(le=>le.job_id===Y);U!==-1&&(ce.jobOrders[U]=L)}return L}catch(L){throw console.error("Error updating job:",L),L}},deleteJob:async Y=>{try{await o.deleteJob(Y);const J=e.value.find(L=>L.jobOrders.some(ce=>ce.job_id===Y));return J&&(J.jobOrders=J.jobOrders.filter(L=>L.job_id!==Y)),!0}catch(J){throw console.error("Error deleting job:",J),J}},updateOrder:async(Y,J)=>{try{const L=await o.updateOrder(Y,J),ce=e.value.findIndex(U=>U.order_id===Y);return ce!==-1&&(e.value[ce]=L),L}catch(L){throw console.error("Error updating order:",L),L}},deleteOrder:async Y=>{try{return await o.deleteOrder(Y),e.value=e.value.filter(J=>J.order_id!==Y),t.value=t.value.filter(J=>J.order_id!==Y),!0}catch(J){throw console.error("Error deleting order:",J),J}},updateJobStatus:l,recordDelivery:c,getCommodityFlowSummary:u,getDeliveryRateStats:d,getDeliveryRateStatsForCommodity:h,getDeliveryRateStatsForCommoditySite:f,getOverallDeliveryRateStats:v,getJobsByStatus:m,getActiveJobs:b,getCompletedJobs:S,createGroundMaterialsSubcontractingJobs:async Y=>{try{console.log("🔍 [TRACE] createGroundMaterialsSubcontractingJobs - Starting for orderId:",Y);const J=await o.createGroundMaterialsSubcontractingJobs(Y);console.log("🔍 [TRACE] createGroundMaterialsSubcontractingJobs - Got result:",J);const L=[];for(let U=0;U<J.jobs.length;U++){const le=J.jobs[U];console.log(`🔍 [TRACE] createGroundMaterialsSubcontractingJobs - Creating job ${U+1}/${J.jobs.length}:`,le);const q=await o.createJobFromOrder(Y,{job_type:"Gaia",job_name:`Ground Materials Job ${U+1}`,commodities:le.commodities.map(se=>({commodity_type:se.commodity_type,quantity:se.quantity,site_id:se.site_id}))});console.log(`🔍 [TRACE] createGroundMaterialsSubcontractingJobs - Job ${U+1} created:`,q),L.push(q)}const ce=e.value.find(U=>U.order_id===Y);return ce&&ce.jobOrders.push(...L),{...J,createdJobs:L}}catch(J){throw console.error("Error creating ground materials subcontracting jobs:",J),J}},createSmallBatchSubcontractingJobs:async Y=>{try{console.log("🔍 [TRACE] createSmallBatchSubcontractingJobs - Starting for orderId:",Y);const J=await o.createSmallBatchSubcontractingJobs(Y);console.log("🔍 [TRACE] createSmallBatchSubcontractingJobs - Got result:",J);const L=[];for(let U=0;U<J.jobs.length;U++){const le=J.jobs[U];console.log(`🔍 [TRACE] createSmallBatchSubcontractingJobs - Creating job ${U+1}/${J.jobs.length}:`,le);const q=await o.createJobFromOrder(Y,{job_type:"Small Batch",job_name:`Small Batch Job ${U+1}`,commodities:le.commodities.map(se=>({commodity_type:se.commodity_type,quantity:se.quantity,site_id:se.site_id}))});console.log(`🔍 [TRACE] createSmallBatchSubcontractingJobs - Job ${U+1} created:`,q),L.push(q)}const ce=e.value.find(U=>U.order_id===Y);return ce&&ce.jobOrders.push(...L),{...J,createdJobs:L}}catch(J){throw console.error("Error creating small batch subcontracting jobs:",J),J}},createBulkOrders:async(Y,J,L)=>{try{console.log("🔍 [TRACE] createBulkOrders - Starting for orderId:",Y,"jobTypes:",J,"maxCargo:",L);const ce=await o.createBulkOrders(Y,J,L);console.log("🔍 [TRACE] createBulkOrders - Got result:",ce);const U=[];for(let q=0;q<ce.jobs.length;q++){const se=ce.jobs[q];console.log(`🔍 [TRACE] createBulkOrders - Creating job ${q+1}/${ce.jobs.length}:`,se);const be=await o.createJobFromOrder(Y,{job_type:se.jobType,job_name:`${se.jobType} Job ${q+1}`,commodities:se.commodities.map(ue=>({commodity_type:ue.commodity_type,quantity:ue.quantity,site_id:ue.site_id}))});console.log(`🔍 [TRACE] createBulkOrders - Job ${q+1} created:`,be),U.push(be)}const le=e.value.find(q=>q.order_id===Y);return le&&le.jobOrders.push(...U),{...ce,createdJobs:U}}catch(ce){throw console.error("Error creating bulk orders:",ce),ce}},deleteAllJobs:async Y=>{try{const J=await o.db.jobs.where("order_id").equals(Y).toArray();for(const ce of J)await o.deleteJob(ce.job_id);const L=e.value.find(ce=>ce.order_id===Y);return L&&(L.jobOrders=[]),{deletedCount:J.length,message:`Deleted ${J.length} jobs`}}catch(J){throw console.error("Error deleting all jobs:",J),J}},fixLedgerEntries:async Y=>{try{return await o.fixLedgerEntries(Y)}catch(J){throw console.error("Error fixing ledger entries:",J),J}},getLedgerEntriesForOrder:async Y=>{try{return await o.getAllLedgerEntriesWithBusinessKeys(Y)}catch(J){throw console.error("Error getting ledger entries for order:",J),J}},debugOrder:async Y=>{try{return await o.debugOrder(Y)}catch(J){throw console.error("Error debugging order:",J),J}},completeOrder:async Y=>{try{console.log("🔍 [DEBUG] Completing order:",Y);const J=await o.updateOrder(Y,{status:"completed",end_date:new Date().toISOString()});console.log("🔍 [DEBUG] Updated order from database:",J);const L=e.value.findIndex(ce=>ce.order_id===Y);return L!==-1?(e.value[L]=J,console.log("🔍 [DEBUG] Updated order in store at index:",L)):(console.log("🔍 [DEBUG] Order not found in store, adding it"),e.value.push(J)),J}catch(J){throw console.error("Error completing order:",J),J}},clearState:()=>{e.value=[],t.value=[]},COMMODITY_ACTIONS:Mt}}),uX=Object.freeze(Object.defineProperty({__proto__:null,useOrderStore:hi},Symbol.toStringTag,{value:"Module"})),r6={painite:59791,tritium:51294,alexandrite:205143,monzaite:195083},mC={activeCalculators:[],activeCalculatorId:null,lastCommodity:null,lastDirection:null},Ts=bi("transfer",{state:()=>({...mC}),actions:{addCalculator(e){const t={id:Date.now().toString(),...e};return this.activeCalculators.push(t),t},updateCalculator(e,t){const o=this.activeCalculators.findIndex(n=>n.id===e);o!==-1&&(this.activeCalculators[o]={...this.activeCalculators[o],...t})},removeCalculator(e){this.activeCalculators=this.activeCalculators.filter(t=>t.id!==e),this.activeCalculatorId===e&&(this.activeCalculatorId=null)},setActiveCalculator(e){this.activeCalculators.some(t=>t.id===e)&&(this.activeCalculatorId=e)},setLastCommodity(e){this.lastCommodity=e},setLastDirection(e){this.lastDirection=e},clearState(){Object.assign(this,mC)},calculateTradingRounds(e,t,o,n){const i=[];let s=e,r=1;const a=r6[o],l=a*100,c=a;if(!a||t<=0||e<=0)return i;let u=t;n==="paying"&&l*t>2e9&&(u=Math.floor(2e9/l));const d=(l-c)*u;for(;s>0&&r<=1e3;){if(s>d){const W=u*(l-c);s-=W,i.push({round:r,units:u,fcSellPrice:l,fcBuyPrice:c,value:W,basePrice:a,remainingAfter:s,direction:n}),r++;continue}let h=0,f=0,v=1/0,m=0,b=0;const S=n==="paying",R=.05,_=100,M=.01,I=s/t;for(let W=R;W<=_;W+=M){const z=Math.round(a*W);if(!(z<c||z>l))for(let de of[I,Math.floor(I),Math.ceil(I)])for(let K of[1,-1]){const O=z+Math.round(de*K);if(O<c||O>l||z===O)continue;const ie=Math.abs(z-O);let N=Math.min(t,Math.ceil(s/ie));S&&Math.max(z,O)*N>2e9&&(N=Math.floor(2e9/Math.max(z,O)));const oe=N*ie,F=Math.abs(s-oe);if(F<v){v=F;const Y=S?z:O,J=S?O:z;h=Y,f=J,m=N,b=oe}}}s-=b,i.push({round:r,units:m,fcSellPrice:h,fcBuyPrice:f,value:b,basePrice:a,remainingAfter:s,direction:n}),r++}return i}},persist:{key:"freighthelper-transfer",storage:localStorage}}),a6={activeTool:"quote"},vC=bi("tool",{state:()=>({...a6}),actions:{setActiveTool(e){this.activeTool=e}},persist:{key:"freighthelper-tool",storage:localStorage}}),yC=(e,t)=>{const o=e.split(`
`).map(r=>r.trim()).filter(r=>r),n={cmdrName:"",systemName:"",totalTonnage:0,invalidCommodities:[],fuzzyMatches:new Map,commodityBreakdown:[]},i=[];let s="";for(const r of o){if(r.startsWith("CMDR Name")){s="cmdrName";continue}else if(r.startsWith("System Name")){s="systemName";continue}else if(r.startsWith("Is it the Primary")){s="primary";continue}else if(r.startsWith("Total Tonnage")){s="totalTonnage";continue}else if(r.startsWith("Commodities List")){s="commodities";continue}let a,l;switch(s){case"cmdrName":n.cmdrName+=r;break;case"systemName":n.systemName=r;break;case"totalTonnage":break;case"commodities":a=r.replace(/[^0-9]/g,"").trim(),l=r.replace(/[^a-z A-Z]/g,"").trim(),i.push({name:l,quantity:parseInt(a,10)});break}}s||(s="commodities");for(const r of i){let a=t.commodityData[r.name],l=r.name;if(!a){const c=t.findClosestCommodity(r.name);c&&(a=t.commodityData[c],n.fuzzyMatches.set(l,c))}if(!a){n.invalidCommodities.push(r.name);continue}n.commodityBreakdown.push({name:n.fuzzyMatches.has(l)?n.fuzzyMatches.get(l):l,originalName:n.fuzzyMatches.has(l)?l:null,quantity:r.quantity,basePrice:a.avgPrice,category:a.category,type:a.type})}return n};var l6={exports:{}};(function(e){var t=function(o){var n=Object.prototype,i=n.hasOwnProperty,s=Object.defineProperty||function(U,le,q){U[le]=q.value},r,a=typeof Symbol=="function"?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(U,le,q){return Object.defineProperty(U,le,{value:q,enumerable:!0,configurable:!0,writable:!0}),U[le]}try{d({},"")}catch{d=function(le,q,se){return le[q]=se}}function h(U,le,q,se){var be=le&&le.prototype instanceof _?le:_,ue=Object.create(be.prototype),j=new J(se||[]);return s(ue,"_invoke",{value:N(U,q,j)}),ue}o.wrap=h;function f(U,le,q){try{return{type:"normal",arg:U.call(le,q)}}catch(se){return{type:"throw",arg:se}}}var v="suspendedStart",m="suspendedYield",b="executing",S="completed",R={};function _(){}function M(){}function I(){}var W={};d(W,l,function(){return this});var z=Object.getPrototypeOf,de=z&&z(z(L([])));de&&de!==n&&i.call(de,l)&&(W=de);var K=I.prototype=_.prototype=Object.create(W);M.prototype=I,s(K,"constructor",{value:I,configurable:!0}),s(I,"constructor",{value:M,configurable:!0}),M.displayName=d(I,u,"GeneratorFunction");function O(U){["next","throw","return"].forEach(function(le){d(U,le,function(q){return this._invoke(le,q)})})}o.isGeneratorFunction=function(U){var le=typeof U=="function"&&U.constructor;return le?le===M||(le.displayName||le.name)==="GeneratorFunction":!1},o.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,I):(U.__proto__=I,d(U,u,"GeneratorFunction")),U.prototype=Object.create(K),U},o.awrap=function(U){return{__await:U}};function ie(U,le){function q(ue,j,Ee,ne){var pe=f(U[ue],U,j);if(pe.type==="throw")ne(pe.arg);else{var ae=pe.arg,xe=ae.value;return xe&&typeof xe=="object"&&i.call(xe,"__await")?le.resolve(xe.__await).then(function(Le){q("next",Le,Ee,ne)},function(Le){q("throw",Le,Ee,ne)}):le.resolve(xe).then(function(Le){ae.value=Le,Ee(ae)},function(Le){return q("throw",Le,Ee,ne)})}}var se;function be(ue,j){function Ee(){return new le(function(ne,pe){q(ue,j,ne,pe)})}return se=se?se.then(Ee,Ee):Ee()}s(this,"_invoke",{value:be})}O(ie.prototype),d(ie.prototype,c,function(){return this}),o.AsyncIterator=ie,o.async=function(U,le,q,se,be){be===void 0&&(be=Promise);var ue=new ie(h(U,le,q,se),be);return o.isGeneratorFunction(le)?ue:ue.next().then(function(j){return j.done?j.value:ue.next()})};function N(U,le,q){var se=v;return function(ue,j){if(se===b)throw new Error("Generator is already running");if(se===S){if(ue==="throw")throw j;return ce()}for(q.method=ue,q.arg=j;;){var Ee=q.delegate;if(Ee){var ne=oe(Ee,q);if(ne){if(ne===R)continue;return ne}}if(q.method==="next")q.sent=q._sent=q.arg;else if(q.method==="throw"){if(se===v)throw se=S,q.arg;q.dispatchException(q.arg)}else q.method==="return"&&q.abrupt("return",q.arg);se=b;var pe=f(U,le,q);if(pe.type==="normal"){if(se=q.done?S:m,pe.arg===R)continue;return{value:pe.arg,done:q.done}}else pe.type==="throw"&&(se=S,q.method="throw",q.arg=pe.arg)}}}function oe(U,le){var q=le.method,se=U.iterator[q];if(se===r)return le.delegate=null,q==="throw"&&U.iterator.return&&(le.method="return",le.arg=r,oe(U,le),le.method==="throw")||q!=="return"&&(le.method="throw",le.arg=new TypeError("The iterator does not provide a '"+q+"' method")),R;var be=f(se,U.iterator,le.arg);if(be.type==="throw")return le.method="throw",le.arg=be.arg,le.delegate=null,R;var ue=be.arg;if(!ue)return le.method="throw",le.arg=new TypeError("iterator result is not an object"),le.delegate=null,R;if(ue.done)le[U.resultName]=ue.value,le.next=U.nextLoc,le.method!=="return"&&(le.method="next",le.arg=r);else return ue;return le.delegate=null,R}O(K),d(K,u,"Generator"),d(K,l,function(){return this}),d(K,"toString",function(){return"[object Generator]"});function F(U){var le={tryLoc:U[0]};1 in U&&(le.catchLoc=U[1]),2 in U&&(le.finallyLoc=U[2],le.afterLoc=U[3]),this.tryEntries.push(le)}function Y(U){var le=U.completion||{};le.type="normal",delete le.arg,U.completion=le}function J(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(F,this),this.reset(!0)}o.keys=function(U){var le=Object(U),q=[];for(var se in le)q.push(se);return q.reverse(),function be(){for(;q.length;){var ue=q.pop();if(ue in le)return be.value=ue,be.done=!1,be}return be.done=!0,be}};function L(U){if(U){var le=U[l];if(le)return le.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var q=-1,se=function be(){for(;++q<U.length;)if(i.call(U,q))return be.value=U[q],be.done=!1,be;return be.value=r,be.done=!0,be};return se.next=se}}return{next:ce}}o.values=L;function ce(){return{value:r,done:!0}}return J.prototype={constructor:J,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(Y),!U)for(var le in this)le.charAt(0)==="t"&&i.call(this,le)&&!isNaN(+le.slice(1))&&(this[le]=r)},stop:function(){this.done=!0;var U=this.tryEntries[0],le=U.completion;if(le.type==="throw")throw le.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var le=this;function q(ne,pe){return ue.type="throw",ue.arg=U,le.next=ne,pe&&(le.method="next",le.arg=r),!!pe}for(var se=this.tryEntries.length-1;se>=0;--se){var be=this.tryEntries[se],ue=be.completion;if(be.tryLoc==="root")return q("end");if(be.tryLoc<=this.prev){var j=i.call(be,"catchLoc"),Ee=i.call(be,"finallyLoc");if(j&&Ee){if(this.prev<be.catchLoc)return q(be.catchLoc,!0);if(this.prev<be.finallyLoc)return q(be.finallyLoc)}else if(j){if(this.prev<be.catchLoc)return q(be.catchLoc,!0)}else if(Ee){if(this.prev<be.finallyLoc)return q(be.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(U,le){for(var q=this.tryEntries.length-1;q>=0;--q){var se=this.tryEntries[q];if(se.tryLoc<=this.prev&&i.call(se,"finallyLoc")&&this.prev<se.finallyLoc){var be=se;break}}be&&(U==="break"||U==="continue")&&be.tryLoc<=le&&le<=be.finallyLoc&&(be=null);var ue=be?be.completion:{};return ue.type=U,ue.arg=le,be?(this.method="next",this.next=be.finallyLoc,R):this.complete(ue)},complete:function(U,le){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&le&&(this.next=le),R},finish:function(U){for(var le=this.tryEntries.length-1;le>=0;--le){var q=this.tryEntries[le];if(q.finallyLoc===U)return this.complete(q.completion,q.afterLoc),Y(q),R}},catch:function(U){for(var le=this.tryEntries.length-1;le>=0;--le){var q=this.tryEntries[le];if(q.tryLoc===U){var se=q.completion;if(se.type==="throw"){var be=se.arg;Y(q)}return be}}throw new Error("illegal catch attempt")},delegateYield:function(U,le,q){return this.delegate={iterator:L(U),resultName:le,nextLoc:q},this.method==="next"&&(this.arg=r),R}},o}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(l6);var hg=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`;const c6=hg;let CC=0;var Qx=({id:e,action:t,payload:o={}})=>{let n=e;return typeof n>"u"&&(n=c6("Job",CC),CC+=1),{id:n,action:t,payload:o}},Zr={};let fg=!1;Zr.logging=fg;Zr.setLogging=e=>{fg=e};Zr.log=(...e)=>fg?console.log.apply(void 0,e):null;const u6=Qx,{log:bc}=Zr,d6=hg;let bC=0;var h6=()=>{const e=d6("Scheduler",bC),t={},o={};let n=[];bC+=1;const i=()=>n.length,s=()=>Object.keys(t).length,r=()=>{if(n.length!==0){const d=Object.keys(t);for(let h=0;h<d.length;h+=1)if(typeof o[d[h]]>"u"){n[0](t[d[h]]);break}}},a=(d,h)=>new Promise((f,v)=>{const m=u6({action:d,payload:h});n.push(async b=>{n.shift(),o[b.id]=m;try{f(await b[d].apply(void 0,[...h,m.id]))}catch(S){v(S)}finally{delete o[b.id],r()}}),bc(`[${e}]: Add ${m.id} to JobQueue`),bc(`[${e}]: JobQueue length=${n.length}`),r()});return{addWorker:d=>(t[d.id]=d,bc(`[${e}]: Add ${d.id}`),bc(`[${e}]: Number of workers=${s()}`),r(),d.id),addJob:async(d,...h)=>{if(s()===0)throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return a(d,h)},terminate:async()=>{Object.keys(t).forEach(async d=>{await t[d].terminate()}),n=[]},getQueueLen:i,getNumWorkers:s}};function Pa(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var f6=e=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof Pa=="function"&&(t.type="node"),typeof e>"u"?t:t[e]};const p6=f6("type")==="browser",g6=p6?e=>new URL(e,window.location.href).href:e=>e;var m6=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach(o=>{e[o]&&(t[o]=g6(t[o]))}),t},Yx={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const v6="6.0.1",y6={version:v6};var C6={workerBlobURL:!0,logger:()=>{}};const b6=y6.version,w6=C6;var S6={...w6,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${b6}/dist/worker.min.js`},x6=({workerPath:e,workerBlobURL:t})=>{let o;if(Blob&&URL&&t){const n=new Blob([`importScripts("${e}");`],{type:"application/javascript"});o=new Worker(URL.createObjectURL(n))}else o=new Worker(e);return o},R6=e=>{e.terminate()},_6=(e,t)=>{e.onmessage=({data:o})=>{t(o)}},E6=async(e,t)=>{e.postMessage(t)};const Oh=e=>new Promise((t,o)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=({target:{error:{code:i}}})=>{o(Error(`File could not be read! Code=${i}`))},n.readAsArrayBuffer(e)}),qf=async e=>{let t=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(o=>o.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(t=await qf(e.src)),e.tagName==="VIDEO"&&(t=await qf(e.poster)),e.tagName==="CANVAS"&&await new Promise(o=>{e.toBlob(async n=>{t=await Oh(n),o()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const o=await e.convertToBlob();t=await Oh(o)}else(e instanceof File||e instanceof Blob)&&(t=await Oh(e));return new Uint8Array(t)};var P6=qf;const F6=S6,D6=x6,T6=R6,k6=_6,A6=E6,I6=P6;var M6={defaultOptions:F6,spawnWorker:D6,terminateWorker:T6,onMessage:k6,send:A6,loadImage:I6};const O6=m6,An=Qx,{log:wC}=Zr,L6=hg,ls=Yx,{defaultOptions:B6,spawnWorker:N6,terminateWorker:H6,onMessage:G6,loadImage:SC,send:V6}=M6;let xC=0;var Jx=async(e="eng",t=ls.LSTM_ONLY,o={},n={})=>{const i=L6("Worker",xC),{logger:s,errorHandler:r,...a}=O6({...B6,...o}),l={},c=typeof e=="string"?e.split("+"):e;let u=t,d=n;const h=[ls.DEFAULT,ls.LSTM_ONLY].includes(t)&&!a.legacyCore;let f,v;const m=new Promise((L,ce)=>{v=L,f=ce}),b=L=>{f(L.message)};let S=N6(a);S.onerror=b,xC+=1;const R=({id:L,action:ce,payload:U})=>new Promise((le,q)=>{wC(`[${i}]: Start ${L}, action=${ce}`);const se=`${ce}-${L}`;l[se]={resolve:le,reject:q},V6(S,{workerId:i,jobId:L,action:ce,payload:U})}),_=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),M=L=>R(An({id:L,action:"load",payload:{options:{lstmOnly:h,corePath:a.corePath,logging:a.logging}}})),I=(L,ce,U)=>R(An({id:U,action:"FS",payload:{method:"writeFile",args:[L,ce]}})),W=(L,ce)=>R(An({id:ce,action:"FS",payload:{method:"readFile",args:[L,{encoding:"utf8"}]}})),z=(L,ce)=>R(An({id:ce,action:"FS",payload:{method:"unlink",args:[L]}})),de=(L,ce,U)=>R(An({id:U,action:"FS",payload:{method:L,args:ce}})),K=(L,ce)=>R(An({id:ce,action:"loadLanguage",payload:{langs:L,options:{langPath:a.langPath,dataPath:a.dataPath,cachePath:a.cachePath,cacheMethod:a.cacheMethod,gzip:a.gzip,lstmOnly:[ls.DEFAULT,ls.LSTM_ONLY].includes(u)&&!a.legacyLang}}})),O=(L,ce,U,le)=>R(An({id:le,action:"initialize",payload:{langs:L,oem:ce,config:U}})),ie=(L="eng",ce,U,le)=>{if(h&&[ls.TESSERACT_ONLY,ls.TESSERACT_LSTM_COMBINED].includes(ce))throw Error("Legacy model requested but code missing.");const q=ce||u;u=q;const se=U||d;d=se;const ue=(typeof L=="string"?L.split("+"):L).filter(j=>!c.includes(j));return c.push(...ue),ue.length>0?K(ue,le).then(()=>O(L,q,se,le)):O(L,q,se,le)},N=(L={},ce)=>R(An({id:ce,action:"setParameters",payload:{params:L}})),oe=async(L,ce={},U={text:!0},le)=>R(An({id:le,action:"recognize",payload:{image:await SC(L),options:ce,output:U}})),F=async(L,ce)=>{if(h)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return R(An({id:ce,action:"detect",payload:{image:await SC(L)}}))},Y=async()=>(S!==null&&(H6(S),S=null),Promise.resolve());G6(S,({workerId:L,jobId:ce,status:U,action:le,data:q})=>{const se=`${le}-${ce}`;if(U==="resolve")wC(`[${L}]: Complete ${ce}`),l[se].resolve({jobId:ce,data:q}),delete l[se];else if(U==="reject")if(l[se].reject(q),delete l[se],le==="load"&&f(q),r)r(q);else throw Error(q);else U==="progress"&&s({...q,userJobId:ce})});const J={id:i,worker:S,load:_,writeText:I,readText:W,removeFile:z,FS:de,reinitialize:ie,setParameters:N,recognize:oe,detect:F,terminate:Y};return M().then(()=>K(e)).then(()=>O(e,t,n)).then(()=>v(J)).catch(()=>{}),m};const Zx=Jx,z6=async(e,t,o)=>{const n=await Zx(t,1,o);return n.recognize(e).finally(async()=>{await n.terminate()})},W6=async(e,t)=>{const o=await Zx("osd",0,t);return o.detect(e).finally(async()=>{await o.terminate()})};var U6={recognize:z6,detect:W6},$6={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},j6={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const K6=h6,q6=Jx,Q6=U6,Y6=$6,J6=Yx,Z6=j6,{setLogging:X6}=Zr;var Iu={languages:Y6,OEM:J6,PSM:Z6,createScheduler:K6,createWorker:q6,setLogging:X6,...Q6};const eU={__name:"OCRProcessor",props:{quoteId:{type:String,required:!0}},emits:["commodities-extracted"],setup(e,{expose:t,emit:o}){t();const n=e,i=o,s=De(null),r=De(null),a=De(!1),l=De(!1),c=De(""),u=De(0),d=De([]),h=De({}),f=Ze(()=>d.value.some(ue=>ue.commodities&&ue.commodities.length>0));let v=null;const m=async()=>(v||(v=await Iu.createWorker("eng")),v),b=async()=>{v&&(await v.terminate(),v=null)},S=()=>{var ue;(ue=r.value)==null||ue.click()},R=ue=>{const j=Array.from(ue.target.files);I(j)},_=ue=>{a.value=!1;const j=Array.from(ue.dataTransfer.files);I(j)},M=async()=>{try{const j=(await navigator.clipboard.read()).filter(ne=>ne.types.some(pe=>pe.startsWith("image/")));if(j.length===0){alert("No images found in clipboard");return}const Ee=[];for(const ne of j){const pe=await ne.getType("image/png")||await ne.getType("image/jpeg")||await ne.getType("image/gif");pe&&Ee.push(new File([pe],`clipboard-${Date.now()}.png`,{type:pe.type}))}I(Ee)}catch(ue){console.error("Failed to read clipboard:",ue),alert("Failed to read clipboard. Please ensure you have clipboard permissions.")}},I=async ue=>{if(ue.length!==0){l.value=!0,c.value=`Processing ${ue.length} image(s)...`,u.value=0;try{const j=await m();for(let Ee=0;Ee<ue.length;Ee++){const ne=ue[Ee];c.value=`Processing image ${Ee+1} of ${ue.length}...`;const pe=await W(ne,j);d.value.push(pe),u.value=Math.round((Ee+1)/ue.length*100)}c.value="Processing complete!"}catch(j){console.error("Error processing images:",j),alert("Error processing images: "+j.message)}finally{l.value=!1,setTimeout(()=>{c.value="",u.value=0},2e3)}}},W=async(ue,j)=>{const Ee={file:ue,preview:URL.createObjectURL(ue),ocrText:"",commodities:[],siteInfo:null,error:null,expandedCommodities:!1};try{const{data:{text:ne}}=await j.recognize(ue);Ee.ocrText=ne;const pe=z(ne);Ee.commodities=pe;const ae=de(ne);Ee.siteInfo=ae}catch(ne){console.error("OCR processing error:",ne),Ee.error="Failed to process image: "+ne.message}return Ee},z=ue=>{const j=[],Ee=ue.split(`
`).map(ne=>ne.trim()).filter(ne=>ne.length>0);for(const ne of Ee){if(ne.toLowerCase().includes("required commodities")||ne.toLowerCase().includes("orbital construction")||ne.toLowerCase().includes("terminal"))continue;let pe=null;if(pe=ne.match(/^(.+?):\s*([\d,]+)$/),pe){const ae=pe[1].trim(),xe=parseInt(pe[2].replace(/,/g,""));if(xe>0){j.push({name:ae,quantity:xe});continue}}if(pe=ne.match(/^(.+?)\s*-\s*([\d,]+)$/),pe){const ae=pe[1].trim(),xe=parseInt(pe[2].replace(/,/g,""));if(xe>0){j.push({name:ae,quantity:xe});continue}}if(pe=ne.match(/^(.+?)\s+([\d,]+)$/),pe){const ae=pe[1].trim(),xe=parseInt(pe[2].replace(/,/g,""));if(xe>0&&xe<1e5){j.push({name:ae,quantity:xe});continue}}if(pe=ne.match(/^(.+?)\s+(\d+)$/),pe){const ae=pe[1].trim(),xe=parseInt(pe[2]);xe>0&&xe<1e5&&ae.length>2&&j.push({name:ae,quantity:xe})}}return j},de=ue=>{const j={name:null,isPlanetary:null,confidence:"low"},Ee=ue.split(`
`).map(ae=>ae.trim());let ne=0,pe=0;for(const ae of Ee){const xe=ae.toLowerCase();if(xe.includes("orbital construction site:")){const Le=ae.match(/ORBITAL CONSTRUCTION SITE:\s*(.+)/i);Le&&(j.name=Le[1].trim(),j.isPlanetary=!1,j.confidence="high",ne=3,pe=3)}if(xe.includes("planetary construction site:")){const Le=ae.match(/PLANETARY CONSTRUCTION SITE:\s*(.+)/i);Le&&(j.name=Le[1].trim(),j.isPlanetary=!0,j.confidence="high",ne=3,pe=3)}if(xe.includes("construction site:")&&!j.name){const Le=ae.match(/CONSTRUCTION SITE:\s*(.+)/i);Le&&(j.name=Le[1].trim(),ne=2,j.confidence==="low"&&(j.confidence="medium"))}if(xe.includes("terminal")&&!j.name){const Le=ae.match(/(\w+)\s+TERMINAL/i);Le&&(j.name=Le[1]+" Terminal",ne=2,j.isPlanetary===null&&(j.isPlanetary=!1,pe=1),j.confidence==="low"&&(j.confidence="medium"))}!j.name&&ae.length>5&&ae.length<50&&!ae.includes(":")&&!ae.includes("-")&&!/\d/.test(ae)&&(ne=1,j.confidence==="low"&&(j.name=ae)),(xe.includes("planetary")||xe.includes("surface")||xe.includes("ground"))&&(j.isPlanetary=!0,pe=Math.max(pe,2)),(xe.includes("orbital")||xe.includes("space station")||xe.includes("station"))&&(j.isPlanetary=!1,pe=Math.max(pe,2)),(xe.includes("moon")||xe.includes("planet"))&&(j.isPlanetary=!0,pe=Math.max(pe,1)),(xe.includes("dock")||xe.includes("port"))&&(j.isPlanetary=!1,pe=Math.max(pe,1))}return ne>=3&&pe>=3?j.confidence="high":ne>=2||pe>=2?j.confidence="medium":j.confidence="low",j},K=async ue=>{const j=d.value[ue];if(j){l.value=!0,c.value=`Retrying OCR for image ${ue+1}...`;try{const Ee=await m(),ne=await W(j.file,Ee);d.value[ue]={...j,ocrText:ne.ocrText,commodities:ne.commodities,error:ne.error}}catch(Ee){console.error("Retry OCR error:",Ee),alert("Failed to retry OCR: "+Ee.message)}finally{l.value=!1,c.value=""}}},O=ue=>{const j=d.value[ue];j.preview&&URL.revokeObjectURL(j.preview),d.value.splice(ue,1)},ie=()=>{d.value.forEach(ue=>{ue.preview&&URL.revokeObjectURL(ue.preview)}),d.value=[]},N=ue=>{const j=d.value[ue];j&&(j.expandedCommodities=!j.expandedCommodities)},oe=(ue,j)=>ue.commodities?ue.expandedCommodities||ue.commodities.length<=6?ue.commodities:ue.commodities.slice(0,6):[],F=ue=>{const j=d.value[ue];j&&(j.commodities||(j.commodities=[]),j.commodities.push({name:"",quantity:1}))},Y=(ue,j)=>{const Ee=d.value[ue];Ee&&Ee.commodities&&Ee.commodities.splice(j,1)},J=ue=>ue.name&&ue.name.trim().length>0&&ue.quantity&&ue.quantity>0,L=ue=>{switch(ue.confidence){case"high":return"bg-green-50 border border-green-200";case"medium":return"bg-yellow-50 border border-yellow-200";case"low":default:return"bg-red-50 border border-red-200"}},ce=ue=>{switch(ue.confidence){case"high":return"text-green-900";case"medium":return"text-yellow-900";case"low":default:return"text-red-900"}},U=ue=>{switch(ue){case"high":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":default:return"bg-red-100 text-red-800"}},le=ue=>{const j=d.value[ue];if(!j||!j.ocrText)return;const Ee=de(j.ocrText);Ee.name&&(j.siteInfo.name=Ee.name)},q=ue=>{const j=d.value[ue];if(!j||!j.ocrText)return;const Ee=de(j.ocrText);Ee.isPlanetary!==null&&(j.siteInfo.isPlanetary=Ee.isPlanetary)},se=()=>{const ue=d.value.filter(j=>!j.commodities||j.commodities.length===0?!1:(j.commodities=j.commodities.filter(J),j.commodities.length>0));if(ue.length===0){alert("No valid commodities found. Please check your data.");return}ue.forEach(j=>{i("commodities-extracted",{commodities:j.commodities,siteInfo:j.siteInfo})})};Xt(()=>{m().catch(console.error)}),Rn(async()=>{await b(),d.value.forEach(ue=>{ue.preview&&URL.revokeObjectURL(ue.preview)})});const be={props:n,emit:i,dropZone:s,fileInput:r,isDragOver:a,isProcessing:l,processingStatus:c,currentProgress:u,processedImages:d,expandedCommodities:h,hasValidCommodities:f,get worker(){return v},set worker(ue){v=ue},initWorker:m,cleanupWorker:b,triggerFileInput:S,handleFileSelect:R,handleDrop:_,pasteFromClipboard:M,processFiles:I,processImage:W,parseCommoditiesFromText:z,extractSiteInfoFromText:de,retryOCR:K,removeImage:O,clearAll:ie,toggleCommoditiesExpanded:N,getVisibleCommodities:oe,addCommodity:F,removeCommodity:Y,validateCommodity:J,getSiteInfoClass:L,getSiteInfoTextClass:ce,getConfidenceClass:U,suggestSiteName:le,suggestSiteType:q,applyToQuote:se,ref:De,computed:Ze,onMounted:Xt,onUnmounted:Rn,get createWorker(){return Iu.createWorker}};return Object.defineProperty(be,"__isScriptSetup",{enumerable:!1,value:!0}),be}},tU={class:"bg-white rounded-lg p-6 shadow-md"},oU={class:"mb-4"},nU={class:"mb-6"},iU={class:"flex items-center space-x-4"},sU=["disabled"],rU={key:0,class:"mb-6"},aU={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},lU={class:"flex items-center space-x-3"},cU={class:"text-sm text-blue-700"},uU={key:0,class:"mt-3"},dU={class:"w-full bg-blue-200 rounded-full h-2"},hU={class:"text-xs text-blue-600 mt-1"},fU={key:1,class:"space-y-4"},pU={class:"flex space-x-4"},gU={class:"flex-shrink-0"},mU=["src","alt"],vU={class:"flex-1"},yU={class:"flex justify-between items-start mb-2"},CU={class:"font-medium text-gray-900"},bU={class:"flex space-x-2"},wU=["onClick","disabled"],SU=["onClick"],xU={class:"flex items-center justify-between mb-2"},RU={class:"space-y-2"},_U={class:"flex items-center space-x-2"},EU=["onUpdate:modelValue"],PU=["onClick"],FU={class:"flex items-center space-x-2"},DU=["onUpdate:modelValue"],TU=["onClick"],kU={key:1,class:"mb-3"},AU={class:"bg-gray-50 p-3 rounded text-sm font-mono max-h-32 overflow-y-auto"},IU={key:2},MU={class:"flex items-center justify-between mb-2"},OU={class:"text-sm font-medium text-gray-700"},LU=["onClick"],BU={class:"space-y-1"},NU=["onUpdate:modelValue"],HU=["onUpdate:modelValue"],GU=["onClick"],VU=["onClick"],zU={key:3,class:"mt-2"},WU={class:"text-sm text-red-600"},UU={key:2,class:"mt-6 flex justify-end space-x-3"},$U=["disabled"];function jU(e,t,o,n,i,s){return ge(),me("div",tU,[t[12]||(t[12]=y("div",{class:"mb-6"},[y("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"OCR Image Processor"),y("p",{class:"text-gray-600"}," Upload or paste images of site commodities lists for automatic processing. ")],-1)),we(" Image Upload Area "),y("div",oU,[y("div",{ref:"dropZone",class:Ft(["border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors cursor-pointer",{"border-blue-400 bg-blue-50":n.isDragOver}]),onClick:n.triggerFileInput,onDragover:t[0]||(t[0]=Qt(r=>n.isDragOver=!0,["prevent"])),onDragleave:t[1]||(t[1]=Qt(r=>n.isDragOver=!1,["prevent"])),onDrop:Qt(n.handleDrop,["prevent"])},t[2]||(t[2]=[Hn('<div class="flex items-center justify-center space-x-3" data-v-7eac8a93><div class="text-2xl text-gray-400" data-v-7eac8a93>📷</div><div class="text-left" data-v-7eac8a93><p class="text-sm font-medium text-gray-900" data-v-7eac8a93> Drop images here or click to browse </p><p class="text-xs text-gray-500" data-v-7eac8a93>PNG, JPG, GIF, WebP</p></div><button type="button" class="px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors" data-v-7eac8a93> Choose Files </button></div>',1)]),34),y("input",{ref:"fileInput",type:"file",multiple:"",accept:"image/*",class:"hidden",onChange:n.handleFileSelect},null,544)]),we(" Clipboard Paste Area "),y("div",nU,[y("div",iU,[y("button",{type:"button",onClick:n.pasteFromClipboard,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center",disabled:n.isProcessing},t[3]||(t[3]=[y("span",{class:"mr-2"},"📋",-1),so(" Paste from Clipboard ")]),8,sU),t[4]||(t[4]=y("span",{class:"text-sm text-gray-500"},"Paste images directly from your clipboard",-1))])]),we(" Processing Status "),n.isProcessing?(ge(),me("div",rU,[y("div",aU,[y("div",lU,[t[6]||(t[6]=y("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},null,-1)),y("div",null,[t[5]||(t[5]=y("p",{class:"font-medium text-blue-900"},"Processing Images...",-1)),y("p",cU,ye(n.processingStatus),1)])]),n.currentProgress>0?(ge(),me("div",uU,[y("div",dU,[y("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Sl({width:`${n.currentProgress}%`})},null,4)]),y("p",hU,ye(n.currentProgress)+"% complete",1)])):we("v-if",!0)])])):we("v-if",!0),we(" Image Preview and Results "),n.processedImages.length>0?(ge(),me("div",fU,[t[11]||(t[11]=y("h4",{class:"text-lg font-medium text-gray-900"},"Processed Images",-1)),(ge(!0),me(Ct,null,Tt(n.processedImages,(r,a)=>(ge(),me("div",{key:a,class:"border rounded-lg p-4"},[y("div",pU,[we(" Image Preview "),y("div",gU,[y("img",{src:r.preview,alt:`Processed image ${a+1}`,class:"w-32 h-32 object-cover rounded-lg border"},null,8,mU)]),we(" OCR Results "),y("div",vU,[y("div",yU,[y("h5",CU,"Image "+ye(a+1),1),y("div",bU,[y("button",{onClick:l=>n.retryOCR(a),class:"px-3 py-1 text-sm bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200 transition-colors",disabled:n.isProcessing}," Retry ",8,wU),y("button",{onClick:l=>n.removeImage(a),class:"px-3 py-1 text-sm bg-red-100 text-red-800 rounded hover:bg-red-200 transition-colors"}," Remove ",8,SU)])]),we(" Site Information (Editable) "),r.siteInfo?(ge(),me("div",{key:0,class:Ft(["mb-4 p-3 rounded-lg",n.getSiteInfoClass(r.siteInfo)])},[y("div",xU,[y("h6",{class:Ft(["text-sm font-medium",n.getSiteInfoTextClass(r.siteInfo)])}," Site Information ",2),y("span",{class:Ft(["text-xs px-2 py-1 rounded-full",n.getConfidenceClass(r.siteInfo.confidence)])},ye(r.siteInfo.confidence)+" confidence ",3)]),y("div",RU,[we(" Site Name "),y("div",_U,[t[7]||(t[7]=y("label",{class:"text-sm font-medium text-gray-700 w-20"},"Name:",-1)),Xe(y("input",{"onUpdate:modelValue":l=>r.siteInfo.name=l,type:"text",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter site name"},null,8,EU),[[dt,r.siteInfo.name]]),r.siteInfo.name?we("v-if",!0):(ge(),me("button",{key:0,onClick:l=>n.suggestSiteName(a),class:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors",title:"Try to extract site name from OCR text"}," Auto-detect ",8,PU))]),we(" Site Type "),y("div",FU,[t[9]||(t[9]=y("label",{class:"text-sm font-medium text-gray-700 w-20"},"Type:",-1)),Xe(y("select",{"onUpdate:modelValue":l=>r.siteInfo.isPlanetary=l,class:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},[...t[8]||(t[8]=[y("option",{value:null},"Auto-detect",-1),y("option",{value:!1},"Orbital",-1),y("option",{value:!0},"Planetary",-1)])],8,DU),[[Wo,r.siteInfo.isPlanetary]]),y("button",{onClick:l=>n.suggestSiteType(a),class:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors",title:"Re-analyze site type from OCR text"}," Re-analyze ",8,TU)])])],2)):we("v-if",!0),we(" OCR Text Preview "),r.ocrText?(ge(),me("div",kU,[t[10]||(t[10]=y("p",{class:"text-sm font-medium text-gray-700 mb-1"},"Extracted Text:",-1)),y("div",AU,ye(r.ocrText.substring(0,200))+ye(r.ocrText.length>200?"...":""),1)])):we("v-if",!0),we(" Parsed Commodities (Expandable) "),r.commodities&&r.commodities.length>0?(ge(),me("div",IU,[y("div",MU,[y("p",OU," Parsed Commodities ("+ye(r.commodities.length)+"): ",1),r.commodities.length>6?(ge(),me("button",{key:0,onClick:l=>n.toggleCommoditiesExpanded(a),class:"text-xs text-blue-600 hover:text-blue-800 underline"},ye(r.expandedCommodities?"Show Less":"Show More"),9,LU)):we("v-if",!0)]),y("div",BU,[(ge(!0),me(Ct,null,Tt(n.getVisibleCommodities(r,a),(l,c)=>(ge(),me("div",{key:c,class:"flex items-center space-x-2 p-2 bg-gray-50 rounded hover:bg-gray-100 transition-colors"},[we(" Commodity Name (Editable) "),Xe(y("input",{"onUpdate:modelValue":u=>l.name=u,type:"text",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Commodity name"},null,8,NU),[[dt,l.name]]),we(" Quantity (Editable) "),Xe(y("input",{"onUpdate:modelValue":u=>l.quantity=u,type:"number",min:"1",class:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Qty"},null,8,HU),[[dt,l.quantity,void 0,{number:!0}]]),we(" Remove Commodity "),y("button",{onClick:u=>n.removeCommodity(a,c),class:"px-2 py-1 text-xs text-red-600 hover:text-red-800 hover:bg-red-50 rounded transition-colors",title:"Remove commodity"}," × ",8,GU)]))),128)),we(" Add New Commodity "),y("button",{onClick:l=>n.addCommodity(a),class:"w-full px-3 py-2 text-sm text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded border border-dashed border-blue-300 transition-colors"}," + Add Commodity ",8,VU)])])):we("v-if",!0),we(" Error Messages "),r.error?(ge(),me("div",zU,[y("p",WU,ye(r.error),1)])):we("v-if",!0)])])]))),128))])):we("v-if",!0),we(" Action Buttons "),n.processedImages.length>0?(ge(),me("div",UU,[y("button",{onClick:n.clearAll,class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors"}," Clear All "),y("button",{onClick:n.applyToQuote,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",disabled:!n.hasValidCommodities}," Apply to Quote ",8,$U)])):we("v-if",!0)])}const KU=To(eU,[["render",jU],["__scopeId","data-v-7eac8a93"],["__file","/app/src/js/components/OCRProcessor.vue"]]),qU={__name:"QuoteGenerator",setup(e,{expose:t}){t(),Ry.registerModules([hC]);const o=Ar(),n=Ms(),i=qa(),s=hi(),r=Ts(),a=vC(),l=Ze(()=>{var P;return(P=i.activeQuotes)==null?void 0:P.find(B=>B.id===c.value)}),c=De(null),u=De(!1),d=De(!1),h=De(!1),f=De(""),v=De(null),m=De("single"),b=De(null),S=De(!1),R=De("");i.activeQuotes||i.$patch({activeQuotes:[],activeQuoteId:null});class _{constructor(){this.value="",this.input=null,this.suggestionsDiv=null,this.suggestions=[],this.selectedIndex=-1}init(B){this.value=B.eventKey||B.value,this.params=B,this.eGui=document.createElement("div"),this.eGui.className="w-full",this.input=document.createElement("input"),this.input.className="w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",this.input.value=this.value,this.input.placeholder="Type commodity name...";const V=this.onInput.bind(this);this.input.addEventListener("input",X=>{console.log("Input event:",X.target.value),V(X)}),this.input.addEventListener("keydown",X=>{if(this.suggestionsDiv&&this.suggestionsDiv.style.display!=="none")switch(X.key){case"ArrowDown":X.preventDefault(),this.selectedIndex=Math.min(this.selectedIndex+1,this.suggestions.length-1),this.updateSelection();break;case"ArrowUp":X.preventDefault(),this.selectedIndex=Math.max(this.selectedIndex-1,0),this.updateSelection();break;case"Enter":X.preventDefault(),this.selectedIndex>=0?this.selectSuggestion(this.suggestions[this.selectedIndex]):this.suggestions.length>0&&this.selectSuggestion(this.suggestions[0]);break;case"Escape":X.preventDefault(),this.hideSuggestions();break;case"Tab":X.preventDefault(),this.selectedIndex>=0?this.selectSuggestion(this.suggestions[this.selectedIndex]):this.suggestions.length>0&&this.selectSuggestion(this.suggestions[0]),this.params.api.tabToNextCell();break}else if(X.key==="Tab")return}),this.eGui.appendChild(this.input),requestAnimationFrame(()=>{this.input.focus();const X=this.input.value.length;this.input.setSelectionRange(X,X)})}updateSelection(){const B=this.suggestionsDiv.getElementsByTagName("div");for(let V=0;V<B.length;V++)V===this.selectedIndex?(B[V].style.backgroundColor="#f3f4f6",B[V].scrollIntoView({block:"nearest"})):B[V].style.backgroundColor="white"}showSuggestions(){if(this.suggestionsDiv||(this.suggestionsDiv=document.createElement("div"),this.suggestionsDiv.style.cssText=`
                position: fixed;
                background: white;
                border: 1px solid #e5e7eb;
                border-radius: 0.375rem;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                max-height: 240px;
                overflow-y: auto;
                z-index: 9999;
            `,document.body.appendChild(this.suggestionsDiv)),this.suggestions.length===0){this.hideSuggestions();return}this.selectedIndex=-1;const V=this.params.eGridCell.getBoundingClientRect();this.suggestionsDiv.style.top=`${V.bottom}px`,this.suggestionsDiv.style.left=`${V.left}px`,this.suggestionsDiv.style.width=`${V.width}px`,this.suggestionsDiv.style.display="block";const X=this.suggestionsDiv.getBoundingClientRect(),fe=window.innerHeight;X.bottom>fe&&(this.suggestionsDiv.style.top=`${V.top-X.height}px`),this.suggestionsDiv.innerHTML="",this.suggestions.forEach((Se,ke)=>{const Ne=document.createElement("div");Ne.style.cssText=`
                padding: 0.5rem 0.75rem;
                cursor: pointer;
                border-bottom: 1px solid #e5e7eb;
            `,Ne.innerHTML=`
                <div style="font-weight: 500; color: #111827;">${Se.name}</div>
                <div style="font-size: 0.875rem; color: #6b7280;">
                    ${Se.category} | ${Se.type} | ${Se.avgPrice.toLocaleString()} cr
                </div>
            `,Ne.addEventListener("mouseover",()=>{this.selectedIndex=ke,this.updateSelection()}),Ne.addEventListener("mouseout",()=>{this.selectedIndex===ke?Ne.style.backgroundColor="#f3f4f6":Ne.style.backgroundColor="white"}),Ne.addEventListener("click",()=>this.selectSuggestion(Se)),this.suggestionsDiv.appendChild(Ne)})}hideSuggestions(){this.suggestionsDiv&&(this.suggestionsDiv.style.display="none",this.selectedIndex=-1)}selectSuggestion(B){console.log("Selecting suggestion:",B),this.value=B.name,this.input.value=B.name,this.hideSuggestions(),this.params.api.stopEditing()}getGui(){return this.eGui}getValue(){return this.value}onInput(B){const V=B.target.value;console.log("Processing input:",V),this.value=V;const X=V.toLowerCase().trim(),fe=Object.keys(i.commodityData);if(console.log("All commodities:",fe.length),!V){this.suggestions=fe.map(ke=>({name:ke,...i.commodityData[ke]})).sort((ke,Ne)=>ke.name.localeCompare(Ne.name)).slice(0,5),this.showSuggestions();return}let Se=fe.filter(ke=>ke.toLowerCase().startsWith(X));console.log("Exact matches:",Se.length),Se.length===0&&(Se=fe.filter(ke=>ke.toLowerCase().includes(X)),console.log("Contains matches:",Se.length)),this.suggestions=Se.map(ke=>({name:ke,...i.commodityData[ke]})).sort((ke,Ne)=>ke.name.localeCompare(Ne.name)).slice(0,5),console.log("Final suggestions:",this.suggestions),this.showSuggestions()}isPopup(){return!1}getPopupPosition(){}destroy(){this.suggestionsDiv&&document.body.removeChild(this.suggestionsDiv)}}const M=[{field:"name",headerName:"Commodity",editable:!0,cellEditor:_,cellEditorPopup:!1,cellEditorPopupPosition:"under",singleClickEdit:!0,sortable:!1,onCellValueChanged:P=>{const B=i.commodityData[P.newValue],V=B?null:i.findClosestCommodity(P.newValue);if(B||V){const X=B||i.commodityData[V];P.data.type=X.type,P.data.category=X.category,P.data.basePrice=X.avgPrice,P.data.isFuzzyMatch=!!V,P.data.fuzzyMatchedName=V||null,P.data.isValid=!0}}},{field:"quantity",headerName:"Quantity",editable:!0,type:"numericColumn",cellEditor:"agNumberCellEditor",cellEditorParams:{min:0},sortable:!1},{headerName:"",field:"actions",width:50,sortable:!1,filter:!1,cellRenderer:P=>`<button class="text-red-600 hover:text-red-800 px-2" onclick="window.removeRow(${P.node.rowIndex})">×</button>`}],I=[{field:"name",headerName:"Commodity",editable:!0,cellEditor:_,cellEditorPopup:!1,cellEditorPopupPosition:"under",singleClickEdit:!0,sortable:!1,onCellValueChanged:P=>{const B=i.commodityData[P.newValue],V=B?null:i.findClosestCommodity(P.newValue);if(B||V){const X=B||i.commodityData[V];P.data.type=X.type,P.data.category=X.category,P.data.basePrice=X.avgPrice,P.data.isFuzzyMatch=!!V,P.data.fuzzyMatchedName=V||null,P.data.isValid=!0}}},{field:"quantity",headerName:"Quantity",editable:!0,type:"numericColumn",cellEditor:"agNumberCellEditor",cellEditorParams:{min:0},sortable:!1},{headerName:"",field:"actions",width:50,sortable:!1,filter:!1,cellRenderer:P=>`<button class="text-red-600 hover:text-red-800 px-2" onclick="window.removeSiteCommodityRow(${P.node.rowIndex}, ${P.node.data.siteId})">×</button>`}],W={sortable:!1,filter:!1,resizable:!0,flex:1,suppressKeyboardEvent:P=>{if(P.event.key==="Tab"&&!P.event.shiftKey){const B=P.api.getFocusedCell();if(B&&B.column.getColId()==="quantity"){const V=P.api.getDisplayedRowCount()-1;if(B.rowIndex===V)return P.event.preventDefault(),i.activeQuotes.find(fe=>fe.id===c.value)&&K(),!0}}return!1}},z=P=>{v.value=P.api,requestAnimationFrame(()=>{P.api.sizeColumnsToFit()})},de=(P,B)=>{H(l.value.id)},K=P=>{if(l.value&&(l.value.commodities.push({name:"",quantity:0,type:"unknown",category:"unknown",basePrice:0,isFuzzyMatch:!1,fuzzyMatchedName:null,isValid:!1}),v.value)){const B=l.value.commodities.length-1;v.value.setFocusedCell(B,"name"),v.value.startEditingCell({rowIndex:B,colKey:"name"})}},O=P=>{if(!v.value)return;const B=v.value.getSelectedNodes();if(B.length===0)return;const V=B.map(X=>X.data);l.value.commodities=l.value.commodities.filter(X=>!V.includes(X)),H(l.value.id)};eo(()=>o.params.quoteId,P=>{i.activeQuotes&&(P==="new"?ie():P&&(i.activeQuotes.find(V=>V.id===P)?(i.setActiveQuote(P),c.value=P):n.push("/workspace/quote/new")))},{immediate:!0}),eo(()=>c.value,P=>{P&&P!==o.params.quoteId&&n.push(`/workspace/quote/${P}`)});const ie=()=>{i.activeQuotes||i.$patch({activeQuotes:[],activeQuoteId:null});const P=i.addQuote({orderNumber:"",commander:"",systemName:"",destination:"",isPlanetarySite:!1,applyPitaFactor:!1,distanceFromSol:0,quoteType:"sites",commodities:[],sites:[],formattedQuote:"",fuzzyMatches:[],invalidCommodities:[]});i.setActiveQuote(P.id),c.value=P.id,n.push(`/workspace/quote/${P.id}`)},N=P=>{i.setActiveQuote(P),c.value=P,n.push(`/workspace/quote/${P}`)},oe=P=>{const B=[];return l.value.orderNumber&&B.push(l.value.orderNumber),l.value.commander&&B.push(l.value.commander),B.length===0&&B.push(l.value.systemName||"New Quote"),B.join(" - ")},F=()=>{if(!i.activeQuotes.find(V=>V.id===c.value))return;l.value.orderText=f.value;const B=yC(f.value,i);l.value.commander=B.cmdrName||"",l.value.systemName=B.systemName||"",l.value.destination="",l.value.isPlanetarySite=!1,l.value.commodities||(l.value.commodities=[]),l.value.commodities=[],B.commodityBreakdown&&Array.isArray(B.commodityBreakdown)&&(l.value.commodities=B.commodityBreakdown.map(V=>{const X=i.commodityData[V.name],fe=X?null:i.findClosestCommodity(V.name);return{name:V.name,quantity:V.quantity,type:(X==null?void 0:X.type)||(fe?i.commodityData[fe].type:"unknown"),category:(X==null?void 0:X.category)||(fe?i.commodityData[fe].category:"unknown"),basePrice:(X==null?void 0:X.avgPrice)||(fe?i.commodityData[fe].avgPrice:0),isFuzzyMatch:!!fe,fuzzyMatchedName:fe||null,isValid:!!X||!!fe}})),l.value.fuzzyMatches=Array.from(B.fuzzyMatches.entries()),l.value.invalidCommodities=B.invalidCommodities,H(l.value.id),u.value=!1,f.value=""},Y=P=>{if(!i.activeQuotes.find(X=>X.id===c.value))return;const V=Array.isArray(P)?P:P.commodities;l.value.commodities||(l.value.commodities=[]),V.forEach(X=>{const fe=i.commodityData[X.name],Se=fe?null:i.findClosestCommodity(X.name);l.value.commodities.push({name:X.name,quantity:X.quantity,type:(fe==null?void 0:fe.type)||(Se?i.commodityData[Se].type:"unknown"),category:(fe==null?void 0:fe.category)||(Se?i.commodityData[Se].category:"unknown"),basePrice:(fe==null?void 0:fe.avgPrice)||(Se?i.commodityData[Se].avgPrice:0),isFuzzyMatch:!!Se,fuzzyMatchedName:Se||null,isValid:!!fe||!!Se})}),H(l.value.id),d.value=!1};let J=1;const L=P=>{if(!l.value)return;l.value.sites||(l.value.sites=[]);const B={id:J++,name:"",isPlanetary:!1,commodities:[]};l.value.sites.push(B)},ce=(P,B)=>{if(confirm("Are you sure you want to remove this site?")&&i.activeQuotes.find(X=>X.id===P)&&l.value.sites){const X=l.value.sites.findIndex(fe=>fe.id===B);X>-1&&l.value.sites.splice(X,1)}},U=(P,B,V)=>{if(i.activeQuotes.find(fe=>fe.id===P)&&l.value.sites){const fe=l.value.sites.find(Se=>Se.id===B);fe&&fe.commodities.splice(V,1)}},le=(P,B)=>{if(i.activeQuotes.find(X=>X.id===P)&&l.value.sites){const X=l.value.sites.find(fe=>fe.id===B);X&&X.commodities.push({name:"",quantity:0,type:"unknown",category:"unknown",basePrice:0,isFuzzyMatch:!1,fuzzyMatchedName:null,isValid:!1,siteId:B})}},q=(P,B)=>{window.siteGridApis||(window.siteGridApis={}),window.siteGridApis[B]=P.api,requestAnimationFrame(()=>{P.api.sizeColumnsToFit()})},se=(P,B,V)=>{H(B)},be=()=>{h.value=!1,b.value=null},ue=()=>{if(!i.activeQuotes.find(V=>V.id===c.value)||!l.value.sites)return"Unknown Site";const B=l.value.sites.find(V=>V.id===b.value);return B?B.name||`Site ${l.value.sites.findIndex(V=>V.id===B.id)+1}`:"Unknown Site"},j=P=>{if(!i.activeQuotes.find(Se=>Se.id===c.value)||!l.value.sites)return;const V=l.value.sites.find(Se=>Se.id===b.value);if(!V)return;const X=Array.isArray(P)?P:P.commodities,fe=Array.isArray(P)?null:P.siteInfo;if(fe)fe.name&&!V.name&&(V.name=fe.name),fe.isPlanetary!==null&&(V.isPlanetary=fe.isPlanetary);else{const Se=ne(X);Se.name&&!V.name&&(V.name=Se.name),Se.isPlanetary!==null&&(V.isPlanetary=Se.isPlanetary)}X.forEach(Se=>{const ke=i.commodityData[Se.name],Ne=ke?null:i.findClosestCommodity(Se.name);V.commodities.push({name:Se.name,quantity:Se.quantity,type:(ke==null?void 0:ke.type)||(Ne?i.commodityData[Ne].type:"unknown"),category:(ke==null?void 0:ke.category)||(Ne?i.commodityData[Ne].category:"unknown"),basePrice:(ke==null?void 0:ke.avgPrice)||(Ne?i.commodityData[Ne].avgPrice:0),isFuzzyMatch:!!Ne,fuzzyMatchedName:Ne||null,isValid:!!ke||!!Ne,siteId:V.id})}),be()},Ee=P=>{if(!i.activeQuotes.find(Se=>Se.id===c.value))return;const V=Array.isArray(P)?P:P.commodities,X=Array.isArray(P)?null:P.siteInfo,fe={id:J++,name:"",isPlanetary:!1,commodities:[]};if(X)X.name&&(fe.name=X.name),X.isPlanetary!==null&&(fe.isPlanetary=X.isPlanetary);else{const Se=ne(V);Se.name&&(fe.name=Se.name),Se.isPlanetary!==null&&(fe.isPlanetary=Se.isPlanetary)}V.forEach(Se=>{const ke=i.commodityData[Se.name],Ne=ke?null:i.findClosestCommodity(Se.name);fe.commodities.push({name:Se.name,quantity:Se.quantity,type:(ke==null?void 0:ke.type)||(Ne?i.commodityData[Ne].type:"unknown"),category:(ke==null?void 0:ke.category)||(Ne?i.commodityData[Ne].category:"unknown"),basePrice:(ke==null?void 0:ke.avgPrice)||(Ne?i.commodityData[Ne].avgPrice:0),isFuzzyMatch:!!Ne,fuzzyMatchedName:Ne||null,isValid:!!ke||!!Ne,siteId:fe.id})}),l.value.sites||(l.value.sites=[]),l.value.sites.push(fe)},ne=P=>{const B={name:null,isPlanetary:null},V=["planetary","surface","landing","ground"],X=["orbital","station","outpost","space"];for(const fe of P){const Se=fe.name.toLowerCase();if(Se.includes("terminal")||Se.includes("station")){const ke=Se.match(/(\w+)\s+(terminal|station)/);ke&&(B.name=ke[1].charAt(0).toUpperCase()+ke[1].slice(1)+" "+ke[2].charAt(0).toUpperCase()+ke[2].slice(1))}V.some(ke=>Se.includes(ke))&&(B.isPlanetary=!0),X.some(ke=>Se.includes(ke))&&(B.isPlanetary=!1)}return B},pe=async P=>{if(l.value.systemName){S.value=!0,R.value="";try{const B={x:0,y:0,z:0},V=await fetch(`https://www.edsm.net/api-v1/system?systemName=${encodeURIComponent(l.value.systemName)}&showCoordinates=1`);if(!V.ok)throw new Error(`HTTP error! status: ${V.status}`);const X=await V.json();if(!X.coords)throw new Error("System coordinates not found in EDSM database");const fe=X.coords.x-B.x,Se=X.coords.y-B.y,ke=X.coords.z-B.z,Ne=Math.sqrt(fe*fe+Se*Se+ke*ke);l.value.distanceFromSol=Math.ceil(Ne)}catch(B){console.error("Distance calculation error:",B),R.value=`Failed to calculate distance: ${B.message}`}finally{S.value=!1}}},ae=P=>{if(!l.value.sites||l.value.sites.length===0)return"No sites configured for this activeQuote.";let B="";(l.value.orderNumber||l.value.commander)&&(l.value.orderNumber&&(B+=`Order Number: ${l.value.orderNumber}
`),l.value.commander&&(B+=`Commander: ${l.value.commander}
`),l.value.systemName&&(B+=`System: ${l.value.systemName}
`),B+=`
`);const V=Math.floor(l.value.distanceFromSol/500)*.1;let X=0,fe=0;for(let Se=0;Se<l.value.sites.length;Se++){const ke=l.value.sites[Se],Ne=xe(ke);B+=`==== SITE ${Se+1}: ${Ne.siteName} ====
`,Ne.isPlanetary?B+=`Type: Planetary (+10% surcharge)
`:B+=`Type: Orbital
`,B+=`Total Tonnage: ${Ne.totalTonnage}

`,B+="```\n",B+=`| Commodity                    | Quantity | GalAvg |Material Cost| Tonnage Cost  | Total         |
`,B+=`|------------------------------|----------|--------|-------------|---------------|---------------|
`;for(const lt of Ne.commodityBreakdown){const oo=lt.name.toLowerCase()+(lt.isValid?"":"*"),co=lt.quantity.toLocaleString(),Dt=lt.finalPrice.toLocaleString(),$t=(lt.quantity*lt.finalPrice).toLocaleString(),St=(lt.quantity*1e5).toLocaleString(),vo=(lt.quantity*lt.finalPrice+lt.quantity*1e5).toLocaleString();B+=`| ${oo.padEnd(28)} | ${co.padStart(8)} | ${Dt.padStart(6)} | ${$t.padStart(11)} | ${St.padStart(13)} | ${vo.padStart(13)} |
`}B+="```\n";const xt=Math.round(Ne.totalPrice*V),bt=l.value.applyPitaFactor?Math.round(Ne.totalPrice*10):0,Ot=Ne.totalPrice+xt+Ne.planetarySurcharge+bt;B+=`Material Cost:    ${Ne.totalCommodityCost.toLocaleString().padStart(15)} cr
`,B+=`Tonnage Rate:     ${Ne.totalTonnageFlatRate.toLocaleString().padStart(15)} cr
`,B+=`Distance Fee:     ${xt.toLocaleString().padStart(15)} cr
`,Ne.planetarySurcharge>0&&(B+=`Planetary Fee:    ${Ne.planetarySurcharge.toLocaleString().padStart(15)} cr
`),bt>0&&(B+=`PITA Factor:      ${bt.toLocaleString().padStart(15)} cr
`),B+=`Site Total:       ${Ot.toLocaleString().padStart(15)} cr

`,X+=Ot,fe+=Ne.totalTonnage}return B+=`==== GRAND TOTAL ====
`,B+=`Total Tonnage: ${fe}
`,B+=`Total Cost:    ${X.toLocaleString()} cr
`,B},xe=P=>{let B=0,V=0;const X=[];for(const Ne of P.commodities){if(!Ne.isValid)continue;const xt=Ne.basePrice||0,bt=xt*Ne.quantity;B+=bt,V+=Ne.quantity,X.push({name:Ne.name,quantity:Ne.quantity,finalPrice:xt,total:bt,isValid:Ne.isValid,isFuzzyMatch:Ne.isFuzzyMatch,fuzzyMatchedName:Ne.fuzzyMatchedName})}const fe=1e5*V,Se=B+fe,ke=P.isPlanetary?Math.round(Se*.1):0;return{siteName:P.name,isPlanetary:P.isPlanetary,totalCommodityCost:B,totalTonnage:V,totalTonnageFlatRate:fe,totalPrice:Se,planetarySurcharge:ke,commodityBreakdown:X}},Le=(P,B)=>{let V=0,X=0;if(!P.commodityBreakdown)return{totalCommodityCost:0,totalTonnage:0,totalTonnageFlatRate:0,totalPrice:0,commodityBreakdown:[],distanceSurcharge:0};for(const Ne of P.commodityBreakdown){if(!Ne)continue;const xt=i.commodityData[Ne.name];if(!xt)continue;const bt=xt.avgPrice,Ot=bt*Ne.quantity;V+=Ot,X+=Ne.quantity,Ne.finalPrice=bt,Ne.total=Ot}const fe=Math.floor(B/500)*.1,Se=1e5*X,ke=V+Se;return{totalCommodityCost:V,totalTonnage:X,totalTonnageFlatRate:Se,totalPrice:ke,commodityBreakdown:P.commodityBreakdown,distanceSurcharge:fe}},nt=(P,B)=>{let V="";(P.orderNumber||P.commander)&&(P.orderNumber&&(V+=`Order Number: ${P.orderNumber}
`),P.commander&&(V+=`Commander: ${P.commander}
`),V+=`
`);const X=[...B.commodityBreakdown||[]].filter(St=>St&&St.quantity>0).sort((St,vo)=>St.name.localeCompare(vo.name)),fe=[];let Se=null;for(const St of X)Se&&Se.name===St.name?(Se.quantity+=St.quantity,Se.finalPrice=St.finalPrice,Se.total=Se.quantity*Se.finalPrice):(Se&&fe.push(Se),Se={...St});Se&&fe.push(Se);const ke=fe.reduce((St,vo)=>St+((vo==null?void 0:vo.quantity)||0),0);V+=`Total Tonnage: ${ke}

`,V+="```\n",V+=`| Commodity                    | Quantity | GalAvg |Material Cost| Tonnage Cost  | Total         |
`,V+=`|------------------------------|----------|--------|-------------|---------------|---------------|
`;for(const St of fe){const vo=St.name.toLowerCase()+(St.isValid?"":"*"),_e=St.quantity.toLocaleString(),Fe=St.finalPrice.toLocaleString(),Ve=(St.quantity*St.finalPrice).toLocaleString(),Ke=(St.quantity*1e5).toLocaleString(),it=(St.quantity*St.finalPrice+St.quantity*1e5).toLocaleString();V+=`| ${vo.padEnd(28)} | ${_e.padStart(8)} | ${Fe.padStart(6)} | ${Ve.padStart(11)} | ${Ke.padStart(13)} | ${it.padStart(13)} |
`}V+="```\n";const Ne=B.totalCommodityCost,xt=B.totalTonnageFlatRate,bt=B.totalPrice,Ot=Math.round(bt*B.distanceSurcharge),lt=P.isPlanetarySite?Math.round(bt*.1):0,oo=P.applyPitaFactor?Math.round(bt*10):0,co=bt+Ot+lt+oo;V+=`==== SUMMARY ====
`,V+=`Material Cost:    ${Ne.toLocaleString().padStart(15)} cr
`,V+=`Tonnage Rate:     ${xt.toLocaleString().padStart(15)} cr
`,V+=`Distance Rate:    ${(B.distanceSurcharge*100).toFixed(0).padStart(15)}%
`,V+=`Distance Fee:     ${Ot.toLocaleString().padStart(15)} cr
`,lt>0&&(V+=`Planetary Fee:    ${lt.toLocaleString().padStart(15)} cr
`),oo>0&&(V+=`PITA Factor:      ${oo.toLocaleString().padStart(15)} cr
`),V+=`Total Cost:       ${co.toLocaleString().padStart(15)} cr`;const Dt=fe.filter(St=>St.isFuzzyMatch),$t=fe.filter(St=>!St.isValid);return(Dt.length>0||$t.length>0)&&(V+=`

==== MATCHING INFORMATION ====
`,Dt.length>0&&(V+=`
Fuzzy Matches:
`,Dt.forEach(St=>{V+=`  "${St.name}" → "${St.fuzzyMatchedName}"
`})),$t.length>0&&(V+=`
Unmatched Commodities:
`,V+="  "+$t.map(St=>St.name).join(", ")+`
`)),V},H=P=>{const B=l.value;if(!B)return;if(B.quoteType==="system"||!B.quoteType&&B.commodities&&B.commodities.length>0){if(!B.sites||B.sites.length===0){const X=B.destination||"Destination",fe=B.isPlanetarySite;B.sites=[{id:1,name:X,isPlanetary:fe,commodities:B.commodities.map(Se=>({name:Se.name,quantity:Se.quantity,type:Se.type||"unknown",category:Se.category||"unknown",basePrice:Se.basePrice||0,isFuzzyMatch:Se.isFuzzyMatch||!1,fuzzyMatchedName:Se.fuzzyMatchedName||null,isValid:Se.isValid||!1,siteId:1}))}]}B.quoteType="sites"}const V=ae();i.updateQuote(P,{formattedQuote:V})},w=async P=>{try{await navigator.clipboard.writeText(P)}catch(B){console.error("Failed to copy text:",B)}},Q=P=>{const B={system:P.systemName||null,distance:P.distanceFromSol||0,sites:[]};if(P.quoteType==="system"||!P.quoteType&&P.commodities&&P.commodities.length>0){const V=P.destination||"Destination",X=P.isPlanetarySite?"Planetary":"Orbital";B.sites.push({name:V,type:X,commodities:P.commodities.map(fe=>[fe.name,fe.quantity])})}else P.quoteType==="sites"&&P.sites&&(B.sites=P.sites.map(V=>({name:V.name,type:V.isPlanetary?"Planetary":"Orbital",commodities:V.commodities.map(X=>[X.name,X.quantity])})));return B},re=P=>{let B=`# Quote Data Export
# Generated: ${new Date().toLocaleString()}
# Commodity format: [name, quantity]

system: ${P.system?`"${P.system}"`:"null"}
distance: ${P.distance}

sites:
`;return P.sites.forEach((V,X)=>{B+=`  - name: "${V.name}"
    type: "${V.type}"
    commodities:
`,V.commodities.forEach((fe,Se)=>{B+=`      - ["${fe[0]}", ${fe[1]}]
`})}),B},A=async()=>{if(l.value)try{const P=Q(l.value),B=re(P);await w(B),alert("Quote copied as YAML to clipboard!")}catch(P){console.error("Failed to copy YAML:",P),alert("Failed to copy YAML. Please try again.")}},k=P=>{const B=l.value;if(!B)return;console.log("Quote data:",B);const V={orderNumber:l.value.orderNumber,commander:l.value.commander,systemName:l.value.systemName,destination:l.value.destination,isPlanetarySite:l.value.isPlanetarySite,applyPitaFactor:l.value.applyPitaFactor,commodityBreakdown:l.value.commodities.map(xt=>({name:xt.name,quantity:xt.quantity,finalPrice:xt.basePrice||0}))};console.log("Order data:",V);const X=Le(V,l.value.distanceFromSol);console.log("Quote calculation data:",X);const fe=G(V);console.log("Total customer cost:",fe);const Se=Math.round(fe||0);console.log("Final amount:",Se);const ke={recipient:l.value.commander,purpose:`Order ${l.value.orderNumber||"Payment"}`,amounts:[Se.toString()],amount:Se,cargoSize:100,commodity:"tritium",direction:"paying",bringCommodity:0,leaveCommodity:0,tradingRounds:[],totalUnits:0,totalValue:0,error:0};console.log("New calculator:",ke);const Ne=r.addCalculator(ke);n.push(`/transfer/${Ne.id}`)},T=P=>{if(confirm("Are you sure you want to remove this quote?"))if(i.removeQuote(P),i.activeQuotes.length===0)ie();else{const B=i.activeQuotes[i.activeQuotes.length-1];i.setActiveQuote(B.id),c.value=B.id}},G=(P,B)=>{const V=l.value.totalPrice,X=Math.round(V*l.value.distanceSurcharge),fe=P.isPlanetarySite?Math.round(V*.1):0,Se=P.applyPitaFactor?Math.round(V*10):0;return V+X+fe+Se};if(window.removeRow=P=>{i.activeQuotes.find(V=>V.id===c.value)&&(l.value.commodities.splice(P,1),H(l.value.id))},window.removeSiteCommodityRow=(P,B)=>{if(i.activeQuotes.find(X=>X.id===c.value)&&l.value.sites){const X=l.value.sites.find(fe=>fe.id===B);X&&(X.commodities.splice(P,1),H(l.value.id))}},!i.activeQuotes||i.activeQuotes.length===0)ie();else{const P=i.activeQuotes[0];P&&!P.commander&&!P.systemName&&(!P.commodities||P.commodities.length===0)&&(u.value=!0)}const ee={route:o,router:n,store:i,orderStore:s,transferStore:r,toolStore:a,activeQuote:l,activeQuoteId:c,showPasteDialog:u,showOCRDialog:d,showSiteOCRDialog:h,pastedOrderText:f,gridApi:v,quoteMode:m,currentSiteId:b,isCalculatingDistance:S,distanceCalculationError:R,CommodityCellEditor:_,columnDefs:M,siteColumnDefs:I,defaultColDef:W,onGridReady:z,onCellValueChanged:de,addNewRow:K,removeSelectedRows:O,createNewQuote:ie,switchToQuote:N,getTabLabel:oe,processPastedOrder:F,handleOCRCommodities:Y,get nextSiteId(){return J},set nextSiteId(P){J=P},addSite:L,removeSite:ce,removeSiteCommodity:U,addSiteCommodity:le,onSiteGridReady:q,onSiteCellValueChanged:se,closeSiteOCRDialog:be,getCurrentSiteName:ue,handleSiteOCRCommodities:j,handleMultipleSiteOCR:Ee,extractSiteInfoFromOCR:ne,calculateDistanceFromSol:pe,generateSiteBasedQuote:ae,calculateSiteQuote:xe,calculateQuote:Le,formatQuote:nt,generateQuote:H,copyToClipboard:w,convertQuoteToYAML:Q,formatYAML:re,copyQuoteAsYAML:A,sendToPayment:k,removeQuote:T,calculateTotalCost:G,ref:De,computed:Ze,nextTick:Pr,onMounted:Xt,defineComponent:El,watch:eo,get AgGridVue(){return JW},get ModuleRegistry(){return Ry},get AllCommunityModule(){return hC},get useQuoteStore(){return qa},get useOrderStore(){return hi},get useTransferStore(){return Ts},get useToolStore(){return vC},get parseOrderText(){return yC},get useRoute(){return Ar},get useRouter(){return Ms},OCRProcessor:KU};return Object.defineProperty(ee,"__isScriptSetup",{enumerable:!1,value:!0}),ee}},QU={class:"bg-white rounded-lg p-8 mb-8 shadow-md"},YU={class:"mb-6"},JU={class:"flex justify-between items-center"},ZU={class:"flex space-x-2"},XU={key:0,class:"mt-6"},e$={class:"space-y-2"},t$=["for"],o$=["id"],n$={class:"space-y-2"},i$=["for"],s$=["id"],r$={class:"space-y-2"},a$=["for"],l$=["id"],c$={key:0,class:"mt-1"},u$=["href"],d$={class:"space-y-2"},h$=["for"],f$=["id"],p$={class:"space-y-2"},g$=["for"],m$={class:"flex space-x-2"},v$=["id"],y$=["disabled"],C$={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},b$={key:1,class:"mr-2"},w$={key:0,class:"text-sm text-red-600"},S$={class:"flex items-center space-x-2"},x$=["id"],R$=["for"],_$={class:"flex items-center space-x-2"},E$=["id"],P$=["for"],F$={class:"space-y-2"},D$={class:"flex space-x-2"},T$={class:"space-y-4"},k$={class:"flex justify-between items-center"},A$={class:"flex space-x-2"},I$={key:0,class:"text-center py-8 text-gray-500"},M$={key:1,class:"space-y-4"},O$={class:"flex justify-between items-start mb-4"},L$={class:"text-md font-medium text-gray-900"},B$={class:"flex space-x-2"},N$=["onClick"],H$={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},G$={class:"space-y-2"},V$=["for"],z$=["id","onUpdate:modelValue"],W$={class:"space-y-2"},U$=["for"],$$=["id","onUpdate:modelValue"],j$={class:"space-y-2"},K$={class:"flex justify-between items-center"},q$={class:"flex space-x-2"},Q$=["onClick"],Y$={class:"text-sm text-gray-500"},J$={key:0,class:"text-center py-4 text-gray-500 bg-gray-50 rounded"},Z$={key:1,class:"h-full w-full"},X$={key:0,class:"mt-8 p-6 bg-gray-50 rounded-lg"},e8={class:"bg-white p-4 rounded-lg shadow-sm mb-4"},t8={class:"whitespace-pre-wrap font-mono text-sm"},o8={class:"flex flex-wrap gap-2"},n8={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},i8={class:"bg-white rounded-lg p-6 w-full max-w-2xl"},s8={class:"flex justify-between items-center mb-4"},r8={class:"space-y-4"},a8={class:"flex justify-end gap-3"},l8={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},c8={class:"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto"},u8={class:"flex justify-between items-center mb-4"},d8={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},h8={class:"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto"};function f8(e,t,o,n,i,s){return ge(),me("div",QU,[y("div",YU,[y("div",JU,[t[21]||(t[21]=y("div",null,[y("h2",{class:"text-2xl font-bold text-gray-900"},"Quote Generator"),y("p",{class:"text-gray-600 mt-1"}," Convert order text into formatted quotes with pricing. ")],-1)),y("div",ZU,[y("button",{onClick:t[0]||(t[0]=r=>n.quoteMode="single"),class:Ft(["px-4 py-2 rounded-md transition-colors",n.quoteMode==="single"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Single Quote ",2),y("button",{onClick:t[1]||(t[1]=r=>n.quoteMode="sites"),class:Ft(["px-4 py-2 rounded-md transition-colors",n.quoteMode==="sites"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Site-Based Quote ",2)])])]),n.activeQuote?(ge(),me("div",XU,[y("form",{onSubmit:t[13]||(t[13]=Qt(r=>n.generateQuote(n.activeQuote.id),["prevent"])),class:"max-w-3xl mx-auto space-y-6"},[y("div",e$,[y("label",{for:"orderNumber-"+n.activeQuote.id,class:"block text-sm font-medium text-gray-700"},"Order Number",8,t$),Xe(y("input",{type:"text",id:"orderNumber-"+n.activeQuote.id,"onUpdate:modelValue":t[2]||(t[2]=r=>n.activeQuote.orderNumber=r),placeholder:"Enter order number",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,o$),[[dt,n.activeQuote.orderNumber]])]),y("div",n$,[y("label",{for:"commander-"+n.activeQuote.id,class:"block text-sm font-medium text-gray-700"},"Commander",8,i$),Xe(y("input",{type:"text",id:"commander-"+n.activeQuote.id,"onUpdate:modelValue":t[3]||(t[3]=r=>n.activeQuote.commander=r),placeholder:"Enter commander name",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,s$),[[dt,n.activeQuote.commander]])]),y("div",r$,[y("label",{for:"systemName-"+n.activeQuote.id,class:"block text-sm font-medium text-gray-700"},"System Name",8,a$),Xe(y("input",{type:"text",id:"systemName-"+n.activeQuote.id,"onUpdate:modelValue":t[4]||(t[4]=r=>n.activeQuote.systemName=r),placeholder:"Enter or edit system name",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,l$),[[dt,n.activeQuote.systemName]]),n.activeQuote.systemName?(ge(),me("div",c$,[y("a",{href:"https://www.edsm.net/en/system?systemName="+encodeURIComponent(n.activeQuote.systemName),target:"_blank",class:"text-sm text-blue-600 hover:text-blue-800 hover:underline"}," Look up distances for "+ye(n.activeQuote.systemName)+" on EDSM ",9,u$)])):we("v-if",!0)]),y("div",d$,[y("label",{for:"destination-"+n.activeQuote.id,class:"block text-sm font-medium text-gray-700"},"Destination",8,h$),Xe(y("input",{type:"text",id:"destination-"+n.activeQuote.id,"onUpdate:modelValue":t[5]||(t[5]=r=>n.activeQuote.destination=r),placeholder:"Enter destination (e.g. station, planet, etc.)",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,f$),[[dt,n.activeQuote.destination]])]),y("div",p$,[y("label",{for:"distanceFromSol-"+n.activeQuote.id,class:"block text-sm font-medium text-gray-700"},"Distance from Sol (light years)",8,g$),y("div",m$,[Xe(y("input",{type:"number",id:"distanceFromSol-"+n.activeQuote.id,"onUpdate:modelValue":t[6]||(t[6]=r=>n.activeQuote.distanceFromSol=r),placeholder:"Enter distance from Sol",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,v$),[[dt,n.activeQuote.distanceFromSol,void 0,{number:!0}]]),y("button",{type:"button",onClick:t[7]||(t[7]=r=>n.calculateDistanceFromSol(n.activeQuote)),disabled:!n.activeQuote.systemName||n.isCalculatingDistance,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center"},[n.isCalculatingDistance?(ge(),me("span",C$)):(ge(),me("span",b$,"📏")),t[22]||(t[22]=so(" Calculate "))],8,y$)]),n.distanceCalculationError?(ge(),me("div",w$,ye(n.distanceCalculationError),1)):we("v-if",!0)]),y("div",S$,[Xe(y("input",{type:"checkbox",id:"isPlanetarySite-"+n.activeQuote.id,"onUpdate:modelValue":t[8]||(t[8]=r=>n.activeQuote.isPlanetarySite=r),class:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,8,x$),[[Xh,n.activeQuote.isPlanetarySite]]),y("label",{for:"isPlanetarySite-"+n.activeQuote.id,class:"text-sm font-medium text-gray-700"},"Planetary Site Delivery",8,R$)]),y("div",_$,[Xe(y("input",{type:"checkbox",id:"applyPitaFactor-"+n.activeQuote.id,"onUpdate:modelValue":t[9]||(t[9]=r=>n.activeQuote.applyPitaFactor=r),class:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,8,E$),[[Xh,n.activeQuote.applyPitaFactor]]),y("label",{for:"applyPitaFactor-"+n.activeQuote.id,class:"text-sm font-medium text-gray-700"},"Apply PITA Factor (+1000%)",8,P$)]),we(" Quote Type Toggle - Only Site-Based "),y("div",F$,[t[23]||(t[23]=y("label",{class:"block text-sm font-medium text-gray-700"},"Quote Type",-1)),y("div",D$,[y("button",{type:"button",onClick:t[10]||(t[10]=r=>n.activeQuote.quoteType="sites"),class:Ft(["px-4 py-2 rounded-md transition-colors",(n.activeQuote.quoteType||"sites")==="sites"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Site-Based ",2)])]),we(" Site-Based Commodities Section "),y("div",T$,[y("div",k$,[t[26]||(t[26]=y("h3",{class:"text-lg font-medium text-gray-900"},"Sites",-1)),y("div",A$,[y("button",{onClick:t[11]||(t[11]=r=>n.showSiteOCRDialog=!0),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center"},t[24]||(t[24]=[y("span",{class:"mr-2"},"📷",-1),so(" OCR Sites ")])),y("button",{onClick:t[12]||(t[12]=r=>n.addSite(n.activeQuote)),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center"},t[25]||(t[25]=[y("span",{class:"mr-2"},"+",-1),so(" Add Site ")]))])]),we(" Sites List "),!n.activeQuote.sites||n.activeQuote.sites.length===0?(ge(),me("div",I$,t[27]||(t[27]=[y("p",null,'No sites added yet. Click "Add Site" to get started.',-1)]))):(ge(),me("div",M$,[(ge(!0),me(Ct,null,Tt(n.activeQuote.sites,(r,a)=>(ge(),me("div",{key:r.id,class:"border rounded-lg p-4"},[y("div",O$,[y("h4",L$," Site "+ye(a+1),1),y("div",B$,[y("button",{onClick:l=>n.removeSite(n.activeQuote.id,r.id),class:"px-3 py-1 text-sm bg-red-100 text-red-800 rounded hover:bg-red-200 transition-colors"}," Remove ",8,N$)])]),we(" Site Details "),y("div",H$,[y("div",G$,[y("label",{for:`siteName-${n.activeQuote.id}-${r.id}`,class:"block text-sm font-medium text-gray-700"},"Site Name",8,V$),Xe(y("input",{type:"text",id:`siteName-${n.activeQuote.id}-${r.id}`,"onUpdate:modelValue":l=>r.name=l,placeholder:"Enter site name",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,z$),[[dt,r.name]])]),y("div",W$,[y("label",{for:`siteType-${n.activeQuote.id}-${r.id}`,class:"block text-sm font-medium text-gray-700"},"Site Type",8,U$),Xe(y("select",{id:`siteType-${n.activeQuote.id}-${r.id}`,"onUpdate:modelValue":l=>r.isPlanetary=l,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[28]||(t[28]=[y("option",{value:!1},"Orbital",-1),y("option",{value:!0},"Planetary (+10%)",-1)])],8,$$),[[Wo,r.isPlanetary]])])]),we(" Site Commodities "),y("div",j$,[y("div",K$,[t[29]||(t[29]=y("label",{class:"block text-sm font-medium text-gray-700"},"Commodities",-1)),y("div",q$,[y("button",{onClick:l=>n.addSiteCommodity(n.activeQuote.id,r.id),class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"}," Add Commodity ",8,Q$),y("span",Y$,ye(r.commodities.length)+" items",1)])]),r.commodities.length===0?(ge(),me("div",J$,[...t[30]||(t[30]=[y("p",{class:"text-sm"}," No commodities added yet. Use OCR or add manually. ",-1)])])):(ge(),me("div",Z$,[jt(n.AgGridVue,{class:"ag-theme-alpine",columnDefs:n.siteColumnDefs,rowData:r.commodities,defaultColDef:n.defaultColDef,domLayout:"autoHeight",copyHeadersToClipboard:!0,rowSelection:{mode:"none",enableClickSelection:!1},theme:"legacy",onGridReady:l=>n.onSiteGridReady(l,r.id),onCellValueChanged:l=>n.onSiteCellValueChanged(l,n.activeQuote.id,r.id)},null,8,["rowData","onGridReady","onCellValueChanged"])]))])]))),128))]))]),t[31]||(t[31]=y("button",{type:"submit",class:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Generate Quote ",-1))],32),n.activeQuote.formattedQuote?(ge(),me("div",X$,[t[32]||(t[32]=y("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Generated Quote",-1)),y("div",e8,[y("pre",t8,ye(n.activeQuote.formattedQuote),1)]),y("div",o8,[y("button",{class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",onClick:t[14]||(t[14]=r=>n.copyToClipboard(n.activeQuote.formattedQuote))}," Copy to Clipboard "),y("button",{class:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",onClick:n.copyQuoteAsYAML}," Copy as YAML "),y("button",{class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",onClick:t[15]||(t[15]=r=>n.sendToPayment(n.activeQuote))}," Send to Payment Calculator "),y("button",{class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",onClick:t[16]||(t[16]=r=>n.removeQuote(n.activeQuote.id))}," Remove Quote ")])])):we("v-if",!0)])):we("v-if",!0),we(" Paste Order Text Dialog "),n.showPasteDialog?(ge(),me("div",n8,[y("div",i8,[y("div",s8,[t[34]||(t[34]=y("h3",{class:"text-xl font-semibold"},"Paste Order Text",-1)),y("button",{onClick:t[17]||(t[17]=r=>n.showPasteDialog=!1),class:"text-gray-500 hover:text-gray-700"},t[33]||(t[33]=[y("span",{class:"text-2xl"},"×",-1)]))]),y("div",r8,[Xe(y("textarea",{"onUpdate:modelValue":t[18]||(t[18]=r=>n.pastedOrderText=r),rows:"10",placeholder:"Paste order text here...",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.pastedOrderText]]),y("div",a8,[y("button",{type:"button",onClick:t[19]||(t[19]=r=>n.showPasteDialog=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors"}," Cancel "),y("button",{type:"button",onClick:n.processPastedOrder,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Process Order ")])])])])):we("v-if",!0),we(" OCR Dialog "),n.showOCRDialog?(ge(),me("div",l8,[y("div",c8,[y("div",u8,[t[36]||(t[36]=y("h3",{class:"text-xl font-semibold"},"OCR Image Processing",-1)),y("button",{onClick:t[20]||(t[20]=r=>n.showOCRDialog=!1),class:"text-gray-500 hover:text-gray-700"},t[35]||(t[35]=[y("span",{class:"text-2xl"},"×",-1)]))]),jt(n.OCRProcessor,{"quote-id":n.activeQuoteId,onCommoditiesExtracted:n.handleOCRCommodities},null,8,["quote-id"])])])):we("v-if",!0),we(" Site OCR Dialog "),n.showSiteOCRDialog?(ge(),me("div",d8,[y("div",h8,[y("div",{class:"flex justify-between items-center mb-4"},[t[38]||(t[38]=y("h3",{class:"text-xl font-semibold"},"OCR Site Processing - Multiple Sites",-1)),y("button",{onClick:n.closeSiteOCRDialog,class:"text-gray-500 hover:text-gray-700"},t[37]||(t[37]=[y("span",{class:"text-2xl"},"×",-1)]))]),jt(n.OCRProcessor,{"quote-id":n.activeQuoteId,onCommoditiesExtracted:n.handleMultipleSiteOCR},null,8,["quote-id"])])])):we("v-if",!0)])}const RC=To(qU,[["render",f8],["__file","/app/src/js/components/QuoteGenerator.vue"]]);function p8(e){if(!e||typeof e!="string")return{decimalSeparator:".",thousandSeparator:",",format:"unknown"};const t=e.replace(/[\s$€£¥]|cr$/gi,""),o=(t.match(/,/g)||[]).length,n=(t.match(/\./g)||[]).length,i=(t.match(/\s/g)||[]).length;if(o>0&&n>0){const s=t.lastIndexOf(",");return t.lastIndexOf(".")>s?{decimalSeparator:".",thousandSeparator:",",format:"us"}:{decimalSeparator:",",thousandSeparator:".",format:"eu"}}else if(o>0){const s=t.split(",");return s.length===2&&s[1].length<=2?{decimalSeparator:",",thousandSeparator:".",format:"eu"}:{decimalSeparator:".",thousandSeparator:",",format:"us"}}else if(n>0){const s=t.split(".");return s.length===2&&s[1].length<=2?{decimalSeparator:".",thousandSeparator:",",format:"us"}:{decimalSeparator:",",thousandSeparator:".",format:"eu"}}else if(i>0){const s=t.includes(","),r=t.includes(".");return s&&!r?{decimalSeparator:",",thousandSeparator:" ",format:"french"}:r&&!s?{decimalSeparator:".",thousandSeparator:" ",format:"french"}:{decimalSeparator:".",thousandSeparator:" ",format:"french"}}return{decimalSeparator:".",thousandSeparator:",",format:"us"}}function Wc(e){if(!e||typeof e!="string")return null;let t=e.replace(/[\s$€£¥]|cr$/gi,"");const o=p8(t);(t.includes("11460285981")||t.includes("11,460,285,981"))&&console.log("Debug parsing:",{original:e,clean:t,format:o});try{if(o.format==="us")t=t.replace(/,/g,"");else if(o.format==="eu")t=t.replace(/\./g,"").replace(/,/g,".");else if(o.format==="french")o.decimalSeparator===","?t=t.replace(/\s/g,"").replace(/,/g,"."):t=t.replace(/\s/g,"");else if(t.includes(",")&&t.includes("."))t=t.replace(/,/g,"");else if(t.includes(",")&&!t.includes(".")){const i=t.split(",");i.length===2&&i[1].length<=2?t=t.replace(/,/g,"."):t=t.replace(/,/g,"")}const n=parseFloat(t);if(e.includes("11,460,285,981")&&console.log("Debug result:",{cleanStr:t,result:n,isNaN:isNaN(n)}),isNaN(n)){const i=parseInt(t,10);return isNaN(i)?null:i}return n}catch(n){return console.warn("Error parsing locale number:",n),null}}function g8(e){if(!e||typeof e!="string")return"0";const t=Wc(e);return t!==null?t.toString():"0"}function Lh(e){return!e||typeof e!="string"?!1:/^[0-9+\-*/().,\s]+(cr)?$/i.test(e)}function m8(){var e;return navigator.language||((e=navigator.languages)==null?void 0:e[0])||"en-US"}function _C(e,t=null){if(e==null||isNaN(e))return"0";const o=t||m8();return new Intl.NumberFormat(o).format(e)}const v8={__name:"TransferCalculator",setup(e,{expose:t}){t();const o=Ar(),n=Ms(),i=Ts(),s=Ze(()=>{var O;return(O=i.activeCalculators)==null?void 0:O.find(ie=>ie.id===r.value)}),r=De(null),a=Ze(()=>i.activeCalculators.map(O=>{var ie;return O.amounts?O.amounts.length?O:{...O,amounts:["0"]}:{...O,amounts:[((ie=O.amount)==null?void 0:ie.toString())||"0"]}}));eo(()=>o.params.calculatorId,O=>{O==="new"?l():O&&(i.activeCalculators.find(N=>N.id===O)?(i.setActiveCalculator(O),r.value=O):n.push("/transfer/new"))},{immediate:!0}),eo(()=>r.value,O=>{O&&O!==o.params.calculatorId&&n.push(`/transfer/${O}`)});const l=()=>{const O=i.addCalculator({recipient:"",purpose:"",amounts:["0"],amount:0,cargoSize:0,commodity:"painite",direction:"paying",bringCommodity:0,leaveCommodity:0,tradingRounds:[],totalUnits:0,totalValue:0,error:0});i.setActiveCalculator(O.id),r.value=O.id,n.push(`/transfer/${O.id}`)},c=O=>{i.setActiveCalculator(O),r.value=O,n.push(`/transfer/${O}`)},u=O=>{if(confirm("Are you sure you want to remove this calculator?"))if(i.removeCalculator(O),i.activeCalculators.length===0)l();else{const ie=i.activeCalculators[i.activeCalculators.length-1];i.setActiveCalculator(ie.id),r.value=ie.id}},d=O=>{const ie=s.value;if(!ie)return;_(ie);const N=W(ie),oe=i.calculateTradingRounds(N,ie.cargoSize,ie.commodity,ie.direction,ie.bringCommodity,ie.leaveCommodity);if(oe.length===0){ie.error="Invalid calculation parameters. Please check your inputs.";return}const F=oe.reduce((L,ce)=>L+ce.units,0),Y=oe.reduce((L,ce)=>L+ce.value,0),J=ie.amount-Y;i.updateCalculator(O,{tradingRounds:oe,totalUnits:F,totalValue:Y,error:J}),i.setLastCommodity(ie.commodity),i.setLastDirection(ie.direction)},h=O=>({tritium:51299,alexandrite:205143,monzaite:195083,painite:59791})[O]||0,f=(O,ie)=>{a.value.find(oe=>s.id===O)&&(i.updateCalculator(O,{status:"paid",paymentType:ie}),u(O))},v=(O,ie)=>{const N=O.amounts[ie];try{if(!Lh(N))throw new Error("Invalid characters in expression");const oe=b(N);if(isNaN(oe)||!isFinite(oe))throw new Error("Invalid calculation");_(O)}catch(oe){console.warn("Invalid calculation for:",N,oe),_(O)}},m=O=>{O=O.replace(/cr$/gi,"");const ie=/(\d+[.,]\d*|\d+)/g;let N=O;return N=N.replace(ie,oe=>{const F=Wc(oe);return F!==null?F.toString():oe}),N},b=O=>{if(O=O.replace(/\s+/g,""),O=O.replace(/(\d+)k/gi,"$1*1000"),O=O.replace(/cr$/gi,""),!/[+\-*/()]/.test(O)){const ce=Wc(O);return console.log("Simple number parsing:",{expression:O,result:ce}),ce!==null?ce:0}const oe=m(O).match(/(\d+\.?\d*|[+\-*/()])/g)||[],F=[],Y=[],J={"+":1,"-":1,"*":2,"/":2};for(const ce of oe)if(/^\d+\.?\d*$/.test(ce))F.push(parseFloat(ce));else if(ce==="(")Y.push(ce);else if(ce===")"){for(;Y.length>0&&Y[Y.length-1]!=="(";)F.push(Y.pop());Y.length>0&&Y[Y.length-1]==="("&&Y.pop()}else{for(;Y.length>0&&Y[Y.length-1]!=="("&&J[Y[Y.length-1]]>=J[ce];)F.push(Y.pop());Y.push(ce)}for(;Y.length>0;)F.push(Y.pop());const L=[];for(const ce of F)if(typeof ce=="number")L.push(ce);else{const U=L.pop(),le=L.pop();switch(ce){case"+":L.push(le+U);break;case"-":L.push(le-U);break;case"*":L.push(le*U);break;case"/":if(U===0)throw new Error("Division by zero");L.push(le/U);break}}if(L.length!==1)throw new Error("Invalid expression");return L[0]},S=O=>{try{if(!Lh(O))return null;const ie=b(O);return isNaN(ie)||!isFinite(ie)?null:ie}catch{return null}},R=O=>O==null?"0":_C(O),_=O=>{O.amount=O.amounts.reduce((ie,N)=>{const oe=S(N);return ie+(oe||0)},0)},M=O=>{O.amounts.push("0")},I=(O,ie)=>{O.amounts.length>1?(O.amounts.splice(ie,1),_(O)):(O.amounts[0]="0",_(O))},W=O=>{const ie=h(O.commodity);let N=O.amount;return O.bringCommodity>0&&(N-=O.bringCommodity*ie),O.leaveCommodity>0&&(N+=O.leaveCommodity*ie),N},z=(O,ie)=>{const N=O/ie*100,oe=Math.round(N*2)/2,F=Math.round(ie*(oe/100));return Math.abs(F-O)<10?oe:Math.round(N)},de=O=>{const ie=z(O.fcSellPrice,O.basePrice),N=z(O.fcBuyPrice,O.basePrice),oe=`\`\`\`
Round ${O.round} (${O.units.toLocaleString()} units)
FC Sell: ${O.fcSellPrice.toLocaleString()} cr/unit (${ie}%)
FC Buy: ${O.fcBuyPrice.toLocaleString()} cr/unit (${N}%)
Transfer: ${O.value.toLocaleString()} cr${O.remainingAfter!==void 0?`
Remaining: ${O.remainingAfter.toLocaleString()} cr`:""}
\`\`\``;navigator.clipboard.writeText(oe).then(()=>{})};Xt(()=>{i.activeCalculators.length===0&&l()});const K={route:o,router:n,store:i,activeCalculator:s,activeCalculatorId:r,activeCalculators:a,createNewCalculator:l,switchToCalculator:c,removeCalculator:u,calculateTransfer:d,getCommodityBasePrice:h,markAsPaid:f,validateAndCalculateAmount:v,normalizeLocaleExpression:m,safeEvaluate:b,getCalculatedAmount:S,formatNumber:R,updateTotalAmount:_,addAmount:M,removeAmount:I,getAdjustedAmount:W,calculateGamePercentage:z,copyRoundToClipboard:de,ref:De,onMounted:Xt,watch:eo,computed:Ze,get useRoute(){return Ar},get useRouter(){return Ms},get useTransferStore(){return Ts},get parseLocaleNumber(){return Wc},get normalizeNumberString(){return g8},get isValidLocaleNumberString(){return Lh},get formatNumberForLocale(){return _C}};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}},y8={class:"space-y-6"},C8={key:0,class:"space-y-4"},b8={class:"space-y-2"},w8=["for"],S8=["id"],x8={class:"space-y-2"},R8=["for"],_8=["id"],E8={class:"space-y-2"},P8=["for"],F8={class:"space-y-2"},D8={class:"flex-1 relative"},T8=["id","onUpdate:modelValue","onInput"],k8={key:0,class:"absolute right-2 top-1/2 -translate-y-1/2 text-sm text-gray-500"},A8=["onClick","disabled"],I8={class:"flex justify-between items-center pt-2 border-t border-gray-200"},M8={class:"text-lg font-semibold text-slate-800"},O8={class:"space-y-2"},L8=["for"],B8=["id"],N8={class:"space-y-2"},H8=["for"],G8=["id"],V8={class:"flex gap-4"},z8={class:"flex items-center gap-2 cursor-pointer"},W8=["name"],U8={class:"flex items-center gap-2 cursor-pointer"},$8=["name"],j8={class:"space-y-2"},K8={class:"grid grid-cols-2 gap-4"},q8={class:"space-y-1"},Q8={class:"space-y-1"},Y8={class:"mt-4 p-4 bg-gray-50 rounded-md space-y-2"},J8={class:"flex justify-between items-center"},Z8={class:"font-medium"},X8={key:0,class:"flex justify-between items-center text-sm"},ej={class:"text-gray-600"},tj={class:"font-medium"},oj={key:1,class:"flex justify-between items-center text-sm"},nj={class:"text-gray-600"},ij={class:"font-medium"},sj={class:"flex justify-between items-center pt-2 border-t border-gray-200"},rj={class:"font-semibold text-slate-800"},aj={class:"text-sm text-gray-500 mt-2"},lj={key:0,class:"space-y-6"},cj={class:"bg-white rounded-lg shadow p-4"},uj={class:"space-y-2"},dj={class:"flex items-baseline gap-2"},hj={class:"text-gray-600"},fj={class:"flex items-baseline gap-2"},pj={class:"text-gray-600"},gj={class:"flex items-baseline gap-2"},mj={class:"text-gray-600"},vj={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},yj={class:"bg-white rounded-lg shadow p-4"},Cj={class:"text-xl font-semibold text-slate-800"},bj={class:"bg-white rounded-lg shadow p-4"},wj={class:"text-xl font-semibold text-slate-800"},Sj={class:"bg-white rounded-lg shadow p-4"},xj={class:"text-xl font-semibold text-slate-800"},Rj={class:"bg-white rounded-lg shadow p-4"},_j={class:"text-xl font-semibold text-slate-800"},Ej={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},Pj={class:"space-y-2 text-sm text-blue-800"},Fj={key:0},Dj={key:1},Tj={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},kj={class:"space-y-2 text-sm text-yellow-800"},Aj={class:"list-decimal list-inside space-y-1 ml-2"},Ij={class:"space-y-4"},Mj={class:"space-y-2"},Oj=["onClick"],Lj={class:"flex items-start gap-3 p-3 bg-white rounded-lg shadow hover:bg-gray-50 transition-colors border border-transparent hover:border-blue-200"},Bj=["id"],Nj={class:"flex-1 min-w-0"},Hj={class:"flex items-center gap-2 mb-1"},Gj={class:"font-semibold text-slate-800"},Vj={class:"text-sm text-gray-500"},zj={class:"text-sm text-gray-600 space-y-0.5"},Wj={class:"flex justify-between"},Uj={class:"flex justify-between"},$j={class:"flex justify-between"},jj={key:0,class:"flex justify-between text-blue-600"};function Kj(e,t,o,n,i,s){var r;return ge(),me("div",y8,[t[43]||(t[43]=y("div",{class:"space-y-2"},[y("h2",{class:"text-2xl font-bold text-slate-800"},"Transfer Calculator"),y("p",{class:"text-gray-600"}," Calculate optimal trading rounds for transferring credits between players using Fleet Carriers. ")],-1)),n.activeCalculator?(ge(),me("div",C8,[y("form",{onSubmit:t[9]||(t[9]=Qt(a=>n.calculateTransfer(n.activeCalculator.id),["prevent"])),class:"space-y-6 max-w-2xl mx-auto"},[y("div",b8,[y("label",{for:`recipient-${n.activeCalculator.id}`,class:"block font-semibold text-slate-800"},"Recipient/Sender Name",8,w8),Xe(y("input",{type:"text",id:`recipient-${n.activeCalculator.id}`,"onUpdate:modelValue":t[0]||(t[0]=a=>n.activeCalculator.recipient=a),required:"",placeholder:"Enter CMDR name",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,S8),[[dt,n.activeCalculator.recipient]])]),y("div",x8,[y("label",{for:`purpose-${n.activeCalculator.id}`,class:"block font-semibold text-slate-800"},"Payment Purpose",8,R8),Xe(y("input",{type:"text",id:`purpose-${n.activeCalculator.id}`,"onUpdate:modelValue":t[1]||(t[1]=a=>n.activeCalculator.purpose=a),required:"",placeholder:"e.g., Hauling payment, Order #123",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,_8),[[dt,n.activeCalculator.purpose]])]),y("div",E8,[y("label",{for:`amount-${n.activeCalculator.id}`,class:"block font-semibold text-slate-800"},"Amounts to Transfer (credits)",8,P8),y("div",F8,[(ge(!0),me(Ct,null,Tt(n.activeCalculator.amounts,(a,l)=>(ge(),me("div",{key:l,class:"flex gap-2 items-center"},[y("div",D8,[Xe(y("input",{type:"text",id:`amount-${n.activeCalculator.id}-${l}`,"onUpdate:modelValue":c=>n.activeCalculator.amounts[l]=c,required:"",placeholder:"e.g., 1000000 or 48*40000",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onInput:c=>n.validateAndCalculateAmount(n.activeCalculator,l)},null,40,T8),[[dt,n.activeCalculator.amounts[l]]]),n.getCalculatedAmount(a)?(ge(),me("div",k8," = "+ye(n.formatNumber(n.getCalculatedAmount(a)))+" cr ",1)):we("v-if",!0)]),y("button",{type:"button",onClick:c=>n.removeAmount(n.activeCalculator,l),class:"px-3 py-2 text-red-600 hover:text-red-700",disabled:n.activeCalculator.amounts.length===1}," × ",8,A8)]))),128)),y("button",{type:"button",onClick:t[2]||(t[2]=a=>n.addAmount(n.activeCalculator)),class:"text-sm text-blue-600 hover:text-blue-700"}," + Add another amount "),y("div",I8,[t[11]||(t[11]=y("span",{class:"font-semibold text-slate-800"},"Total:",-1)),y("span",M8,ye(n.formatNumber(n.activeCalculator.amount))+" cr",1)])])]),y("div",O8,[y("label",{for:`cargoSize-${n.activeCalculator.id}`,class:"block font-semibold text-slate-800"},"Cargo Size (units)",8,L8),Xe(y("input",{type:"number",id:`cargoSize-${n.activeCalculator.id}`,"onUpdate:modelValue":t[3]||(t[3]=a=>n.activeCalculator.cargoSize=a),required:"",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,B8),[[dt,n.activeCalculator.cargoSize,void 0,{number:!0}]])]),y("div",N8,[y("label",{for:`commodity-${n.activeCalculator.id}`,class:"block font-semibold text-slate-800"},"Commodity",8,H8),Xe(y("select",{id:`commodity-${n.activeCalculator.id}`,"onUpdate:modelValue":t[4]||(t[4]=a=>n.activeCalculator.commodity=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},t[12]||(t[12]=[y("option",{value:"tritium"},"Tritium",-1),y("option",{value:"alexandrite"},"Alexandrite",-1),y("option",{value:"monzaite"},"Monzaite",-1),y("option",{value:"painite"},"Painite",-1)]),8,G8),[[Wo,n.activeCalculator.commodity]])]),y("div",V8,[y("label",z8,[Xe(y("input",{type:"radio",name:`direction-${n.activeCalculator.id}`,value:"paying","onUpdate:modelValue":t[5]||(t[5]=a=>n.activeCalculator.direction=a),class:"w-4 h-4 text-blue-600 focus:ring-blue-500"},null,8,W8),[[km,n.activeCalculator.direction]]),t[13]||(t[13]=so(" Paying Out "))]),y("label",U8,[Xe(y("input",{type:"radio",name:`direction-${n.activeCalculator.id}`,value:"receiving","onUpdate:modelValue":t[6]||(t[6]=a=>n.activeCalculator.direction=a),class:"w-4 h-4 text-blue-600 focus:ring-blue-500"},null,8,$8),[[km,n.activeCalculator.direction]]),t[14]||(t[14]=so(" Receiving "))])]),y("div",j8,[t[19]||(t[19]=y("label",{class:"block font-semibold text-slate-800"},"Commodity Handling",-1)),y("div",K8,[y("div",q8,[t[15]||(t[15]=y("label",{class:"flex items-center gap-2 text-sm text-gray-600"}," Bring Commodity (units) ",-1)),Xe(y("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=a=>n.activeCalculator.bringCommodity=a),min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[dt,n.activeCalculator.bringCommodity,void 0,{number:!0}]])]),y("div",Q8,[t[16]||(t[16]=y("label",{class:"flex items-center gap-2 text-sm text-gray-600"}," Leave with Commodity (units) ",-1)),Xe(y("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=a=>n.activeCalculator.leaveCommodity=a),min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[dt,n.activeCalculator.leaveCommodity,void 0,{number:!0}]])])]),y("div",Y8,[y("div",J8,[t[17]||(t[17]=y("span",{class:"text-gray-600"},"Base Amount:",-1)),y("span",Z8,ye(n.formatNumber(n.activeCalculator.amount))+" cr",1)]),n.activeCalculator.bringCommodity>0?(ge(),me("div",X8,[y("span",ej,ye((n.activeCalculator.direction==="paying","Adjusting for bringing "))+" "+ye(n.activeCalculator.bringCommodity)+" units of "+ye(n.activeCalculator.commodity)+": ",1),y("span",tj,ye(n.formatNumber(n.activeCalculator.bringCommodity*n.getCommodityBasePrice(n.activeCalculator.commodity)))+" cr ",1)])):we("v-if",!0),n.activeCalculator.leaveCommodity>0?(ge(),me("div",oj,[y("span",nj,ye((n.activeCalculator.direction==="paying","Adjusting for leaving with "))+" "+ye(n.activeCalculator.leaveCommodity)+" units of "+ye(n.activeCalculator.commodity)+": ",1),y("span",ij,ye(n.formatNumber(n.activeCalculator.leaveCommodity*n.getCommodityBasePrice(n.activeCalculator.commodity)))+" cr ",1)])):we("v-if",!0),y("div",sj,[t[18]||(t[18]=y("span",{class:"font-semibold text-slate-800"},"Adjusted Amount:",-1)),y("span",rj,ye(n.formatNumber(n.getAdjustedAmount(n.activeCalculator)))+" cr ",1)])]),y("p",aj," Commodity values are calculated at galactic average price. "+ye(n.activeCalculator.direction==="paying"?"When paying, bringing commodity reduces the amount to sell, and leaving with commodity reduces the amount to buy.":"When receiving, bringing commodity increases the amount to buy, and leaving with commodity increases the amount to sell."),1)]),t[20]||(t[20]=y("button",{type:"submit",class:"w-full px-4 py-2 text-white bg-blue-500 rounded-md hover:bg-blue-600 transition-colors"}," Calculate ",-1))],32),(r=n.activeCalculator.tradingRounds)!=null&&r.length?(ge(),me("div",lj,[t[42]||(t[42]=y("h3",{class:"text-xl font-bold text-slate-800"},"Results",-1)),y("div",cj,[y("div",uj,[y("div",dj,[t[21]||(t[21]=y("span",{class:"font-semibold text-slate-800 min-w-[120px]"},"Recipient/Sender:",-1)),y("span",hj,ye(n.activeCalculator.recipient),1)]),y("div",fj,[t[22]||(t[22]=y("span",{class:"font-semibold text-slate-800 min-w-[120px]"},"Purpose:",-1)),y("span",pj,ye(n.activeCalculator.purpose),1)]),y("div",gj,[t[23]||(t[23]=y("span",{class:"font-semibold text-slate-800 min-w-[120px]"},"Amount to Transfer:",-1)),y("span",mj,ye(n.activeCalculator.amount.toLocaleString())+" cr",1)])])]),y("div",vj,[y("div",yj,[t[24]||(t[24]=y("h4",{class:"text-sm font-medium text-gray-500 mb-1"},"Number of Rounds",-1)),y("div",Cj,ye(n.activeCalculator.tradingRounds.length),1)]),y("div",bj,[t[25]||(t[25]=y("h4",{class:"text-sm font-medium text-gray-500 mb-1"},"Total Units",-1)),y("div",wj,ye(n.activeCalculator.totalUnits.toLocaleString()),1)]),y("div",Sj,[t[26]||(t[26]=y("h4",{class:"text-sm font-medium text-gray-500 mb-1"},"Total Value",-1)),y("div",xj,ye(n.activeCalculator.totalValue.toLocaleString())+" cr ",1)]),y("div",Rj,[t[27]||(t[27]=y("h4",{class:"text-sm font-medium text-gray-500 mb-1"},"Error",-1)),y("div",_j,ye(n.activeCalculator.error.toLocaleString())+" cr ",1)])]),we(" Transaction Explanation "),y("div",Ej,[t[28]||(t[28]=y("h3",{class:"text-lg font-semibold text-blue-900 mb-3"},"Transfer Details",-1)),y("div",Pj,[n.activeCalculator.direction==="paying"?(ge(),me("p",Fj,[y("strong",null,"You will RECEIVE "+ye(n.formatNumber(n.activeCalculator.amount))+" credits.",1)])):(ge(),me("p",Dj,[y("strong",null,"You will PAY "+ye(n.formatNumber(n.activeCalculator.amount))+" credits.",1)])),y("p",null," This transfer uses "+ye(n.activeCalculator.commodity)+" trading rounds on a Fleet Carrier to move the credits efficiently. Each round involves specific buy/sell prices to create the desired transfer amount. ",1)])]),y("div",Tj,[t[34]||(t[34]=y("h3",{class:"text-lg font-semibold text-yellow-900 mb-3"}," Instructions for the Other Party ",-1)),y("div",kj,[t[32]||(t[32]=y("p",null,[y("strong",null,"Process for each trading round:")],-1)),y("ol",Aj,[t[29]||(t[29]=y("li",null,"I will post the round details and thumbs up (👍) when ready",-1)),y("li",null," You "+ye(n.activeCalculator.direction==="paying"?"buy":"sell")+"/"+ye(n.activeCalculator.direction==="paying"?"sell":"buy")+" at the specified prices and thumbs up (👍) to confirm ",1),t[30]||(t[30]=y("li",null,"I will switch the order and green checkmark (✅) when ready",-1)),y("li",null," You "+ye(n.activeCalculator.direction==="paying"?"sell":"buy")+"/"+ye(n.activeCalculator.direction==="paying"?"buy":"sell")+" and green checkmark (✅) to complete the round ",1),t[31]||(t[31]=y("li",null,"Move to the next round",-1))]),t[33]||(t[33]=y("p",{class:"font-medium text-yellow-900"},' 💡 All rounds are posted upfront. Use 👍 to signal "ready for you" and ✅ to signal "round complete". ',-1))])]),y("div",Ij,[t[41]||(t[41]=Hn('<div class="flex items-center justify-between" data-v-da540c97><h3 class="text-xl font-bold text-slate-800" data-v-da540c97>Trading Rounds</h3><div class="text-sm text-gray-500 flex items-center gap-1" data-v-da540c97><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-da540c97><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-da540c97></path></svg> Click any round to copy </div></div>',1)),y("div",Mj,[(ge(!0),me(Ct,null,Tt(n.activeCalculator.tradingRounds,a=>(ge(),me("div",{key:a.round,class:"relative group cursor-pointer",onClick:l=>n.copyRoundToClipboard(a)},[y("div",Lj,[y("input",{type:"checkbox",id:`round${a.round}-${n.activeCalculator.id}`,class:"mt-1 w-4 h-4 text-blue-600 focus:ring-blue-500",onClick:t[10]||(t[10]=Qt(()=>{},["stop"]))},null,8,Bj),y("div",Nj,[y("div",Hj,[y("span",Gj,"Round "+ye(a.round),1),y("span",Vj,ye(a.units.toLocaleString())+" units",1)]),y("div",zj,[y("div",Wj,[t[35]||(t[35]=y("span",null,"FC Sell:",-1)),y("span",null,ye(a.fcSellPrice.toLocaleString())+" cr/unit ("+ye(n.calculateGamePercentage(a.fcSellPrice,a.basePrice))+"%)",1)]),y("div",Uj,[t[36]||(t[36]=y("span",null,"FC Buy:",-1)),y("span",null,ye(a.fcBuyPrice.toLocaleString())+" cr/unit ("+ye(n.calculateGamePercentage(a.fcBuyPrice,a.basePrice))+"%)",1)]),y("div",$j,[t[37]||(t[37]=y("span",null,"Transfer:",-1)),y("span",null,ye(a.value.toLocaleString())+" cr",1)]),a===n.activeCalculator.tradingRounds[n.activeCalculator.tradingRounds.length-1]?(ge(),me("div",jj,[t[38]||(t[38]=y("span",null,"Remaining:",-1)),y("span",null,ye(a.remainingAfter.toLocaleString())+" cr",1)])):we("v-if",!0)])]),t[39]||(t[39]=y("div",{class:"absolute top-2 right-2 p-1.5 text-gray-500 bg-white rounded opacity-0 group-hover:opacity-100 transition-opacity"},[y("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})])],-1))]),t[40]||(t[40]=y("div",{class:"absolute inset-0 pointer-events-none border-2 border-blue-400 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))],8,Oj))),128))])])])):we("v-if",!0)])):we("v-if",!0)])}const qj=To(v8,[["render",Kj],["__scopeId","data-v-da540c97"],["__file","/app/src/js/components/TransferCalculator.vue"]]),EC={serverTime:"",timeRemaining:"",timeType:"lockdown"},Qa=bi("jump",{state:()=>({...EC}),actions:{updateState(e){Object.assign(this,e)},clearState(){Object.assign(this,EC)}},persist:{key:"freighthelper-jump",storage:localStorage}}),Qj={__name:"JumpCalculator",setup(e,{expose:t}){t();const o=Qa(),n=De(null),i=De(null),s=De(null),r=De(""),a=De(!1),l=De(!1),c=De(!1),u=De(!1),d=De(o.serverTime||""),h=De(o.timeRemaining||""),f=De(o.timeType||"lockdown"),v=De("");eo([d,h,f],([ae,xe,Le])=>{o.updateState({serverTime:ae,timeRemaining:xe,timeType:Le}),ne()});const m=Ze(()=>b.value!=="-"&&v.value),b=Ze(()=>{if(!d.value||!h.value||!f.value)return"-";const{h:ae,m:xe,s:Le}=I(d.value),nt=new Date;nt.setUTCHours(ae,xe,Le||0,0);const{h:H,m:w,s:Q}=W(h.value),re=f.value==="jump"?200:53,A=(H*3600+w*60+Q+re)*1e3,k=new Date(nt.getTime()+A);return de(k)}),S=Ze(()=>{if(!b.value||b.value==="-")return"-";const ae=new Date,[xe,Le,nt]=b.value.split(":").map(Number),H=new Date(Date.UTC(ae.getUTCFullYear(),ae.getUTCMonth(),ae.getUTCDate(),xe,Le,nt));return`<t:${Math.floor(H.getTime()/1e3)}>`}),R=Ze(()=>{if(!b.value||b.value==="-")return"-";let xe=(_.value||{content:"Jumping from {{system}} | Jump Time (UTC): {{jumpTime}} | Local Time: {{hammerCode}}"}).content;return xe=xe.replace("{{system}}",v.value||"Unknown System"),xe=xe.replace("{{jumpTime}}",b.value),xe=xe.replace("{{hammerCode}}",S.value),xe}),_=De(null),M=De([]);Xt(()=>{const ae=localStorage.getItem("discordTemplates");ae&&(M.value=JSON.parse(ae))});function I(ae){const xe=ae.split(":").map(Number);let Le=0,nt=0,H=0;return xe.length===3?[Le,nt,H]=xe:xe.length===2?[Le,nt]=xe:xe.length===1&&!isNaN(xe[0])&&(Le=xe[0]),{h:Le,m:nt,s:H}}function W(ae){let xe=0,Le=0,nt=0;if(/^\d{1,2}:\d{2}(:\d{2})?$/.test(ae)){const H=I(ae);xe=H.h,Le=H.m,nt=H.s}else{const H=ae.match(/(\d+)\s*h/),w=ae.match(/(\d+)\s*m/),Q=ae.match(/(\d+)\s*s/);H&&(xe=parseInt(H[1],10)),w&&(Le=parseInt(w[1],10)),Q&&(nt=parseInt(Q[1],10)),!H&&!w&&!Q&&/^\d+$/.test(ae)&&(Le=parseInt(ae,10))}return{h:xe,m:Le,s:nt}}function z(ae){return ae.toString().padStart(2,"0")}function de(ae){return`${z(ae.getUTCHours())}:${z(ae.getUTCMinutes())}:${z(ae.getUTCSeconds())}`}async function K(ae){try{await navigator.clipboard.writeText(ae)}catch(xe){console.error("Failed to copy text:",xe)}}async function O(ae){var nt;ae.preventDefault(),console.log("Paste event triggered");const xe=(nt=ae.clipboardData)==null?void 0:nt.items;if(!xe){console.error("No clipboard items found"),r.value="No image found in clipboard",c.value=!0;return}let Le=!1;for(const H of xe)if(H.type.indexOf("image")!==-1){Le=!0,r.value="Image pasted!",a.value=!0,l.value=!1,c.value=!1;try{const w=H.getAsFile();if(!w)throw new Error("Failed to get image file from clipboard");const Q=new FileReader;Q.onload=re=>{const A=new Image;A.onload=()=>{console.log("Image loaded successfully");const k=i.value;if(!k)throw new Error("Canvas element not found");const T=s.value,G=T.offsetWidth,ee=T.offsetHeight;k.width=G,k.height=ee;const P=k.getContext("2d");if(!P)throw new Error("Failed to get canvas context");P.clearRect(0,0,k.width,k.height);let B=Math.min(G/A.width,ee/A.height);const V=(G-A.width*B)/2,X=(ee-A.height*B)/2;P.drawImage(A,V,X,A.width*B,A.height*B),B=1,N=0,oe=0,u.value=!0,ce(),a.value=!1,l.value=!0,r.value="Image processed successfully!"},A.onerror=k=>{console.error("Image load error:",k),a.value=!1,c.value=!0,r.value="Error loading image. Please try again."},A.src=re.target.result},Q.onerror=re=>{console.error("FileReader error:",re),a.value=!1,re.value=!0,r.value="Error reading image. Please try again."},Q.readAsDataURL(w)}catch(w){console.error("Image Processing Error:",w),a.value=!1,w.value=!0,r.value="Error processing image. Please try again."}break}Le||(console.log("No image found in clipboard items"),r.value="No image found in clipboard",c.value=!0)}let ie=1,N=0,oe=0,F=0,Y=0,J=!1,L=null;function ce(){s.value&&U()}function U(){var w;const ae=(w=s.value)==null?void 0:w.querySelector("canvas");if(!ae)return;const xe=s.value.offsetWidth,Le=s.value.offsetHeight,nt=Math.max(0,(ae.width*ie-xe)/2),H=Math.max(0,(ae.height*ie-Le)/2);N=Math.min(nt,Math.max(-nt,N)),oe=Math.min(H,Math.max(-H,oe)),ae.style.transform=`translate(${N}px, ${oe}px) scale(${ie})`}function le(ae){ae.preventDefault();const xe=s.value.getBoundingClientRect(),Le=ae.clientX-xe.left-N,nt=ae.clientY-xe.top-oe,H=ae.deltaY<0?1.1:.9,w=Math.max(.2,Math.min(10,ie*H));N=Le-Le*(w/ie),oe=nt-nt*(w/ie),ie=w,U()}function q(ae){var Le;J=!0,F=ae.clientX-N,Y=ae.clientY-oe;const xe=(Le=s.value)==null?void 0:Le.querySelector("canvas");xe&&(xe.style.cursor="grabbing")}function se(ae){J&&(N=ae.clientX-F,oe=ae.clientY-Y,U())}function be(){var xe;J=!1;const ae=(xe=s.value)==null?void 0:xe.querySelector("canvas");ae&&(ae.style.cursor="grab")}function ue(ae){ae.touches.length===1?(J=!0,F=ae.touches[0].clientX-N,Y=ae.touches[0].clientY-oe):ae.touches.length===2&&(J=!1,L=Math.hypot(ae.touches[0].clientX-ae.touches[1].clientX,ae.touches[0].clientY-ae.touches[1].clientY))}function j(ae){if(ae.touches.length===1&&J)N=ae.touches[0].clientX-F,oe=ae.touches[0].clientY-Y,U();else if(ae.touches.length===2){const xe=Math.hypot(ae.touches[0].clientX-ae.touches[1].clientX,ae.touches[0].clientY-ae.touches[1].clientY);if(L){const Le=xe/L;ie=Math.max(.2,Math.min(10,ie*Le)),L=xe,U()}else L=xe}ae.preventDefault()}function Ee(ae){ae.touches.length<2&&(L=null),ae.touches.length===0&&(J=!1)}const ne=()=>{if(!d.value||!h.value||!f.value)return;const{h:ae,m:xe,s:Le}=I(d.value),nt=new Date;nt.setUTCHours(ae,xe,Le||0,0);const{h:H,m:w,s:Q}=W(h.value),re=f.value==="jump"?200:53,A=(H*3600+w*60+Q+re)*1e3,k=new Date(nt.getTime()+A);return de(k)};Xt(()=>{d.value&&h.value&&f.value&&ne()});const pe={store:o,pasteArea:n,imageCanvas:i,imageContainer:s,scanStatus:r,scanning:a,success:l,error:c,showCanvas:u,serverTime:d,timeRemaining:h,timeType:f,systemName:v,showResults:m,scheduledJumpTime:b,hammerCode:S,shareMessage:R,selectedTemplate:_,templates:M,parseTimeString:I,parseDurationString:W,pad:z,formatTime:de,copyToClipboard:K,handlePaste:O,get scale(){return ie},set scale(ae){ie=ae},get originX(){return N},set originX(ae){N=ae},get originY(){return oe},set originY(ae){oe=ae},get startX(){return F},set startX(ae){F=ae},get startY(){return Y},set startY(ae){Y=ae},get isPanning(){return J},set isPanning(ae){J=ae},get lastTouchDist(){return L},set lastTouchDist(ae){L=ae},setupImageInteraction:ce,updateTransform:U,handleZoom:le,startPan:q,handlePan:se,stopPan:be,handleTouchStart:ue,handleTouchMove:j,handleTouchEnd:Ee,calculateJump:ne,ref:De,computed:Ze,onMounted:Xt,watch:eo,get useJumpStore(){return Qa}};return Object.defineProperty(pe,"__isScriptSetup",{enumerable:!1,value:!0}),pe}},Yj={class:"bg-white rounded-lg p-8 mb-8 shadow-md"},Jj={class:"space-y-2"},Zj={class:"mt-4 border border-gray-200 rounded-lg overflow-hidden",ref:"imageContainer"},Xj={class:"space-y-2"},e7={class:"space-y-2"},t7={class:"space-y-2"},o7={class:"space-y-2"},n7={key:0,class:"mt-8 p-6 bg-gray-50 rounded-lg"},i7={class:"bg-white p-6 rounded-lg shadow-sm"},s7={class:"flex justify-between items-start gap-4 py-4 border-b border-gray-200 last:border-0"},r7={class:"font-mono text-lg text-blue-600"},a7={class:"flex justify-between items-start gap-4 py-4 border-b border-gray-200 last:border-0"},l7={class:"font-mono text-lg text-blue-600"},c7={class:"flex justify-between items-start gap-4 py-4 border-b border-gray-200 last:border-0"},u7={class:"flex-1 min-w-0"},d7={class:"space-y-2"},h7=["value"],f7={class:"font-mono text-lg text-blue-600 break-all"};function p7(e,t,o,n,i,s){return ge(),me("div",Yj,[t[21]||(t[21]=y("div",{class:"mb-6"},[y("h2",{class:"text-2xl font-bold text-gray-900"},"Fleet Carrier Jump Calculator"),y("p",{class:"text-gray-600 mt-1"},"Calculate optimal jump windows for fleet carriers.")],-1)),y("form",{onSubmit:Qt(n.calculateJump,["prevent"]),class:"space-y-6"},[y("div",Jj,[t[10]||(t[10]=y("label",{for:"screenshot",class:"block text-sm font-medium text-gray-700"},"Paste Screenshot (Ctrl+V)",-1)),y("div",{ref:"pasteArea",class:"w-full min-h-[200px] border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center cursor-pointer transition-colors duration-300 bg-gray-50 hover:border-blue-500 hover:bg-blue-50 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200",tabindex:"0",onPaste:n.handlePaste,onClick:t[0]||(t[0]=r=>n.pasteArea.focus())},t[9]||(t[9]=[y("p",{class:"text-gray-500 text-center m-0"}," Click here and paste your screenshot (Ctrl+V) ",-1)]),544),y("div",{class:Ft(["mt-2 p-2 rounded text-center text-sm",n.scanning?"bg-yellow-100 text-yellow-800":"",n.success?"bg-green-100 text-green-800":"",n.error?"bg-red-100 text-red-800":""])},ye(n.scanStatus),3),Xe(y("div",Zj,[y("canvas",{ref:"imageCanvas",onWheel:n.handleZoom,onMousedown:n.startPan,onMousemove:n.handlePan,onMouseup:n.stopPan,onMouseleave:n.stopPan,onTouchstart:n.handleTouchStart,onTouchmove:n.handleTouchMove,onTouchend:n.handleTouchEnd,class:"block w-full"},null,544)],512),[[ru,n.showCanvas]])]),y("div",Xj,[t[11]||(t[11]=y("label",{for:"serverTime",class:"block text-sm font-medium text-gray-700"},"Current Server Time (UTC)",-1)),Xe(y("input",{type:"text",id:"serverTime","onUpdate:modelValue":t[1]||(t[1]=r=>n.serverTime=r),required:"",placeholder:"HH:MM:SS",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.serverTime]])]),y("div",e7,[t[12]||(t[12]=y("label",{for:"timeRemaining",class:"block text-sm font-medium text-gray-700"},"Time Remaining Until Jump",-1)),Xe(y("input",{type:"text",id:"timeRemaining","onUpdate:modelValue":t[2]||(t[2]=r=>n.timeRemaining=r),required:"",placeholder:"e.g. 1h 23m 15s or 83m 15s or 00:11:00",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.timeRemaining]])]),y("div",t7,[t[14]||(t[14]=y("label",{for:"timeType",class:"block text-sm font-medium text-gray-700"},"Time Type",-1)),Xe(y("select",{id:"timeType","onUpdate:modelValue":t[3]||(t[3]=r=>n.timeType=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[13]||(t[13]=[y("option",{value:"lockdown"},"Landing Pad Lockdown",-1),y("option",{value:"jump"},"Time to Jump",-1)]),512),[[Wo,n.timeType]])]),y("div",o7,[t[15]||(t[15]=y("label",{for:"systemName",class:"block text-sm font-medium text-gray-700"},"System Name",-1)),Xe(y("input",{type:"text",id:"systemName","onUpdate:modelValue":t[4]||(t[4]=r=>n.systemName=r),required:"",placeholder:"Enter system name",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.systemName]])])],32),n.showResults?(ge(),me("div",n7,[t[20]||(t[20]=y("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Jump Results",-1)),y("div",i7,[y("div",s7,[y("div",null,[t[16]||(t[16]=y("div",{class:"text-sm text-gray-600 mb-1"},"Scheduled Jump Time (UTC)",-1)),y("div",r7,ye(n.scheduledJumpTime),1)]),y("button",{type:"button",title:"Copy Jump Time",class:"p-1 text-xl hover:bg-gray-100 rounded transition-colors",onClick:t[5]||(t[5]=r=>n.copyToClipboard(n.scheduledJumpTime))}," 📋 ")]),y("div",a7,[y("div",null,[t[17]||(t[17]=y("div",{class:"text-sm text-gray-600 mb-1"},"Discord Hammer Code",-1)),y("div",l7,ye(n.hammerCode),1)]),y("button",{type:"button",title:"Copy Hammer Code",class:"p-1 text-xl hover:bg-gray-100 rounded transition-colors",onClick:t[6]||(t[6]=r=>n.copyToClipboard(n.hammerCode))}," 📋 ")]),y("div",c7,[y("div",u7,[t[19]||(t[19]=y("div",{class:"text-sm text-gray-600 mb-1"},"Shareable Message",-1)),y("div",d7,[Xe(y("select",{"onUpdate:modelValue":t[7]||(t[7]=r=>n.selectedTemplate=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[t[18]||(t[18]=y("option",{value:null},"Default Format",-1)),(ge(!0),me(Ct,null,Tt(n.templates,r=>(ge(),me("option",{key:r.id,value:r},ye(r.name),9,h7))),128))],512),[[Wo,n.selectedTemplate]]),y("div",f7,ye(n.shareMessage),1)])]),y("button",{type:"button",title:"Copy to clipboard",class:"p-1 text-xl hover:bg-gray-100 rounded transition-colors",onClick:t[8]||(t[8]=r=>n.copyToClipboard(n.shareMessage))}," 📋 ")])])])):we("v-if",!0)])}const g7=To(Qj,[["render",p7],["__scopeId","data-v-5cdf008f"],["__file","/app/src/js/components/JumpCalculator.vue"]]),m7={__name:"ChannelHelper",setup(e,{expose:t}){t();const o=De(""),n=De(""),i=De("🟡"),s=De(""),r=De("Copy to Clipboard"),a=De(!1),l=De(!1),c=Ze(()=>{const v=["🟢","🔵","⚪","⭕","🔴"],m=["⭕","🔴","🟠","🟡","🟢","⚪","✅","☑️","⌛"],b=["⭕","🔴","🟠","🟡","🟢","⚪","✅","☑️","⌛"];return v.includes(i.value)||m.includes(i.value)||b.includes(i.value)});Xt(()=>{const v=localStorage.getItem("fcInitial");v&&(n.value=v)}),eo(n,v=>{localStorage.setItem("fcInitial",v)});const u=v=>{const m=v.match(/^[🟡🟠🟢🔵⚪⭕🔴🟣✅☑️⌛]/u),b=!!m,S=b?m[0]:null,R=v.match(/^([🅲🅳🅴🅶🅺🅻🆀🆃🆉])([🟡🟠🟢🔵⚪⭕🔴✅☑️⌛])/u),_=!!R,M=_?R[1]:null,I=_?R[2]:S;if(v.includes("order-")){const W=v.split("order-"),z=W[0],de=W[1],[K,...O]=de.split("-"),ie=O.join("-");let N="";return b&&(N=z.slice(1)),{type:"order",number:K,customer:ie,hasEmoji:b||_,existingEmoji:I,existingFleetIndicator:M,existingFcInitial:N}}else if(v.startsWith("fac-")){const W=v.split("-"),z=W.length===3&&W[1].length===1,de=z?W[2]:W[W.length-1],K=z?W[1]:"";return{type:"fac",number:de,hasEmoji:b||_,existingEmoji:I,existingFleetIndicator:M,existingFcInitial:K}}else if(v.includes("-")&&!v.includes("order-")&&!v.startsWith("fac-")){const W=v.split("-");let z,de;if(W.length>=2)z=W[W.length-1],de=W.slice(0,-1).join("-");else return null;return{type:"specialist",number:z,name:de,hasEmoji:b||_,existingEmoji:I,existingFleetIndicator:M,existingFcInitial:""}}return null},d=Ze(()=>{const v=o.value.trim(),m=n.value.toUpperCase();if(!v)return"-";const b=u(v);if(!b)return"-";b.existingFcInitial&&!n.value&&(n.value=b.existingFcInitial),b.existingFleetIndicator&&!s.value&&(s.value=b.existingFleetIndicator);let S="";switch(b.type){case"order":if(!i.value)return"-";if(["🟢","🔵","⚪","⭕","🔴"].includes(i.value)){const W=s.value||m;W?S=W+i.value:S=i.value}else S=i.value;S+=`order-${b.number}-${b.customer}`;break;case"fac":if(!i.value)return"-";const M=s.value||m;M?S=M+i.value:S=i.value,S+=`fac-contract-${b.number}`;break;case"specialist":if(!i.value)return"-";const I=s.value||m;I?S=I+i.value:S=i.value,S+=`${b.name}-${b.number}`;break}return S});eo(o,v=>{const m=u(v.trim());a.value=(m==null?void 0:m.type)==="order"||(m==null?void 0:m.type)==="specialist"||(m==null?void 0:m.type)==="fac",l.value=(m==null?void 0:m.type)==="order"||(m==null?void 0:m.type)==="specialist"||(m==null?void 0:m.type)==="fac",m!=null&&m.hasEmoji&&(m!=null&&m.existingEmoji)&&(i.value=m.existingEmoji),m!=null&&m.existingFleetIndicator&&(s.value=m.existingFleetIndicator)});const f={currentChannel:o,fcInitial:n,statusEmoji:i,fleetIndicator:s,copyButtonText:r,showStatusEmoji:a,showFleetSelection:l,showFleetForStatus:c,parseCurrentChannel:u,formattedName:d,copyToClipboard:async()=>{if(d.value!=="-")try{await navigator.clipboard.writeText(d.value),r.value="Copied!",setTimeout(()=>{r.value="Copy to Clipboard"},2e3)}catch(v){console.error("Failed to copy text: ",v)}},ref:De,computed:Ze,watch:eo,onMounted:Xt};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}},v7={class:"bg-white rounded-lg p-8 mb-8 shadow-md"},y7={class:"bg-blue-50 p-4 rounded-lg border border-blue-200"},C7={class:"space-y-4"},b7={class:"space-y-2"},w7={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},S7={class:"space-y-4"},x7={class:"space-y-2"},R7={class:"space-y-2"},_7={class:"space-y-2"},E7={class:"mt-8 p-6 bg-gray-50 rounded-lg"},P7={class:"bg-white p-4 rounded-lg shadow-sm mb-4"},F7={class:"font-mono text-lg text-gray-900"},D7=["disabled"];function T7(e,t,o,n,i,s){return ge(),me("div",v7,[t[16]||(t[16]=y("div",{class:"mb-6"},[y("h2",{class:"text-2xl font-bold text-gray-900"},"Channel Name Helper"),y("p",{class:"text-gray-600 mt-1"}," Format Discord channel names according to specific rules. ")],-1)),y("form",{onSubmit:t[4]||(t[4]=Qt(()=>{},["prevent"])),class:"max-w-3xl mx-auto space-y-6"},[we(" Configuration Section "),y("div",y7,[t[7]||(t[7]=y("h3",{class:"text-lg font-semibold text-blue-900 mb-4"},"Configuration",-1)),y("div",C7,[y("div",b7,[t[6]||(t[6]=y("label",{for:"fcInitial",class:"block text-sm font-medium text-gray-700"},"FC Owner",-1)),Xe(y("select",{id:"fcInitial","onUpdate:modelValue":t[0]||(t[0]=r=>n.fcInitial=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[5]||(t[5]=[Hn('<option value="" data-v-84df31e1>Select FC Owner</option><option value="🅲" data-v-84df31e1>🅲 (Chi Fleet)</option><option value="🅳" data-v-84df31e1>🅳 (Delta Fleet)</option><option value="🅴" data-v-84df31e1>🅴 (Epsilon Fleet)</option><option value="🅶" data-v-84df31e1>🅶 (Gamma Fleet)</option><option value="🅺" data-v-84df31e1>🅺 (Kappa Fleet)</option><option value="🅻" data-v-84df31e1>🅻 (Lambda Fleet)</option><option value="🆀" data-v-84df31e1>🆀 (Omega Fleet)</option><option value="🆃" data-v-84df31e1>🆃 (Tau Fleet)</option><option value="🆉" data-v-84df31e1>🆉 (Zeta Fleet)</option>',10)]),512),[[Wo,n.fcInitial]])])])]),we(" Data Section "),y("div",w7,[t[14]||(t[14]=y("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Channel Data",-1)),y("div",S7,[y("div",x7,[t[8]||(t[8]=y("label",{for:"currentChannel",class:"block text-sm font-medium text-gray-700"},"Current Channel Name",-1)),Xe(y("input",{type:"text",id:"currentChannel","onUpdate:modelValue":t[1]||(t[1]=r=>n.currentChannel=r),required:"",placeholder:"Paste current channel name",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.currentChannel]])]),Xe(y("div",R7,[t[11]||(t[11]=y("label",{for:"statusEmoji",class:"block text-sm font-medium text-gray-700"},"Status Emoji",-1)),Xe(y("select",{id:"statusEmoji","onUpdate:modelValue":t[2]||(t[2]=r=>n.statusEmoji=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[we(" Order Statuses "),t[9]||(t[9]=Hn('<optgroup label="Order Statuses" data-v-84df31e1><option value="🟡" data-v-84df31e1>🟡 (Quote offered, not accepted yet)</option><option value="🟠" data-v-84df31e1>🟠 (Quote offered, client agreed)</option><option value="🟢" data-v-84df31e1>🟢 (Payment completed)</option><option value="🔵" data-v-84df31e1>🔵 (Commodities being sourced/delivered)</option><option value="⚪" data-v-84df31e1> ⚪ (Deliveries done, pending client reply) </option><option value="⭕" data-v-84df31e1> ⭕ (Partially sent to FAC/Specialist, Partially FRHT) </option><option value="🔴" data-v-84df31e1>🔴 (Full FAC/Specialist Contracted)</option></optgroup>',1)),we(" Specialist Statuses "),t[10]||(t[10]=Hn('<optgroup label="Specialist Statuses" data-v-84df31e1><option value="⭕" data-v-84df31e1>⭕ (Absolute Emergency, Last Day)</option><option value="🔴" data-v-84df31e1>🔴 (Situation Close, 1+ day left)</option><option value="🟠" data-v-84df31e1>🟠 (Medium Priority, 2-3+ days left)</option><option value="🟡" data-v-84df31e1>🟡 (Low Priority, 1 week left)</option><option value="🟢" data-v-84df31e1>🟢 (FRHT System, No real timeline)</option><option value="⚪" data-v-84df31e1>⚪ (Order in flux, needs attention)</option><option value="✅" data-v-84df31e1>✅ (Deliveries done, pending payment)</option><option value="☑️" data-v-84df31e1>☑️ (Payment done, pending confirmation)</option><option value="⌛" data-v-84df31e1>⌛ (Delayed, ticket may be closed)</option></optgroup>',1))],512),[[Wo,n.statusEmoji]])],512),[[ru,n.showStatusEmoji]]),Xe(y("div",_7,[t[13]||(t[13]=y("label",{for:"fleetIndicator",class:"block text-sm font-medium text-gray-700"},"Fleet Indicator (for other fleets)",-1)),Xe(y("select",{id:"fleetIndicator","onUpdate:modelValue":t[3]||(t[3]=r=>n.fleetIndicator=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[12]||(t[12]=[Hn('<option value="" data-v-84df31e1>No Fleet Override (use FC Owner above)</option><option value="🅲" data-v-84df31e1>🅲 (Chi Fleet)</option><option value="🅳" data-v-84df31e1>🅳 (Delta Fleet)</option><option value="🅴" data-v-84df31e1>🅴 (Epsilon Fleet)</option><option value="🅶" data-v-84df31e1>🅶 (Gamma Fleet)</option><option value="🅺" data-v-84df31e1>🅺 (Kappa Fleet)</option><option value="🅻" data-v-84df31e1>🅻 (Lambda Fleet)</option><option value="🆀" data-v-84df31e1>🆀 (Omega Fleet)</option><option value="🆃" data-v-84df31e1>🆃 (Tau Fleet)</option><option value="🆉" data-v-84df31e1>🆉 (Zeta Fleet)</option>',10)]),512),[[Wo,n.fleetIndicator]])],512),[[ru,n.showFleetSelection&&n.showFleetForStatus]])])])],32),y("div",E7,[t[15]||(t[15]=y("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Formatted Channel Name",-1)),y("div",P7,[y("p",F7,ye(n.formattedName),1)]),y("button",{onClick:n.copyToClipboard,disabled:n.formattedName==="-",class:Ft(["px-4 py-2 rounded-md transition-colors",n.formattedName==="-"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"])},ye(n.copyButtonText),11,D7)])])}const k7=To(m7,[["render",T7],["__scopeId","data-v-84df31e1"],["__file","/app/src/js/components/ChannelHelper.vue"]]);var Xx={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(o){e.exports=o()})(function(){return function o(n,i,s){function r(c,u){if(!i[c]){if(!n[c]){var d=typeof Pa=="function"&&Pa;if(!u&&d)return d(c,!0);if(a)return a(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var f=i[c]={exports:{}};n[c][0].call(f.exports,function(v){var m=n[c][1][v];return r(m||v)},f,f.exports,o,n,i,s)}return i[c].exports}for(var a=typeof Pa=="function"&&Pa,l=0;l<s.length;l++)r(s[l]);return r}({1:[function(o,n,i){var s=o("./utils"),r=o("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,u,d,h,f,v,m,b=[],S=0,R=l.length,_=R,M=s.getTypeOf(l)!=="string";S<l.length;)_=R-S,d=M?(c=l[S++],u=S<R?l[S++]:0,S<R?l[S++]:0):(c=l.charCodeAt(S++),u=S<R?l.charCodeAt(S++):0,S<R?l.charCodeAt(S++):0),h=c>>2,f=(3&c)<<4|u>>4,v=1<_?(15&u)<<2|d>>6:64,m=2<_?63&d:64,b.push(a.charAt(h)+a.charAt(f)+a.charAt(v)+a.charAt(m));return b.join("")},i.decode=function(l){var c,u,d,h,f,v,m=0,b=0,S="data:";if(l.substr(0,S.length)===S)throw new Error("Invalid base64 input, it looks like a data url.");var R,_=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&_--,l.charAt(l.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(R=r.uint8array?new Uint8Array(0|_):new Array(0|_);m<l.length;)c=a.indexOf(l.charAt(m++))<<2|(h=a.indexOf(l.charAt(m++)))>>4,u=(15&h)<<4|(f=a.indexOf(l.charAt(m++)))>>2,d=(3&f)<<6|(v=a.indexOf(l.charAt(m++))),R[b++]=c,f!==64&&(R[b++]=u),v!==64&&(R[b++]=d);return R}},{"./support":30,"./utils":32}],2:[function(o,n,i){var s=o("./external"),r=o("./stream/DataWorker"),a=o("./stream/Crc32Probe"),l=o("./stream/DataLengthProbe");function c(u,d,h,f,v){this.compressedSize=u,this.uncompressedSize=d,this.crc32=h,this.compression=f,this.compressedContent=v}c.prototype={getContentWorker:function(){var u=new r(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new r(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,d,h){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,n,i){var s=o("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,n,i){var s=o("./utils"),r=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();n.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(c,u,d,h){var f=r,v=h+d;c^=-1;for(var m=h;m<v;m++)c=c>>>8^f[255&(c^u[m])];return-1^c}(0|l,a,a.length,0):function(c,u,d,h){var f=r,v=h+d;c^=-1;for(var m=h;m<v;m++)c=c>>>8^f[255&(c^u.charCodeAt(m))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(o,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(o,n,i){var s=null;s=typeof Promise<"u"?Promise:o("lie"),n.exports={Promise:s}},{lie:37}],7:[function(o,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",r=o("pako"),a=o("./utils"),l=o("./stream/GenericWorker"),c=s?"uint8array":"array";function u(d,h){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}i.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,d.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},i.compressWorker=function(d){return new u("Deflate",d)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,n,i){function s(f,v){var m,b="";for(m=0;m<v;m++)b+=String.fromCharCode(255&f),f>>>=8;return b}function r(f,v,m,b,S,R){var _,M,I=f.file,W=f.compression,z=R!==c.utf8encode,de=a.transformTo("string",R(I.name)),K=a.transformTo("string",c.utf8encode(I.name)),O=I.comment,ie=a.transformTo("string",R(O)),N=a.transformTo("string",c.utf8encode(O)),oe=K.length!==I.name.length,F=N.length!==O.length,Y="",J="",L="",ce=I.dir,U=I.date,le={crc32:0,compressedSize:0,uncompressedSize:0};v&&!m||(le.crc32=f.crc32,le.compressedSize=f.compressedSize,le.uncompressedSize=f.uncompressedSize);var q=0;v&&(q|=8),z||!oe&&!F||(q|=2048);var se=0,be=0;ce&&(se|=16),S==="UNIX"?(be=798,se|=function(j,Ee){var ne=j;return j||(ne=Ee?16893:33204),(65535&ne)<<16}(I.unixPermissions,ce)):(be=20,se|=function(j){return 63&(j||0)}(I.dosPermissions)),_=U.getUTCHours(),_<<=6,_|=U.getUTCMinutes(),_<<=5,_|=U.getUTCSeconds()/2,M=U.getUTCFullYear()-1980,M<<=4,M|=U.getUTCMonth()+1,M<<=5,M|=U.getUTCDate(),oe&&(J=s(1,1)+s(u(de),4)+K,Y+="up"+s(J.length,2)+J),F&&(L=s(1,1)+s(u(ie),4)+N,Y+="uc"+s(L.length,2)+L);var ue="";return ue+=`
\0`,ue+=s(q,2),ue+=W.magic,ue+=s(_,2),ue+=s(M,2),ue+=s(le.crc32,4),ue+=s(le.compressedSize,4),ue+=s(le.uncompressedSize,4),ue+=s(de.length,2),ue+=s(Y.length,2),{fileRecord:d.LOCAL_FILE_HEADER+ue+de+Y,dirRecord:d.CENTRAL_FILE_HEADER+s(be,2)+ue+s(ie.length,2)+"\0\0\0\0"+s(se,4)+s(b,4)+de+Y+ie}}var a=o("../utils"),l=o("../stream/GenericWorker"),c=o("../utf8"),u=o("../crc32"),d=o("../signature");function h(f,v,m,b){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=m,this.encodeFileName=b,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,l),h.prototype.push=function(f){var v=f.meta.percent||0,m=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:m?(v+100*(m-b-1))/m:100}}))},h.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var v=this.streamFiles&&!f.file.dir;if(v){var m=r(f,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(f){this.accumulate=!1;var v=this.streamFiles&&!f.file.dir,m=r(f,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),v)this.push({data:function(b){return d.DATA_DESCRIPTOR+s(b.crc32,4)+s(b.compressedSize,4)+s(b.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var f=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var m=this.bytesWritten-f,b=function(S,R,_,M,I){var W=a.transformTo("string",I(M));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(S,2)+s(S,2)+s(R,4)+s(_,4)+s(W.length,2)+W}(this.dirRecords.length,m,f,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(f){this._sources.push(f);var v=this;return f.on("data",function(m){v.processChunk(m)}),f.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),f.on("error",function(m){v.error(m)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(f){var v=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var m=0;m<v.length;m++)try{v[m].error(f)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,v=0;v<f.length;v++)f[v].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,n,i){var s=o("../compressions"),r=o("./ZipFileWorker");i.generateWorker=function(a,l,c){var u=new r(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{a.forEach(function(h,f){d++;var v=function(R,_){var M=R||_,I=s[M];if(!I)throw new Error(M+" is not a valid compression method !");return I}(f.options.compression,l.compression),m=f.options.compressionOptions||l.compressionOptions||{},b=f.dir,S=f.date;f._compressWorker(v,m).withStreamInfo("file",{name:h,dir:b,date:S,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new s;for(var a in this)typeof this[a]!="function"&&(r[a]=this[a]);return r}}(s.prototype=o("./object")).loadAsync=o("./load"),s.support=o("./support"),s.defaults=o("./defaults"),s.version="3.10.1",s.loadAsync=function(r,a){return new s().loadAsync(r,a)},s.external=o("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,n,i){var s=o("./utils"),r=o("./external"),a=o("./utf8"),l=o("./zipEntries"),c=o("./stream/Crc32Probe"),u=o("./nodejsUtils");function d(h){return new r.Promise(function(f,v){var m=h.decompressed.getContentWorker().pipe(new c);m.on("error",function(b){v(b)}).on("end",function(){m.streamInfo.crc32!==h.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}n.exports=function(h,f){var v=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(h)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(m){var b=new l(f);return b.load(m),b}).then(function(m){var b=[r.Promise.resolve(m)],S=m.files;if(f.checkCRC32)for(var R=0;R<S.length;R++)b.push(d(S[R]));return r.Promise.all(b)}).then(function(m){for(var b=m.shift(),S=b.files,R=0;R<S.length;R++){var _=S[R],M=_.fileNameStr,I=s.resolve(_.fileNameStr);v.file(I,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:f.createFolders}),_.dir||(v.file(I).unsafeOriginalName=M)}return b.zipComment.length&&(v.comment=b.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,n,i){var s=o("../utils"),r=o("../stream/GenericWorker");function a(l,c){r.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,r),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,n,i){var s=o("readable-stream").Readable;function r(a,l,c){s.call(this,l),this._helper=a;var u=this;a.on("data",function(d,h){u.push(d)||u._helper.pause(),c&&c(h)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}o("../utils").inherits(r,s),r.prototype._read=function(){this._helper.resume()},n.exports=r},{"../utils":32,"readable-stream":16}],14:[function(o,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,r);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,r)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var r=new Buffer(s);return r.fill(0),r},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(o,n,i){function s(I,W,z){var de,K=a.getTypeOf(W),O=a.extend(z||{},u);O.date=O.date||new Date,O.compression!==null&&(O.compression=O.compression.toUpperCase()),typeof O.unixPermissions=="string"&&(O.unixPermissions=parseInt(O.unixPermissions,8)),O.unixPermissions&&16384&O.unixPermissions&&(O.dir=!0),O.dosPermissions&&16&O.dosPermissions&&(O.dir=!0),O.dir&&(I=S(I)),O.createFolders&&(de=b(I))&&R.call(this,de,!0);var ie=K==="string"&&O.binary===!1&&O.base64===!1;z&&z.binary!==void 0||(O.binary=!ie),(W instanceof d&&W.uncompressedSize===0||O.dir||!W||W.length===0)&&(O.base64=!1,O.binary=!0,W="",O.compression="STORE",K="string");var N=null;N=W instanceof d||W instanceof l?W:v.isNode&&v.isStream(W)?new m(I,W):a.prepareContent(I,W,O.binary,O.optimizedBinaryString,O.base64);var oe=new h(I,N,O);this.files[I]=oe}var r=o("./utf8"),a=o("./utils"),l=o("./stream/GenericWorker"),c=o("./stream/StreamHelper"),u=o("./defaults"),d=o("./compressedObject"),h=o("./zipObject"),f=o("./generate"),v=o("./nodejsUtils"),m=o("./nodejs/NodejsStreamInputAdapter"),b=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var W=I.lastIndexOf("/");return 0<W?I.substring(0,W):""},S=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},R=function(I,W){return W=W!==void 0?W:u.createFolders,I=S(I),this.files[I]||s.call(this,I,null,{dir:!0,createFolders:W}),this.files[I]};function _(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var M={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var W,z,de;for(W in this.files)de=this.files[W],(z=W.slice(this.root.length,W.length))&&W.slice(0,this.root.length)===this.root&&I(z,de)},filter:function(I){var W=[];return this.forEach(function(z,de){I(z,de)&&W.push(de)}),W},file:function(I,W,z){if(arguments.length!==1)return I=this.root+I,s.call(this,I,W,z),this;if(_(I)){var de=I;return this.filter(function(O,ie){return!ie.dir&&de.test(O)})}var K=this.files[this.root+I];return K&&!K.dir?K:null},folder:function(I){if(!I)return this;if(_(I))return this.filter(function(K,O){return O.dir&&I.test(K)});var W=this.root+I,z=R.call(this,W),de=this.clone();return de.root=z.name,de},remove:function(I){I=this.root+I;var W=this.files[I];if(W||(I.slice(-1)!=="/"&&(I+="/"),W=this.files[I]),W&&!W.dir)delete this.files[I];else for(var z=this.filter(function(K,O){return O.name.slice(0,I.length)===I}),de=0;de<z.length;de++)delete this.files[z[de].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var W,z={};try{if((z=a.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");a.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var de=z.comment||this.comment||"";W=f.generateWorker(this,z,de)}catch(K){(W=new l("error")).error(K)}return new c(W,z.type||"string",z.mimeType)},generateAsync:function(I,W){return this.generateInternalStream(I).accumulate(W)},generateNodeStream:function(I,W){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(W)}};n.exports=M},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,n,i){n.exports=o("stream")},{stream:void 0}],17:[function(o,n,i){var s=o("./DataReader");function r(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}o("../utils").inherits(r,s),r.prototype.byteAt=function(a){return this.data[this.zero+a]},r.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===c&&this.data[h+2]===u&&this.data[h+3]===d)return h-this.zero;return-1},r.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.readData(4);return l===h[0]&&c===h[1]&&u===h[2]&&d===h[3]},r.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=r},{"../utils":32,"./DataReader":18}],18:[function(o,n,i){var s=o("../utils");function r(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=r},{"../utils":32}],19:[function(o,n,i){var s=o("./Uint8ArrayReader");function r(a){s.call(this,a)}o("../utils").inherits(r,s),r.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,n,i){var s=o("./DataReader");function r(a){s.call(this,a)}o("../utils").inherits(r,s),r.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},r.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},r.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},r.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=r},{"../utils":32,"./DataReader":18}],21:[function(o,n,i){var s=o("./ArrayReader");function r(a){s.call(this,a)}o("../utils").inherits(r,s),r.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(o,n,i){var s=o("../utils"),r=o("../support"),a=o("./ArrayReader"),l=o("./StringReader"),c=o("./NodeBufferReader"),u=o("./Uint8ArrayReader");n.exports=function(d){var h=s.getTypeOf(d);return s.checkSupport(h),h!=="string"||r.uint8array?h==="nodebuffer"?new c(d):r.uint8array?new u(s.transformTo("uint8array",d)):new a(s.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,n,i){var s=o("./GenericWorker"),r=o("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}r.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:r.transformTo(this.destType,l.data),meta:l.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(o,n,i){var s=o("./GenericWorker"),r=o("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=r(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,n,i){var s=o("../utils"),r=o("./GenericWorker");function a(l){r.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,r),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}r.prototype.processChunk.call(this,l)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(o,n,i){var s=o("../utils"),r=o("./GenericWorker");function a(l){r.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(a,r),a.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(o,n,i){function s(r){this.name=r||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(r){this.emit("data",r)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(r){this.emit("error",r)}return!0},error:function(r){return!this.isFinished&&(this.isPaused?this.generatedError=r:(this.isFinished=!0,this.emit("error",r),this.previous&&this.previous.error(r),this.cleanUp()),!0)},on:function(r,a){return this._listeners[r].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(r,a){if(this._listeners[r])for(var l=0;l<this._listeners[r].length;l++)this._listeners[r][l].call(this,a)},pipe:function(r){return r.registerPrevious(this)},registerPrevious:function(r){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=r.streamInfo,this.mergeStreamInfo(),this.previous=r;var a=this;return r.on("data",function(l){a.processChunk(l)}),r.on("end",function(){a.end()}),r.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var r=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),r=!0),this.previous&&this.previous.resume(),!r},flush:function(){},processChunk:function(r){this.push(r)},withStreamInfo:function(r,a){return this.extraStreamInfo[r]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var r in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,r)&&(this.streamInfo[r]=this.extraStreamInfo[r])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var r="Worker "+this.name;return this.previous?this.previous+" -> "+r:r}},n.exports=s},{}],29:[function(o,n,i){var s=o("../utils"),r=o("./ConvertWorker"),a=o("./GenericWorker"),l=o("../base64"),c=o("../support"),u=o("../external"),d=null;if(c.nodestream)try{d=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(v,m){return new u.Promise(function(b,S){var R=[],_=v._internalType,M=v._outputType,I=v._mimeType;v.on("data",function(W,z){R.push(W),m&&m(z)}).on("error",function(W){R=[],S(W)}).on("end",function(){try{var W=function(z,de,K){switch(z){case"blob":return s.newBlob(s.transformTo("arraybuffer",de),K);case"base64":return l.encode(de);default:return s.transformTo(z,de)}}(M,function(z,de){var K,O=0,ie=null,N=0;for(K=0;K<de.length;K++)N+=de[K].length;switch(z){case"string":return de.join("");case"array":return Array.prototype.concat.apply([],de);case"uint8array":for(ie=new Uint8Array(N),K=0;K<de.length;K++)ie.set(de[K],O),O+=de[K].length;return ie;case"nodebuffer":return Buffer.concat(de);default:throw new Error("concat : unsupported type '"+z+"'")}}(_,R),I);b(W)}catch(z){S(z)}R=[]}).resume()})}function f(v,m,b){var S=m;switch(m){case"blob":case"arraybuffer":S="uint8array";break;case"base64":S="string"}try{this._internalType=S,this._outputType=m,this._mimeType=b,s.checkSupport(S),this._worker=v.pipe(new r(S)),v.lock()}catch(R){this._worker=new a("error"),this._worker.error(R)}}f.prototype={accumulate:function(v){return h(this,v)},on:function(v,m){var b=this;return v==="data"?this._worker.on(v,function(S){m.call(b,S.data,S.meta)}):this._worker.on(v,function(){s.delay(m,arguments,b)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},v)}},n.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(s),i.blob=r.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!o("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(o,n,i){for(var s=o("./utils"),r=o("./support"),a=o("./nodejsUtils"),l=o("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}i.utf8encode=function(f){return r.nodebuffer?a.newBufferFrom(f,"utf-8"):function(v){var m,b,S,R,_,M=v.length,I=0;for(R=0;R<M;R++)(64512&(b=v.charCodeAt(R)))==55296&&R+1<M&&(64512&(S=v.charCodeAt(R+1)))==56320&&(b=65536+(b-55296<<10)+(S-56320),R++),I+=b<128?1:b<2048?2:b<65536?3:4;for(m=r.uint8array?new Uint8Array(I):new Array(I),R=_=0;_<I;R++)(64512&(b=v.charCodeAt(R)))==55296&&R+1<M&&(64512&(S=v.charCodeAt(R+1)))==56320&&(b=65536+(b-55296<<10)+(S-56320),R++),b<128?m[_++]=b:(b<2048?m[_++]=192|b>>>6:(b<65536?m[_++]=224|b>>>12:(m[_++]=240|b>>>18,m[_++]=128|b>>>12&63),m[_++]=128|b>>>6&63),m[_++]=128|63&b);return m}(f)},i.utf8decode=function(f){return r.nodebuffer?s.transformTo("nodebuffer",f).toString("utf-8"):function(v){var m,b,S,R,_=v.length,M=new Array(2*_);for(m=b=0;m<_;)if((S=v[m++])<128)M[b++]=S;else if(4<(R=c[S]))M[b++]=65533,m+=R-1;else{for(S&=R===2?31:R===3?15:7;1<R&&m<_;)S=S<<6|63&v[m++],R--;1<R?M[b++]=65533:S<65536?M[b++]=S:(S-=65536,M[b++]=55296|S>>10&1023,M[b++]=56320|1023&S)}return M.length!==b&&(M.subarray?M=M.subarray(0,b):M.length=b),s.applyFromCharCode(M)}(f=s.transformTo(r.uint8array?"uint8array":"array",f))},s.inherits(d,l),d.prototype.processChunk=function(f){var v=s.transformTo(r.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var m=v;(v=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),v.set(m,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var b=function(R,_){var M;for((_=_||R.length)>R.length&&(_=R.length),M=_-1;0<=M&&(192&R[M])==128;)M--;return M<0||M===0?_:M+c[R[M]]>_?M:_}(v),S=v;b!==v.length&&(r.uint8array?(S=v.subarray(0,b),this.leftOver=v.subarray(b,v.length)):(S=v.slice(0,b),this.leftOver=v.slice(b,v.length))),this.push({data:i.utf8decode(S),meta:f.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,s.inherits(h,l),h.prototype.processChunk=function(f){this.push({data:i.utf8encode(f.data),meta:f.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,n,i){var s=o("./support"),r=o("./base64"),a=o("./nodejsUtils"),l=o("./external");function c(m){return m}function u(m,b){for(var S=0;S<m.length;++S)b[S]=255&m.charCodeAt(S);return b}o("setimmediate"),i.newBlob=function(m,b){i.checkSupport("blob");try{return new Blob([m],{type:b})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(m),S.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(m,b,S){var R=[],_=0,M=m.length;if(M<=S)return String.fromCharCode.apply(null,m);for(;_<M;)b==="array"||b==="nodebuffer"?R.push(String.fromCharCode.apply(null,m.slice(_,Math.min(_+S,M)))):R.push(String.fromCharCode.apply(null,m.subarray(_,Math.min(_+S,M)))),_+=S;return R.join("")},stringifyByChar:function(m){for(var b="",S=0;S<m.length;S++)b+=String.fromCharCode(m[S]);return b},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(m){var b=65536,S=i.getTypeOf(m),R=!0;if(S==="uint8array"?R=d.applyCanBeUsed.uint8array:S==="nodebuffer"&&(R=d.applyCanBeUsed.nodebuffer),R)for(;1<b;)try{return d.stringifyByChunk(m,S,b)}catch{b=Math.floor(b/2)}return d.stringifyByChar(m)}function f(m,b){for(var S=0;S<m.length;S++)b[S]=m[S];return b}i.applyFromCharCode=h;var v={};v.string={string:c,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return v.string.uint8array(m).buffer},uint8array:function(m){return u(m,new Uint8Array(m.length))},nodebuffer:function(m){return u(m,a.allocBuffer(m.length))}},v.array={string:h,array:c,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(m)}},v.arraybuffer={string:function(m){return h(new Uint8Array(m))},array:function(m){return f(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:c,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(new Uint8Array(m))}},v.uint8array={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:c,nodebuffer:function(m){return a.newBufferFrom(m)}},v.nodebuffer={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return v.nodebuffer.uint8array(m).buffer},uint8array:function(m){return f(m,new Uint8Array(m.length))},nodebuffer:c},i.transformTo=function(m,b){if(b=b||"",!m)return b;i.checkSupport(m);var S=i.getTypeOf(b);return v[S][m](b)},i.resolve=function(m){for(var b=m.split("/"),S=[],R=0;R<b.length;R++){var _=b[R];_==="."||_===""&&R!==0&&R!==b.length-1||(_===".."?S.pop():S.push(_))}return S.join("/")},i.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(m)?"nodebuffer":s.uint8array&&m instanceof Uint8Array?"uint8array":s.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(m){if(!s[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(m){var b,S,R="";for(S=0;S<(m||"").length;S++)R+="\\x"+((b=m.charCodeAt(S))<16?"0":"")+b.toString(16).toUpperCase();return R},i.delay=function(m,b,S){setImmediate(function(){m.apply(S||null,b||[])})},i.inherits=function(m,b){function S(){}S.prototype=b.prototype,m.prototype=new S},i.extend=function(){var m,b,S={};for(m=0;m<arguments.length;m++)for(b in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],b)&&S[b]===void 0&&(S[b]=arguments[m][b]);return S},i.prepareContent=function(m,b,S,R,_){return l.Promise.resolve(b).then(function(M){return s.blob&&(M instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(M))!==-1)&&typeof FileReader<"u"?new l.Promise(function(I,W){var z=new FileReader;z.onload=function(de){I(de.target.result)},z.onerror=function(de){W(de.target.error)},z.readAsArrayBuffer(M)}):M}).then(function(M){var I=i.getTypeOf(M);return I?(I==="arraybuffer"?M=i.transformTo("uint8array",M):I==="string"&&(_?M=r.decode(M):S&&R!==!0&&(M=function(W){return u(W,s.uint8array?new Uint8Array(W.length):new Array(W.length))}(M))),M):l.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,n,i){var s=o("./reader/readerFor"),r=o("./utils"),a=o("./signature"),l=o("./zipEntry"),c=o("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(h)+", expected "+r.pretty(d)+")")}},isSignature:function(d,h){var f=this.reader.index;this.reader.setIndex(d);var v=this.reader.readString(4)===h;return this.reader.setIndex(f),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",f=r.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,f,v=this.zip64EndOfCentralSize-44;0<v;)d=this.reader.readInt(2),h=this.reader.readInt(4),f=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var v=h-f;if(0<v)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,n,i){var s=o("./reader/readerFor"),r=o("./utils"),a=o("./compressedObject"),l=o("./crc32"),c=o("./utf8"),u=o("./compressions"),d=o("./support");function h(f,v){this.options=f,this.loadOptions=v}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var v,m;if(f.skip(22),this.fileNameLength=f.readInt(2),m=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(b){for(var S in u)if(Object.prototype.hasOwnProperty.call(u,S)&&u[S].magic===b)return u[S];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,v,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var v=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(v),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var v,m,b,S=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<S;)v=f.readInt(2),m=f.readInt(2),b=f.readData(m),this.extraFields[v]={id:v,length:m,value:b};f.setIndex(S)},handleUTF8:function(){var f=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var m=r.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var S=r.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(S)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var v=s(f.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var v=s(f.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(f.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,n,i){function s(v,m,b){this.name=v,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=m,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var r=o("./stream/StreamHelper"),a=o("./stream/DataWorker"),l=o("./utf8"),c=o("./compressedObject"),u=o("./stream/GenericWorker");s.prototype={internalStream:function(v){var m=null,b="string";try{if(!v)throw new Error("No output type specified.");var S=(b=v.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),m=this._decompressWorker();var R=!this._dataBinary;R&&!S&&(m=m.pipe(new l.Utf8EncodeWorker)),!R&&S&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(_){(m=new u("error")).error(_)}return new r(m,b,"")},async:function(v,m){return this.internalStream(v).accumulate(m)},nodeStream:function(v,m){return this.internalStream(v||"nodebuffer").toNodejsStream(m)},_compressWorker:function(v,m){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(b,v,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<d.length;f++)s.prototype[d[f]]=h;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,n,i){(function(s){var r,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(v),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),r=function(){d.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)r="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var m=s.document.createElement("script");m.onreadystatechange=function(){v(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},s.document.documentElement.appendChild(m)}:function(){setTimeout(v,0)};else{var h=new s.MessageChannel;h.port1.onmessage=v,r=function(){h.port2.postMessage(0)}}var f=[];function v(){var m,b;a=!0;for(var S=f.length;S;){for(b=f,f=[],m=-1;++m<S;)b[m]();S=f.length}a=!1}n.exports=function(m){f.push(m)!==1||a||r()}}).call(this,typeof fr<"u"?fr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,n,i){var s=o("immediate");function r(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function d(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,S!==r&&m(this,S)}function h(S,R,_){this.promise=S,typeof R=="function"&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function f(S,R,_){s(function(){var M;try{M=R(_)}catch(I){return a.reject(S,I)}M===S?a.reject(S,new TypeError("Cannot resolve promise with itself")):a.resolve(S,M)})}function v(S){var R=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof R=="function")return function(){R.apply(S,arguments)}}function m(S,R){var _=!1;function M(z){_||(_=!0,a.reject(S,z))}function I(z){_||(_=!0,a.resolve(S,z))}var W=b(function(){R(I,M)});W.status==="error"&&M(W.value)}function b(S,R){var _={};try{_.value=S(R),_.status="success"}catch(M){_.status="error",_.value=M}return _}(n.exports=d).prototype.finally=function(S){if(typeof S!="function")return this;var R=this.constructor;return this.then(function(_){return R.resolve(S()).then(function(){return _})},function(_){return R.resolve(S()).then(function(){throw _})})},d.prototype.catch=function(S){return this.then(null,S)},d.prototype.then=function(S,R){if(typeof S!="function"&&this.state===c||typeof R!="function"&&this.state===l)return this;var _=new this.constructor(r);return this.state!==u?f(_,this.state===c?S:R,this.outcome):this.queue.push(new h(_,S,R)),_},h.prototype.callFulfilled=function(S){a.resolve(this.promise,S)},h.prototype.otherCallFulfilled=function(S){f(this.promise,this.onFulfilled,S)},h.prototype.callRejected=function(S){a.reject(this.promise,S)},h.prototype.otherCallRejected=function(S){f(this.promise,this.onRejected,S)},a.resolve=function(S,R){var _=b(v,R);if(_.status==="error")return a.reject(S,_.value);var M=_.value;if(M)m(S,M);else{S.state=c,S.outcome=R;for(var I=-1,W=S.queue.length;++I<W;)S.queue[I].callFulfilled(R)}return S},a.reject=function(S,R){S.state=l,S.outcome=R;for(var _=-1,M=S.queue.length;++_<M;)S.queue[_].callRejected(R);return S},d.resolve=function(S){return S instanceof this?S:a.resolve(new this(r),S)},d.reject=function(S){var R=new this(r);return a.reject(R,S)},d.all=function(S){var R=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=S.length,M=!1;if(!_)return this.resolve([]);for(var I=new Array(_),W=0,z=-1,de=new this(r);++z<_;)K(S[z],z);return de;function K(O,ie){R.resolve(O).then(function(N){I[ie]=N,++W!==_||M||(M=!0,a.resolve(de,I))},function(N){M||(M=!0,a.reject(de,N))})}},d.race=function(S){var R=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=S.length,M=!1;if(!_)return this.resolve([]);for(var I=-1,W=new this(r);++I<_;)z=S[I],R.resolve(z).then(function(de){M||(M=!0,a.resolve(W,de))},function(de){M||(M=!0,a.reject(W,de))});var z;return W}},{immediate:36}],38:[function(o,n,i){var s={};(0,o("./lib/utils/common").assign)(s,o("./lib/deflate"),o("./lib/inflate"),o("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,n,i){var s=o("./zlib/deflate"),r=o("./utils/common"),a=o("./utils/strings"),l=o("./zlib/messages"),c=o("./zlib/zstream"),u=Object.prototype.toString,d=0,h=-1,f=0,v=8;function m(S){if(!(this instanceof m))return new m(S);this.options=r.assign({level:h,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},S||{});var R=this.options;R.raw&&0<R.windowBits?R.windowBits=-R.windowBits:R.gzip&&0<R.windowBits&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var _=s.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(_!==d)throw new Error(l[_]);if(R.header&&s.deflateSetHeader(this.strm,R.header),R.dictionary){var M;if(M=typeof R.dictionary=="string"?a.string2buf(R.dictionary):u.call(R.dictionary)==="[object ArrayBuffer]"?new Uint8Array(R.dictionary):R.dictionary,(_=s.deflateSetDictionary(this.strm,M))!==d)throw new Error(l[_]);this._dict_set=!0}}function b(S,R){var _=new m(R);if(_.push(S,!0),_.err)throw _.msg||l[_.err];return _.result}m.prototype.push=function(S,R){var _,M,I=this.strm,W=this.options.chunkSize;if(this.ended)return!1;M=R===~~R?R:R===!0?4:0,typeof S=="string"?I.input=a.string2buf(S):u.call(S)==="[object ArrayBuffer]"?I.input=new Uint8Array(S):I.input=S,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new r.Buf8(W),I.next_out=0,I.avail_out=W),(_=s.deflate(I,M))!==1&&_!==d)return this.onEnd(_),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||M!==4&&M!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(r.shrinkBuf(I.output,I.next_out))):this.onData(r.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&_!==1);return M===4?(_=s.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===d):M!==2||(this.onEnd(d),!(I.avail_out=0))},m.prototype.onData=function(S){this.chunks.push(S)},m.prototype.onEnd=function(S){S===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},i.Deflate=m,i.deflate=b,i.deflateRaw=function(S,R){return(R=R||{}).raw=!0,b(S,R)},i.gzip=function(S,R){return(R=R||{}).gzip=!0,b(S,R)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,n,i){var s=o("./zlib/inflate"),r=o("./utils/common"),a=o("./utils/strings"),l=o("./zlib/constants"),c=o("./zlib/messages"),u=o("./zlib/zstream"),d=o("./zlib/gzheader"),h=Object.prototype.toString;function f(m){if(!(this instanceof f))return new f(m);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},m||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||m&&m.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var S=s.inflateInit2(this.strm,b.windowBits);if(S!==l.Z_OK)throw new Error(c[S]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function v(m,b){var S=new f(b);if(S.push(m,!0),S.err)throw S.msg||c[S.err];return S.result}f.prototype.push=function(m,b){var S,R,_,M,I,W,z=this.strm,de=this.options.chunkSize,K=this.options.dictionary,O=!1;if(this.ended)return!1;R=b===~~b?b:b===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof m=="string"?z.input=a.binstring2buf(m):h.call(m)==="[object ArrayBuffer]"?z.input=new Uint8Array(m):z.input=m,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new r.Buf8(de),z.next_out=0,z.avail_out=de),(S=s.inflate(z,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&K&&(W=typeof K=="string"?a.string2buf(K):h.call(K)==="[object ArrayBuffer]"?new Uint8Array(K):K,S=s.inflateSetDictionary(this.strm,W)),S===l.Z_BUF_ERROR&&O===!0&&(S=l.Z_OK,O=!1),S!==l.Z_STREAM_END&&S!==l.Z_OK)return this.onEnd(S),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&S!==l.Z_STREAM_END&&(z.avail_in!==0||R!==l.Z_FINISH&&R!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(z.output,z.next_out),M=z.next_out-_,I=a.buf2string(z.output,_),z.next_out=M,z.avail_out=de-M,M&&r.arraySet(z.output,z.output,_,M,0),this.onData(I)):this.onData(r.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(O=!0)}while((0<z.avail_in||z.avail_out===0)&&S!==l.Z_STREAM_END);return S===l.Z_STREAM_END&&(R=l.Z_FINISH),R===l.Z_FINISH?(S=s.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===l.Z_OK):R!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(z.avail_out=0))},f.prototype.onData=function(m){this.chunks.push(m)},f.prototype.onEnd=function(m){m===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Inflate=f,i.inflate=v,i.inflateRaw=function(m,b){return(b=b||{}).raw=!0,v(m,b)},i.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(l[d]=u[d])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var r={arraySet:function(l,c,u,d,h){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+d),h);else for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){var c,u,d,h,f,v;for(c=d=0,u=l.length;c<u;c++)d+=l[c].length;for(v=new Uint8Array(d),c=h=0,u=l.length;c<u;c++)f=l[c],v.set(f,h),h+=f.length;return v}},a={arraySet:function(l,c,u,d,h){for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(o,n,i){var s=o("./common"),r=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(d,h){if(h<65537&&(d.subarray&&a||!d.subarray&&r))return String.fromCharCode.apply(null,s.shrinkBuf(d,h));for(var f="",v=0;v<h;v++)f+=String.fromCharCode(d[v]);return f}l[254]=l[254]=1,i.string2buf=function(d){var h,f,v,m,b,S=d.length,R=0;for(m=0;m<S;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<S&&(64512&(v=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(v-56320),m++),R+=f<128?1:f<2048?2:f<65536?3:4;for(h=new s.Buf8(R),m=b=0;b<R;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<S&&(64512&(v=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(v-56320),m++),f<128?h[b++]=f:(f<2048?h[b++]=192|f>>>6:(f<65536?h[b++]=224|f>>>12:(h[b++]=240|f>>>18,h[b++]=128|f>>>12&63),h[b++]=128|f>>>6&63),h[b++]=128|63&f);return h},i.buf2binstring=function(d){return u(d,d.length)},i.binstring2buf=function(d){for(var h=new s.Buf8(d.length),f=0,v=h.length;f<v;f++)h[f]=d.charCodeAt(f);return h},i.buf2string=function(d,h){var f,v,m,b,S=h||d.length,R=new Array(2*S);for(f=v=0;f<S;)if((m=d[f++])<128)R[v++]=m;else if(4<(b=l[m]))R[v++]=65533,f+=b-1;else{for(m&=b===2?31:b===3?15:7;1<b&&f<S;)m=m<<6|63&d[f++],b--;1<b?R[v++]=65533:m<65536?R[v++]=m:(m-=65536,R[v++]=55296|m>>10&1023,R[v++]=56320|1023&m)}return u(R,v)},i.utf8border=function(d,h){var f;for((h=h||d.length)>d.length&&(h=d.length),f=h-1;0<=f&&(192&d[f])==128;)f--;return f<0||f===0?h:f+l[d[f]]>h?f:h}},{"./common":41}],43:[function(o,n,i){n.exports=function(s,r,a,l){for(var c=65535&s|0,u=s>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;u=u+(c=c+r[l++]|0)|0,--d;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(o,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,n,i){var s=function(){for(var r,a=[],l=0;l<256;l++){r=l;for(var c=0;c<8;c++)r=1&r?3988292384^r>>>1:r>>>1;a[l]=r}return a}();n.exports=function(r,a,l,c){var u=s,d=c+l;r^=-1;for(var h=c;h<d;h++)r=r>>>8^u[255&(r^a[h])];return-1^r}},{}],46:[function(o,n,i){var s,r=o("../utils/common"),a=o("./trees"),l=o("./adler32"),c=o("./crc32"),u=o("./messages"),d=0,h=4,f=0,v=-2,m=-1,b=4,S=2,R=8,_=9,M=286,I=30,W=19,z=2*M+1,de=15,K=3,O=258,ie=O+K+1,N=42,oe=113,F=1,Y=2,J=3,L=4;function ce(w,Q){return w.msg=u[Q],Q}function U(w){return(w<<1)-(4<w?9:0)}function le(w){for(var Q=w.length;0<=--Q;)w[Q]=0}function q(w){var Q=w.state,re=Q.pending;re>w.avail_out&&(re=w.avail_out),re!==0&&(r.arraySet(w.output,Q.pending_buf,Q.pending_out,re,w.next_out),w.next_out+=re,Q.pending_out+=re,w.total_out+=re,w.avail_out-=re,Q.pending-=re,Q.pending===0&&(Q.pending_out=0))}function se(w,Q){a._tr_flush_block(w,0<=w.block_start?w.block_start:-1,w.strstart-w.block_start,Q),w.block_start=w.strstart,q(w.strm)}function be(w,Q){w.pending_buf[w.pending++]=Q}function ue(w,Q){w.pending_buf[w.pending++]=Q>>>8&255,w.pending_buf[w.pending++]=255&Q}function j(w,Q){var re,A,k=w.max_chain_length,T=w.strstart,G=w.prev_length,ee=w.nice_match,P=w.strstart>w.w_size-ie?w.strstart-(w.w_size-ie):0,B=w.window,V=w.w_mask,X=w.prev,fe=w.strstart+O,Se=B[T+G-1],ke=B[T+G];w.prev_length>=w.good_match&&(k>>=2),ee>w.lookahead&&(ee=w.lookahead);do if(B[(re=Q)+G]===ke&&B[re+G-1]===Se&&B[re]===B[T]&&B[++re]===B[T+1]){T+=2,re++;do;while(B[++T]===B[++re]&&B[++T]===B[++re]&&B[++T]===B[++re]&&B[++T]===B[++re]&&B[++T]===B[++re]&&B[++T]===B[++re]&&B[++T]===B[++re]&&B[++T]===B[++re]&&T<fe);if(A=O-(fe-T),T=fe-O,G<A){if(w.match_start=Q,ee<=(G=A))break;Se=B[T+G-1],ke=B[T+G]}}while((Q=X[Q&V])>P&&--k!=0);return G<=w.lookahead?G:w.lookahead}function Ee(w){var Q,re,A,k,T,G,ee,P,B,V,X=w.w_size;do{if(k=w.window_size-w.lookahead-w.strstart,w.strstart>=X+(X-ie)){for(r.arraySet(w.window,w.window,X,X,0),w.match_start-=X,w.strstart-=X,w.block_start-=X,Q=re=w.hash_size;A=w.head[--Q],w.head[Q]=X<=A?A-X:0,--re;);for(Q=re=X;A=w.prev[--Q],w.prev[Q]=X<=A?A-X:0,--re;);k+=X}if(w.strm.avail_in===0)break;if(G=w.strm,ee=w.window,P=w.strstart+w.lookahead,B=k,V=void 0,V=G.avail_in,B<V&&(V=B),re=V===0?0:(G.avail_in-=V,r.arraySet(ee,G.input,G.next_in,V,P),G.state.wrap===1?G.adler=l(G.adler,ee,V,P):G.state.wrap===2&&(G.adler=c(G.adler,ee,V,P)),G.next_in+=V,G.total_in+=V,V),w.lookahead+=re,w.lookahead+w.insert>=K)for(T=w.strstart-w.insert,w.ins_h=w.window[T],w.ins_h=(w.ins_h<<w.hash_shift^w.window[T+1])&w.hash_mask;w.insert&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[T+K-1])&w.hash_mask,w.prev[T&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=T,T++,w.insert--,!(w.lookahead+w.insert<K)););}while(w.lookahead<ie&&w.strm.avail_in!==0)}function ne(w,Q){for(var re,A;;){if(w.lookahead<ie){if(Ee(w),w.lookahead<ie&&Q===d)return F;if(w.lookahead===0)break}if(re=0,w.lookahead>=K&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+K-1])&w.hash_mask,re=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),re!==0&&w.strstart-re<=w.w_size-ie&&(w.match_length=j(w,re)),w.match_length>=K)if(A=a._tr_tally(w,w.strstart-w.match_start,w.match_length-K),w.lookahead-=w.match_length,w.match_length<=w.max_lazy_match&&w.lookahead>=K){for(w.match_length--;w.strstart++,w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+K-1])&w.hash_mask,re=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart,--w.match_length!=0;);w.strstart++}else w.strstart+=w.match_length,w.match_length=0,w.ins_h=w.window[w.strstart],w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+1])&w.hash_mask;else A=a._tr_tally(w,0,w.window[w.strstart]),w.lookahead--,w.strstart++;if(A&&(se(w,!1),w.strm.avail_out===0))return F}return w.insert=w.strstart<K-1?w.strstart:K-1,Q===h?(se(w,!0),w.strm.avail_out===0?J:L):w.last_lit&&(se(w,!1),w.strm.avail_out===0)?F:Y}function pe(w,Q){for(var re,A,k;;){if(w.lookahead<ie){if(Ee(w),w.lookahead<ie&&Q===d)return F;if(w.lookahead===0)break}if(re=0,w.lookahead>=K&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+K-1])&w.hash_mask,re=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),w.prev_length=w.match_length,w.prev_match=w.match_start,w.match_length=K-1,re!==0&&w.prev_length<w.max_lazy_match&&w.strstart-re<=w.w_size-ie&&(w.match_length=j(w,re),w.match_length<=5&&(w.strategy===1||w.match_length===K&&4096<w.strstart-w.match_start)&&(w.match_length=K-1)),w.prev_length>=K&&w.match_length<=w.prev_length){for(k=w.strstart+w.lookahead-K,A=a._tr_tally(w,w.strstart-1-w.prev_match,w.prev_length-K),w.lookahead-=w.prev_length-1,w.prev_length-=2;++w.strstart<=k&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+K-1])&w.hash_mask,re=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),--w.prev_length!=0;);if(w.match_available=0,w.match_length=K-1,w.strstart++,A&&(se(w,!1),w.strm.avail_out===0))return F}else if(w.match_available){if((A=a._tr_tally(w,0,w.window[w.strstart-1]))&&se(w,!1),w.strstart++,w.lookahead--,w.strm.avail_out===0)return F}else w.match_available=1,w.strstart++,w.lookahead--}return w.match_available&&(A=a._tr_tally(w,0,w.window[w.strstart-1]),w.match_available=0),w.insert=w.strstart<K-1?w.strstart:K-1,Q===h?(se(w,!0),w.strm.avail_out===0?J:L):w.last_lit&&(se(w,!1),w.strm.avail_out===0)?F:Y}function ae(w,Q,re,A,k){this.good_length=w,this.max_lazy=Q,this.nice_length=re,this.max_chain=A,this.func=k}function xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*z),this.dyn_dtree=new r.Buf16(2*(2*I+1)),this.bl_tree=new r.Buf16(2*(2*W+1)),le(this.dyn_ltree),le(this.dyn_dtree),le(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(de+1),this.heap=new r.Buf16(2*M+1),le(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*M+1),le(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Le(w){var Q;return w&&w.state?(w.total_in=w.total_out=0,w.data_type=S,(Q=w.state).pending=0,Q.pending_out=0,Q.wrap<0&&(Q.wrap=-Q.wrap),Q.status=Q.wrap?N:oe,w.adler=Q.wrap===2?0:1,Q.last_flush=d,a._tr_init(Q),f):ce(w,v)}function nt(w){var Q=Le(w);return Q===f&&function(re){re.window_size=2*re.w_size,le(re.head),re.max_lazy_match=s[re.level].max_lazy,re.good_match=s[re.level].good_length,re.nice_match=s[re.level].nice_length,re.max_chain_length=s[re.level].max_chain,re.strstart=0,re.block_start=0,re.lookahead=0,re.insert=0,re.match_length=re.prev_length=K-1,re.match_available=0,re.ins_h=0}(w.state),Q}function H(w,Q,re,A,k,T){if(!w)return v;var G=1;if(Q===m&&(Q=6),A<0?(G=0,A=-A):15<A&&(G=2,A-=16),k<1||_<k||re!==R||A<8||15<A||Q<0||9<Q||T<0||b<T)return ce(w,v);A===8&&(A=9);var ee=new xe;return(w.state=ee).strm=w,ee.wrap=G,ee.gzhead=null,ee.w_bits=A,ee.w_size=1<<ee.w_bits,ee.w_mask=ee.w_size-1,ee.hash_bits=k+7,ee.hash_size=1<<ee.hash_bits,ee.hash_mask=ee.hash_size-1,ee.hash_shift=~~((ee.hash_bits+K-1)/K),ee.window=new r.Buf8(2*ee.w_size),ee.head=new r.Buf16(ee.hash_size),ee.prev=new r.Buf16(ee.w_size),ee.lit_bufsize=1<<k+6,ee.pending_buf_size=4*ee.lit_bufsize,ee.pending_buf=new r.Buf8(ee.pending_buf_size),ee.d_buf=1*ee.lit_bufsize,ee.l_buf=3*ee.lit_bufsize,ee.level=Q,ee.strategy=T,ee.method=re,nt(w)}s=[new ae(0,0,0,0,function(w,Q){var re=65535;for(re>w.pending_buf_size-5&&(re=w.pending_buf_size-5);;){if(w.lookahead<=1){if(Ee(w),w.lookahead===0&&Q===d)return F;if(w.lookahead===0)break}w.strstart+=w.lookahead,w.lookahead=0;var A=w.block_start+re;if((w.strstart===0||w.strstart>=A)&&(w.lookahead=w.strstart-A,w.strstart=A,se(w,!1),w.strm.avail_out===0)||w.strstart-w.block_start>=w.w_size-ie&&(se(w,!1),w.strm.avail_out===0))return F}return w.insert=0,Q===h?(se(w,!0),w.strm.avail_out===0?J:L):(w.strstart>w.block_start&&(se(w,!1),w.strm.avail_out),F)}),new ae(4,4,8,4,ne),new ae(4,5,16,8,ne),new ae(4,6,32,32,ne),new ae(4,4,16,16,pe),new ae(8,16,32,32,pe),new ae(8,16,128,128,pe),new ae(8,32,128,256,pe),new ae(32,128,258,1024,pe),new ae(32,258,258,4096,pe)],i.deflateInit=function(w,Q){return H(w,Q,R,15,8,0)},i.deflateInit2=H,i.deflateReset=nt,i.deflateResetKeep=Le,i.deflateSetHeader=function(w,Q){return w&&w.state?w.state.wrap!==2?v:(w.state.gzhead=Q,f):v},i.deflate=function(w,Q){var re,A,k,T;if(!w||!w.state||5<Q||Q<0)return w?ce(w,v):v;if(A=w.state,!w.output||!w.input&&w.avail_in!==0||A.status===666&&Q!==h)return ce(w,w.avail_out===0?-5:v);if(A.strm=w,re=A.last_flush,A.last_flush=Q,A.status===N)if(A.wrap===2)w.adler=0,be(A,31),be(A,139),be(A,8),A.gzhead?(be(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),be(A,255&A.gzhead.time),be(A,A.gzhead.time>>8&255),be(A,A.gzhead.time>>16&255),be(A,A.gzhead.time>>24&255),be(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),be(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(be(A,255&A.gzhead.extra.length),be(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(w.adler=c(w.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(be(A,0),be(A,0),be(A,0),be(A,0),be(A,0),be(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),be(A,3),A.status=oe);else{var G=R+(A.w_bits-8<<4)<<8;G|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(G|=32),G+=31-G%31,A.status=oe,ue(A,G),A.strstart!==0&&(ue(A,w.adler>>>16),ue(A,65535&w.adler)),w.adler=1}if(A.status===69)if(A.gzhead.extra){for(k=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>k&&(w.adler=c(w.adler,A.pending_buf,A.pending-k,k)),q(w),k=A.pending,A.pending!==A.pending_buf_size));)be(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>k&&(w.adler=c(w.adler,A.pending_buf,A.pending-k,k)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){k=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>k&&(w.adler=c(w.adler,A.pending_buf,A.pending-k,k)),q(w),k=A.pending,A.pending===A.pending_buf_size)){T=1;break}T=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,be(A,T)}while(T!==0);A.gzhead.hcrc&&A.pending>k&&(w.adler=c(w.adler,A.pending_buf,A.pending-k,k)),T===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){k=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>k&&(w.adler=c(w.adler,A.pending_buf,A.pending-k,k)),q(w),k=A.pending,A.pending===A.pending_buf_size)){T=1;break}T=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,be(A,T)}while(T!==0);A.gzhead.hcrc&&A.pending>k&&(w.adler=c(w.adler,A.pending_buf,A.pending-k,k)),T===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&q(w),A.pending+2<=A.pending_buf_size&&(be(A,255&w.adler),be(A,w.adler>>8&255),w.adler=0,A.status=oe)):A.status=oe),A.pending!==0){if(q(w),w.avail_out===0)return A.last_flush=-1,f}else if(w.avail_in===0&&U(Q)<=U(re)&&Q!==h)return ce(w,-5);if(A.status===666&&w.avail_in!==0)return ce(w,-5);if(w.avail_in!==0||A.lookahead!==0||Q!==d&&A.status!==666){var ee=A.strategy===2?function(P,B){for(var V;;){if(P.lookahead===0&&(Ee(P),P.lookahead===0)){if(B===d)return F;break}if(P.match_length=0,V=a._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++,V&&(se(P,!1),P.strm.avail_out===0))return F}return P.insert=0,B===h?(se(P,!0),P.strm.avail_out===0?J:L):P.last_lit&&(se(P,!1),P.strm.avail_out===0)?F:Y}(A,Q):A.strategy===3?function(P,B){for(var V,X,fe,Se,ke=P.window;;){if(P.lookahead<=O){if(Ee(P),P.lookahead<=O&&B===d)return F;if(P.lookahead===0)break}if(P.match_length=0,P.lookahead>=K&&0<P.strstart&&(X=ke[fe=P.strstart-1])===ke[++fe]&&X===ke[++fe]&&X===ke[++fe]){Se=P.strstart+O;do;while(X===ke[++fe]&&X===ke[++fe]&&X===ke[++fe]&&X===ke[++fe]&&X===ke[++fe]&&X===ke[++fe]&&X===ke[++fe]&&X===ke[++fe]&&fe<Se);P.match_length=O-(Se-fe),P.match_length>P.lookahead&&(P.match_length=P.lookahead)}if(P.match_length>=K?(V=a._tr_tally(P,1,P.match_length-K),P.lookahead-=P.match_length,P.strstart+=P.match_length,P.match_length=0):(V=a._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++),V&&(se(P,!1),P.strm.avail_out===0))return F}return P.insert=0,B===h?(se(P,!0),P.strm.avail_out===0?J:L):P.last_lit&&(se(P,!1),P.strm.avail_out===0)?F:Y}(A,Q):s[A.level].func(A,Q);if(ee!==J&&ee!==L||(A.status=666),ee===F||ee===J)return w.avail_out===0&&(A.last_flush=-1),f;if(ee===Y&&(Q===1?a._tr_align(A):Q!==5&&(a._tr_stored_block(A,0,0,!1),Q===3&&(le(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),q(w),w.avail_out===0))return A.last_flush=-1,f}return Q!==h?f:A.wrap<=0?1:(A.wrap===2?(be(A,255&w.adler),be(A,w.adler>>8&255),be(A,w.adler>>16&255),be(A,w.adler>>24&255),be(A,255&w.total_in),be(A,w.total_in>>8&255),be(A,w.total_in>>16&255),be(A,w.total_in>>24&255)):(ue(A,w.adler>>>16),ue(A,65535&w.adler)),q(w),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?f:1)},i.deflateEnd=function(w){var Q;return w&&w.state?(Q=w.state.status)!==N&&Q!==69&&Q!==73&&Q!==91&&Q!==103&&Q!==oe&&Q!==666?ce(w,v):(w.state=null,Q===oe?ce(w,-3):f):v},i.deflateSetDictionary=function(w,Q){var re,A,k,T,G,ee,P,B,V=Q.length;if(!w||!w.state||(T=(re=w.state).wrap)===2||T===1&&re.status!==N||re.lookahead)return v;for(T===1&&(w.adler=l(w.adler,Q,V,0)),re.wrap=0,V>=re.w_size&&(T===0&&(le(re.head),re.strstart=0,re.block_start=0,re.insert=0),B=new r.Buf8(re.w_size),r.arraySet(B,Q,V-re.w_size,re.w_size,0),Q=B,V=re.w_size),G=w.avail_in,ee=w.next_in,P=w.input,w.avail_in=V,w.next_in=0,w.input=Q,Ee(re);re.lookahead>=K;){for(A=re.strstart,k=re.lookahead-(K-1);re.ins_h=(re.ins_h<<re.hash_shift^re.window[A+K-1])&re.hash_mask,re.prev[A&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=A,A++,--k;);re.strstart=A,re.lookahead=K-1,Ee(re)}return re.strstart+=re.lookahead,re.block_start=re.strstart,re.insert=re.lookahead,re.lookahead=0,re.match_length=re.prev_length=K-1,re.match_available=0,w.next_in=ee,w.input=P,w.avail_in=G,re.wrap=T,f},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(o,n,i){n.exports=function(s,r){var a,l,c,u,d,h,f,v,m,b,S,R,_,M,I,W,z,de,K,O,ie,N,oe,F,Y;a=s.state,l=s.next_in,F=s.input,c=l+(s.avail_in-5),u=s.next_out,Y=s.output,d=u-(r-s.avail_out),h=u+(s.avail_out-257),f=a.dmax,v=a.wsize,m=a.whave,b=a.wnext,S=a.window,R=a.hold,_=a.bits,M=a.lencode,I=a.distcode,W=(1<<a.lenbits)-1,z=(1<<a.distbits)-1;e:do{_<15&&(R+=F[l++]<<_,_+=8,R+=F[l++]<<_,_+=8),de=M[R&W];t:for(;;){if(R>>>=K=de>>>24,_-=K,(K=de>>>16&255)===0)Y[u++]=65535&de;else{if(!(16&K)){if(!(64&K)){de=M[(65535&de)+(R&(1<<K)-1)];continue t}if(32&K){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}O=65535&de,(K&=15)&&(_<K&&(R+=F[l++]<<_,_+=8),O+=R&(1<<K)-1,R>>>=K,_-=K),_<15&&(R+=F[l++]<<_,_+=8,R+=F[l++]<<_,_+=8),de=I[R&z];o:for(;;){if(R>>>=K=de>>>24,_-=K,!(16&(K=de>>>16&255))){if(!(64&K)){de=I[(65535&de)+(R&(1<<K)-1)];continue o}s.msg="invalid distance code",a.mode=30;break e}if(ie=65535&de,_<(K&=15)&&(R+=F[l++]<<_,(_+=8)<K&&(R+=F[l++]<<_,_+=8)),f<(ie+=R&(1<<K)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(R>>>=K,_-=K,(K=u-d)<ie){if(m<(K=ie-K)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(oe=S,(N=0)===b){if(N+=v-K,K<O){for(O-=K;Y[u++]=S[N++],--K;);N=u-ie,oe=Y}}else if(b<K){if(N+=v+b-K,(K-=b)<O){for(O-=K;Y[u++]=S[N++],--K;);if(N=0,b<O){for(O-=K=b;Y[u++]=S[N++],--K;);N=u-ie,oe=Y}}}else if(N+=b-K,K<O){for(O-=K;Y[u++]=S[N++],--K;);N=u-ie,oe=Y}for(;2<O;)Y[u++]=oe[N++],Y[u++]=oe[N++],Y[u++]=oe[N++],O-=3;O&&(Y[u++]=oe[N++],1<O&&(Y[u++]=oe[N++]))}else{for(N=u-ie;Y[u++]=Y[N++],Y[u++]=Y[N++],Y[u++]=Y[N++],2<(O-=3););O&&(Y[u++]=Y[N++],1<O&&(Y[u++]=Y[N++]))}break}}break}}while(l<c&&u<h);l-=O=_>>3,R&=(1<<(_-=O<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<h?h-u+257:257-(u-h),a.hold=R,a.bits=_}},{}],49:[function(o,n,i){var s=o("../utils/common"),r=o("./adler32"),a=o("./crc32"),l=o("./inffast"),c=o("./inftrees"),u=1,d=2,h=0,f=-2,v=1,m=852,b=592;function S(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(N){var oe;return N&&N.state?(oe=N.state,N.total_in=N.total_out=oe.total=0,N.msg="",oe.wrap&&(N.adler=1&oe.wrap),oe.mode=v,oe.last=0,oe.havedict=0,oe.dmax=32768,oe.head=null,oe.hold=0,oe.bits=0,oe.lencode=oe.lendyn=new s.Buf32(m),oe.distcode=oe.distdyn=new s.Buf32(b),oe.sane=1,oe.back=-1,h):f}function M(N){var oe;return N&&N.state?((oe=N.state).wsize=0,oe.whave=0,oe.wnext=0,_(N)):f}function I(N,oe){var F,Y;return N&&N.state?(Y=N.state,oe<0?(F=0,oe=-oe):(F=1+(oe>>4),oe<48&&(oe&=15)),oe&&(oe<8||15<oe)?f:(Y.window!==null&&Y.wbits!==oe&&(Y.window=null),Y.wrap=F,Y.wbits=oe,M(N))):f}function W(N,oe){var F,Y;return N?(Y=new R,(N.state=Y).window=null,(F=I(N,oe))!==h&&(N.state=null),F):f}var z,de,K=!0;function O(N){if(K){var oe;for(z=new s.Buf32(512),de=new s.Buf32(32),oe=0;oe<144;)N.lens[oe++]=8;for(;oe<256;)N.lens[oe++]=9;for(;oe<280;)N.lens[oe++]=7;for(;oe<288;)N.lens[oe++]=8;for(c(u,N.lens,0,288,z,0,N.work,{bits:9}),oe=0;oe<32;)N.lens[oe++]=5;c(d,N.lens,0,32,de,0,N.work,{bits:5}),K=!1}N.lencode=z,N.lenbits=9,N.distcode=de,N.distbits=5}function ie(N,oe,F,Y){var J,L=N.state;return L.window===null&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new s.Buf8(L.wsize)),Y>=L.wsize?(s.arraySet(L.window,oe,F-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):(Y<(J=L.wsize-L.wnext)&&(J=Y),s.arraySet(L.window,oe,F-Y,J,L.wnext),(Y-=J)?(s.arraySet(L.window,oe,F-Y,Y,0),L.wnext=Y,L.whave=L.wsize):(L.wnext+=J,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=J))),0}i.inflateReset=M,i.inflateReset2=I,i.inflateResetKeep=_,i.inflateInit=function(N){return W(N,15)},i.inflateInit2=W,i.inflate=function(N,oe){var F,Y,J,L,ce,U,le,q,se,be,ue,j,Ee,ne,pe,ae,xe,Le,nt,H,w,Q,re,A,k=0,T=new s.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return f;(F=N.state).mode===12&&(F.mode=13),ce=N.next_out,J=N.output,le=N.avail_out,L=N.next_in,Y=N.input,U=N.avail_in,q=F.hold,se=F.bits,be=U,ue=le,Q=h;e:for(;;)switch(F.mode){case v:if(F.wrap===0){F.mode=13;break}for(;se<16;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}if(2&F.wrap&&q===35615){T[F.check=0]=255&q,T[1]=q>>>8&255,F.check=a(F.check,T,2,0),se=q=0,F.mode=2;break}if(F.flags=0,F.head&&(F.head.done=!1),!(1&F.wrap)||(((255&q)<<8)+(q>>8))%31){N.msg="incorrect header check",F.mode=30;break}if((15&q)!=8){N.msg="unknown compression method",F.mode=30;break}if(se-=4,w=8+(15&(q>>>=4)),F.wbits===0)F.wbits=w;else if(w>F.wbits){N.msg="invalid window size",F.mode=30;break}F.dmax=1<<w,N.adler=F.check=1,F.mode=512&q?10:12,se=q=0;break;case 2:for(;se<16;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}if(F.flags=q,(255&F.flags)!=8){N.msg="unknown compression method",F.mode=30;break}if(57344&F.flags){N.msg="unknown header flags set",F.mode=30;break}F.head&&(F.head.text=q>>8&1),512&F.flags&&(T[0]=255&q,T[1]=q>>>8&255,F.check=a(F.check,T,2,0)),se=q=0,F.mode=3;case 3:for(;se<32;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}F.head&&(F.head.time=q),512&F.flags&&(T[0]=255&q,T[1]=q>>>8&255,T[2]=q>>>16&255,T[3]=q>>>24&255,F.check=a(F.check,T,4,0)),se=q=0,F.mode=4;case 4:for(;se<16;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}F.head&&(F.head.xflags=255&q,F.head.os=q>>8),512&F.flags&&(T[0]=255&q,T[1]=q>>>8&255,F.check=a(F.check,T,2,0)),se=q=0,F.mode=5;case 5:if(1024&F.flags){for(;se<16;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}F.length=q,F.head&&(F.head.extra_len=q),512&F.flags&&(T[0]=255&q,T[1]=q>>>8&255,F.check=a(F.check,T,2,0)),se=q=0}else F.head&&(F.head.extra=null);F.mode=6;case 6:if(1024&F.flags&&(U<(j=F.length)&&(j=U),j&&(F.head&&(w=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Array(F.head.extra_len)),s.arraySet(F.head.extra,Y,L,j,w)),512&F.flags&&(F.check=a(F.check,Y,j,L)),U-=j,L+=j,F.length-=j),F.length))break e;F.length=0,F.mode=7;case 7:if(2048&F.flags){if(U===0)break e;for(j=0;w=Y[L+j++],F.head&&w&&F.length<65536&&(F.head.name+=String.fromCharCode(w)),w&&j<U;);if(512&F.flags&&(F.check=a(F.check,Y,j,L)),U-=j,L+=j,w)break e}else F.head&&(F.head.name=null);F.length=0,F.mode=8;case 8:if(4096&F.flags){if(U===0)break e;for(j=0;w=Y[L+j++],F.head&&w&&F.length<65536&&(F.head.comment+=String.fromCharCode(w)),w&&j<U;);if(512&F.flags&&(F.check=a(F.check,Y,j,L)),U-=j,L+=j,w)break e}else F.head&&(F.head.comment=null);F.mode=9;case 9:if(512&F.flags){for(;se<16;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}if(q!==(65535&F.check)){N.msg="header crc mismatch",F.mode=30;break}se=q=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),N.adler=F.check=0,F.mode=12;break;case 10:for(;se<32;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}N.adler=F.check=S(q),se=q=0,F.mode=11;case 11:if(F.havedict===0)return N.next_out=ce,N.avail_out=le,N.next_in=L,N.avail_in=U,F.hold=q,F.bits=se,2;N.adler=F.check=1,F.mode=12;case 12:if(oe===5||oe===6)break e;case 13:if(F.last){q>>>=7&se,se-=7&se,F.mode=27;break}for(;se<3;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}switch(F.last=1&q,se-=1,3&(q>>>=1)){case 0:F.mode=14;break;case 1:if(O(F),F.mode=20,oe!==6)break;q>>>=2,se-=2;break e;case 2:F.mode=17;break;case 3:N.msg="invalid block type",F.mode=30}q>>>=2,se-=2;break;case 14:for(q>>>=7&se,se-=7&se;se<32;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}if((65535&q)!=(q>>>16^65535)){N.msg="invalid stored block lengths",F.mode=30;break}if(F.length=65535&q,se=q=0,F.mode=15,oe===6)break e;case 15:F.mode=16;case 16:if(j=F.length){if(U<j&&(j=U),le<j&&(j=le),j===0)break e;s.arraySet(J,Y,L,j,ce),U-=j,L+=j,le-=j,ce+=j,F.length-=j;break}F.mode=12;break;case 17:for(;se<14;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}if(F.nlen=257+(31&q),q>>>=5,se-=5,F.ndist=1+(31&q),q>>>=5,se-=5,F.ncode=4+(15&q),q>>>=4,se-=4,286<F.nlen||30<F.ndist){N.msg="too many length or distance symbols",F.mode=30;break}F.have=0,F.mode=18;case 18:for(;F.have<F.ncode;){for(;se<3;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}F.lens[G[F.have++]]=7&q,q>>>=3,se-=3}for(;F.have<19;)F.lens[G[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,re={bits:F.lenbits},Q=c(0,F.lens,0,19,F.lencode,0,F.work,re),F.lenbits=re.bits,Q){N.msg="invalid code lengths set",F.mode=30;break}F.have=0,F.mode=19;case 19:for(;F.have<F.nlen+F.ndist;){for(;ae=(k=F.lencode[q&(1<<F.lenbits)-1])>>>16&255,xe=65535&k,!((pe=k>>>24)<=se);){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}if(xe<16)q>>>=pe,se-=pe,F.lens[F.have++]=xe;else{if(xe===16){for(A=pe+2;se<A;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}if(q>>>=pe,se-=pe,F.have===0){N.msg="invalid bit length repeat",F.mode=30;break}w=F.lens[F.have-1],j=3+(3&q),q>>>=2,se-=2}else if(xe===17){for(A=pe+3;se<A;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}se-=pe,w=0,j=3+(7&(q>>>=pe)),q>>>=3,se-=3}else{for(A=pe+7;se<A;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}se-=pe,w=0,j=11+(127&(q>>>=pe)),q>>>=7,se-=7}if(F.have+j>F.nlen+F.ndist){N.msg="invalid bit length repeat",F.mode=30;break}for(;j--;)F.lens[F.have++]=w}}if(F.mode===30)break;if(F.lens[256]===0){N.msg="invalid code -- missing end-of-block",F.mode=30;break}if(F.lenbits=9,re={bits:F.lenbits},Q=c(u,F.lens,0,F.nlen,F.lencode,0,F.work,re),F.lenbits=re.bits,Q){N.msg="invalid literal/lengths set",F.mode=30;break}if(F.distbits=6,F.distcode=F.distdyn,re={bits:F.distbits},Q=c(d,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,re),F.distbits=re.bits,Q){N.msg="invalid distances set",F.mode=30;break}if(F.mode=20,oe===6)break e;case 20:F.mode=21;case 21:if(6<=U&&258<=le){N.next_out=ce,N.avail_out=le,N.next_in=L,N.avail_in=U,F.hold=q,F.bits=se,l(N,ue),ce=N.next_out,J=N.output,le=N.avail_out,L=N.next_in,Y=N.input,U=N.avail_in,q=F.hold,se=F.bits,F.mode===12&&(F.back=-1);break}for(F.back=0;ae=(k=F.lencode[q&(1<<F.lenbits)-1])>>>16&255,xe=65535&k,!((pe=k>>>24)<=se);){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}if(ae&&!(240&ae)){for(Le=pe,nt=ae,H=xe;ae=(k=F.lencode[H+((q&(1<<Le+nt)-1)>>Le)])>>>16&255,xe=65535&k,!(Le+(pe=k>>>24)<=se);){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}q>>>=Le,se-=Le,F.back+=Le}if(q>>>=pe,se-=pe,F.back+=pe,F.length=xe,ae===0){F.mode=26;break}if(32&ae){F.back=-1,F.mode=12;break}if(64&ae){N.msg="invalid literal/length code",F.mode=30;break}F.extra=15&ae,F.mode=22;case 22:if(F.extra){for(A=F.extra;se<A;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}F.length+=q&(1<<F.extra)-1,q>>>=F.extra,se-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=23;case 23:for(;ae=(k=F.distcode[q&(1<<F.distbits)-1])>>>16&255,xe=65535&k,!((pe=k>>>24)<=se);){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}if(!(240&ae)){for(Le=pe,nt=ae,H=xe;ae=(k=F.distcode[H+((q&(1<<Le+nt)-1)>>Le)])>>>16&255,xe=65535&k,!(Le+(pe=k>>>24)<=se);){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}q>>>=Le,se-=Le,F.back+=Le}if(q>>>=pe,se-=pe,F.back+=pe,64&ae){N.msg="invalid distance code",F.mode=30;break}F.offset=xe,F.extra=15&ae,F.mode=24;case 24:if(F.extra){for(A=F.extra;se<A;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}F.offset+=q&(1<<F.extra)-1,q>>>=F.extra,se-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){N.msg="invalid distance too far back",F.mode=30;break}F.mode=25;case 25:if(le===0)break e;if(j=ue-le,F.offset>j){if((j=F.offset-j)>F.whave&&F.sane){N.msg="invalid distance too far back",F.mode=30;break}Ee=j>F.wnext?(j-=F.wnext,F.wsize-j):F.wnext-j,j>F.length&&(j=F.length),ne=F.window}else ne=J,Ee=ce-F.offset,j=F.length;for(le<j&&(j=le),le-=j,F.length-=j;J[ce++]=ne[Ee++],--j;);F.length===0&&(F.mode=21);break;case 26:if(le===0)break e;J[ce++]=F.length,le--,F.mode=21;break;case 27:if(F.wrap){for(;se<32;){if(U===0)break e;U--,q|=Y[L++]<<se,se+=8}if(ue-=le,N.total_out+=ue,F.total+=ue,ue&&(N.adler=F.check=F.flags?a(F.check,J,ue,ce-ue):r(F.check,J,ue,ce-ue)),ue=le,(F.flags?q:S(q))!==F.check){N.msg="incorrect data check",F.mode=30;break}se=q=0}F.mode=28;case 28:if(F.wrap&&F.flags){for(;se<32;){if(U===0)break e;U--,q+=Y[L++]<<se,se+=8}if(q!==(4294967295&F.total)){N.msg="incorrect length check",F.mode=30;break}se=q=0}F.mode=29;case 29:Q=1;break e;case 30:Q=-3;break e;case 31:return-4;case 32:default:return f}return N.next_out=ce,N.avail_out=le,N.next_in=L,N.avail_in=U,F.hold=q,F.bits=se,(F.wsize||ue!==N.avail_out&&F.mode<30&&(F.mode<27||oe!==4))&&ie(N,N.output,N.next_out,ue-N.avail_out)?(F.mode=31,-4):(be-=N.avail_in,ue-=N.avail_out,N.total_in+=be,N.total_out+=ue,F.total+=ue,F.wrap&&ue&&(N.adler=F.check=F.flags?a(F.check,J,ue,N.next_out-ue):r(F.check,J,ue,N.next_out-ue)),N.data_type=F.bits+(F.last?64:0)+(F.mode===12?128:0)+(F.mode===20||F.mode===15?256:0),(be==0&&ue===0||oe===4)&&Q===h&&(Q=-5),Q)},i.inflateEnd=function(N){if(!N||!N.state)return f;var oe=N.state;return oe.window&&(oe.window=null),N.state=null,h},i.inflateGetHeader=function(N,oe){var F;return N&&N.state&&2&(F=N.state).wrap?((F.head=oe).done=!1,h):f},i.inflateSetDictionary=function(N,oe){var F,Y=oe.length;return N&&N.state?(F=N.state).wrap!==0&&F.mode!==11?f:F.mode===11&&r(1,oe,Y,0)!==F.check?-3:ie(N,oe,Y,Y)?(F.mode=31,-4):(F.havedict=1,h):f},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,n,i){var s=o("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(u,d,h,f,v,m,b,S){var R,_,M,I,W,z,de,K,O,ie=S.bits,N=0,oe=0,F=0,Y=0,J=0,L=0,ce=0,U=0,le=0,q=0,se=null,be=0,ue=new s.Buf16(16),j=new s.Buf16(16),Ee=null,ne=0;for(N=0;N<=15;N++)ue[N]=0;for(oe=0;oe<f;oe++)ue[d[h+oe]]++;for(J=ie,Y=15;1<=Y&&ue[Y]===0;Y--);if(Y<J&&(J=Y),Y===0)return v[m++]=20971520,v[m++]=20971520,S.bits=1,0;for(F=1;F<Y&&ue[F]===0;F++);for(J<F&&(J=F),N=U=1;N<=15;N++)if(U<<=1,(U-=ue[N])<0)return-1;if(0<U&&(u===0||Y!==1))return-1;for(j[1]=0,N=1;N<15;N++)j[N+1]=j[N]+ue[N];for(oe=0;oe<f;oe++)d[h+oe]!==0&&(b[j[d[h+oe]]++]=oe);if(z=u===0?(se=Ee=b,19):u===1?(se=r,be-=257,Ee=a,ne-=257,256):(se=l,Ee=c,-1),N=F,W=m,ce=oe=q=0,M=-1,I=(le=1<<(L=J))-1,u===1&&852<le||u===2&&592<le)return 1;for(;;){for(de=N-ce,O=b[oe]<z?(K=0,b[oe]):b[oe]>z?(K=Ee[ne+b[oe]],se[be+b[oe]]):(K=96,0),R=1<<N-ce,F=_=1<<L;v[W+(q>>ce)+(_-=R)]=de<<24|K<<16|O|0,_!==0;);for(R=1<<N-1;q&R;)R>>=1;if(R!==0?(q&=R-1,q+=R):q=0,oe++,--ue[N]==0){if(N===Y)break;N=d[h+b[oe]]}if(J<N&&(q&I)!==M){for(ce===0&&(ce=J),W+=F,U=1<<(L=N-ce);L+ce<Y&&!((U-=ue[L+ce])<=0);)L++,U<<=1;if(le+=1<<L,u===1&&852<le||u===2&&592<le)return 1;v[M=q&I]=J<<24|L<<16|W-m|0}}return q!==0&&(v[W+q]=N-ce<<24|64<<16|0),S.bits=J,0}},{"../utils/common":41}],51:[function(o,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,n,i){var s=o("../utils/common"),r=0,a=1;function l(k){for(var T=k.length;0<=--T;)k[T]=0}var c=0,u=29,d=256,h=d+1+u,f=30,v=19,m=2*h+1,b=15,S=16,R=7,_=256,M=16,I=17,W=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],de=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=new Array(2*(h+2));l(ie);var N=new Array(2*f);l(N);var oe=new Array(512);l(oe);var F=new Array(256);l(F);var Y=new Array(u);l(Y);var J,L,ce,U=new Array(f);function le(k,T,G,ee,P){this.static_tree=k,this.extra_bits=T,this.extra_base=G,this.elems=ee,this.max_length=P,this.has_stree=k&&k.length}function q(k,T){this.dyn_tree=k,this.max_code=0,this.stat_desc=T}function se(k){return k<256?oe[k]:oe[256+(k>>>7)]}function be(k,T){k.pending_buf[k.pending++]=255&T,k.pending_buf[k.pending++]=T>>>8&255}function ue(k,T,G){k.bi_valid>S-G?(k.bi_buf|=T<<k.bi_valid&65535,be(k,k.bi_buf),k.bi_buf=T>>S-k.bi_valid,k.bi_valid+=G-S):(k.bi_buf|=T<<k.bi_valid&65535,k.bi_valid+=G)}function j(k,T,G){ue(k,G[2*T],G[2*T+1])}function Ee(k,T){for(var G=0;G|=1&k,k>>>=1,G<<=1,0<--T;);return G>>>1}function ne(k,T,G){var ee,P,B=new Array(b+1),V=0;for(ee=1;ee<=b;ee++)B[ee]=V=V+G[ee-1]<<1;for(P=0;P<=T;P++){var X=k[2*P+1];X!==0&&(k[2*P]=Ee(B[X]++,X))}}function pe(k){var T;for(T=0;T<h;T++)k.dyn_ltree[2*T]=0;for(T=0;T<f;T++)k.dyn_dtree[2*T]=0;for(T=0;T<v;T++)k.bl_tree[2*T]=0;k.dyn_ltree[2*_]=1,k.opt_len=k.static_len=0,k.last_lit=k.matches=0}function ae(k){8<k.bi_valid?be(k,k.bi_buf):0<k.bi_valid&&(k.pending_buf[k.pending++]=k.bi_buf),k.bi_buf=0,k.bi_valid=0}function xe(k,T,G,ee){var P=2*T,B=2*G;return k[P]<k[B]||k[P]===k[B]&&ee[T]<=ee[G]}function Le(k,T,G){for(var ee=k.heap[G],P=G<<1;P<=k.heap_len&&(P<k.heap_len&&xe(T,k.heap[P+1],k.heap[P],k.depth)&&P++,!xe(T,ee,k.heap[P],k.depth));)k.heap[G]=k.heap[P],G=P,P<<=1;k.heap[G]=ee}function nt(k,T,G){var ee,P,B,V,X=0;if(k.last_lit!==0)for(;ee=k.pending_buf[k.d_buf+2*X]<<8|k.pending_buf[k.d_buf+2*X+1],P=k.pending_buf[k.l_buf+X],X++,ee===0?j(k,P,T):(j(k,(B=F[P])+d+1,T),(V=z[B])!==0&&ue(k,P-=Y[B],V),j(k,B=se(--ee),G),(V=de[B])!==0&&ue(k,ee-=U[B],V)),X<k.last_lit;);j(k,_,T)}function H(k,T){var G,ee,P,B=T.dyn_tree,V=T.stat_desc.static_tree,X=T.stat_desc.has_stree,fe=T.stat_desc.elems,Se=-1;for(k.heap_len=0,k.heap_max=m,G=0;G<fe;G++)B[2*G]!==0?(k.heap[++k.heap_len]=Se=G,k.depth[G]=0):B[2*G+1]=0;for(;k.heap_len<2;)B[2*(P=k.heap[++k.heap_len]=Se<2?++Se:0)]=1,k.depth[P]=0,k.opt_len--,X&&(k.static_len-=V[2*P+1]);for(T.max_code=Se,G=k.heap_len>>1;1<=G;G--)Le(k,B,G);for(P=fe;G=k.heap[1],k.heap[1]=k.heap[k.heap_len--],Le(k,B,1),ee=k.heap[1],k.heap[--k.heap_max]=G,k.heap[--k.heap_max]=ee,B[2*P]=B[2*G]+B[2*ee],k.depth[P]=(k.depth[G]>=k.depth[ee]?k.depth[G]:k.depth[ee])+1,B[2*G+1]=B[2*ee+1]=P,k.heap[1]=P++,Le(k,B,1),2<=k.heap_len;);k.heap[--k.heap_max]=k.heap[1],function(ke,Ne){var xt,bt,Ot,lt,oo,co,Dt=Ne.dyn_tree,$t=Ne.max_code,St=Ne.stat_desc.static_tree,vo=Ne.stat_desc.has_stree,_e=Ne.stat_desc.extra_bits,Fe=Ne.stat_desc.extra_base,Ve=Ne.stat_desc.max_length,Ke=0;for(lt=0;lt<=b;lt++)ke.bl_count[lt]=0;for(Dt[2*ke.heap[ke.heap_max]+1]=0,xt=ke.heap_max+1;xt<m;xt++)Ve<(lt=Dt[2*Dt[2*(bt=ke.heap[xt])+1]+1]+1)&&(lt=Ve,Ke++),Dt[2*bt+1]=lt,$t<bt||(ke.bl_count[lt]++,oo=0,Fe<=bt&&(oo=_e[bt-Fe]),co=Dt[2*bt],ke.opt_len+=co*(lt+oo),vo&&(ke.static_len+=co*(St[2*bt+1]+oo)));if(Ke!==0){do{for(lt=Ve-1;ke.bl_count[lt]===0;)lt--;ke.bl_count[lt]--,ke.bl_count[lt+1]+=2,ke.bl_count[Ve]--,Ke-=2}while(0<Ke);for(lt=Ve;lt!==0;lt--)for(bt=ke.bl_count[lt];bt!==0;)$t<(Ot=ke.heap[--xt])||(Dt[2*Ot+1]!==lt&&(ke.opt_len+=(lt-Dt[2*Ot+1])*Dt[2*Ot],Dt[2*Ot+1]=lt),bt--)}}(k,T),ne(B,Se,k.bl_count)}function w(k,T,G){var ee,P,B=-1,V=T[1],X=0,fe=7,Se=4;for(V===0&&(fe=138,Se=3),T[2*(G+1)+1]=65535,ee=0;ee<=G;ee++)P=V,V=T[2*(ee+1)+1],++X<fe&&P===V||(X<Se?k.bl_tree[2*P]+=X:P!==0?(P!==B&&k.bl_tree[2*P]++,k.bl_tree[2*M]++):X<=10?k.bl_tree[2*I]++:k.bl_tree[2*W]++,B=P,Se=(X=0)===V?(fe=138,3):P===V?(fe=6,3):(fe=7,4))}function Q(k,T,G){var ee,P,B=-1,V=T[1],X=0,fe=7,Se=4;for(V===0&&(fe=138,Se=3),ee=0;ee<=G;ee++)if(P=V,V=T[2*(ee+1)+1],!(++X<fe&&P===V)){if(X<Se)for(;j(k,P,k.bl_tree),--X!=0;);else P!==0?(P!==B&&(j(k,P,k.bl_tree),X--),j(k,M,k.bl_tree),ue(k,X-3,2)):X<=10?(j(k,I,k.bl_tree),ue(k,X-3,3)):(j(k,W,k.bl_tree),ue(k,X-11,7));B=P,Se=(X=0)===V?(fe=138,3):P===V?(fe=6,3):(fe=7,4)}}l(U);var re=!1;function A(k,T,G,ee){ue(k,(c<<1)+(ee?1:0),3),function(P,B,V,X){ae(P),be(P,V),be(P,~V),s.arraySet(P.pending_buf,P.window,B,V,P.pending),P.pending+=V}(k,T,G)}i._tr_init=function(k){re||(function(){var T,G,ee,P,B,V=new Array(b+1);for(P=ee=0;P<u-1;P++)for(Y[P]=ee,T=0;T<1<<z[P];T++)F[ee++]=P;for(F[ee-1]=P,P=B=0;P<16;P++)for(U[P]=B,T=0;T<1<<de[P];T++)oe[B++]=P;for(B>>=7;P<f;P++)for(U[P]=B<<7,T=0;T<1<<de[P]-7;T++)oe[256+B++]=P;for(G=0;G<=b;G++)V[G]=0;for(T=0;T<=143;)ie[2*T+1]=8,T++,V[8]++;for(;T<=255;)ie[2*T+1]=9,T++,V[9]++;for(;T<=279;)ie[2*T+1]=7,T++,V[7]++;for(;T<=287;)ie[2*T+1]=8,T++,V[8]++;for(ne(ie,h+1,V),T=0;T<f;T++)N[2*T+1]=5,N[2*T]=Ee(T,5);J=new le(ie,z,d+1,h,b),L=new le(N,de,0,f,b),ce=new le(new Array(0),K,0,v,R)}(),re=!0),k.l_desc=new q(k.dyn_ltree,J),k.d_desc=new q(k.dyn_dtree,L),k.bl_desc=new q(k.bl_tree,ce),k.bi_buf=0,k.bi_valid=0,pe(k)},i._tr_stored_block=A,i._tr_flush_block=function(k,T,G,ee){var P,B,V=0;0<k.level?(k.strm.data_type===2&&(k.strm.data_type=function(X){var fe,Se=4093624447;for(fe=0;fe<=31;fe++,Se>>>=1)if(1&Se&&X.dyn_ltree[2*fe]!==0)return r;if(X.dyn_ltree[18]!==0||X.dyn_ltree[20]!==0||X.dyn_ltree[26]!==0)return a;for(fe=32;fe<d;fe++)if(X.dyn_ltree[2*fe]!==0)return a;return r}(k)),H(k,k.l_desc),H(k,k.d_desc),V=function(X){var fe;for(w(X,X.dyn_ltree,X.l_desc.max_code),w(X,X.dyn_dtree,X.d_desc.max_code),H(X,X.bl_desc),fe=v-1;3<=fe&&X.bl_tree[2*O[fe]+1]===0;fe--);return X.opt_len+=3*(fe+1)+5+5+4,fe}(k),P=k.opt_len+3+7>>>3,(B=k.static_len+3+7>>>3)<=P&&(P=B)):P=B=G+5,G+4<=P&&T!==-1?A(k,T,G,ee):k.strategy===4||B===P?(ue(k,2+(ee?1:0),3),nt(k,ie,N)):(ue(k,4+(ee?1:0),3),function(X,fe,Se,ke){var Ne;for(ue(X,fe-257,5),ue(X,Se-1,5),ue(X,ke-4,4),Ne=0;Ne<ke;Ne++)ue(X,X.bl_tree[2*O[Ne]+1],3);Q(X,X.dyn_ltree,fe-1),Q(X,X.dyn_dtree,Se-1)}(k,k.l_desc.max_code+1,k.d_desc.max_code+1,V+1),nt(k,k.dyn_ltree,k.dyn_dtree)),pe(k),ee&&ae(k)},i._tr_tally=function(k,T,G){return k.pending_buf[k.d_buf+2*k.last_lit]=T>>>8&255,k.pending_buf[k.d_buf+2*k.last_lit+1]=255&T,k.pending_buf[k.l_buf+k.last_lit]=255&G,k.last_lit++,T===0?k.dyn_ltree[2*G]++:(k.matches++,T--,k.dyn_ltree[2*(F[G]+d+1)]++,k.dyn_dtree[2*se(T)]++),k.last_lit===k.lit_bufsize-1},i._tr_align=function(k){ue(k,2,3),j(k,_,ie),function(T){T.bi_valid===16?(be(T,T.bi_buf),T.bi_buf=0,T.bi_valid=0):8<=T.bi_valid&&(T.pending_buf[T.pending++]=255&T.bi_buf,T.bi_buf>>=8,T.bi_valid-=8)}(k)}},{"../utils/common":41}],53:[function(o,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(o,n,i){(function(s){(function(r,a){if(!r.setImmediate){var l,c,u,d,h=1,f={},v=!1,m=r.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(r);b=b&&b.setTimeout?b:r,l={}.toString.call(r.process)==="[object process]"?function(M){process.nextTick(function(){R(M)})}:function(){if(r.postMessage&&!r.importScripts){var M=!0,I=r.onmessage;return r.onmessage=function(){M=!1},r.postMessage("","*"),r.onmessage=I,M}}()?(d="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",_,!1):r.attachEvent("onmessage",_),function(M){r.postMessage(d+M,"*")}):r.MessageChannel?((u=new MessageChannel).port1.onmessage=function(M){R(M.data)},function(M){u.port2.postMessage(M)}):m&&"onreadystatechange"in m.createElement("script")?(c=m.documentElement,function(M){var I=m.createElement("script");I.onreadystatechange=function(){R(M),I.onreadystatechange=null,c.removeChild(I),I=null},c.appendChild(I)}):function(M){setTimeout(R,0,M)},b.setImmediate=function(M){typeof M!="function"&&(M=new Function(""+M));for(var I=new Array(arguments.length-1),W=0;W<I.length;W++)I[W]=arguments[W+1];var z={callback:M,args:I};return f[h]=z,l(h),h++},b.clearImmediate=S}function S(M){delete f[M]}function R(M){if(v)setTimeout(R,0,M);else{var I=f[M];if(I){v=!0;try{(function(W){var z=W.callback,de=W.args;switch(de.length){case 0:z();break;case 1:z(de[0]);break;case 2:z(de[0],de[1]);break;case 3:z(de[0],de[1],de[2]);break;default:z.apply(a,de)}})(I)}finally{S(M),v=!1}}}}function _(M){M.source===r&&typeof M.data=="string"&&M.data.indexOf(d)===0&&R(+M.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof fr<"u"?fr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Xx);var A7=Xx.exports;const PC=Kx(A7),I7={__name:"DeliveryTracker",setup(e,{expose:t}){t();const o=De([]),n=De({}),i=De(""),s=De(new Map),r=De(new Set),a=De("station"),l=De(""),c=De(new Kf),u=De(new Set),d=De(new Set),h=De(!1),f=T=>{o.value=Array.from(T.target.files),i.value=""},v=async()=>{if(!o.value.length){i.value="Please select one or more log files.";return}s.value.clear(),r.value.clear(),n.value={},u.value.clear(),d.value.clear(),i.value="";try{for(const T of o.value)if(T.name.toLowerCase().endsWith(".zip"))await m(T);else if(T.name.toLowerCase().endsWith(".log")){const G=await T.text();await b(G,T.name)}else console.warn(`Skipping unsupported file type: ${T.name}`)}catch(T){i.value=`Error processing files: ${T.message}`,console.error("Error processing files:",T)}},m=async T=>{try{const ee=await new PC().loadAsync(T);for(const[P,B]of Object.entries(ee.files))if(P.toLowerCase().endsWith(".log")&&!B.dir){const V=await B.async("text");await b(V,P)}}catch(G){i.value=`Error processing zip file ${T.name}: ${G.message}`,console.error("Error processing zip file:",G)}},b=async(T,G)=>{const ee=T.split(`
`);for(let P=0;P<ee.length;P++){const B=ee[P];if(B.trim().startsWith("{"))try{const V=JSON.parse(B);await S(V,G,P+1)}catch(V){console.warn("Failed to parse journal line:",V)}}},S=async(T,G,ee)=>{const P=T.MarketID,B=T.event,V=c.value.generateEventId(T,G,ee),X=await c.value.isEventProcessed(V);if(T.Commander&&r.value.add(T.Commander),P&&["ApproachSettlement","Docked","ColonisationConstructionDepot","DockingGranted"].includes(B)){const fe=T.StationName||T.Body;fe&&s.value.set(P,fe)}if(B==="ColonisationContribution"){const fe=T.timestamp,Se=s.value.get(P)||"Unknown",ke=`${P}-${Se}`;n.value[ke]||(n.value[ke]=[]);const Ne=T.Contributions||[];for(const xt of Ne){const bt=I(xt.Name),Ot=xt.Amount||0;n.value[ke].push({timestamp:fe,resource:bt,amount:Ot,commander:T.Commander||"Unknown",eventId:V,fileName:G,lineNumber:ee,rawEvent:T,isProcessed:X})}}},R=()=>{const T={};for(const[V,X]of Object.entries(n.value)){const[fe,Se]=V.split("-"),ke=`${Se} (${fe})`;T[ke]=X}const G=JSON.stringify(T,null,2),ee=new Blob([G],{type:"application/json"}),P=URL.createObjectURL(ee),B=document.createElement("a");B.href=P,B.download="delivery_contributions.json",document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(P)},_=T=>new Date(T).toLocaleString(),M=T=>T.toLocaleString(),I=T=>{if(!T)return T;let G=T.startsWith("$")?T.substring(1):T;return G.endsWith("_name;")&&(G=G.substring(0,G.length-6)),G},W=T=>T.reduce((G,ee)=>G+ee.amount,0),z=Ze(()=>{const T=new Set;for(const G of Object.values(n.value))for(const ee of G)T.add(ee.resource);return Array.from(T).sort()}),de=Ze(()=>Object.keys(n.value).map(T=>{const[G,ee]=T.split("-");return ee}).sort()),K=Ze(()=>Array.from(r.value).sort()),O=Ze(()=>{let T=z.value;if(l.value){const G=l.value.toLowerCase();T=T.filter(ee=>ee.toLowerCase().includes(G)||de.value.some(P=>P.toLowerCase().includes(G)))}return a.value==="total"?T.sort((G,ee)=>F(ee)-F(G)):a.value==="station"&&T.sort((G,ee)=>{const P=Math.max(...de.value.map(V=>N(V,G)));return Math.max(...de.value.map(V=>N(V,ee)))-P}),T}),ie=Ze(()=>{let T=de.value;if(l.value){const G=l.value.toLowerCase();T=T.filter(ee=>ee.toLowerCase().includes(G)||z.value.some(P=>P.toLowerCase().includes(G)))}return a.value==="total"?T.sort((G,ee)=>oe(ee)-oe(G)):a.value==="resource"&&T.sort((G,ee)=>{const P=Math.max(...z.value.map(V=>N(G,V)));return Math.max(...z.value.map(V=>N(ee,V)))-P}),T}),N=(T,G)=>{let ee=0;for(const[P,B]of Object.entries(n.value)){const[V,X]=P.split("-");if(X===T)for(const fe of B)fe.resource===G&&(ee+=fe.amount)}return ee},oe=T=>{let G=0;for(const[ee,P]of Object.entries(n.value)){const[B,V]=ee.split("-");V===T&&(G+=W(P))}return G},F=T=>{let G=0;for(const ee of Object.values(n.value))for(const P of ee)P.resource===T&&(G+=P.amount);return G},Y=()=>{let T=0;for(const G of Object.values(n.value))T+=W(G);return T},J=(T,G)=>{let ee=0;for(const[P,B]of Object.entries(n.value)){const[V,X]=P.split("-");if(X===T)for(const fe of B)ce(fe,G)&&(ee+=fe.amount)}return ee},L=T=>{let G=0;for(const ee of Object.values(n.value))for(const P of ee)ce(P,T)&&(G+=P.amount);return G},ce=(T,G)=>{const ee=U(T);return G==="planetary"?ee.includes("Planetary Construction Site"):G==="orbital"?!ee.includes("Planetary Construction Site"):!1},U=T=>{for(const[G,ee]of Object.entries(n.value))if(ee.includes(T)){const[P,B]=G.split("-");return B}return"Unknown"},le=T=>{u.value.has(T)?u.value.delete(T):u.value.add(T)},q=T=>{d.value.has(T)?d.value.delete(T):d.value.add(T)},se=()=>{u.value.clear();for(const[T,G]of Object.entries(n.value))pe(T)||u.value.add(T)},be=()=>{d.value.clear();for(const T of z.value)ae(T)||d.value.add(T)},ue=()=>{u.value.clear(),d.value.clear()},j=async()=>{if(u.value.size===0&&d.value.size===0){i.value="No sites or commodities selected to mark as processed.";return}try{const T=[];for(const G of u.value){const ee=n.value[G]||[];for(const P of ee)P.eventId&&!P.isProcessed&&T.push({event:P.rawEvent,fileName:P.fileName,lineNumber:P.lineNumber})}for(const G of d.value)for(const[ee,P]of Object.entries(n.value))for(const B of P)B.resource===G&&B.eventId&&!B.isProcessed&&(T.some(X=>X.fileName===B.fileName&&X.lineNumber===B.lineNumber)||T.push({event:B.rawEvent,fileName:B.fileName,lineNumber:B.lineNumber}));if(T.length===0){i.value="No valid events found to mark as processed.";return}await c.value.markEventsAsProcessed(T);for(const G of T){const ee=c.value.generateEventId(G.event,G.fileName,G.lineNumber);for(const[P,B]of Object.entries(n.value))for(const V of B)V.eventId===ee&&(V.isProcessed=!0)}u.value.clear(),d.value.clear(),i.value=`Successfully marked ${T.length} events as processed.`,setTimeout(()=>{i.value=""},3e3)}catch(T){i.value=`Error marking events as processed: ${T.message}`,console.error("Error marking events as processed:",T)}},Ee=Ze(()=>{let T=0;for(const[G,ee]of Object.entries(n.value))for(const P of ee)P.isProcessed||T++;return T}),ne=Ze(()=>{let T=0;for(const[G,ee]of Object.entries(n.value))for(const P of ee)P.isProcessed&&T++;return T}),pe=T=>(n.value[T]||[]).every(ee=>ee.isProcessed),ae=T=>{for(const[G,ee]of Object.entries(n.value))for(const P of ee)if(P.resource===T&&!P.isProcessed)return!1;return!0},xe=T=>(n.value[T]||[]).filter(ee=>ee.isProcessed).length,Le=T=>{let G=0;for(const[ee,P]of Object.entries(n.value))for(const B of P)B.resource===T&&B.isProcessed&&G++;return G},nt=T=>{let G=0;for(const[ee,P]of Object.entries(n.value))for(const B of P)B.resource===T&&B.eventId&&G++;return G},H=Ze(()=>{let T=0;for(const[G,ee]of Object.entries(n.value))pe(G)||T++;return T}),w=Ze(()=>{let T=0;for(const G of z.value)ae(G)||T++;return T}),Q=Ze(()=>{if(h.value)return n.value;const T={};for(const[G,ee]of Object.entries(n.value))pe(G)||(T[G]=ee);return T}),re=Ze(()=>h.value?z.value:z.value.filter(T=>!ae(T))),A=Ze(()=>h.value?de.value:de.value.filter(T=>{for(const[G,ee]of Object.entries(n.value))if(G.split("-")[1]===T&&!pe(G))return!0;return!1})),k={selectedFiles:o,contributions:n,error:i,stationNames:s,commanders:r,sortBy:a,filterText:l,orderManager:c,selectedSites:u,selectedCommodities:d,showProcessed:h,handleFileSelect:f,processLogs:v,processZipFile:m,processLogContent:b,parseEvent:S,exportJson:R,formatTimestamp:_,formatAmount:M,cleanCommodityName:I,calculateTotal:W,uniqueResources:z,uniqueStations:de,uniqueCommanders:K,filteredResources:O,filteredStations:ie,getStationResourceTotal:N,getStationTotal:oe,getResourceTotal:F,getGrandTotal:Y,getStationTypeTotal:J,getTypeTotal:L,isConstructionType:ce,getStationNameFromEntry:U,toggleSiteSelection:le,toggleCommoditySelection:q,selectAllSites:se,selectAllCommodities:be,clearAllSelections:ue,markSelectedAsProcessed:j,unprocessedEventsCount:Ee,processedEventsCount:ne,isSiteFullyProcessed:pe,isCommodityFullyProcessed:ae,getSiteProcessedCount:xe,getCommodityProcessedCount:Le,getCommodityTotalCount:nt,unprocessedSitesCount:H,unprocessedCommoditiesCount:w,filteredContributions:Q,displayedResources:re,displayedStations:A,ref:De,computed:Ze,get JSZip(){return PC},get OrderManager(){return Kf}};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}},M7={class:"bg-white rounded-lg p-8 mb-8 shadow-md"},O7={class:"space-y-6"},L7={class:"space-y-2"},B7={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},N7=["disabled"],H7=["disabled"],G7={key:0,class:"mt-4 p-4 bg-gray-50 rounded-lg border"},V7={class:"flex flex-wrap items-center gap-4 mb-4"},z7={class:"flex items-center gap-2"},W7={class:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full"},U7={class:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full"},$7={class:"flex items-center gap-2"},j7={class:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full"},K7={class:"flex items-center gap-2"},q7={class:"flex items-center gap-2 text-sm"},Q7={class:"flex flex-wrap gap-2 mb-4"},Y7=["disabled"],J7=["disabled"],Z7=["disabled"],X7={class:"flex flex-wrap gap-2"},eK=["disabled"],tK={key:0,class:"mt-4 p-4 bg-red-50 border border-red-200 rounded-md"},oK={class:"text-red-600"},nK={key:1,class:"mt-8"},iK={class:"flex justify-between items-center mb-4"},sK={class:"flex space-x-2"},rK={class:"overflow-x-auto"},aK={class:"min-w-full bg-white border border-gray-200 rounded-lg shadow-sm"},lK={class:"bg-gray-50"},cK={class:"divide-y divide-gray-200"},uK={class:"px-4 py-3 text-sm font-medium text-gray-900 border-r border-gray-200"},dK={class:"px-4 py-3 text-sm font-bold text-gray-900 text-center bg-gray-50"},hK={class:"bg-orange-50 border-t border-gray-300"},fK={class:"px-4 py-3 text-sm font-semibold text-orange-900 text-center bg-orange-100"},pK={class:"bg-blue-50 border-t border-gray-300"},gK={class:"px-4 py-3 text-sm font-semibold text-blue-900 text-center bg-blue-100"},mK={class:"bg-gray-100 border-t-2 border-gray-300"},vK={class:"px-4 py-3 text-sm font-bold text-gray-900 text-center bg-gray-200"},yK={class:"mt-6 grid grid-cols-1 md:grid-cols-5 gap-4"},CK={class:"bg-blue-50 p-4 rounded-lg"},bK={class:"text-2xl font-bold text-blue-600"},wK={class:"bg-green-50 p-4 rounded-lg"},SK={class:"text-2xl font-bold text-green-600"},xK={class:"bg-orange-50 p-4 rounded-lg"},RK={class:"text-2xl font-bold text-orange-600"},_K={class:"bg-cyan-50 p-4 rounded-lg"},EK={class:"text-2xl font-bold text-cyan-600"},PK={class:"bg-purple-50 p-4 rounded-lg"},FK={class:"text-2xl font-bold text-purple-600"},DK={key:0,class:"mt-6"},TK={class:"bg-gray-50 p-4 rounded-lg"},kK={class:"flex flex-wrap gap-2"},AK={class:"text-sm text-gray-600 mt-2"},IK={key:1,class:"mt-6"},MK={class:"mb-6"},OK={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},LK={class:"flex items-center justify-between mb-2"},BK={class:"font-medium text-gray-900"},NK={class:"flex items-center gap-2"},HK=["checked","onChange"],GK={key:1,class:"text-green-600 text-sm"},VK={class:"text-sm text-gray-600"},zK={class:"mb-6"},WK={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3"},UK={class:"flex items-center justify-between mb-2"},$K={class:"font-medium text-gray-900 text-sm"},jK={class:"flex items-center gap-2"},KK=["checked","onChange"],qK={key:1,class:"text-green-600 text-sm"},QK={class:"text-sm text-gray-600"};function YK(e,t,o,n,i,s){return ge(),me("div",M7,[t[23]||(t[23]=y("div",{class:"mb-6"},[y("h2",{class:"text-2xl font-bold text-gray-900"},"Delivery Tracker"),y("p",{class:"text-gray-600 mt-1"}," Track and analyze Elite Dangerous delivery contributions from journal logs. ")],-1)),y("div",O7,[y("div",L7,[t[3]||(t[3]=y("label",{for:"logFile",class:"block text-sm font-medium text-gray-700"},"Select Journal Log Files or Zip Archives:",-1)),y("input",{type:"file",id:"logFile",accept:".log,.zip",multiple:"",onChange:n.handleFileSelect,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,32)]),y("div",B7,[y("button",{onClick:n.processLogs,disabled:!n.selectedFiles.length,class:Ft(["px-4 py-2 rounded-md transition-colors",n.selectedFiles.length?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])}," Process Files ",10,N7),y("button",{onClick:n.exportJson,disabled:!Object.keys(n.contributions).length,class:Ft(["px-4 py-2 rounded-md transition-colors",Object.keys(n.contributions).length?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])}," Export as JSON ",10,H7)]),we(" Event Management Controls "),Object.keys(n.contributions).length?(ge(),me("div",G7,[y("div",V7,[y("div",z7,[t[4]||(t[4]=y("span",{class:"text-sm font-medium text-gray-700"},"Event Status:",-1)),y("span",W7,ye(n.unprocessedEventsCount)+" unprocessed ",1),y("span",U7,ye(n.processedEventsCount)+" processed ",1)]),y("div",$7,[t[5]||(t[5]=y("span",{class:"text-sm font-medium text-gray-700"},"Selected:",-1)),y("span",j7,ye(n.selectedSites.size)+" sites, "+ye(n.selectedCommodities.size)+" commodities ",1)]),y("div",K7,[y("label",q7,[Xe(y("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=r=>n.showProcessed=r),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[Xh,n.showProcessed]]),t[6]||(t[6]=y("span",{class:"text-gray-700"},"Show processed entries",-1))])])]),we(" Quick Select All Buttons "),y("div",Q7,[y("button",{onClick:n.selectAllSites,disabled:n.unprocessedSitesCount===0,class:Ft(["px-3 py-1 text-sm rounded-md transition-colors",n.unprocessedSitesCount===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"])}," Select All Sites ",10,Y7),y("button",{onClick:n.selectAllCommodities,disabled:n.unprocessedCommoditiesCount===0,class:Ft(["px-3 py-1 text-sm rounded-md transition-colors",n.unprocessedCommoditiesCount===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"])}," Select All Commodities ",10,J7),y("button",{onClick:n.clearAllSelections,disabled:n.selectedSites.size===0&&n.selectedCommodities.size===0,class:Ft(["px-3 py-1 text-sm rounded-md transition-colors",n.selectedSites.size===0&&n.selectedCommodities.size===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-500 text-white hover:bg-gray-600"])}," Clear All Selections ",10,Z7)]),we(" Action Buttons "),y("div",X7,[y("button",{onClick:n.markSelectedAsProcessed,disabled:n.selectedSites.size===0&&n.selectedCommodities.size===0,class:Ft(["px-3 py-1 text-sm rounded-md transition-colors",n.selectedSites.size===0&&n.selectedCommodities.size===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"])}," Mark Selected as Processed ",10,eK)])])):we("v-if",!0)]),n.error?(ge(),me("div",tK,[y("p",oK,ye(n.error),1)])):we("v-if",!0),Object.keys(n.contributions).length?(ge(),me("div",nK,[y("div",iK,[t[8]||(t[8]=y("h3",{class:"text-xl font-semibold text-gray-900"},"Delivery Contributions",-1)),y("div",sK,[Xe(y("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>n.sortBy=r),class:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},t[7]||(t[7]=[y("option",{value:"resource"},"Sort by Resource",-1),y("option",{value:"station"},"Sort by Station",-1),y("option",{value:"total"},"Sort by Total",-1)]),512),[[Wo,n.sortBy]]),Xe(y("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>n.filterText=r),type:"text",placeholder:"Filter stations or resources...",class:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[dt,n.filterText]])])]),we(" Pivot Table (Transposed: Resources as rows, Stations as columns) "),y("div",rK,[y("table",aK,[y("thead",lK,[y("tr",null,[t[9]||(t[9]=y("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200"}," Resource ",-1)),(ge(!0),me(Ct,null,Tt(n.displayedStations,r=>(ge(),me("th",{key:r,class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200"},ye(r),1))),128)),t[10]||(t[10]=y("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200 bg-gray-100"}," Resource Total ",-1))])]),y("tbody",cK,[(ge(!0),me(Ct,null,Tt(n.displayedResources,r=>(ge(),me("tr",{key:r,class:"hover:bg-gray-50"},[y("td",uK,ye(r),1),(ge(!0),me(Ct,null,Tt(n.displayedStations,a=>(ge(),me("td",{key:`${r}-${a}`,class:"px-4 py-3 text-sm text-gray-900 text-center"},ye(n.formatAmount(n.getStationResourceTotal(a,r))),1))),128)),y("td",dK,ye(n.formatAmount(n.getResourceTotal(r))),1)]))),128)),we(" Planetary Construction Subtotal "),y("tr",hK,[t[11]||(t[11]=y("td",{class:"px-4 py-3 text-sm font-semibold text-orange-900 border-r border-gray-200"}," Planetary Construction Subtotal ",-1)),(ge(!0),me(Ct,null,Tt(n.displayedStations,r=>(ge(),me("td",{key:`planetary-${r}`,class:"px-4 py-3 text-sm font-semibold text-orange-900 text-center"},ye(n.formatAmount(n.getStationTypeTotal(r,"planetary"))),1))),128)),y("td",fK,ye(n.formatAmount(n.getTypeTotal("planetary"))),1)]),we(" Orbital Construction Subtotal "),y("tr",pK,[t[12]||(t[12]=y("td",{class:"px-4 py-3 text-sm font-semibold text-blue-900 border-r border-gray-200"}," Orbital Construction Subtotal ",-1)),(ge(!0),me(Ct,null,Tt(n.displayedStations,r=>(ge(),me("td",{key:`orbital-${r}`,class:"px-4 py-3 text-sm font-semibold text-blue-900 text-center"},ye(n.formatAmount(n.getStationTypeTotal(r,"orbital"))),1))),128)),y("td",gK,ye(n.formatAmount(n.getTypeTotal("orbital"))),1)]),we(" Grand Totals Row "),y("tr",mK,[t[13]||(t[13]=y("td",{class:"px-4 py-3 text-sm font-bold text-gray-900 border-r border-gray-200"}," Station Total ",-1)),(ge(!0),me(Ct,null,Tt(n.displayedStations,r=>(ge(),me("td",{key:`total-${r}`,class:"px-4 py-3 text-sm font-bold text-gray-900 text-center"},ye(n.formatAmount(n.getStationTotal(r))),1))),128)),y("td",vK,ye(n.formatAmount(n.getGrandTotal())),1)])])])]),we(" Summary Statistics "),y("div",yK,[y("div",CK,[t[14]||(t[14]=y("h4",{class:"text-sm font-medium text-blue-900"},"Total Resources",-1)),y("p",bK,ye(n.displayedResources.length),1)]),y("div",wK,[t[15]||(t[15]=y("h4",{class:"text-sm font-medium text-green-900"},"Total Stations",-1)),y("p",SK,ye(n.displayedStations.length),1)]),y("div",xK,[t[16]||(t[16]=y("h4",{class:"text-sm font-medium text-orange-900"},"Planetary Total",-1)),y("p",RK,ye(n.formatAmount(n.getTypeTotal("planetary"))),1)]),y("div",_K,[t[17]||(t[17]=y("h4",{class:"text-sm font-medium text-cyan-900"},"Orbital Total",-1)),y("p",EK,ye(n.formatAmount(n.getTypeTotal("orbital"))),1)]),y("div",PK,[t[18]||(t[18]=y("h4",{class:"text-sm font-medium text-purple-900"},"Grand Total",-1)),y("p",FK,ye(n.formatAmount(n.getGrandTotal())),1)])]),we(" Commanders List "),n.uniqueCommanders.length>0?(ge(),me("div",DK,[t[19]||(t[19]=y("h4",{class:"text-lg font-semibold text-gray-900 mb-3"},"Commanders",-1)),y("div",TK,[y("div",kK,[(ge(!0),me(Ct,null,Tt(n.uniqueCommanders,r=>(ge(),me("span",{key:r,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800"},ye(r),1))),128))]),y("p",AK,ye(n.uniqueCommanders.length)+" commander"+ye(n.uniqueCommanders.length!==1?"s":"")+" contributed to these deliveries ",1)])])):we("v-if",!0),we(" Site/Commodity Processing Controls "),Object.keys(n.contributions).length?(ge(),me("div",IK,[t[22]||(t[22]=y("div",{class:"flex justify-between items-center mb-4"},[y("h4",{class:"text-lg font-semibold text-gray-900"},"Process by Site/Commodity")],-1)),we(" Sites Summary "),y("div",MK,[t[20]||(t[20]=y("h5",{class:"text-md font-medium text-gray-900 mb-3"},"Sites",-1)),y("div",OK,[(ge(!0),me(Ct,null,Tt(Object.entries(n.filteredContributions),([r,a])=>(ge(),me("div",{key:r,class:Ft(["border rounded-lg p-3 hover:bg-gray-50",[n.selectedSites.has(r)?"bg-blue-50 border-blue-300":"border-gray-200",n.isSiteFullyProcessed(r)?"bg-green-50 border-green-300":""]])},[y("div",LK,[y("h6",BK,ye(r.split("-")[1]),1),y("div",NK,[n.isSiteFullyProcessed(r)?(ge(),me("span",GK," ✓ ")):(ge(),me("input",{key:0,type:"checkbox",checked:n.selectedSites.has(r),onChange:l=>n.toggleSiteSelection(r),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,40,HK)),y("span",{class:Ft(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",n.isSiteFullyProcessed(r)?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"])},ye(n.getSiteProcessedCount(r))+"/"+ye(a.length),3)])]),y("div",VK,[y("div",null,"Total: "+ye(n.formatAmount(n.calculateTotal(a))),1),y("div",null,"Events: "+ye(a.length),1)])],2))),128))])]),we(" Commodities Summary "),y("div",zK,[t[21]||(t[21]=y("h5",{class:"text-md font-medium text-gray-900 mb-3"},"Commodities",-1)),y("div",WK,[(ge(!0),me(Ct,null,Tt(n.displayedResources,r=>(ge(),me("div",{key:r,class:Ft(["border rounded-lg p-3 hover:bg-gray-50",[n.selectedCommodities.has(r)?"bg-blue-50 border-blue-300":"border-gray-200",n.isCommodityFullyProcessed(r)?"bg-green-50 border-green-300":""]])},[y("div",UK,[y("h6",$K,ye(r),1),y("div",jK,[n.isCommodityFullyProcessed(r)?(ge(),me("span",qK," ✓ ")):(ge(),me("input",{key:0,type:"checkbox",checked:n.selectedCommodities.has(r),onChange:a=>n.toggleCommoditySelection(r),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,40,KK)),y("span",{class:Ft(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",n.isCommodityFullyProcessed(r)?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"])},ye(n.getCommodityProcessedCount(r))+"/"+ye(n.getCommodityTotalCount(r)),3)])]),y("div",QK,[y("div",null,"Total: "+ye(n.formatAmount(n.getResourceTotal(r))),1)])],2))),128))])])])):we("v-if",!0)])):we("v-if",!0)])}const JK=To(I7,[["render",YK],["__scopeId","data-v-c8285fc3"],["__file","/app/src/js/components/DeliveryTracker.vue"]]),ZK={name:"OrderManagement",setup(){const e=Ms(),t=hi(),o=De(!1),n=De(""),i=De(null),s=De(""),r=De(""),a=De(!1),l=()=>{o.value=!1,n.value="",i.value=null,s.value="",r.value="",a.value=!1},c=()=>{r.value="",i.value=null;try{const h=u(n.value);if(!h.sites||h.sites.length===0)throw new Error("No sites found in YAML data");i.value=h}catch(h){r.value=`Failed to parse YAML: ${h.message}`,console.error("YAML parsing error:",h)}},u=h=>{const f=h.split(`
`),v={system:null,distance:0,sites:[]};let m=null,b=!1,S=!1;for(const R of f){const _=R.trim();if(!(_.startsWith("#")||_==="")){if(_.startsWith("system:")){const M=_.match(/system:\s*(?:"([^"]+)"|'([^']+)'|(\S+)|null)/);M&&(v.system=M[1]||M[2]||M[3]||null,v.system==="null"&&(v.system=null));continue}if(_.startsWith("distance:")){const M=_.match(/distance:\s*(\d+)/);M&&(v.distance=parseInt(M[1],10));continue}if(_==="sites:"){b=!0;continue}if(b){if(_.startsWith("- name:")){m&&v.sites.push(m);const M=_.match(/- name:\s*"([^"]+)"/);m={name:M?M[1]:"",type:"Orbital",commodities:[]},S=!1;continue}if(m&&_.startsWith("type:")){const M=_.match(/type:\s*"([^"]+)"/);M&&(m.type=M[1]);continue}if(m&&_==="commodities:"){S=!0;continue}if(m&&S&&_.startsWith("-")){const M=_.match(/- \["([^"]+)",\s*(\d+)\]/);M&&m.commodities.push({name:M[1],quantity:parseInt(M[2],10)});continue}}}}return m&&v.sites.push(m),v};return{showImportDialog:o,yamlInput:n,parsedData:i,clientName:s,importError:r,isImporting:a,closeImportDialog:l,parseYAML:c,importOrder:async()=>{if(!(!i.value||!s.value.trim())){a.value=!0,r.value="";try{const h={system_name:i.value.system||"Unknown System",client_name:s.value.trim(),start_date:new Date().toISOString().split("T")[0],due_date:null,order_value:0,system_distance_from_sol:i.value.distance||0,sites:i.value.sites.map((v,m)=>({site_id:`site_${m+1}`,site_name:v.name,type:v.type.toLowerCase()==="planetary"?"planetary":"orbital",orderCommodities:v.commodities.map(b=>({commodity_type:b.name,quantity:b.quantity}))}))},f=await t.createOrder(h);l(),e.push(`/order/${f.order_id}`)}catch(h){console.error("Error importing order:",h),r.value=`Failed to create order: ${h.message}`}finally{a.value=!1}}}}}},XK={class:"order-management"},e9={class:"bg-white rounded-lg p-6 shadow-md mb-6"},t9={class:"flex justify-between items-center"},o9={class:"flex gap-3"},n9={class:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto"},i9={class:"flex justify-between items-center mb-4"},s9={class:"mb-4"},r9={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md"},a9={class:"text-sm text-red-800"},l9={key:1,class:"mb-4"},c9={class:"p-4 bg-gray-50 rounded-md border border-gray-200"},u9={class:"space-y-2 text-sm"},d9={key:0,class:"mt-2"},h9={class:"list-disc list-inside ml-4"},f9={class:"mt-4"},p9={class:"flex justify-end space-x-3"},g9=["disabled"],m9=["disabled"];function v9(e,t,o,n,i,s){const r=Wh("router-view");return ge(),me("div",XK,[y("div",e9,[y("div",t9,[t[10]||(t[10]=y("div",null,[y("h1",{class:"text-2xl font-bold text-gray-900"},"Order Management"),y("p",{class:"text-gray-600 mt-1"},"Manage orders, sites, and commodity flows")],-1)),y("div",o9,[y("button",{onClick:t[0]||(t[0]=a=>n.showImportDialog=!0),class:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center"},t[9]||(t[9]=[y("span",{class:"mr-2"},"📄",-1),so(" Import YAML ")])),y("button",{onClick:t[1]||(t[1]=a=>e.$router.push("/order/new")),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," New Order ")])])]),jt(r),we(" Import YAML Dialog "),n.showImportDialog?(ge(),me("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[8]||(t[8]=Qt((...a)=>n.closeImportDialog&&n.closeImportDialog(...a),["self"]))},[y("div",n9,[y("div",i9,[t[12]||(t[12]=y("h3",{class:"text-xl font-semibold"},"Import Order from YAML",-1)),y("button",{onClick:t[2]||(t[2]=(...a)=>n.closeImportDialog&&n.closeImportDialog(...a)),class:"text-gray-500 hover:text-gray-700"},t[11]||(t[11]=[y("span",{class:"text-2xl"},"×",-1)]))]),t[20]||(t[20]=y("div",{class:"mb-4"},[y("p",{class:"text-sm text-gray-600 mb-2"}," Paste YAML data exported from the quote component or data capture tool. ")],-1)),we(" YAML Input "),y("div",s9,[t[13]||(t[13]=y("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," YAML Data ",-1)),Xe(y("textarea",{"onUpdate:modelValue":t[3]||(t[3]=a=>n.yamlInput=a),class:"w-full h-64 px-3 py-2 border border-gray-300 rounded-md font-mono text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Paste YAML data here..."},null,512),[[dt,n.yamlInput]])]),we(" Error Display "),n.importError?(ge(),me("div",r9,[y("p",a9,ye(n.importError),1)])):we("v-if",!0),we(" Parsed Preview "),n.parsedData?(ge(),me("div",l9,[t[19]||(t[19]=y("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Preview",-1)),y("div",c9,[y("div",u9,[y("p",null,[t[14]||(t[14]=y("strong",null,"System:",-1)),so(" "+ye(n.parsedData.system||"Not specified"),1)]),y("p",null,[t[15]||(t[15]=y("strong",null,"Distance:",-1)),so(" "+ye(n.parsedData.distance)+" ly",1)]),y("p",null,[t[16]||(t[16]=y("strong",null,"Sites:",-1)),so(" "+ye(n.parsedData.sites.length),1)]),n.parsedData.sites.length>0?(ge(),me("div",d9,[t[17]||(t[17]=y("p",{class:"font-medium"},"Sites:",-1)),y("ul",h9,[(ge(!0),me(Ct,null,Tt(n.parsedData.sites,(a,l)=>(ge(),me("li",{key:l},ye(a.name)+" ("+ye(a.type)+") - "+ye(a.commodities.length)+" commodities ",1))),128))])])):we("v-if",!0)])]),we(" Client Name Input "),y("div",f9,[t[18]||(t[18]=y("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Client Name * ",-1)),Xe(y("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>n.clientName=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter client name",required:""},null,512),[[dt,n.clientName]])])])):we("v-if",!0),we(" Action Buttons "),y("div",p9,[y("button",{onClick:t[5]||(t[5]=(...a)=>n.closeImportDialog&&n.closeImportDialog(...a)),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors"}," Cancel "),n.parsedData?we("v-if",!0):(ge(),me("button",{key:0,onClick:t[6]||(t[6]=(...a)=>n.parseYAML&&n.parseYAML(...a)),disabled:!n.yamlInput.trim(),class:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"}," Parse YAML ",8,g9)),n.parsedData?(ge(),me("button",{key:1,onClick:t[7]||(t[7]=(...a)=>n.importOrder&&n.importOrder(...a)),disabled:!n.clientName.trim()||n.isImporting,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},ye(n.isImporting?"Creating Order...":"Create Order"),9,m9)):we("v-if",!0)])])])):we("v-if",!0)])}const y9=To(ZK,[["render",v9],["__scopeId","data-v-59c1fb5a"],["__file","/app/src/js/components/OrderManagement.vue"]]);async function C9(e,t){return console.log("Storing webhook credential for:",e),S9(e,t)}async function b9(e){return console.log("Getting webhook credential for:",e),x9(e)}async function w9(e){return console.log("Deleting webhook credential for:",e),R9(e)}async function S9(e,t){try{const o=`webhook_${e}`,n=await _9(t);return localStorage.setItem(o,n),{success:!0,message:"Webhook stored securely with encryption"}}catch(o){return console.error("Error storing webhook in localStorage:",o),{success:!1,message:`Failed to store webhook: ${o.message}`}}}async function x9(e){try{const t=`webhook_${e}`;console.log("Checking localStorage for key:",t);const o=localStorage.getItem(t);return console.log("Found in localStorage:",o),o?{success:!0,webhook:await E9(o)}:{success:!1,message:"Webhook not found"}}catch(t){return console.error("Error retrieving webhook from localStorage:",t),{success:!1,message:`Failed to retrieve webhook: ${t.message}`}}}async function R9(e){try{const t=`webhook_${e}`;return localStorage.removeItem(t),{success:!0,message:"Webhook removed successfully"}}catch(t){return console.error("Error deleting webhook from localStorage:",t),{success:!1,message:`Failed to delete webhook: ${t.message}`}}}async function _9(e){try{const t="webhook-storage-key",o=new TextEncoder,n=o.encode(e),i=await crypto.subtle.importKey("raw",o.encode(t),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),s=await crypto.subtle.deriveKey({name:"PBKDF2",salt:o.encode("webhook-salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),r=crypto.getRandomValues(new Uint8Array(12)),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},s,n),l=new Uint8Array(r.length+a.byteLength);return l.set(r),l.set(new Uint8Array(a),r.length),btoa(String.fromCharCode(...l))}catch(t){throw console.error("Encryption failed:",t),new Error("Failed to encrypt data")}}async function E9(e){try{const t=new Uint8Array(atob(e).split("").map(u=>u.charCodeAt(0))),o=t.slice(0,12),n=t.slice(12),i="webhook-storage-key",s=new TextEncoder,r=await crypto.subtle.importKey("raw",s.encode(i),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),a=await crypto.subtle.deriveKey({name:"PBKDF2",salt:s.encode("webhook-salt"),iterations:1e5,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),l=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},a,n);return new TextDecoder().decode(l)}catch(t){throw console.error("Decryption failed:",t),new Error("Failed to decrypt data")}}const FC={contractor:null,fleetCarriers:[],webhooks:[],discordChannels:[]},$n=bi("state",{state:()=>({...FC}),getters:{getContractor:e=>e.contractor,getFleetCarriers:e=>e.fleetCarriers,getWebhooks:e=>e.webhooks,getDiscordChannels:e=>e.discordChannels,getState:e=>e},actions:{setContractor(e){this.contractor={...e,lastUpdated:new Date().toISOString()}},clearContractor(){this.contractor=null},addFleetCarrier(e){const t={...e,id:Date.now().toString(),lastUpdated:new Date().toISOString()};return this.fleetCarriers.push(t),t},updateFleetCarrier(e,t){const o=this.fleetCarriers.findIndex(n=>n.id===e);return o===-1?null:(this.fleetCarriers[o]={...this.fleetCarriers[o],...t,lastUpdated:new Date().toISOString()},this.fleetCarriers[o])},deleteFleetCarrier(e){this.fleetCarriers=this.fleetCarriers.filter(t=>t.id!==e)},async addWebhook(e){const t=await C9(e.name,e.url);if(!t.success)throw new Error(t.message);this.webhooks.push({name:e.name,lastUpdated:new Date().toISOString()})},async getWebhookUrl(e){const t=await b9(e);if(!t.success)throw new Error(t.message);return t.webhook},async deleteWebhook(e){await w9(e),this.webhooks=this.webhooks.filter(t=>t.name!==e)},setDiscordChannels(e){this.discordChannels=e},addDiscordChannel(e){const t=this.discordChannels.findIndex(o=>o.id===e.id);t>=0?this.discordChannels[t]={...this.discordChannels[t],...e}:this.discordChannels.push({enabled:!0,...e})},removeDiscordChannel(e){this.discordChannels=this.discordChannels.filter(t=>t.id!==e)},updateDiscordChannel(e,t){const o=this.discordChannels.find(n=>n.id===e);o&&Object.assign(o,t)},restoreState(e){this.contractor=e.contractor||null,this.fleetCarriers=e.fleetCarriers||[],this.webhooks=e.webhooks||[],this.discordChannels=e.discordChannels||[]},resetState(){Object.assign(this,FC)}},persist:{key:"freighthelper-state",storage:localStorage}}),DC=bi("persistence",{state:()=>({lastBackupTimestamp:null}),actions:{getAllState(){const e=$n(),t=Qa(),o=hi(),n=Ts(),i=qa();return{state:e.$state,jump:t.$state,order:o.$state,transfer:n.$state,quote:i.$state,metadata:{version:"1.0",timestamp:new Date().toISOString()}}},backupState(){const e=this.getAllState(),t=JSON.stringify(e,null,2),o=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(o),i=document.createElement("a");i.href=n,i.download=`freighthelper_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),this.lastBackupTimestamp=new Date().toISOString()},async restoreState(e){if(!e||typeof e!="object")throw new Error("Invalid backup data format");const t=["state","jump","order","transfer","quote"];for(const a of t)if(!e[a])throw new Error(`Missing ${a} data in backup`);const o=$n(),n=Qa(),i=hi(),s=Ts(),r=qa();o.$patch(e.state),n.$patch(e.jump),i.$patch(e.order),s.$patch(e.transfer),r.$patch(e.quote),this.lastBackupTimestamp=new Date().toISOString()},clearAllState(){const e=$n(),t=Qa(),o=hi(),n=Ts(),i=qa();e.resetState(),t.clearState(),o.clearState(),n.clearState(),i.clearState(),this.lastBackupTimestamp=null}}}),P9={__name:"SecretEditor",props:{secretType:{type:String,default:"generic"},initialSecret:{type:Object,default:null}},emits:["save","cancel"],setup(e,{expose:t,emit:o}){t();const n=e,i=o,s=pi(),r=De(!1),a=De({name:"",description:"",value:""}),l=Ze(()=>!!n.initialSecret);eo(()=>n.initialSecret,v=>{v?a.value={name:v.name,description:v.description||"",value:""}:c()},{immediate:!0});const c=()=>{a.value={name:"",description:"",value:""}},f={props:n,emit:i,secretStore:s,saving:r,editingSecret:a,isEditing:l,resetForm:c,getSecretTypeLabel:()=>({"discord-webhook":"Discord Webhook URL","slack-webhook":"Slack Webhook URL",email:"Email Address","api-key":"API Key",generic:"Secret Value"})[n.secretType]||"Secret Value",getSecretTypePlaceholder:()=>({"discord-webhook":"https://discord.com/api/webhooks/...","slack-webhook":"https://hooks.slack.com/...",email:"user@example.com","api-key":"sk-... or pk-...",generic:"Enter the secret value..."})[n.secretType]||"Enter the secret value...",saveSecret:async()=>{r.value=!0;try{const v=await s.storeSecret(a.value.name,a.value.value,a.value.description,n.secretType);v.success?(i("save",{name:a.value.name,type:n.secretType,description:a.value.description}),c()):alert("Failed to save secret: "+v.message)}catch(v){console.error("Error saving secret:",v),alert("Error saving secret: "+v.message)}finally{r.value=!1}},ref:De,computed:Ze,watch:eo,get useSecretStore(){return pi}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}},F9={class:"space-y-4"},D9={class:"space-y-2"},T9=["placeholder"],k9={class:"space-y-2"},A9={class:"space-y-2"},I9={for:"secretValue",class:"block text-sm font-medium text-gray-700"},M9=["placeholder"],O9={class:"flex gap-3 pt-4"},L9=["disabled"];function B9(e,t,o,n,i,s){return ge(),me("div",F9,[y("div",D9,[t[4]||(t[4]=y("label",{for:"secretName",class:"block text-sm font-medium text-gray-700"}," Secret Name ",-1)),Xe(y("input",{type:"text",id:"secretName","onUpdate:modelValue":t[0]||(t[0]=r=>n.editingSecret.name=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:`Enter a name for your ${n.getSecretTypeLabel().toLowerCase()}`},null,8,T9),[[dt,n.editingSecret.name]])]),y("div",k9,[t[5]||(t[5]=y("label",{for:"secretDescription",class:"block text-sm font-medium text-gray-700"}," Description (Optional) ",-1)),Xe(y("input",{type:"text",id:"secretDescription","onUpdate:modelValue":t[1]||(t[1]=r=>n.editingSecret.description=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Brief description of what this secret is for"},null,512),[[dt,n.editingSecret.description]])]),y("div",A9,[y("label",I9,ye(n.getSecretTypeLabel()),1),Xe(y("input",{type:"password",id:"secretValue","onUpdate:modelValue":t[2]||(t[2]=r=>n.editingSecret.value=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:n.getSecretTypePlaceholder()},null,8,M9),[[dt,n.editingSecret.value]]),t[6]||(t[6]=y("p",{class:"text-sm text-gray-500"},"This value will be encrypted and stored securely",-1))]),y("div",O9,[y("button",{type:"button",onClick:t[3]||(t[3]=r=>e.$emit("cancel")),class:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors"}," Cancel "),y("button",{type:"button",onClick:n.saveSecret,disabled:n.saving||!n.editingSecret.name||!n.editingSecret.value,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"},ye(n.saving?"Saving...":n.isEditing?"Update":"Create")+" Secret ",9,L9)])])}const N9=To(P9,[["render",B9],["__file","/app/src/js/components/SecretEditor.vue"]]),H9={__name:"SecretManager",props:{inline:{type:Boolean,default:!1},modelValue:{type:String,default:""},secretType:{type:String,default:"generic"},testFunction:{type:Function,default:null}},emits:["update:modelValue"],setup(e,{expose:t,emit:o}){t();const n=e,i=o,s=pi(),r=De(!1),a=De(!1),l=De(!1),c=De(!1),u=De(!1),d=De({name:"",description:"",value:""}),h=Ze({get:()=>n.modelValue,set:oe=>i("update:modelValue",oe)}),f=Ze(()=>s.getAllSecretMetadata),v=Ze(()=>n.inline&&n.secretType!=="generic"?f.value.filter(oe=>oe.type===n.secretType):f.value),m=()=>{r.value=!1,a.value=!1,d.value={name:"",description:"",value:""}},b=oe=>{d.value={name:oe.name,description:oe.description||"",value:""},a.value=!0},S=async()=>{u.value=!0;try{const oe=await s.storeSecret(d.value.name,d.value.value,d.value.description);oe.success?(m(),n.inline&&(h.value=d.value.name)):alert("Error saving secret: "+oe.message)}catch(oe){alert("Error saving secret: "+oe.message)}finally{u.value=!1}},R=async oe=>{if(confirm(`Are you sure you want to delete the secret "${oe}"?`)){const F=await s.deleteSecret(oe);F.success||alert("Error deleting secret: "+F.message)}},_=async oe=>{if(n.testFunction)try{await n.testFunction(oe)}catch(F){alert("Error testing secret: "+F.message)}else try{const F=await s.getSecret(oe,"Testing secret access");F.success?alert("Secret access test successful!"):alert("Secret access test failed: "+F.message)}catch(F){alert("Error testing secret: "+F.message)}},M=oe=>{h.value=oe.target.value},I=()=>{if(h.value){const oe=v.value.find(F=>F.name===h.value);oe&&(d.value={name:oe.name,description:oe.description||"",value:""},c.value=!0)}},W=()=>({"discord-webhook":"Discord Webhook URL","slack-webhook":"Slack Webhook URL",email:"Email Address","api-key":"API Key",generic:"Secret Value"})[n.secretType]||"Secret Value",z=()=>({"discord-webhook":"https://discord.com/api/webhooks/...","slack-webhook":"https://hooks.slack.com/...",email:"user@example.com","api-key":"sk-... or pk-...",generic:"Enter the secret value..."})[n.secretType]||"Enter the secret value...",de=oe=>{const F={"discord-webhook":"bg-purple-100 text-purple-800","slack-webhook":"bg-green-100 text-green-800",email:"bg-blue-100 text-blue-800","api-key":"bg-yellow-100 text-yellow-800",generic:"bg-gray-100 text-gray-800"};return F[oe]||F.generic},K=oe=>{h.value=oe.name,O()},O=()=>{l.value=!1,c.value=!1,d.value={name:"",description:"",value:""}},ie=oe=>new Date(oe).toLocaleString();Xt(()=>{s.loadSecretMetadata()});const N={props:n,emit:i,secretStore:s,showAddModal:r,showEditModal:a,showAddEditor:l,showEditEditor:c,saving:u,editingSecret:d,selectedSecret:h,allSecrets:f,secrets:v,closeModal:m,editSecret:b,saveSecret:S,deleteSecret:R,testSecret:_,handleSecretSelection:M,editSelectedSecret:I,getSecretTypeLabel:W,getSecretTypePlaceholder:z,getTypeBadgeClass:de,handleSecretSaved:K,closeEditor:O,formatTimestamp:ie,ref:De,computed:Ze,onMounted:Xt,get useSecretStore(){return pi},SecretEditor:N9};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}},G9={key:0,class:"flex justify-between items-center mb-4"},V9={key:1,class:"space-y-2"},z9={class:"flex gap-2"},W9=["value"],U9={value:""},$9=["value"],j9=["title"],K9={key:0,class:"text-sm text-gray-500 italic"},q9={key:1,class:"flex gap-2"},Q9={key:2,class:"mt-4 p-4 border border-gray-200 rounded-lg bg-gray-50"},Y9={class:"text-lg font-medium text-gray-900 mb-3"},J9={class:"space-y-3"},Z9={class:"space-y-2"},X9={class:"flex justify-between items-start"},eq={class:"font-medium text-gray-900"},tq={class:"text-sm text-gray-600"},oq={class:"text-xs text-gray-500"},nq={class:"flex gap-2 mt-3"},iq=["onClick"],sq=["onClick"],rq=["onClick"],aq={key:0,class:"text-sm text-gray-500 italic text-center py-4"},lq={class:"text-xl font-semibold text-gray-900 mb-4"},cq={class:"space-y-2"},uq=["disabled"],dq={class:"space-y-2"},hq={class:"space-y-2"},fq={for:"secretValue",class:"block text-sm font-medium text-gray-700"},pq=["placeholder"],gq={class:"flex gap-3 pt-4"},mq=["disabled"];function vq(e,t,o,n,i,s){return ge(),me("div",{class:Ft(o.inline?"space-y-2":"bg-gray-50 p-6 rounded-lg")},[o.inline?we("v-if",!0):(ge(),me("div",G9,[t[7]||(t[7]=y("h3",{class:"text-lg font-semibold text-gray-900"},"Secret Management",-1)),y("button",{onClick:t[0]||(t[0]=r=>n.showAddModal=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Add Secret ")])),we(" Inline Mode "),o.inline?(ge(),me("div",V9,[y("div",z9,[y("select",{value:n.selectedSecret,onChange:n.handleSecretSelection,class:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[y("option",U9,ye(n.secrets.length===0?`No ${n.getSecretTypeLabel().toLowerCase()}s found`:"Select a secret"),1),(ge(!0),me(Ct,null,Tt(n.secrets,r=>(ge(),me("option",{key:r.name,value:r.name},ye(r.name)+" ("+ye(r.type)+") ",9,$9))),128))],40,W9),y("button",{onClick:t[1]||(t[1]=r=>n.showAddEditor=!0),class:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",title:`Add new ${n.getSecretTypeLabel().toLowerCase()}`}," + ",8,j9)]),n.secrets.length===0?(ge(),me("div",K9," No "+ye(n.getSecretTypeLabel().toLowerCase())+"s configured. Click + to create one. ",1)):we("v-if",!0),n.selectedSecret?(ge(),me("div",q9,[y("button",{onClick:n.editSelectedSecret,class:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors"}," Update "+ye(n.getSecretTypeLabel()),1),o.testFunction?(ge(),me("button",{key:0,onClick:t[2]||(t[2]=r=>n.testSecret(n.selectedSecret)),class:"px-3 py-1.5 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 transition-colors"}," Test ")):we("v-if",!0)])):we("v-if",!0),we(" Secret Editor (inline) "),n.showAddEditor||n.showEditEditor?(ge(),me("div",Q9,[y("h4",Y9,ye(n.showEditEditor?"Edit":"Add")+" "+ye(n.getSecretTypeLabel()),1),jt(n.SecretEditor,{"secret-type":o.secretType,"initial-secret":n.editingSecret,onSave:n.handleSecretSaved,onCancel:n.closeEditor},null,8,["secret-type","initial-secret"])])):we("v-if",!0)])):(ge(),me(Ct,{key:2},[we(" Full Mode "),y("div",J9,[(ge(!0),me(Ct,null,Tt(n.secrets,r=>(ge(),me("div",{key:r.name,class:"bg-white p-4 rounded-md shadow-sm"},[y("div",Z9,[y("div",X9,[y("div",null,[y("div",eq,ye(r.name),1),y("div",tq,ye(r.description||"No description"),1)]),y("span",{class:Ft(["px-2 py-1 text-xs rounded-full",n.getTypeBadgeClass(r.type)])},ye(r.type),3)]),y("div",oq," Last updated: "+ye(n.formatTimestamp(r.lastUpdated)),1)]),y("div",nq,[y("button",{onClick:a=>n.testSecret(r.name),class:"flex-1 px-3 py-1.5 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 transition-colors"}," Test ",8,iq),y("button",{onClick:a=>n.editSecret(r),class:"flex-1 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors"}," Edit ",8,sq),y("button",{onClick:a=>n.deleteSecret(r.name),class:"flex-1 px-3 py-1.5 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 transition-colors"}," Delete ",8,rq)])]))),128)),n.secrets.length===0?(ge(),me("div",aq," No secrets configured ")):we("v-if",!0)])],2112)),we(" Add/Edit Secret Modal "),n.showAddModal||n.showEditModal?(ge(),me("div",{key:3,class:Ft(["fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",o.inline?"z-50":"z-40"]),onClick:Qt(n.closeModal,["self"])},[y("div",{class:"bg-white rounded-lg p-6 max-w-md w-full",onClick:t[6]||(t[6]=Qt(()=>{},["stop"]))},[y("h3",lq,ye(n.showEditModal?"Edit":"Add")+" Secret ",1),y("form",{onSubmit:Qt(n.saveSecret,["prevent"]),class:"space-y-4"},[y("div",cq,[t[8]||(t[8]=y("label",{for:"secretName",class:"block text-sm font-medium text-gray-700"}," Secret Name ",-1)),Xe(y("input",{type:"text",id:"secretName","onUpdate:modelValue":t[3]||(t[3]=r=>n.editingSecret.name=r),required:"",disabled:n.showEditModal,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",placeholder:"e.g., discord-webhook-general"},null,8,uq),[[dt,n.editingSecret.name]])]),y("div",dq,[t[9]||(t[9]=y("label",{for:"secretDescription",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Xe(y("input",{type:"text",id:"secretDescription","onUpdate:modelValue":t[4]||(t[4]=r=>n.editingSecret.description=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional description..."},null,512),[[dt,n.editingSecret.description]])]),y("div",hq,[y("label",fq,ye(n.getSecretTypeLabel()),1),Xe(y("textarea",{id:"secretValue","onUpdate:modelValue":t[5]||(t[5]=r=>n.editingSecret.value=r),required:"",rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:n.getSecretTypePlaceholder()},null,8,pq),[[dt,n.editingSecret.value]])]),t[10]||(t[10]=y("div",{class:"bg-blue-50 p-3 rounded-md"},[y("p",{class:"text-sm text-blue-800"},[y("strong",null,"Secure Storage:"),so(" Your secret will be encrypted and stored securely. Access will require user consent. ")])],-1)),y("div",gq,[y("button",{type:"button",onClick:n.closeModal,class:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors"}," Cancel "),y("button",{type:"submit",disabled:n.saving,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},ye(n.saving?"Saving...":"Save"),9,mq)])],32)])],2)):we("v-if",!0)],2)}const eR=To(H9,[["render",vq],["__scopeId","data-v-8a98b0e7"],["__file","/app/src/js/components/SecretManager.vue"]]),yq={__name:"StateAdmin",setup(e,{expose:t}){t();const o=$n(),n=DC(),i=De(!1),s=De(!1),r=De({id:"",name:"",commander:"",notes:""}),a=De({name:"",callsign:"",shortCallsign:"",notes:""}),l=Ze(()=>o.getContractor),c=Ze(()=>o.getFleetCarriers),u=Ze(()=>JSON.stringify(n.getAllState(),null,2)),d=_=>{r.value={..._},i.value=!0},h=()=>{r.value.id?o.updateFleetCarrier(r.value.id,r.value):o.addFleetCarrier(r.value),i.value=!1,r.value={id:"",name:"",commander:"",notes:""}},f=_=>{confirm("Are you sure you want to delete this fleet carrier?")&&o.deleteFleetCarrier(_)},v=()=>{o.setContractor(a.value),s.value=!1,a.value={name:"",callsign:"",shortCallsign:"",notes:""}},m=()=>{n.backupState()},b=async _=>{const M=_.target.files[0];if(M)try{const I=await M.text(),W=JSON.parse(I);await n.restoreState(W)}catch(I){console.error("Error restoring state:",I),alert("Error restoring state. Please check the file format.")}},S=()=>{confirm("Are you sure you want to clear all state data? This will remove all data and reset to a completely empty state. This cannot be undone.")&&n.clearAllState()};Xt(async()=>{l.value&&(a.value={...l.value})});const R={store:o,persistenceStore:n,showCarrierModal:i,showContractorModal:s,editingCarrier:r,editingContractor:a,contractor:l,carriers:c,statePreview:u,editCarrier:d,saveCarrier:h,deleteCarrier:f,saveContractor:v,backupState:m,handleRestoreFile:b,clearState:S,ref:De,computed:Ze,onMounted:Xt,get useStateStore(){return $n},get usePersistenceStore(){return DC},SecretManager:eR};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}},Cq={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},bq={class:"bg-gray-50 p-6 rounded-lg"},wq={class:"space-y-3 mb-4"},Sq={key:0,class:"grid grid-cols-2 gap-2"},xq={class:"text-sm text-gray-900"},Rq={key:1,class:"grid grid-cols-2 gap-2"},_q={class:"text-sm text-gray-900"},Eq={key:2,class:"grid grid-cols-2 gap-2"},Pq={class:"text-sm text-gray-900"},Fq={key:3,class:"grid grid-cols-2 gap-2"},Dq={class:"text-sm text-gray-900"},Tq={key:4,class:"text-sm text-gray-500 italic"},kq={class:"bg-gray-50 p-6 rounded-lg"},Aq={class:"space-y-3"},Iq={class:"space-y-1 mb-3"},Mq={class:"font-medium text-gray-900"},Oq={class:"text-sm text-gray-600"},Lq={key:0,class:"text-sm text-gray-500"},Bq={class:"flex gap-2"},Nq=["onClick"],Hq=["onClick"],Gq={class:"bg-gray-50 p-6 rounded-lg"},Vq={class:"space-y-3"},zq={class:"relative"},Wq={class:"bg-gray-50 p-6 rounded-lg"},Uq={class:"bg-white p-4 rounded-md shadow-sm"},$q={class:"text-sm text-gray-900 overflow-auto max-h-96"},jq={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},Kq={class:"bg-white rounded-lg p-6 max-w-md w-full"},qq={class:"space-y-2"},Qq={class:"space-y-2"},Yq={class:"space-y-2"},Jq={class:"flex gap-3 pt-4"},Zq={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},Xq={class:"bg-white rounded-lg p-6 max-w-md w-full"},eQ={class:"space-y-2"},tQ={class:"space-y-2"},oQ={class:"space-y-2"},nQ={class:"space-y-2"},iQ={class:"flex gap-3 pt-4"};function sQ(e,t,o,n,i,s){var r;return ge(),me("div",null,[t[32]||(t[32]=y("div",{class:"mb-6"},[y("h2",{class:"text-2xl font-bold text-gray-900"},"Admin"),y("p",{class:"text-gray-600 mt-1"},"Manage application state and settings.")],-1)),y("div",Cq,[we(" Contractor Information "),y("div",bq,[t[16]||(t[16]=y("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Contractor Information",-1)),y("div",wq,[n.contractor?(ge(),me("div",Sq,[t[12]||(t[12]=y("div",{class:"text-sm font-medium text-gray-600"},"Name:",-1)),y("div",xq,ye(n.contractor.name),1)])):we("v-if",!0),n.contractor?(ge(),me("div",Rq,[t[13]||(t[13]=y("div",{class:"text-sm font-medium text-gray-600"},"Callsign:",-1)),y("div",_q,ye(n.contractor.callsign),1)])):we("v-if",!0),n.contractor?(ge(),me("div",Eq,[t[14]||(t[14]=y("div",{class:"text-sm font-medium text-gray-600"},"Short Callsign:",-1)),y("div",Pq,ye(n.contractor.shortCallsign),1)])):we("v-if",!0),(r=n.contractor)!=null&&r.notes?(ge(),me("div",Fq,[t[15]||(t[15]=y("div",{class:"text-sm font-medium text-gray-600"},"Notes:",-1)),y("div",Dq,ye(n.contractor.notes),1)])):we("v-if",!0),n.contractor?we("v-if",!0):(ge(),me("div",Tq," No contractor information set "))]),y("button",{onClick:t[0]||(t[0]=a=>n.showContractorModal=!0),class:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"},ye(n.contractor?"Edit":"Add")+" Contractor Info ",1)]),we(" Fleet Carrier Management "),y("div",kq,[t[17]||(t[17]=y("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Fleet Carrier Management",-1)),y("button",{onClick:t[1]||(t[1]=a=>n.showCarrierModal=!0),class:"w-full mb-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Add Fleet Carrier "),y("div",Aq,[(ge(!0),me(Ct,null,Tt(n.carriers,a=>(ge(),me("div",{key:a.id,class:"bg-white p-4 rounded-md shadow-sm"},[y("div",Iq,[y("div",Mq,ye(a.name),1),y("div",Oq,ye(a.commander),1),a.notes?(ge(),me("div",Lq,ye(a.notes),1)):we("v-if",!0)]),y("div",Bq,[y("button",{onClick:l=>n.editCarrier(a),class:"flex-1 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors"}," Edit ",8,Nq),y("button",{onClick:l=>n.deleteCarrier(a.id),class:"flex-1 px-3 py-1.5 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 transition-colors"}," Delete ",8,Hq)])]))),128))])]),we(" State Management "),y("div",Gq,[t[19]||(t[19]=y("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"State Management",-1)),y("div",Vq,[y("button",{onClick:n.backupState,class:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Download Backup "),y("div",zq,[y("input",{type:"file",id:"restoreState",accept:".json",class:"hidden",onChange:n.handleRestoreFile},null,32),t[18]||(t[18]=y("label",{for:"restoreState",class:"block w-full px-4 py-2 bg-blue-600 text-white text-center rounded-md hover:bg-blue-700 transition-colors cursor-pointer"}," Restore from Backup ",-1))]),y("button",{onClick:n.clearState,class:"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"}," Clear All Data ")])]),we(" Secret Management "),jt(n.SecretManager),we(" Current State "),y("div",Wq,[t[20]||(t[20]=y("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Current State",-1)),y("div",Uq,[y("pre",$q,ye(n.statePreview),1)])])]),we(" Fleet Carrier Modal "),n.showCarrierModal?(ge(),me("div",jq,[y("div",Kq,[t[25]||(t[25]=y("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Fleet Carrier Details",-1)),y("form",{onSubmit:Qt(n.saveCarrier,["prevent"]),class:"space-y-4"},[Xe(y("input",{type:"hidden","onUpdate:modelValue":t[2]||(t[2]=a=>n.editingCarrier.id=a)},null,512),[[dt,n.editingCarrier.id]]),y("div",qq,[t[21]||(t[21]=y("label",{for:"carrierName",class:"block text-sm font-medium text-gray-700"},"Carrier Name",-1)),Xe(y("input",{type:"text",id:"carrierName","onUpdate:modelValue":t[3]||(t[3]=a=>n.editingCarrier.name=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.editingCarrier.name]])]),y("div",Qq,[t[22]||(t[22]=y("label",{for:"carrierCommander",class:"block text-sm font-medium text-gray-700"},"Commander Name",-1)),Xe(y("input",{type:"text",id:"carrierCommander","onUpdate:modelValue":t[4]||(t[4]=a=>n.editingCarrier.commander=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.editingCarrier.commander]])]),y("div",Yq,[t[23]||(t[23]=y("label",{for:"carrierNotes",class:"block text-sm font-medium text-gray-700"},"Notes",-1)),Xe(y("textarea",{id:"carrierNotes","onUpdate:modelValue":t[5]||(t[5]=a=>n.editingCarrier.notes=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3"},null,512),[[dt,n.editingCarrier.notes]])]),y("div",Jq,[y("button",{type:"button",onClick:t[6]||(t[6]=a=>n.showCarrierModal=!1),class:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors"}," Cancel "),t[24]||(t[24]=y("button",{type:"submit",class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Save ",-1))])],32)])])):we("v-if",!0),we(" Contractor Modal "),n.showContractorModal?(ge(),me("div",Zq,[y("div",Xq,[t[31]||(t[31]=y("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Contractor Details",-1)),y("form",{onSubmit:Qt(n.saveContractor,["prevent"]),class:"space-y-4"},[y("div",eQ,[t[26]||(t[26]=y("label",{for:"contractorName",class:"block text-sm font-medium text-gray-700"},"Name",-1)),Xe(y("input",{type:"text",id:"contractorName","onUpdate:modelValue":t[7]||(t[7]=a=>n.editingContractor.name=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.editingContractor.name]])]),y("div",tQ,[t[27]||(t[27]=y("label",{for:"contractorCallsign",class:"block text-sm font-medium text-gray-700"},"Callsign",-1)),Xe(y("input",{type:"text",id:"contractorCallsign","onUpdate:modelValue":t[8]||(t[8]=a=>n.editingContractor.callsign=a),required:"",placeholder:"e.g., FREIGHT-1",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.editingContractor.callsign]])]),y("div",oQ,[t[28]||(t[28]=y("label",{for:"contractorShortCallsign",class:"block text-sm font-medium text-gray-700"},"Short Callsign/Emoji",-1)),Xe(y("input",{type:"text",id:"contractorShortCallsign","onUpdate:modelValue":t[9]||(t[9]=a=>n.editingContractor.shortCallsign=a),required:"",placeholder:"e.g., F1 or 🚢",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.editingContractor.shortCallsign]])]),y("div",nQ,[t[29]||(t[29]=y("label",{for:"contractorNotes",class:"block text-sm font-medium text-gray-700"},"Notes",-1)),Xe(y("textarea",{id:"contractorNotes","onUpdate:modelValue":t[10]||(t[10]=a=>n.editingContractor.notes=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3"},null,512),[[dt,n.editingContractor.notes]])]),y("div",iQ,[y("button",{type:"button",onClick:t[11]||(t[11]=a=>n.showContractorModal=!1),class:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors"}," Cancel "),t[30]||(t[30]=y("button",{type:"submit",class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Save ",-1))])],32)])])):we("v-if",!0)])}const rQ=To(yq,[["render",sQ],["__scopeId","data-v-6d314e61"],["__file","/app/src/js/components/StateAdmin.vue"]]),aQ={__name:"MessageTemplate",setup(e,{expose:t}){t();const o=$n(),n=hi(),i=Lr(),s=De([]),r=De(!1),a=De(null),l=De({name:"",description:"",content:""}),c=De(!1),u=De(null),d=De(null),h=De(null),f=De({}),v=De({}),m=Ze(()=>({fleetCarrier:{name:"Fleet Carrier Name",description:"The name of the fleet carrier",getValue:()=>{var J;return((J=d.value)==null?void 0:J.name)||""},requiresSelection:!0,format:"{{fleetCarrier}}"},fleetCarrierCommander:{name:"Fleet Carrier Commander",description:"The commander of the fleet carrier",getValue:()=>{var J;return((J=d.value)==null?void 0:J.commander)||""},requiresSelection:!0,format:"{{fleetCarrierCommander}}"},fleetCarrierLocation:{name:"Fleet Carrier Location",description:"The current location of the fleet carrier",getValue:()=>{var J;return((J=d.value)==null?void 0:J.location)||""},requiresSelection:!0,format:"{{fleetCarrierLocation}}"},amount:{name:"Amount",description:"The total amount of the order",getValue:()=>h.value?h.value.commodities.reduce((J,L)=>J+(L.quantity||0),0):"",requiresSelection:!0,format:"{{amount}}"},clientCommander:{name:"Client Commander",description:"The name of the client commander",getValue:()=>{var J;return((J=h.value)==null?void 0:J.clientCommander)||""},requiresSelection:!0,format:"{{clientCommander}}"},systemName:{name:"System Name",description:"The name of the target system",getValue:()=>{var J;return((J=h.value)==null?void 0:J.systemName)||""},requiresSelection:!0,format:"{{systemName}}"},orderNumber:{name:"Order Number",description:"The order number",getValue:()=>{var J;return((J=h.value)==null?void 0:J.orderNumber)||""},requiresSelection:!0,format:"{{orderNumber}}"},operation:{name:"Operation Type",description:"The type of operation (Loading/Unloading)",options:["Loading","Unloading"],getValue:()=>f.value.operation||"",requiresSelection:!0,format:"{{operation:Loading|Unloading}}"},priority:{name:"Priority Level",description:"The priority level of the operation",options:["Low","Medium","High","Urgent"],getValue:()=>f.value.priority||"",requiresSelection:!0,format:"{{priority:Low|Medium|High|Urgent}}"},status:{name:"Status",description:"The current status of the operation",options:["Pending","In Progress","Completed","Cancelled"],getValue:()=>f.value.status||"",requiresSelection:!0,format:"{{status:Pending|In Progress|Completed|Cancelled}}"},commodity:{name:"Commodity",description:"The commodity being transported",options:["Liquid Oxygen","Pesticides","Surface Stabilisers","Water","Evacuation Shelter","Survival Equipment","Beer","Liquor","Wine","Animal Meat","Coffee","Fish","Food Cartridges","Fruit and Vegetables","Grain","Tea","Ceramic Composites","CMM Composite","Insulating Membrane","Polymers","Semiconductors","Superconductors"],getValue:()=>f.value.commodity||"",requiresSelection:!0,format:"{{commodity:option1|option2|...}}"},deliveryType:{name:"Delivery Type",description:"The type of delivery location",options:["Station","Planetary","Settlement","Outpost"],getValue:()=>f.value.deliveryType||"",requiresSelection:!0,format:"{{deliveryType:Station|Planetary|Settlement|Outpost}}"},paymentStatus:{name:"Payment Status",description:"The payment status of the order",options:["Pending","Partial","Complete"],getValue:()=>f.value.paymentStatus||"",requiresSelection:!0,format:"{{paymentStatus:Pending|Partial|Complete}}"}})),b=Ze(()=>o.getFleetCarriers),S=Ze(()=>n.orderHistory.filter(J=>J.status==="open")),R=Ze(()=>{var J;return((J=i.getHelpContent("messageTemplate"))==null?void 0:J.content)||""});Xt(()=>{const J=localStorage.getItem("discordTemplates");J&&(s.value=JSON.parse(J))});const _=()=>{localStorage.setItem("discordTemplates",JSON.stringify(s.value))},M=J=>{a.value=J,l.value={...J},r.value=!0},I=J=>{confirm("Are you sure you want to delete this template?")&&(s.value=s.value.filter(L=>L.id!==J),_())},W=()=>{if(a.value){const J=s.value.findIndex(L=>L.id===a.value.id);J!==-1&&(s.value[J]={...l.value})}else s.value.push({id:Date.now().toString(),...l.value});_(),r.value=!1,z()},z=()=>{a.value=null,l.value={name:"",description:"",content:""}},de=J=>{const ce=m.value[J].format||`{{${J}}}`,U=document.querySelector("textarea"),le=U.selectionStart,q=U.selectionEnd,se=l.value.content;l.value.content=se.substring(0,le)+ce+se.substring(q)},K=J=>{let L=J.content;Object.entries(m.value).forEach(([U,le])=>{if(!le.options){const q=new RegExp(`{{${U}}}`,"g");L=L.replace(q,le.getValue())}}),Object.entries(m.value).forEach(([U,le])=>{if(le.options){const q=le.options.join("|"),se=new RegExp(`{{${U}:(${q})}}`,"g");L=L.replace(se,(ue,j)=>v.value[U]||f.value[U]||j);const be=new RegExp(`{{${U}:([^}]+)}}`,"g");L=L.replace(be,(ue,j)=>{const Ee=j.split("|")[0];return v.value[U]||f.value[U]||Ee})}});const ce=/{{([^:}]+):([^}]+)}}/g;return L=L.replace(ce,(U,le,q)=>{if(m.value[le])return U;const se=q.split("|");return v.value[le]||f.value[le]||se[0]}),L},O=Ze(()=>u.value?K(u.value):""),ie=J=>{u.value=J,d.value=null,h.value=null,f.value={},v.value={},Object.entries(m.value).forEach(([L,ce])=>{if(ce.options&&J.content.includes(`{{${L}:`)){const U=J.content.match(new RegExp(`{{${L}:([^}]+)}}`));if(U){const le=U[1].split("|")[0];f.value[L]=le}}}),c.value=!0},N=async()=>{try{const J=K(u.value);await navigator.clipboard.writeText(J),c.value=!1}catch(J){console.error("Failed to copy text:",J)}},oe=J=>{const L={fleetCarrier:!1,order:!1,options:new Set};Object.entries(m.value).forEach(([le,q])=>{q.requiresSelection&&(!q.options&&J.content.includes(`{{${le}}}`)?le.startsWith("fleetCarrier")?L.fleetCarrier=!0:L.order=!0:q.options&&J.content.includes(`{{${le}:`)&&L.options.add(le))});const ce=/{{([^:}]+):([^}]+)}}/g;let U;for(;(U=ce.exec(J.content))!==null;){const le=U[1];m.value[le]||L.options.add(le)}return L},F=Ze(()=>{if(!u.value)return!1;const J=oe(u.value),L=Array.from(J.options).every(ce=>f.value[ce]||v.value[ce]);return(!J.fleetCarrier||d.value)&&(!J.order||h.value)&&L}),Y={store:o,orderStore:n,helpStore:i,templates:s,showNewTemplateForm:r,editingTemplate:a,currentTemplate:l,showCopyModal:c,templateToCopy:u,selectedFleetCarrier:d,selectedOrder:h,selectedOptions:f,customOptions:v,placeholders:m,availableFleetCarriers:b,availableOrders:S,helpContent:R,saveTemplates:_,editTemplate:M,deleteTemplate:I,saveTemplate:W,resetForm:z,insertPlaceholder:de,processTemplate:K,previewContent:O,showCopyDialog:ie,copyToClipboard:N,getRequiredSelections:oe,canCopy:F,ref:De,onMounted:Xt,computed:Ze,get useStateStore(){return $n},get useOrderStore(){return hi},get useHelpStore(){return Lr},HelpButton:d0};return Object.defineProperty(Y,"__isScriptSetup",{enumerable:!1,value:!0}),Y}},lQ={class:"bg-white rounded-lg shadow-lg p-6"},cQ={class:"flex justify-between items-center mb-6"},uQ={class:"flex items-center space-x-2"},dQ=["innerHTML"],hQ={key:0,class:"space-y-6"},fQ={key:0,class:"text-center py-8 text-gray-500"},pQ={key:1,class:"space-y-4"},gQ={class:"flex justify-between items-start"},mQ={class:"font-semibold text-lg"},vQ={class:"text-gray-600"},yQ={class:"flex space-x-2"},CQ=["onClick"],bQ=["onClick"],wQ={class:"mt-4"},SQ={class:"bg-white p-3 rounded-md"},xQ={class:"whitespace-pre-wrap text-sm"},RQ={class:"mt-2 flex justify-between items-center"},_Q={class:"text-sm text-gray-500"},EQ=["onClick"],PQ={class:"space-y-6"},FQ={class:"flex justify-between items-center mb-6"},DQ={class:"text-2xl font-bold"},TQ={class:"space-y-4"},kQ={class:"mb-2"},AQ={class:"grid grid-cols-2 gap-2"},IQ=["onClick","title"],MQ={class:"font-medium"},OQ={key:0,class:"block text-xs text-gray-500 mt-1"},LQ={class:"block text-xs text-gray-500 mt-1"},BQ={class:"mt-2 text-sm text-gray-500"},NQ={class:"flex justify-end space-x-3"},HQ={type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors"},GQ={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},VQ={class:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] flex flex-col"},zQ={class:"flex justify-between items-center p-6 border-b border-gray-200"},WQ={class:"flex-1 overflow-y-auto p-6"},UQ={class:"space-y-4"},$Q={key:0},jQ=["value"],KQ={key:1},qQ=["value"],QQ={class:"block text-sm font-medium text-gray-700 mb-1"},YQ={class:"text-xs text-gray-500 mb-2"},JQ={class:"space-y-2"},ZQ={key:0,class:"flex items-center space-x-2"},XQ=["onUpdate:modelValue"],eY={value:""},tY=["value"],oY=["onUpdate:modelValue","placeholder"],nY={key:1},iY=["onUpdate:modelValue","placeholder"],sY={class:"mt-4 border-t border-gray-200 pt-4"},rY={class:"bg-gray-50 p-3 rounded-md"},aY={class:"whitespace-pre-wrap text-sm"},lY={class:"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50"},cY=["disabled"];function uY(e,t,o,n,i,s){return ge(),me("div",lQ,[y("div",cQ,[y("div",uQ,[t[10]||(t[10]=y("h2",{class:"text-2xl font-bold"},"Discord Message Templates",-1)),jt(n.HelpButton,{title:"Message Template System Help"},{default:ka(()=>[y("div",{innerHTML:n.helpContent},null,8,dQ)]),_:1})]),y("button",{onClick:t[0]||(t[0]=r=>n.showNewTemplateForm=!0),class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center"},t[11]||(t[11]=[y("span",{class:"mr-2"},"+",-1),so(" New Template ")]))]),we(" Template List "),n.showNewTemplateForm?(ge(),me(Ct,{key:1},[we(" Template Form "),y("div",PQ,[y("div",FQ,[y("h2",DQ,ye(n.editingTemplate?"Edit Template":"Create New Template"),1),y("button",{onClick:t[1]||(t[1]=r=>n.showNewTemplateForm=!1),class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"}," Back to Templates ")]),y("form",{onSubmit:Qt(n.saveTemplate,["prevent"]),class:"space-y-6"},[y("div",TQ,[y("div",null,[t[12]||(t[12]=y("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Template Name",-1)),Xe(y("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>n.currentTemplate.name=r),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter template name"},null,512),[[dt,n.currentTemplate.name]])]),y("div",null,[t[13]||(t[13]=y("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),Xe(y("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>n.currentTemplate.description=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter template description"},null,512),[[dt,n.currentTemplate.description]])]),y("div",null,[t[15]||(t[15]=y("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Template Content",-1)),y("div",kQ,[t[14]||(t[14]=y("div",{class:"text-sm text-gray-600 mb-2"},"Available Placeholders:",-1)),y("div",AQ,[(ge(!0),me(Ct,null,Tt(n.placeholders,(r,a)=>(ge(),me("div",{key:a,class:"flex flex-col"},[y("button",{type:"button",onClick:l=>n.insertPlaceholder(a),class:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200 transition-colors text-left",title:r.description},[y("span",MQ,ye(r.name),1),r.options?(ge(),me("span",OQ," Format: "+ye(r.format),1)):we("v-if",!0),y("span",LQ,ye(r.description),1)],8,IQ)]))),128))])]),Xe(y("textarea",{"onUpdate:modelValue":t[4]||(t[4]=r=>n.currentTemplate.content=r),rows:"6",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono",placeholder:"Enter template content"},null,512),[[dt,n.currentTemplate.content]]),y("div",BQ," Preview: "+ye(n.processTemplate(n.currentTemplate)),1)])]),y("div",NQ,[y("button",{type:"button",onClick:t[5]||(t[5]=r=>n.showNewTemplateForm=!1),class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors"}," Cancel "),y("button",HQ,ye(n.editingTemplate?"Update Template":"Create Template"),1)])],32)])],2112)):(ge(),me("div",hQ,[n.templates.length===0?(ge(),me("div",fQ," No templates created yet ")):(ge(),me("div",pQ,[(ge(!0),me(Ct,null,Tt(n.templates,r=>(ge(),me("div",{key:r.id,class:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors"},[y("div",gQ,[y("div",null,[y("h3",mQ,ye(r.name),1),y("p",vQ,ye(r.description),1)]),y("div",yQ,[y("button",{onClick:a=>n.editTemplate(r),class:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors"}," Edit ",8,CQ),y("button",{onClick:a=>n.deleteTemplate(r.id),class:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition-colors"}," Delete ",8,bQ)])]),y("div",wQ,[y("div",SQ,[y("pre",xQ,ye(r.content),1)]),y("div",RQ,[y("div",_Q," Preview: "+ye(n.processTemplate(r)),1),y("button",{onClick:a=>n.showCopyDialog(r),class:"px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors"}," Copy to Clipboard ",8,EQ)])])]))),128))]))])),we(" Copy Modal "),n.showCopyModal?(ge(),me("div",GQ,[y("div",VQ,[y("div",zQ,[t[17]||(t[17]=y("h3",{class:"text-xl font-semibold"},"Copy Template",-1)),y("button",{onClick:t[6]||(t[6]=r=>n.showCopyModal=!1),class:"text-gray-500 hover:text-gray-700"},t[16]||(t[16]=[y("span",{class:"text-2xl"},"×",-1)]))]),y("div",WQ,[y("div",UQ,[we(" Fleet Carrier Selection "),n.getRequiredSelections(n.templateToCopy).fleetCarrier?(ge(),me("div",$Q,[t[19]||(t[19]=y("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Select Fleet Carrier ",-1)),Xe(y("select",{"onUpdate:modelValue":t[7]||(t[7]=r=>n.selectedFleetCarrier=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:""},[t[18]||(t[18]=y("option",{value:""},"Select a fleet carrier...",-1)),(ge(!0),me(Ct,null,Tt(n.availableFleetCarriers,r=>(ge(),me("option",{key:r.id,value:r},ye(r.name),9,jQ))),128))],512),[[Wo,n.selectedFleetCarrier]])])):we("v-if",!0),we(" Order Selection "),n.getRequiredSelections(n.templateToCopy).order?(ge(),me("div",KQ,[t[21]||(t[21]=y("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Select Order ",-1)),Xe(y("select",{"onUpdate:modelValue":t[8]||(t[8]=r=>n.selectedOrder=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:""},[t[20]||(t[20]=y("option",{value:""},"Select an order...",-1)),(ge(!0),me(Ct,null,Tt(n.availableOrders,r=>(ge(),me("option",{key:r.id,value:r},ye(r.orderNumber)+" - "+ye(r.clientCommander),9,qQ))),128))],512),[[Wo,n.selectedOrder]])])):we("v-if",!0),we(" Dynamic Options "),(ge(!0),me(Ct,null,Tt(n.getRequiredSelections(n.templateToCopy).options,r=>{var a,l,c,u,d,h;return ge(),me("div",{key:r,class:"border-t border-gray-200 pt-4"},[y("label",QQ,ye(((a=n.placeholders[r])==null?void 0:a.name)||r),1),y("div",YQ,ye(((l=n.placeholders[r])==null?void 0:l.description)||"Custom placeholder"),1),y("div",JQ,[(c=n.placeholders[r])!=null&&c.options?(ge(),me("div",ZQ,[Xe(y("select",{"onUpdate:modelValue":f=>n.selectedOptions[r]=f,class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:""},[y("option",eY," Select "+ye((((u=n.placeholders[r])==null?void 0:u.name)||r).toLowerCase())+"... ",1),(ge(!0),me(Ct,null,Tt(n.placeholders[r].options,f=>(ge(),me("option",{key:f,value:f},ye(f),9,tY))),128))],8,XQ),[[Wo,n.selectedOptions[r]]]),t[22]||(t[22]=y("span",{class:"text-gray-500"},"or",-1)),Xe(y("input",{type:"text","onUpdate:modelValue":f=>n.customOptions[r]=f,placeholder:"Custom "+(((d=n.placeholders[r])==null?void 0:d.name)||r).toLowerCase(),class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,8,oY),[[dt,n.customOptions[r]]])])):(ge(),me("div",nY,[Xe(y("input",{type:"text","onUpdate:modelValue":f=>n.selectedOptions[r]=f,placeholder:"Enter "+(((h=n.placeholders[r])==null?void 0:h.name)||r).toLowerCase(),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",required:""},null,8,iY),[[dt,n.selectedOptions[r]]])]))])])}),128)),we(" Preview "),y("div",sY,[t[23]||(t[23]=y("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Preview ",-1)),y("div",rY,[y("pre",aY,ye(n.previewContent),1)])])])]),y("div",lY,[y("button",{onClick:t[9]||(t[9]=r=>n.showCopyModal=!1),class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors"}," Cancel "),y("button",{onClick:n.copyToClipboard,disabled:!n.canCopy,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Copy to Clipboard ",8,cY)])])])):we("v-if",!0)])}const dY=To(aQ,[["render",uY],["__file","/app/src/js/components/MessageTemplate.vue"]]);let hY=class{constructor(){this._store=null,this._secretStore=null}get store(){return this._store||(this._store=$n()),this._store}get secretStore(){return this._secretStore||(this._secretStore=pi()),this._secretStore}async sendMessage(t,o){try{const n=this.getChannel(t);if(!n)return{success:!1,error:`Channel ${t} not found`};if(!n.enabled)return{success:!1,error:`Channel ${n.name} is disabled`};const i=await this.secretStore.getSecret(n.secretName,`Sending message to Discord channel ${n.name}`);if(!i.success)return{success:!1,error:`Failed to get webhook for channel ${n.name}: ${i.message}`};const s=i.secret.includes("?")?`${i.secret}&wait=true`:`${i.secret}?wait=true`,r=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!r.ok){const l=await r.text();return{success:!1,error:`Discord API error: ${r.status} ${l}`}}let a=null;try{a=(await r.json()).id}catch(l){console.warn("Could not parse Discord webhook response:",l)}return{success:!0,message:`Message sent to ${n.name}`,messageId:a}}catch(n){return console.error("Error sending Discord message:",n),{success:!1,error:`Failed to send message: ${n.message}`}}}async sendEmbed(t,o,n=""){const i={content:n,embeds:[o]};return this.sendMessage(t,i)}async sendOrderNotification(t,o,n){const i={title:`Order ${n}`,description:`Order ID: ${o.order_id}`,color:this.getStatusColor(n),fields:[{name:"System",value:o.system_name||"Unknown",inline:!0},{name:"Status",value:n,inline:!0},{name:"Timestamp",value:new Date().toISOString(),inline:!0}],timestamp:new Date().toISOString()};return this.sendEmbed(t,i,`📦 Order ${n.toLowerCase()}`)}async sendDeliveryNotification(t,o){var i;const n={title:"🚚 Delivery Completed",description:`Job ID: ${o.job_id}`,color:65280,fields:[{name:"Order ID",value:o.order_id||"Unknown",inline:!0},{name:"System",value:o.system_name||"Unknown",inline:!0},{name:"Quantity Delivered",value:((i=o.quantity)==null?void 0:i.toString())||"Unknown",inline:!0}],timestamp:new Date().toISOString()};return this.sendEmbed(t,n,"✅ Delivery completed successfully")}getStatusColor(t){return{PENDING:16776960,IN_PROGRESS:39423,COMPLETED:65280,CANCELLED:16711680,FAILED:16711680}[t]||8421504}addChannel(t){const o=this.getChannels(),n=o.findIndex(i=>i.id===t.id);n>=0?o[n]={...o[n],...t}:o.push({enabled:!0,...t}),this.store.setDiscordChannels(o)}removeChannel(t){const o=this.getChannels().filter(n=>n.id!==t);this.store.setDiscordChannels(o)}getChannel(t){return this.getChannels().find(o=>o.id===t)||null}getChannels(){return this.store.getDiscordChannels||[]}setChannelEnabled(t,o){const n=this.getChannels(),i=n.find(s=>s.id===t);i&&(i.enabled=o,this.store.setDiscordChannels(n))}async testChannel(t){const o={content:"🧪 Test message from Freight Helper",embeds:[{title:"Webhook Test",description:"This is a test message to verify the webhook is working correctly.",color:39423,timestamp:new Date().toISOString()}]};return this.sendMessage(t,o)}};const wc=new hY,fY={__name:"DiscordManager",setup(e,{expose:t}){t();const o=$n(),n=pi(),i=De(!1),s=De(!1),r=De(!1),a=De(!1),l=De(!1),c=De(null),u=De({id:"",name:"",secretName:"",description:"",enabled:!0}),d=De({channelId:"",content:"",embedTitle:"",embedDescription:"",embedColor:"#0099ff",embedColorHex:"#0099ff"}),h=De([]),f=De(null),v=De(null),m=De(null),b=De(!1),S=Ze(()=>o.getDiscordChannels),R=Ze(()=>n.getAllSecretMetadata),_=Ze(()=>S.value.filter(j=>j.enabled)),M=j=>{u.value={...j},i.value=!0},I=()=>{o.addDiscordChannel(u.value),i.value=!1,u.value={id:"",name:"",secretName:"",description:"",enabled:!0}},W=j=>{confirm("Are you sure you want to delete this Discord channel?")&&o.removeDiscordChannel(j)},z=(j,Ee)=>{o.updateDiscordChannel(j,{enabled:Ee})},de=async j=>{try{const Ee=await wc.testChannel(j);if(Ee.success){alert("Test message sent successfully!");const ne=S.value.find(pe=>pe.id===j);ie({channelId:j,channelName:(ne==null?void 0:ne.name)||"Unknown Channel",content:"🧪 Test message from Freight Helper",messageId:Ee.messageId})}else alert("Failed to send test message: "+Ee.error)}catch(Ee){alert("Error sending test message: "+Ee.message)}},K=async()=>{if(!(!d.value.channelId||!d.value.content)){a.value=!0;try{const j={content:d.value.content};if(d.value.embedTitle||d.value.embedDescription){const ne={};d.value.embedTitle&&(ne.title=d.value.embedTitle),d.value.embedDescription&&(ne.description=d.value.embedDescription);const pe=d.value.embedColorHex||d.value.embedColor;pe&&(ne.color=parseInt(pe.replace("#",""),16)),ne.timestamp=new Date().toISOString(),j.embeds=[ne]}const Ee=await wc.sendMessage(d.value.channelId,j);if(Ee.success){alert("Message sent successfully!");const ne=S.value.find(pe=>pe.id===d.value.channelId);ie({channelId:d.value.channelId,channelName:(ne==null?void 0:ne.name)||"Unknown Channel",content:d.value.content,messageId:Ee.messageId}),d.value={channelId:"",content:"",embedTitle:"",embedDescription:"",embedColor:"#0099ff",embedColorHex:"#0099ff"}}else alert("Failed to send message: "+Ee.error)}catch(j){alert("Error sending message: "+j.message)}finally{a.value=!1}}},O=async j=>{try{const Ee=await n.getSecret(j,"Testing Discord webhook");if(Ee.success){const ne=await fetch(Ee.secret,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:"🧪 Test message from Freight Helper",embeds:[{title:"Webhook Test",description:"This is a test message to verify the webhook is working correctly.",color:39423,timestamp:new Date().toISOString()}]})});if(ne.ok)alert("Discord webhook test successful!");else{const pe=await ne.text();alert(`Discord webhook test failed: ${ne.status} ${pe}`)}}else alert("Failed to access webhook secret: "+Ee.message)}catch(Ee){alert("Error testing Discord webhook: "+Ee.message)}},ie=j=>{const Ee={id:Date.now().toString(),channelId:j.channelId,channelName:j.channelName,content:j.content,sentAt:new Date().toISOString(),status:"sent",lastChecked:null,messageId:j.messageId};h.value.unshift(Ee),h.value.length>50&&(h.value=h.value.slice(0,50))},N=j=>{h.value=h.value.filter(Ee=>Ee.id!==j)},oe=async()=>{l.value=!0;try{for(const j of h.value)(j.status==="sent"||j.status==="active")&&await F(j.id,!1)}finally{l.value=!1}},F=async(j,Ee=!0)=>{Ee&&(c.value=j);try{const ne=h.value.find(ae=>ae.id===j);if(!ne)return;const pe=await Y(ne);ne.lastChecked=new Date().toISOString(),ne.status=pe?"active":"deleted"}finally{Ee&&(c.value=null)}},Y=async j=>{try{if(!j.messageId)return console.warn("No message ID available for checking"),!0;const Ee=S.value.find(w=>w.id===j.channelId);if(!Ee)return console.warn("Channel configuration not found for message check"),!0;const ne=await n.getSecret(Ee.secretName,`Checking message status in Discord channel ${Ee.name}`);if(!ne.success)return console.warn("Failed to get webhook for message check:",ne.message),!0;const ae=ne.secret.match(/\/webhooks\/(\d+)\/([^\/]+)/);if(!ae)return console.warn("Invalid webhook URL format for message check"),!0;const[,xe,Le]=ae,nt=`https://discord.com/api/webhooks/${xe}/${Le}/messages/${j.messageId}`,H=await fetch(nt,{method:"GET"});return H.ok?!0:H.status===404?!1:(console.warn(`Unexpected response when checking message: ${H.status}`),!0)}catch(Ee){return console.error("Error checking message on Discord:",Ee),!0}},J=()=>{const j=()=>{const Ee=12e4+Math.random()*18e4;f.value=setTimeout(()=>{oe(),j()},Ee)};j()},L=()=>{f.value&&(clearTimeout(f.value),f.value=null)},ce=j=>{switch(j){case"sent":return"border-blue-500";case"active":return"border-green-500";case"deleted":return"border-red-500";default:return"border-gray-500"}},U=j=>{switch(j){case"sent":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"deleted":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},le=j=>new Date(j).toLocaleString();Xt(()=>{const j=localStorage.getItem("discord-active-messages");if(j)try{h.value=JSON.parse(j)}catch(Ee){console.error("Failed to load active messages:",Ee)}n.loadSecretMetadata(),J()}),eo(h,j=>{localStorage.setItem("discord-active-messages",JSON.stringify(j))},{deep:!0});const q=async j=>{v.value=j.id;try{const Ee={content:j.content},ne=await wc.sendMessage(j.channelId,Ee);ne.success?(alert("Message resent successfully!"),ie({channelId:j.channelId,channelName:j.channelName,content:j.content+" (Resent)",messageId:ne.messageId})):alert("Failed to resend message: "+ne.error)}catch(Ee){console.error("Error resending message:",Ee),alert("Error resending message: "+Ee.message)}finally{v.value=null}},se=async j=>{if(confirm(`Are you sure you want to delete this message from Discord?

Channel: ${j.channelName}
Content: ${j.content.substring(0,100)}${j.content.length>100?"...":""}`)){m.value=j.id;try{const Ee=S.value.find(w=>w.id===j.channelId);if(!Ee){alert("Channel configuration not found. Cannot delete message.");return}const ne=await n.getSecret(Ee.secretName,`Deleting message from Discord channel ${Ee.name}`);if(!ne.success){alert("Failed to get webhook for channel: "+ne.message);return}const ae=ne.secret.match(/\/webhooks\/(\d+)\/([^\/]+)/);if(!ae){alert("Invalid webhook URL format. Cannot delete message.");return}const[,xe,Le]=ae;if(!j.messageId){alert("Message ID not available. This might be an older message sent before we started tracking message IDs. The message will be marked as deleted in our system only."),j.status="deleted",j.lastChecked=new Date().toISOString();return}const nt=`https://discord.com/api/webhooks/${xe}/${Le}/messages/${j.messageId}`,H=await fetch(nt,{method:"DELETE"});if(H.ok)alert("Message successfully deleted from Discord!"),j.status="deleted",j.lastChecked=new Date().toISOString();else if(H.status===404)alert("Message not found on Discord (may have been already deleted). Marking as deleted in our system."),j.status="deleted",j.lastChecked=new Date().toISOString();else{const w=await H.text();throw new Error(`Discord API error: ${H.status} ${w}`)}}catch(Ee){console.error("Error deleting message:",Ee),alert("Error deleting message: "+Ee.message)}finally{m.value=null}}},be=async()=>{if(confirm("This will remove all messages marked as deleted from the list. Continue?")){b.value=!0;try{const j=h.value.filter(Ee=>Ee.status==="deleted").length;h.value=h.value.filter(Ee=>Ee.status!=="deleted"),j>0?alert(`Cleaned up ${j} deleted message(s) from the list.`):alert("No deleted messages found to clean up.")}catch(j){console.error("Error cleaning up messages:",j),alert("Error cleaning up messages: "+j.message)}finally{b.value=!1}}};Rn(()=>{L()});const ue={store:o,secretStore:n,showChannelModal:i,showChannels:s,showManualMessage:r,sending:a,refreshing:l,checkingMessage:c,editingChannel:u,manualMessage:d,activeMessages:h,messageCheckInterval:f,resendingMessage:v,deletingMessage:m,cleaningUp:b,discordChannels:S,secrets:R,enabledChannels:_,editChannel:M,saveChannel:I,deleteChannel:W,toggleChannel:z,testChannel:de,sendManualMessage:K,testDiscordWebhook:O,addActiveMessage:ie,removeActiveMessage:N,refreshActiveMessages:oe,checkMessageStatus:F,checkMessageOnDiscord:Y,startPeriodicChecking:J,stopPeriodicChecking:L,getMessageStatusColor:ce,getStatusBadgeClass:U,formatTimestamp:le,resendMessage:q,deleteMessageFromDiscord:se,cleanupDeletedMessages:be,ref:De,computed:Ze,onMounted:Xt,onUnmounted:Rn,watch:eo,get useStateStore(){return $n},get useSecretStore(){return pi},get discordManager(){return wc},SecretManager:eR};return Object.defineProperty(ue,"__isScriptSetup",{enumerable:!1,value:!0}),ue}},pY={class:"bg-white rounded-lg p-8 mb-8 shadow-md"},gY={class:"mb-8"},mY={class:"bg-gray-50 p-6 rounded-lg"},vY={class:"flex justify-between items-center mb-4"},yY={class:"flex gap-2"},CY=["disabled"],bY=["disabled"],wY={class:"space-y-3 max-h-96 overflow-y-auto"},SY={class:"space-y-2"},xY={class:"flex justify-between items-start"},RY={class:"font-medium text-gray-900 text-sm"},_Y={class:"text-sm text-gray-600"},EY={class:"text-xs text-gray-500"},PY={key:0,class:"text-xs text-gray-500"},FY={class:"flex gap-2 mt-2 flex-wrap"},DY=["onClick","disabled"],TY=["onClick","disabled"],kY=["onClick","disabled"],AY=["onClick"],IY={key:0,class:"text-sm text-gray-500 italic text-center py-4"},MY={class:"space-y-6"},OY={class:"bg-gray-50 p-6 rounded-lg"},LY={class:"flex justify-between items-center mb-4"},BY={key:0},NY={class:"space-y-3"},HY={class:"space-y-1 mb-3"},GY={class:"font-medium text-gray-900"},VY={class:"text-sm text-gray-600"},zY={class:"text-sm text-gray-600"},WY={key:0,class:"text-sm text-gray-500"},UY={class:"flex items-center gap-2"},$Y={class:"flex gap-2"},jY=["onClick"],KY=["onClick"],qY=["onClick"],QY=["onClick"],YY={key:0,class:"text-sm text-gray-500 italic text-center py-4"},JY={class:"bg-gray-50 p-6 rounded-lg"},ZY={class:"flex justify-between items-center mb-4"},XY={key:0},eJ={class:"space-y-2"},tJ=["value"],oJ={class:"space-y-2"},nJ={class:"space-y-2"},iJ={class:"space-y-2"},sJ={class:"space-y-2"},rJ={class:"flex gap-2"},aJ=["disabled"],lJ={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-30"},cJ={class:"bg-white rounded-lg p-6 max-w-md w-full"},uJ={class:"text-xl font-semibold text-gray-900 mb-4"},dJ={class:"space-y-2"},hJ={class:"space-y-2"},fJ={class:"space-y-2"},pJ={class:"space-y-2"},gJ={class:"flex gap-3 pt-4"};function mJ(e,t,o,n,i,s){return ge(),me("div",pY,[t[33]||(t[33]=y("div",{class:"mb-6"},[y("h2",{class:"text-2xl font-bold text-gray-900"},"Discord Integration"),y("p",{class:"text-gray-600 mt-1"},"Monitor and manage Discord messages.")],-1)),we(" Active Messages - Primary Focus "),y("div",gY,[y("div",mY,[y("div",vY,[t[15]||(t[15]=y("h3",{class:"text-xl font-semibold text-gray-900"},"Active Messages",-1)),y("div",yY,[y("button",{onClick:n.cleanupDeletedMessages,disabled:n.cleaningUp,class:"px-3 py-1.5 bg-yellow-600 text-white text-sm rounded-md hover:bg-yellow-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},ye(n.cleaningUp?"Cleaning...":"Cleanup Deleted"),9,CY),y("button",{onClick:n.refreshActiveMessages,disabled:n.refreshing,class:"px-3 py-1.5 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},ye(n.refreshing?"Refreshing...":"Refresh"),9,bY)])]),y("div",wY,[(ge(!0),me(Ct,null,Tt(n.activeMessages,r=>(ge(),me("div",{key:r.id,class:Ft(["bg-white p-4 rounded-md shadow-sm border-l-4",n.getMessageStatusColor(r.status)])},[y("div",SY,[y("div",xY,[y("div",RY,ye(r.channelName||"Unknown Channel"),1),y("span",{class:Ft(["px-2 py-1 text-xs rounded-full",n.getStatusBadgeClass(r.status)])},ye(r.status),3)]),y("div",_Y,ye(r.content||"No content"),1),y("div",EY," Sent: "+ye(n.formatTimestamp(r.sentAt)),1),r.lastChecked?(ge(),me("div",PY," Last checked: "+ye(n.formatTimestamp(r.lastChecked)),1)):we("v-if",!0),y("div",FY,[y("button",{onClick:a=>n.checkMessageStatus(r.id),disabled:n.checkingMessage===r.id,class:"px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},ye(n.checkingMessage===r.id?"Checking...":"Check"),9,DY),y("button",{onClick:a=>n.resendMessage(r),disabled:n.resendingMessage===r.id,class:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},ye(n.resendingMessage===r.id?"Resending...":"Resend"),9,TY),y("button",{onClick:a=>n.deleteMessageFromDiscord(r),disabled:n.deletingMessage===r.id,class:"px-2 py-1 bg-orange-600 text-white text-xs rounded hover:bg-orange-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},ye(n.deletingMessage===r.id?"Deleting...":"Delete from Discord"),9,kY),y("button",{onClick:a=>n.removeActiveMessage(r.id),class:"px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors"}," Remove from List ",8,AY)])])],2))),128)),n.activeMessages.length===0?(ge(),me("div",IY," No active messages ")):we("v-if",!0)])])]),we(" Collapsible Sections "),y("div",MY,[we(" Channel Management - Collapsible "),y("div",OY,[y("div",LY,[t[16]||(t[16]=y("h3",{class:"text-lg font-semibold text-gray-900"},"Discord Channels",-1)),y("button",{onClick:t[0]||(t[0]=r=>n.showChannels=!n.showChannels),class:"px-3 py-1.5 bg-gray-600 text-white text-sm rounded-md hover:bg-gray-700 transition-colors"},ye(n.showChannels?"Hide":"Show"),1)]),n.showChannels?(ge(),me("div",BY,[y("button",{onClick:t[1]||(t[1]=r=>n.showChannelModal=!0),class:"w-full mb-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Add Discord Channel "),y("div",NY,[(ge(!0),me(Ct,null,Tt(n.discordChannels,r=>(ge(),me("div",{key:r.id,class:"bg-white p-4 rounded-md shadow-sm"},[y("div",HY,[y("div",GY,ye(r.name),1),y("div",VY,"ID: "+ye(r.id),1),y("div",zY," Secret: "+ye(r.secretName),1),r.description?(ge(),me("div",WY,ye(r.description),1)):we("v-if",!0),y("div",UY,[t[17]||(t[17]=y("span",{class:"text-sm text-gray-600"},"Status:",-1)),y("span",{class:Ft([r.enabled?"text-green-600":"text-red-600","text-sm font-medium"])},ye(r.enabled?"Enabled":"Disabled"),3)])]),y("div",$Y,[y("button",{onClick:a=>n.editChannel(r),class:"flex-1 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors"}," Edit ",8,jY),y("button",{onClick:a=>n.testChannel(r.id),class:"flex-1 px-3 py-1.5 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 transition-colors"}," Test ",8,KY),y("button",{onClick:a=>n.toggleChannel(r.id,!r.enabled),class:Ft([r.enabled?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700","flex-1 px-3 py-1.5 text-white text-sm rounded-md transition-colors"])},ye(r.enabled?"Disable":"Enable"),11,qY),y("button",{onClick:a=>n.deleteChannel(r.id),class:"flex-1 px-3 py-1.5 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 transition-colors"}," Delete ",8,QY)])]))),128)),n.discordChannels.length===0?(ge(),me("div",YY," No Discord channels configured ")):we("v-if",!0)])])):we("v-if",!0)]),we(" Manual Message - Collapsible "),y("div",JY,[y("div",ZY,[t[18]||(t[18]=y("h3",{class:"text-lg font-semibold text-gray-900"},"Send Manual Message",-1)),y("button",{onClick:t[2]||(t[2]=r=>n.showManualMessage=!n.showManualMessage),class:"px-3 py-1.5 bg-gray-600 text-white text-sm rounded-md hover:bg-gray-700 transition-colors"},ye(n.showManualMessage?"Hide":"Show"),1)]),n.showManualMessage?(ge(),me("div",XY,[y("form",{onSubmit:Qt(n.sendManualMessage,["prevent"]),class:"space-y-4"},[y("div",eJ,[t[20]||(t[20]=y("label",{for:"testChannel",class:"block text-sm font-medium text-gray-700"}," Channel ",-1)),Xe(y("select",{id:"testChannel","onUpdate:modelValue":t[3]||(t[3]=r=>n.manualMessage.channelId=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[t[19]||(t[19]=y("option",{value:""},"Select a channel",-1)),(ge(!0),me(Ct,null,Tt(n.enabledChannels,r=>(ge(),me("option",{key:r.id,value:r.id},ye(r.name),9,tJ))),128))],512),[[Wo,n.manualMessage.channelId]])]),y("div",oJ,[t[21]||(t[21]=y("label",{for:"messageContent",class:"block text-sm font-medium text-gray-700"}," Message Content ",-1)),Xe(y("textarea",{id:"messageContent","onUpdate:modelValue":t[4]||(t[4]=r=>n.manualMessage.content=r),rows:"3",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your message..."},null,512),[[dt,n.manualMessage.content]])]),y("div",nJ,[t[22]||(t[22]=y("label",{for:"embedTitle",class:"block text-sm font-medium text-gray-700"}," Embed Title (Optional) ",-1)),Xe(y("input",{id:"embedTitle","onUpdate:modelValue":t[5]||(t[5]=r=>n.manualMessage.embedTitle=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Order Update"},null,512),[[dt,n.manualMessage.embedTitle]])]),y("div",iJ,[t[23]||(t[23]=y("label",{for:"embedDescription",class:"block text-sm font-medium text-gray-700"}," Embed Description (Optional) ",-1)),Xe(y("textarea",{id:"embedDescription","onUpdate:modelValue":t[6]||(t[6]=r=>n.manualMessage.embedDescription=r),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Additional details for the embed..."},null,512),[[dt,n.manualMessage.embedDescription]])]),y("div",sJ,[t[24]||(t[24]=y("label",{for:"embedColor",class:"block text-sm font-medium text-gray-700"}," Embed Color (Optional) ",-1)),y("div",rJ,[Xe(y("input",{id:"embedColor","onUpdate:modelValue":t[7]||(t[7]=r=>n.manualMessage.embedColor=r),type:"color",class:"w-12 h-10 border border-gray-300 rounded-md cursor-pointer"},null,512),[[dt,n.manualMessage.embedColor]]),Xe(y("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>n.manualMessage.embedColorHex=r),type:"text",placeholder:"#0099ff",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.manualMessage.embedColorHex]])]),t[25]||(t[25]=y("p",{class:"text-sm text-gray-500"}," Choose a color or enter a hex code (e.g., #0099ff) ",-1))]),y("button",{type:"submit",disabled:!n.manualMessage.channelId||!n.manualMessage.content||n.sending,class:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},ye(n.sending?"Sending...":"Send Message"),9,aJ)],32)])):we("v-if",!0)])]),we(" Channel Modal "),n.showChannelModal?(ge(),me("div",lJ,[y("div",cJ,[y("h3",uJ,ye(n.editingChannel.id?"Edit":"Add")+" Discord Channel ",1),y("form",{onSubmit:Qt(n.saveChannel,["prevent"]),class:"space-y-4"},[Xe(y("input",{type:"hidden","onUpdate:modelValue":t[9]||(t[9]=r=>n.editingChannel.id=r)},null,512),[[dt,n.editingChannel.id]]),y("div",dJ,[t[26]||(t[26]=y("label",{for:"channelName",class:"block text-sm font-medium text-gray-700"}," Channel Name ",-1)),Xe(y("input",{type:"text",id:"channelName","onUpdate:modelValue":t[10]||(t[10]=r=>n.editingChannel.name=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"general"},null,512),[[dt,n.editingChannel.name]])]),y("div",hJ,[t[27]||(t[27]=y("label",{for:"channelId",class:"block text-sm font-medium text-gray-700"}," Channel ID ",-1)),Xe(y("input",{type:"text",id:"channelId","onUpdate:modelValue":t[11]||(t[11]=r=>n.editingChannel.id=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"123456789012345678"},null,512),[[dt,n.editingChannel.id]]),t[28]||(t[28]=y("p",{class:"text-sm text-gray-500"},' Right-click on a Discord channel and select "Copy Channel ID" ',-1))]),y("div",fJ,[t[29]||(t[29]=y("label",{class:"block text-sm font-medium text-gray-700"}," Discord Webhook Secret ",-1)),jt(n.SecretManager,{inline:!0,"secret-type":"discord-webhook","test-function":n.testDiscordWebhook,modelValue:n.editingChannel.secretName,"onUpdate:modelValue":t[12]||(t[12]=r=>n.editingChannel.secretName=r)},null,8,["modelValue"]),t[30]||(t[30]=y("p",{class:"text-sm text-gray-500"}," Select a secret containing the Discord webhook URL, or create a new one ",-1))]),y("div",pJ,[t[31]||(t[31]=y("label",{for:"channelDescription",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Xe(y("textarea",{id:"channelDescription","onUpdate:modelValue":t[13]||(t[13]=r=>n.editingChannel.description=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"2",placeholder:"Optional description..."},null,512),[[dt,n.editingChannel.description]])]),y("div",gJ,[y("button",{type:"button",onClick:t[14]||(t[14]=r=>n.showChannelModal=!1),class:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors"}," Cancel "),t[32]||(t[32]=y("button",{type:"submit",class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Save ",-1))])],32)])])):we("v-if",!0)])}const vJ=To(fY,[["render",mJ],["__scopeId","data-v-8867c079"],["__file","/app/src/js/components/DiscordManager.vue"]]),yJ={__name:"SystemSiteDataCapture",setup(e,{expose:t}){t();const o=De({systemName:"",distanceFromSol:0,sites:[]}),n=De(!1),i=De(!1),s=De(""),r=De(!1),a=De(""),l=De(null),c=De(null),u=De(null),d=De(!1),h=De(!1),f=De(""),v=De([]),m=De(null),b=De(null),S=De(!1),R=De(!1),_=De(""),M=De(0),I=De([]);let W=null,z=1;const de={advancedcatalysers:"Advanced Catalysers",agrimedicines:"Agri-Medicines",aluminium:"Aluminium",animalmeat:"Animal Meat",autofabricators:"Auto-Fabricators",basicmedicines:"Basic Medicines",battleweapons:"Battle Weapons",beer:"Beer",bioreducinglichen:"Bioreducing Lichen",biowaste:"Biowaste",buildingfabricators:"Building Fabricators",ceramiccomposites:"Ceramic Composites",cmmcomposite:"CMM Composite",coffee:"Coffee",combatstabilizers:"Combat Stabilizers",computercomponents:"Computer Components",copper:"Copper",cropharvesters:"Crop Harvesters",emergencypowercells:"Emergency Power Cells",evacuationshelter:"Evacuation Shelter",fish:"Fish",foodcartridges:"Food Cartridges",fruitandvegetables:"Fruit and Vegetables",geologicalequipment:"Geological Equipment",grain:"Grain",hesuits:"H.E. Suits",insulatingmembrane:"Insulating Membrane",landenrichmentsystems:"Land Enrichment Systems",liquidoxygen:"Liquid Oxygen",liquor:"Liquor",medicaldiagnosticequipment:"Medical Diagnostic Equipment",microcontrollers:"Micro Controllers",microbialfurnaces:"Microbial Furnaces",militarygradefabrics:"Military Grade Fabrics",mineralextractors:"Mineral Extractors",muonimager:"Muon Imager",nonlethalweapons:"Non-Lethal Weapons",pesticides:"Pesticides",polymers:"Polymers",powergenerators:"Power Generators",reactivearmour:"Reactive Armour",resonatingseperators:"Resonating Seperators",robotics:"Robotics",semiconductors:"Semiconductors",steel:"Steel",structuralregulators:"Structural Regulators",superconductors:"Superconductors",surfacestabilisers:"Surface Stabilisers",survivalequipment:"Survival Equipment",tea:"Tea",thermalcoolingunits:"Thermal Cooling Units",titanium:"Titanium",water:"Water",waterpurifiers:"Water Purifiers",wine:"Wine"},K=()=>{const _e={id:z++,name:"",isPlanetary:!1,commodities:[],images:[],imagesExpanded:!1};o.value.sites.push(_e)},O=_e=>{if(confirm("Are you sure you want to remove this site?")){const Fe=o.value.sites.findIndex(Ve=>Ve.id===_e);Fe>-1&&o.value.sites.splice(Fe,1)}},ie=_e=>{const Fe=o.value.sites.find(Ve=>Ve.id===_e);Fe&&Fe.commodities.push({name:"",quantity:1})},N=(_e,Fe)=>{const Ve=o.value.sites.find(Ke=>Ke.id===_e);Ve&&Ve.commodities.splice(Fe,1)},oe=async()=>{if(o.value.systemName){r.value=!0,a.value="";try{const _e={x:0,y:0,z:0},Fe=await fetch(`https://www.edsm.net/api-v1/system?systemName=${encodeURIComponent(Ve.value.systemName)}&showCoordinates=1`);if(!Fe.ok)throw new Error(`HTTP error! status: ${Fe.status}`);const Ve=await Fe.json();if(!Ve.coords)throw new Error("System coordinates not found in EDSM database");const Ke=Ve.coords.x-_e.x,it=Ve.coords.y-_e.y,ut=Ve.coords.z-_e.z,Rt=Math.sqrt(Ke*Ke+it*it+ut*ut);Ve.value.distanceFromSol=Math.ceil(Rt)}catch(_e){console.error("Distance calculation error:",_e),a.value=`Failed to calculate distance: ${_e.message}`}finally{r.value=!1}}},F=async()=>(W||(W=await Iu.createWorker("eng")),W),Y=async()=>{W&&(await W.terminate(),W=null)},J=()=>{var _e;(_e=b.value)==null||_e.click()},L=_e=>{const Fe=Array.from(_e.target.files);le(Fe)},ce=_e=>{S.value=!1;const Fe=Array.from(_e.dataTransfer.files);le(Fe)},U=async()=>{try{const Fe=(await navigator.clipboard.read()).filter(Ke=>Ke.types.some(it=>it.startsWith("image/")));if(Fe.length===0){alert("No images found in clipboard");return}const Ve=[];for(const Ke of Fe){const it=await Ke.getType("image/png")||await Ke.getType("image/jpeg")||await Ke.getType("image/gif");it&&Ve.push(new File([it],`clipboard-${Date.now()}.png`,{type:it.type}))}le(Ve)}catch(_e){console.error("Failed to read clipboard:",_e),alert("Failed to read clipboard. Please ensure you have clipboard permissions.")}},le=async _e=>{if(_e.length!==0){R.value=!0,_.value=`Processing ${_e.length} image(s)...`,M.value=0;try{const Fe=await F();for(let Ve=0;Ve<_e.length;Ve++){const Ke=_e[Ve];_.value=`Processing image ${Ve+1} of ${_e.length}...`;const it=await se(Ke,Fe);q(it),M.value=Math.round((Ve+1)/_e.length*100)}_.value=`Complete! Added ${_e.length} site(s)`}catch(Fe){console.error("Error processing images:",Fe),alert("Error processing images: "+Fe.message)}finally{R.value=!1,setTimeout(()=>{_.value="",M.value=0},3e3)}}},q=_e=>{var Ve,Ke;const Fe={id:z++,name:((Ve=_e.siteInfo)==null?void 0:Ve.name)||`Site ${z}`,isPlanetary:((Ke=_e.siteInfo)==null?void 0:Ke.isPlanetary)??!1,commodities:_e.commodities.map(it=>({name:it.name,quantity:it.quantity})),images:[{preview:_e.preview,file:_e.file}],imagesExpanded:!1};o.value.sites.push(Fe)},se=async(_e,Fe)=>{const Ve={file:_e,preview:URL.createObjectURL(_e),ocrText:"",commodities:[],siteInfo:null,error:null,expandedCommodities:!1};try{const{data:{text:Ke}}=await Fe.recognize(_e);Ve.ocrText=Ke;const it=ue(Ke);Ve.commodities=it;const ut=j(Ke);Ve.siteInfo=ut}catch(Ke){console.error("OCR processing error:",Ke),Ve.error="Failed to process image: "+Ke.message}return Ve},be=(_e,Fe)=>{const Ve=[];!Fe||Fe<=0?Ve.push("invalid_quantity"):Fe>1e5&&Ve.push("suspicious_quantity"),!_e||_e.length<2?Ve.push("too_short"):_e.length>50&&Ve.push("too_long"),_e&&/[^a-zA-Z0-9\s\-\.\&]/.test(_e)&&Ve.push("special_characters");let Ke="high";return Ve.length>0&&(Ke=Ve.includes("invalid_quantity")||Ve.includes("too_short")?"low":"medium"),{valid:Ve.length===0,issues:Ve,confidence:Ke}},ue=_e=>{const Fe=[],Ve=_e.split(`
`).map(Ke=>Ke.trim()).filter(Ke=>Ke.length>0);for(const Ke of Ve){if(Ke.toLowerCase().includes("required commodities")||Ke.toLowerCase().includes("orbital construction")||Ke.toLowerCase().includes("planetary construction")||Ke.toLowerCase().includes("terminal")||Ke.toLowerCase().includes("construction site"))continue;let it=null,ut=null,Rt=null;if(it=Ke.match(/^(.+?):\s*([\d,]+)$/),it){ut=it[1].trim(),Rt=parseInt(it[2].replace(/,/g,""));const wt=be(ut,Rt);Fe.push({name:ut,quantity:Rt,...wt});continue}if(it=Ke.match(/^(.+?)\s*-\s*([\d,]+)$/),it){ut=it[1].trim(),Rt=parseInt(it[2].replace(/,/g,""));const wt=be(ut,Rt);Fe.push({name:ut,quantity:Rt,...wt});continue}if(it=Ke.match(/^(.+?)\s+([\d,]+)$/),it){ut=it[1].trim(),Rt=parseInt(it[2].replace(/,/g,""));const wt=be(ut,Rt);Fe.push({name:ut,quantity:Rt,...wt});continue}if(it=Ke.match(/^(.+?)\s+(\d+)$/),it){ut=it[1].trim(),Rt=parseInt(it[2]);const wt=be(ut,Rt);Fe.push({name:ut,quantity:Rt,...wt});continue}if(Ke.length>2&&!Ke.match(/^\d+$/)){ut=Ke.trim(),Rt=0;const wt=be(ut,Rt);Fe.push({name:ut,quantity:Rt,...wt})}}return Fe},j=_e=>{const Fe={name:null,isPlanetary:null,confidence:"low"},Ve=_e.split(`
`).map(ut=>ut.trim());let Ke=0,it=0;for(const ut of Ve){const Rt=ut.toLowerCase();if(Rt.includes("orbital construction site:")){const wt=ut.match(/ORBITAL CONSTRUCTION SITE:\s*(.+)/i);wt&&(Fe.name=wt[1].trim(),Fe.isPlanetary=!1,Fe.confidence="high",Ke=3,it=3)}if(Rt.includes("planetary construction site:")){const wt=ut.match(/PLANETARY CONSTRUCTION SITE:\s*(.+)/i);wt&&(Fe.name=wt[1].trim(),Fe.isPlanetary=!0,Fe.confidence="high",Ke=3,it=3)}if(Rt.includes("construction site:")&&!Fe.name){const wt=ut.match(/CONSTRUCTION SITE:\s*(.+)/i);wt&&(Fe.name=wt[1].trim(),Ke=2,Fe.confidence==="low"&&(Fe.confidence="medium"))}if(Rt.includes("terminal")&&!Fe.name){const wt=ut.match(/(\w+)\s+TERMINAL/i);wt&&(Fe.name=wt[1]+" Terminal",Ke=2,Fe.isPlanetary===null&&(Fe.isPlanetary=!1,it=1),Fe.confidence==="low"&&(Fe.confidence="medium"))}!Fe.name&&ut.length>5&&ut.length<50&&!ut.includes(":")&&!ut.includes("-")&&!/\d/.test(ut)&&(Ke=1,Fe.confidence==="low"&&(Fe.name=ut)),(Rt.includes("planetary")||Rt.includes("surface")||Rt.includes("ground"))&&(Fe.isPlanetary=!0,it=Math.max(it,2)),(Rt.includes("orbital")||Rt.includes("space station")||Rt.includes("station"))&&(Fe.isPlanetary=!1,it=Math.max(it,2)),(Rt.includes("moon")||Rt.includes("planet"))&&(Fe.isPlanetary=!0,it=Math.max(it,1)),(Rt.includes("dock")||Rt.includes("port"))&&(Fe.isPlanetary=!1,it=Math.max(it,1))}return Ke>=3&&it>=3?Fe.confidence="high":Ke>=2||it>=2?Fe.confidence="medium":Fe.confidence="low",Fe},Ee=_e=>{l.value=_e},ne=()=>{l.value=null},pe=(_e,Fe)=>{const Ve=o.value.sites.find(Ke=>Ke.id===_e);Ve&&Ve.images&&(Ve.images[Fe].preview&&URL.revokeObjectURL(Ve.images[Fe].preview),Ve.images.splice(Fe,1))},ae=()=>{n.value=!n.value},xe=_e=>{const Fe=o.value.sites.find(Ve=>Ve.id===_e);Fe&&(Fe.imagesExpanded=!Fe.imagesExpanded)},Le=_e=>{if(!_e.confidence)return"bg-gray-50 hover:bg-gray-100";switch(_e.confidence){case"high":return"bg-green-50 hover:bg-green-100 border-l-2 border-green-400";case"medium":return"bg-yellow-50 hover:bg-yellow-100 border-l-2 border-yellow-400";case"low":return"bg-red-50 hover:bg-red-100 border-l-2 border-red-400";default:return"bg-gray-50 hover:bg-gray-100"}},nt=_e=>{switch(_e){case"high":return"bg-green-500 text-white";case"medium":return"bg-yellow-500 text-white";case"low":return"bg-red-500 text-white";default:return"bg-gray-500 text-white"}},H=(_e,Fe)=>!_e.issues||_e.issues.length===0?"border-gray-300 focus:ring-blue-500 focus:border-blue-500":Fe==="quantity"&&(_e.issues.includes("invalid_quantity")||_e.issues.includes("suspicious_quantity"))?"border-red-300 focus:ring-red-500 focus:border-red-500 bg-red-50":Fe==="name"&&(_e.issues.includes("too_short")||_e.issues.includes("too_long")||_e.issues.includes("special_characters"))?"border-yellow-300 focus:ring-yellow-500 focus:border-yellow-500 bg-yellow-50":"border-gray-300 focus:ring-blue-500 focus:border-blue-500",w=_e=>{if(!_e.issues||_e.issues.length===0)return"Valid commodity";const Fe={invalid_quantity:"Invalid or missing quantity",suspicious_quantity:"Quantity seems unusually high",too_short:"Name is too short",too_long:"Name is too long",special_characters:"Contains special characters"};return`Needs review: ${_e.issues.map(Ke=>Fe[Ke]||Ke).join(", ")}`},Q=_e=>{const Fe={id:z++,name:"",isPlanetary:!1,commodities:[]};_e.siteInfo&&(_e.siteInfo.name&&(Fe.name=_e.siteInfo.name),_e.siteInfo.isPlanetary!==null&&(Fe.isPlanetary=_e.siteInfo.isPlanetary)),_e.commodities&&(Fe.commodities=_e.commodities.map(Ve=>({name:Ve.name,quantity:Ve.quantity}))),o.value.sites.push(Fe)},re=Ze(()=>I.value.some(_e=>_e.commodities&&_e.commodities.length>0)),A=_e=>{const Fe=I.value[_e];Fe.preview&&URL.revokeObjectURL(Fe.preview),I.value.splice(_e,1)},k=()=>{I.value.forEach(_e=>{_e.preview&&URL.revokeObjectURL(_e.preview)}),I.value=[]},T=(_e,Fe)=>{const Ve=I.value[_e];Ve&&Ve.commodities&&Ve.commodities.splice(Fe,1)},G=_e=>{switch(_e.confidence){case"high":return"bg-green-50 border border-green-200";case"medium":return"bg-yellow-50 border border-yellow-200";case"low":default:return"bg-red-50 border border-red-200"}},ee=_e=>{switch(_e.confidence){case"high":return"text-green-900";case"medium":return"text-yellow-900";case"low":default:return"text-red-900"}},P=_e=>{switch(_e){case"high":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":default:return"bg-red-100 text-red-800"}},B=()=>{const _e=I.value.filter(Fe=>!Fe.commodities||Fe.commodities.length===0?!1:(Fe.commodities=Fe.commodities.filter(be),Fe.commodities.length>0));if(_e.length===0){alert("No valid commodities found. Please check your data.");return}_e.forEach(Fe=>{const Ve={id:z++,name:"",isPlanetary:!1,commodities:[]};Fe.siteInfo&&(Fe.siteInfo.name&&(Ve.name=Fe.siteInfo.name),Fe.siteInfo.isPlanetary!==null&&(Ve.isPlanetary=Fe.siteInfo.isPlanetary)),Ve.commodities=Fe.commodities.map(Ke=>({name:Ke.name,quantity:Ke.quantity})),o.value.sites.push(Ve)}),closeSiteOCRDialog()},V=()=>{let _e="";_e+=`System: ${o.value.systemName}
`,_e+=`Distance: ${o.value.distanceFromSol} light years

`,_e+=`Sites:
`,o.value.sites.forEach((Fe,Ve)=>{_e+=`  Site ${Ve+1}: ${Fe.name}
`,_e+=`    Type: ${Fe.isPlanetary?"Planetary":"Orbital"}
`,_e+=`    Commodities:
`,Fe.commodities.forEach(Ke=>{_e+=`      - ${Ke.name}: ${Ke.quantity}
`}),_e+=`
`}),s.value=_e},X=async _e=>{try{await navigator.clipboard.writeText(_e)}catch(Fe){console.error("Failed to copy text:",Fe)}},fe=()=>{const _e={system:o.value.systemName||null,distance:o.value.distanceFromSol||0,sites:[]};return _e.sites=o.value.sites.map(Fe=>({name:Fe.name,type:Fe.isPlanetary?"Planetary":"Orbital",commodities:Fe.commodities.map(Ve=>[Ve.name,Ve.quantity])})),_e},Se=_e=>{let Fe=`# System & Site Data Export
# Generated: ${new Date().toLocaleString()}
# Commodity format: [name, quantity]

system: ${_e.system?`"${_e.system}"`:"null"}
distance: ${_e.distance}

sites:
`;return _e.sites.forEach((Ve,Ke)=>{Fe+=`  - name: "${Ve.name}"
    type: "${Ve.type}"
    commodities:
`,Ve.commodities.forEach((it,ut)=>{Fe+=`      - ["${it[0]}", ${it[1]}]
`})}),Fe},ke=async()=>{try{const _e=fe(),Fe=Se(_e);await X(Fe),alert("Data copied as YAML to clipboard!")}catch(_e){console.error("Failed to copy YAML:",_e),alert("Failed to copy YAML. Please try again.")}},Ne=_e=>_e.replace("$","").replace("_name;",""),xt=()=>{i.value=!1},bt=()=>{var _e;(_e=u.value)==null||_e.click()},Ot=_e=>{console.log("Journal file select triggered");const Fe=Array.from(_e.target.files);console.log("Files selected:",Fe.length,Fe),oo(Fe)},lt=_e=>{d.value=!1;const Fe=Array.from(_e.dataTransfer.files);oo(Fe)},oo=async _e=>{if(_e.length!==0){h.value=!0,f.value=`Processing ${_e.length} journal file(s)...`;try{const Ve=(await Promise.all(_e.map(ut=>new Promise(Rt=>{const wt=new FileReader;wt.onload=Zo=>Rt(Zo.target.result),wt.readAsText(ut)})))).flatMap(ut=>ut.split(`
`)),Ke=co(Ve),it=new Map;Ke.forEach(ut=>{it.has(ut.StarSystem)||it.set(ut.StarSystem,{systemName:ut.StarSystem,sites:[]}),it.get(ut.StarSystem).sites.push(ut)}),v.value=Array.from(it.values()),f.value=`Found ${v.value.length} system(s) with construction sites`,console.log("Parsed systems:",v.value)}catch(Fe){console.error("Error processing journal files:",Fe),f.value="Error processing files: "+Fe.message}finally{h.value=!1}}},co=_e=>{console.log("Processing lines:",_e.length);const Fe=_e.map(wt=>{try{return JSON.parse(wt)}catch{return null}}).filter(Boolean);console.log("Parsed JSON entries:",Fe.length);const Ve=new Set,Ke=[];let it=null,ut=0,Rt=0;for(const wt of Fe)if(wt.event==="Docked")it=wt,ut++,console.log("Found Docked event:",wt.StationName,"in",wt.StarSystem);else if(wt.event==="ColonisationConstructionDepot"&&(Rt++,console.log("Found ColonisationConstructionDepot event:",wt.MarketID),it&&wt.MarketID===it.MarketID&&!Ve.has(wt.MarketID))){Ve.add(wt.MarketID);const Zo=(wt.ResourcesRequired||[]).map(Ri=>{const Uo=Ne(Ri.Name),ct=Ri.RequiredAmount;return{name:de[Uo]||Uo,quantity:ct}}),xi={StationName:it.StationName.replace(/\$EXT_PANEL_ColonisationShip;\s*/,"System Colonisation Ship: "),StarSystem:it.StarSystem,MarketID:wt.MarketID,DistFromStarLS:it.DistFromStarLS,ConstructionProgress:`${(wt.ConstructionProgress*100).toFixed(2)}%`,ConstructionComplete:wt.ConstructionComplete,Commodities:Zo,LocalTotal:Zo.reduce((Ri,Uo)=>Ri+Uo.quantity,0)};console.log("Adding construction site:",xi.StationName,xi.StarSystem),Ke.push(xi)}return console.log("Total Docked events:",ut),console.log("Total ColonisationConstructionDepot events:",Rt),console.log("Total matched construction sites:",Ke.length),Ke},Dt=async _e=>{if(o.value.systemName&&o.value.systemName!==_e.systemName)if(confirm(`You currently have data for "${o.value.systemName}".

Do you want to clear all data and start with "${_e.systemName}"?

Click OK to clear and start fresh, or Cancel to keep current data.`))$t(!1);else return;o.value.systemName||(o.value.systemName=_e.systemName),_e.sites.forEach(Fe=>{const Ve=o.value.sites.find(Ke=>Ke.marketId===Fe.MarketID);if(Ve)Fe.Commodities.forEach(Ke=>{const it=Ve.commodities.find(ut=>ut.name===Ke.name);it?it.quantity+=Ke.quantity:Ve.commodities.push({name:Ke.name,quantity:Ke.quantity})});else{const Ke={id:z++,name:Fe.StationName,isPlanetary:!1,commodities:Fe.Commodities.map(it=>({name:it.name,quantity:it.quantity})),images:[],imagesExpanded:!1,marketId:Fe.MarketID,distFromStarLS:Fe.DistFromStarLS,constructionProgress:Fe.ConstructionProgress,constructionComplete:Fe.ConstructionComplete};o.value.sites.push(Ke)}}),xt()},$t=(_e=!0)=>{_e&&!confirm(`Are you sure you want to clear all data?

This will remove the system name, all sites, and all commodities.`)||(o.value.sites.forEach(Fe=>{Fe.images&&Fe.images.forEach(Ve=>{Ve.preview&&URL.revokeObjectURL(Ve.preview)})}),o.value.systemName="",o.value.distanceFromSol=0,o.value.sites=[],s.value="")},St=()=>{v.value=[],f.value=""};Xt(()=>{F().catch(console.error)}),Rn(async()=>{await Y(),o.value.sites.forEach(_e=>{_e.images&&_e.images.forEach(Fe=>{Fe.preview&&URL.revokeObjectURL(Fe.preview)})}),I.value.forEach(_e=>{_e.preview&&URL.revokeObjectURL(_e.preview)})});const vo={systemData:o,showOCRPanel:n,showJournalDialog:i,generatedData:s,isCalculatingDistance:r,distanceCalculationError:a,viewingImage:l,journalDropZone:c,journalFileInput:u,isJournalDragOver:d,isProcessingJournal:h,journalProcessingStatus:f,parsedSystems:v,dropZone:m,fileInput:b,isDragOver:S,isProcessing:R,processingStatus:_,currentProgress:M,processedImages:I,get worker(){return W},set worker(_e){W=_e},get nextSiteId(){return z},set nextSiteId(_e){z=_e},commodityNameMap:de,addSite:K,removeSite:O,addSiteCommodity:ie,removeSiteCommodity:N,calculateDistanceFromSol:oe,initWorker:F,cleanupWorker:Y,triggerFileInput:J,handleFileSelect:L,handleDrop:ce,pasteFromClipboard:U,processFiles:le,createSiteFromOCRImage:q,processImage:se,validateCommodity:be,parseCommoditiesFromText:ue,extractSiteInfoFromText:j,viewImage:Ee,closeImageViewer:ne,removeSiteImage:pe,toggleOCRPanel:ae,toggleSiteImages:xe,getCommodityRowClass:Le,getValidationIndicatorClass:nt,getCommodityInputClass:H,getValidationTooltip:w,handleSiteOCR:Q,hasValidCommodities:re,removeImage:A,clearAll:k,removeCommodity:T,getSiteInfoClass:G,getSiteInfoTextClass:ee,getConfidenceClass:P,applyToSites:B,generateData:V,copyToClipboard:X,convertToYAML:fe,formatYAML:Se,copyAsYAML:ke,stripName:Ne,closeJournalDialog:xt,triggerJournalFileInput:bt,handleJournalFileSelect:Ot,handleJournalDrop:lt,processJournalFiles:oo,processLogLines:co,selectSystem:Dt,clearAllData:$t,clearJournalData:St,ref:De,computed:Ze,onMounted:Xt,onUnmounted:Rn,get createWorker(){return Iu.createWorker}};return Object.defineProperty(vo,"__isScriptSetup",{enumerable:!1,value:!0}),vo}},CJ={class:"bg-white rounded-lg p-8 mb-8 shadow-md"},bJ={class:"space-y-4"},wJ={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},SJ={class:"space-y-2"},xJ={key:0,class:"mt-1"},RJ=["href"],_J={class:"space-y-2"},EJ={class:"flex space-x-2"},PJ=["disabled"],FJ={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},DJ={key:1,class:"mr-2"},TJ={key:0,class:"text-sm text-red-600"},kJ={class:"space-y-4"},AJ={class:"flex justify-between items-center"},IJ={class:"flex space-x-2"},MJ=["disabled"],OJ={key:0,class:"text-center py-8 text-gray-500"},LJ={key:1,class:"space-y-4"},BJ={class:"flex justify-between items-start mb-4"},NJ={class:"text-md font-medium text-gray-900"},HJ={class:"flex space-x-2"},GJ=["onClick"],VJ={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},zJ={class:"space-y-2"},WJ=["for"],UJ=["id","onUpdate:modelValue"],$J={class:"space-y-2"},jJ=["for"],KJ=["id","onUpdate:modelValue"],qJ={key:0,class:"mb-4"},QJ={class:"flex items-center justify-between mb-2"},YJ={class:"block text-sm font-medium text-gray-700"},JJ=["onClick"],ZJ={class:"flex flex-wrap gap-2"},XJ=["src","alt","onClick"],eZ=["onClick"],tZ=["onClick"],oZ={class:"text-sm text-gray-600"},nZ={class:"space-y-2"},iZ={class:"flex justify-between items-center"},sZ={class:"flex space-x-2"},rZ=["onClick"],aZ={class:"text-sm text-gray-500"},lZ={key:0,class:"text-center py-4 text-gray-500 bg-gray-50 rounded"},cZ={key:1,class:"space-y-2"},uZ=["title"],dZ=["onUpdate:modelValue"],hZ=["onUpdate:modelValue"],fZ=["onClick"],pZ={key:0,class:"border-2 border-green-200 rounded-lg p-6 bg-green-50"},gZ={class:"mb-4"},mZ={class:"mb-4"},vZ={class:"flex items-center space-x-4"},yZ=["disabled"],CZ={key:0},bZ={class:"bg-green-100 border border-green-200 rounded-lg p-4"},wZ={class:"flex items-center space-x-3"},SZ={class:"text-sm text-green-700"},xZ={key:0,class:"mt-3"},RZ={class:"w-full bg-green-200 rounded-full h-2"},_Z={class:"text-xs text-green-600 mt-1"},EZ={key:0,class:"mt-8 p-6 bg-gray-50 rounded-lg"},PZ={class:"bg-white p-4 rounded-lg shadow-sm mb-4"},FZ={class:"whitespace-pre-wrap font-mono text-sm"},DZ={class:"flex flex-wrap gap-2"},TZ={class:"max-w-4xl max-h-[90vh] overflow-auto"},kZ=["src"],AZ={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},IZ={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto"},MZ={class:"mb-6"},OZ={key:0,class:"mb-6"},LZ={class:"bg-purple-50 border border-purple-200 rounded-lg p-4"},BZ={class:"flex items-center space-x-3"},NZ={class:"text-sm text-purple-700"},HZ={key:1,class:"space-y-4"},GZ={class:"space-y-3"},VZ={class:"flex justify-between items-start"},zZ={class:"flex-1"},WZ={class:"font-medium text-gray-900"},UZ={class:"text-sm text-gray-600"},$Z={class:"mt-2 text-xs text-gray-500"},jZ=["onClick"],KZ={key:2,class:"mt-6 flex justify-end space-x-3"};function qZ(e,t,o,n,i,s){return ge(),me("div",CJ,[t[49]||(t[49]=y("div",{class:"mb-6"},[y("div",{class:"flex justify-between items-center"},[y("div",null,[y("h2",{class:"text-2xl font-bold text-gray-900"},"System & Site Data Capture"),y("p",{class:"text-gray-600 mt-1"}," Capture system information and site data with OCR support. ")])])],-1)),y("form",{onSubmit:Qt(n.generateData,["prevent"]),class:"max-w-4xl mx-auto space-y-6"},[we(" System Information "),y("div",bJ,[t[14]||(t[14]=y("h3",{class:"text-lg font-medium text-gray-900"},"System Information",-1)),y("div",wJ,[y("div",SJ,[t[11]||(t[11]=y("label",{for:"systemName",class:"block text-sm font-medium text-gray-700"}," System Name ",-1)),Xe(y("input",{type:"text",id:"systemName","onUpdate:modelValue":t[0]||(t[0]=r=>n.systemData.systemName=r),placeholder:"Enter system name",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.systemData.systemName]]),n.systemData.systemName?(ge(),me("div",xJ,[y("a",{href:"https://www.edsm.net/en/system?systemName="+encodeURIComponent(n.systemData.systemName),target:"_blank",class:"text-sm text-blue-600 hover:text-blue-800 hover:underline"}," Look up distances for "+ye(n.systemData.systemName)+" on EDSM ",9,RJ)])):we("v-if",!0)]),y("div",_J,[t[13]||(t[13]=y("label",{for:"systemDistance",class:"block text-sm font-medium text-gray-700"}," System Distance (light years) ",-1)),y("div",EJ,[Xe(y("input",{type:"number",id:"systemDistance","onUpdate:modelValue":t[1]||(t[1]=r=>n.systemData.distanceFromSol=r),placeholder:"Enter distance from Sol",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[dt,n.systemData.distanceFromSol,void 0,{number:!0}]]),y("button",{type:"button",onClick:n.calculateDistanceFromSol,disabled:!n.systemData.systemName||n.isCalculatingDistance,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center"},[n.isCalculatingDistance?(ge(),me("span",FJ)):(ge(),me("span",DJ,"📏")),t[12]||(t[12]=so(" Calculate "))],8,PJ)]),n.distanceCalculationError?(ge(),me("div",TJ,ye(n.distanceCalculationError),1)):we("v-if",!0)])])]),we(" Sites Section "),y("div",kJ,[y("div",AJ,[t[19]||(t[19]=y("h3",{class:"text-lg font-medium text-gray-900"},"Sites",-1)),y("div",IJ,[y("button",{type:"button",onClick:t[2]||(t[2]=r=>n.showJournalDialog=!0),class:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center"},t[15]||(t[15]=[y("span",{class:"mr-2"},"📄",-1),so(" Upload Journal ")])),y("button",{type:"button",onClick:n.toggleOCRPanel,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center"},[t[16]||(t[16]=y("span",{class:"mr-2"},"📷",-1)),so(" "+ye(n.showOCRPanel?"Hide OCR":"OCR Sites"),1)]),y("button",{type:"button",onClick:n.addSite,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center"},t[17]||(t[17]=[y("span",{class:"mr-2"},"+",-1),so(" Add Site ")])),y("button",{type:"button",onClick:n.clearAllData,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors flex items-center",disabled:n.systemData.sites.length===0&&!n.systemData.systemName},t[18]||(t[18]=[y("span",{class:"mr-2"},"🗑️",-1),so(" Clear All ")]),8,MJ)])]),we(" Sites List "),!n.systemData.sites||n.systemData.sites.length===0?(ge(),me("div",OJ,t[20]||(t[20]=[y("p",null,'No sites added yet. Click "Add Site" to get started.',-1)]))):(ge(),me("div",LJ,[(ge(!0),me(Ct,null,Tt(n.systemData.sites,(r,a)=>(ge(),me("div",{key:r.id,class:"border rounded-lg p-4"},[y("div",BJ,[y("h4",NJ," Site "+ye(a+1),1),y("div",HJ,[y("button",{type:"button",onClick:l=>n.removeSite(r.id),class:"px-3 py-1 text-sm bg-red-100 text-red-800 rounded hover:bg-red-200 transition-colors"}," Remove ",8,GJ)])]),we(" Site Details "),y("div",VJ,[y("div",zJ,[y("label",{for:`siteName-${r.id}`,class:"block text-sm font-medium text-gray-700"}," Site Name ",8,WJ),Xe(y("input",{type:"text",id:`siteName-${r.id}`,"onUpdate:modelValue":l=>r.name=l,placeholder:"Enter site name",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,UJ),[[dt,r.name]])]),y("div",$J,[y("label",{for:`siteType-${r.id}`,class:"block text-sm font-medium text-gray-700"}," Site Type ",8,jJ),Xe(y("select",{id:`siteType-${r.id}`,"onUpdate:modelValue":l=>r.isPlanetary=l,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[21]||(t[21]=[y("option",{value:!1},"Orbital",-1),y("option",{value:!0},"Planetary",-1)])],8,KJ),[[Wo,r.isPlanetary]])])]),we(" Site Images "),r.images&&r.images.length>0?(ge(),me("div",qJ,[y("div",QJ,[y("label",YJ," Attached Images ("+ye(r.images.length)+") ",1),y("button",{type:"button",onClick:l=>n.toggleSiteImages(r.id),class:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors"},ye(r.imagesExpanded?"Collapse":"Expand"),9,JJ)]),y("div",ZJ,[(ge(!0),me(Ct,null,Tt(r.imagesExpanded?r.images:r.images.slice(0,3),(l,c)=>(ge(),me("div",{key:c,class:"relative group"},[y("img",{src:l.preview,alt:`Site image ${c+1}`,class:Ft([r.imagesExpanded?"w-48 h-48":"w-20 h-20","object-cover rounded border border-gray-300 cursor-pointer hover:border-blue-500 transition-all"]),onClick:u=>n.viewImage(l.preview)},null,10,XJ),y("button",{type:"button",onClick:u=>n.removeSiteImage(r.id,c),class:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove image"}," × ",8,eZ)]))),128)),!r.imagesExpanded&&r.images.length>3?(ge(),me("div",{key:0,class:"w-20 h-20 flex items-center justify-center bg-gray-100 rounded border border-gray-300 cursor-pointer hover:bg-gray-200 transition-colors",onClick:l=>n.toggleSiteImages(r.id)},[y("span",oZ,"+"+ye(r.images.length-3),1)],8,tZ)):we("v-if",!0)])])):we("v-if",!0),we(" Site Commodities "),y("div",nZ,[y("div",iZ,[t[22]||(t[22]=y("label",{class:"block text-sm font-medium text-gray-700"}," Commodities ",-1)),y("div",sZ,[y("button",{type:"button",onClick:l=>n.addSiteCommodity(r.id),class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"}," Add Commodity ",8,rZ),y("span",aZ,ye(r.commodities.length)+" items ",1)])]),r.commodities.length===0?(ge(),me("div",lZ,[...t[23]||(t[23]=[y("p",{class:"text-sm"}," No commodities added yet. Use OCR or add manually. ",-1)])])):(ge(),me("div",cZ,[(ge(!0),me(Ct,null,Tt(r.commodities,(l,c)=>(ge(),me("div",{key:c,class:Ft(["flex items-center space-x-2 p-2 rounded transition-colors",n.getCommodityRowClass(l)])},[we(" Validation Indicator "),l.confidence?(ge(),me("div",{key:0,class:Ft(["flex-shrink-0 w-6 h-6 flex items-center justify-center rounded-full text-xs font-bold",n.getValidationIndicatorClass(l.confidence)]),title:n.getValidationTooltip(l)},ye(l.confidence==="high"?"✓":l.confidence==="medium"?"!":"?"),11,uZ)):we("v-if",!0),we(" Commodity Name "),Xe(y("input",{"onUpdate:modelValue":u=>l.name=u,type:"text",class:Ft(["flex-1 px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1",n.getCommodityInputClass(l,"name")]),placeholder:"Commodity name"},null,10,dZ),[[dt,l.name]]),we(" Quantity "),Xe(y("input",{"onUpdate:modelValue":u=>l.quantity=u,type:"number",min:"1",class:Ft(["w-20 px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1",n.getCommodityInputClass(l,"quantity")]),placeholder:"Qty"},null,10,hZ),[[dt,l.quantity,void 0,{number:!0}]]),we(" Remove Commodity "),y("button",{type:"button",onClick:u=>n.removeSiteCommodity(r.id,c),class:"px-2 py-1 text-xs text-red-600 hover:text-red-800 hover:bg-red-50 rounded transition-colors",title:"Remove commodity"}," × ",8,fZ)],2))),128))]))])]))),128))]))]),we(" OCR Panel (Collapsible) "),n.showOCRPanel?(ge(),me("div",pZ,[t[29]||(t[29]=y("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"OCR Image Processing",-1)),we(" Image Upload Area "),y("div",gZ,[y("div",{ref:"dropZone",class:Ft(["border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-green-400 transition-colors cursor-pointer bg-white",{"border-green-400 bg-green-50":n.isDragOver}]),onClick:n.triggerFileInput,onDragover:t[3]||(t[3]=Qt(r=>n.isDragOver=!0,["prevent"])),onDragleave:t[4]||(t[4]=Qt(r=>n.isDragOver=!1,["prevent"])),onDrop:Qt(n.handleDrop,["prevent"])},t[24]||(t[24]=[Hn('<div class="flex items-center justify-center space-x-3" data-v-a9f87740><div class="text-2xl text-gray-400" data-v-a9f87740>📷</div><div class="text-left" data-v-a9f87740><p class="text-sm font-medium text-gray-900" data-v-a9f87740> Drop images here or click to browse </p><p class="text-xs text-gray-500" data-v-a9f87740> PNG, JPG, GIF, WebP - Auto-creates sites </p></div><button type="button" class="px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors" data-v-a9f87740> Choose Files </button></div>',1)]),34),y("input",{ref:"fileInput",type:"file",multiple:"",accept:"image/*",class:"hidden",onChange:n.handleFileSelect},null,544)]),we(" Clipboard Paste Area "),y("div",mZ,[y("div",vZ,[y("button",{type:"button",onClick:n.pasteFromClipboard,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center",disabled:n.isProcessing},t[25]||(t[25]=[y("span",{class:"mr-2"},"📋",-1),so(" Paste from Clipboard ")]),8,yZ),t[26]||(t[26]=y("span",{class:"text-sm text-gray-500"},"Paste images directly from your clipboard",-1))])]),we(" Processing Status "),n.isProcessing?(ge(),me("div",CZ,[y("div",bZ,[y("div",wZ,[t[28]||(t[28]=y("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600"},null,-1)),y("div",null,[t[27]||(t[27]=y("p",{class:"font-medium text-green-900"},"Processing Images...",-1)),y("p",SZ,ye(n.processingStatus),1)])]),n.currentProgress>0?(ge(),me("div",xZ,[y("div",RZ,[y("div",{class:"bg-green-600 h-2 rounded-full transition-all duration-300",style:Sl({width:`${n.currentProgress}%`})},null,4)]),y("p",_Z,ye(n.currentProgress)+"% complete ",1)])):we("v-if",!0)])])):we("v-if",!0)])):we("v-if",!0),t[30]||(t[30]=y("button",{type:"submit",class:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Generate Data ",-1))],32),we(" Generated Data Display "),n.generatedData?(ge(),me("div",EZ,[t[31]||(t[31]=y("h3",{class:"text-xl font-semibold text-gray-900 mb-4"},"Generated Data",-1)),y("div",PZ,[y("pre",FZ,ye(n.generatedData),1)]),y("div",DZ,[y("button",{class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",onClick:t[5]||(t[5]=r=>n.copyToClipboard(n.generatedData))}," Copy to Clipboard "),y("button",{class:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",onClick:n.copyAsYAML}," Copy as YAML ")])])):we("v-if",!0),we(" Image Viewer Modal "),n.viewingImage?(ge(),me("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:n.closeImageViewer},[y("div",TZ,[y("img",{src:n.viewingImage,alt:"Full size image",class:"w-full h-auto"},null,8,kZ)])])):we("v-if",!0),we(" Old Site OCR Dialog (will be removed) "),we("v-if",!0),we(" Journal Upload Dialog "),n.showJournalDialog?(ge(),me("div",AZ,[y("div",IZ,[y("div",{class:"flex justify-between items-center mb-4"},[t[44]||(t[44]=y("h3",{class:"text-xl font-semibold"},"Journal File Processing",-1)),y("button",{onClick:n.closeJournalDialog,class:"text-gray-500 hover:text-gray-700"},t[43]||(t[43]=[y("span",{class:"text-2xl"},"×",-1)]))]),we(" Journal File Upload Area "),y("div",MZ,[y("div",{ref:"journalDropZone",class:Ft(["border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-purple-400 transition-colors cursor-pointer",{"border-purple-400 bg-purple-50":n.isJournalDragOver}]),onClick:n.triggerJournalFileInput,onDragover:t[9]||(t[9]=Qt(r=>n.isJournalDragOver=!0,["prevent"])),onDragleave:t[10]||(t[10]=Qt(r=>n.isJournalDragOver=!1,["prevent"])),onDrop:Qt(n.handleJournalDrop,["prevent"])},t[45]||(t[45]=[Hn('<div class="flex items-center justify-center space-x-3" data-v-a9f87740><div class="text-3xl text-gray-400" data-v-a9f87740>📄</div><div class="text-left" data-v-a9f87740><p class="text-lg font-medium text-gray-900" data-v-a9f87740> Drop journal files here or click to browse </p><p class="text-sm text-gray-500" data-v-a9f87740> Journal files (.log) from Elite Dangerous </p></div><button type="button" class="px-4 py-2 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors" data-v-a9f87740> Choose Files </button></div>',1)]),34),y("input",{ref:"journalFileInput",type:"file",multiple:"",accept:".log",class:"hidden",onChange:n.handleJournalFileSelect},null,544)]),we(" Processing Status "),n.isProcessingJournal?(ge(),me("div",OZ,[y("div",LZ,[y("div",BZ,[t[47]||(t[47]=y("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"},null,-1)),y("div",null,[t[46]||(t[46]=y("p",{class:"font-medium text-purple-900"}," Processing Journal Files... ",-1)),y("p",NZ,ye(n.journalProcessingStatus),1)])])])])):we("v-if",!0),we(" Parsed Systems "),n.parsedSystems.length>0?(ge(),me("div",HZ,[t[48]||(t[48]=y("h4",{class:"text-lg font-medium text-gray-900"},"Available Systems",-1)),y("div",GZ,[(ge(!0),me(Ct,null,Tt(n.parsedSystems,(r,a)=>(ge(),me("div",{key:a,class:"border rounded-lg p-4 hover:bg-gray-50 transition-colors"},[y("div",VZ,[y("div",zZ,[y("h5",WZ,ye(r.systemName),1),y("p",UZ,ye(r.sites.length)+" construction site(s) found ",1),y("div",$Z,[(ge(!0),me(Ct,null,Tt(r.sites,l=>(ge(),me("div",{key:l.MarketID,class:"flex justify-between"},[y("span",null,ye(l.StationName),1),y("span",null,ye(l.ConstructionProgress),1)]))),128))])]),y("button",{onClick:l=>n.selectSystem(r),class:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors"}," Select System ",8,jZ)])]))),128))])])):we("v-if",!0),we(" Action Buttons "),n.parsedSystems.length>0?(ge(),me("div",KZ,[y("button",{onClick:n.clearJournalData,class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors"}," Clear Data ")])):we("v-if",!0)])])):we("v-if",!0)])}const QZ=To(yJ,[["render",qZ],["__scopeId","data-v-a9f87740"],["__file","/app/src/js/components/SystemSiteDataCapture.vue"]]),YZ=[{path:"/",redirect:"/workspace"},{path:"/workspace",name:"Workspace",component:()=>oi(()=>import("./WorkspaceManager-BgxfzS8r.js"),__vite__mapDeps([0,1])),meta:{helpId:"workspace"},children:[{path:"quote/new",name:"New Quote",component:RC},{path:"quote/:quoteId",name:"Workspace Quote",component:RC},{path:"transfer/:calculatorId",name:"Workspace Transfer",component:qj}]},{path:"/order",name:"Order Management",component:y9,meta:{helpId:"orderManager"},children:[{path:"",name:"Order List",component:()=>oi(()=>import("./OrderList-BeDSpks6.js"),__vite__mapDeps([2,3]))},{path:"new",name:"New Order",component:()=>oi(()=>import("./OrderCreate-_vKvCVxe.js"),__vite__mapDeps([4,5]))},{path:":orderId",name:"Order Details",component:()=>oi(()=>import("./OrderDetails-DVgBcoUi.js"),__vite__mapDeps([6,7,8,9]))},{path:":orderId/jobs/new",name:"New Job",component:()=>oi(()=>import("./JobForm-D691dwyr.js"),__vite__mapDeps([10,11]))},{path:":orderId/jobs/:jobId",name:"Job Details",component:()=>oi(()=>import("./JobDetails-DIsPz3iW.js"),__vite__mapDeps([12,7,8,13,14]))},{path:":orderId/site/new",name:"New Site",component:()=>oi(()=>import("./SiteManagement-B_6BKGO3.js"),__vite__mapDeps([15,13,7,8,16]))},{path:":orderId/site/:siteId/edit",name:"Edit Site",component:()=>oi(()=>import("./SiteManagement-B_6BKGO3.js"),__vite__mapDeps([15,13,7,8,16]))},{path:"ledger",name:"Ledger Visualization",component:()=>oi(()=>import("./LedgerTable-DQ3fiWRS.js"),__vite__mapDeps([17,18]))}]},{path:"/jump",name:"Jump Calculator",component:g7,meta:{helpId:"jumpCalculator"}},{path:"/channel",name:"Channel Helper",component:k7,meta:{helpId:"channelHelper"}},{path:"/delivery",name:"Delivery Tracker",component:JK,meta:{helpId:"deliveryTracker"}},{path:"/templates",name:"Message Templates",component:dY,meta:{helpId:"messageTemplate"}},{path:"/discord",name:"Discord Management",component:vJ,meta:{helpId:"discordManager"}},{path:"/admin",name:"State Admin",component:rQ},{path:"/system-site-capture",name:"System & Site Data Capture",component:QZ,meta:{helpId:"systemSiteCapture"}}],JZ=oD({history:hF(),routes:YZ}),rd=SP(uA);rd.config.errorHandler=(e,t,o)=>{console.error("Vue Error:",e),console.error("Error Info:",o)};const tR=_k();tR.use(bA);rd.use(tR);rd.use(JZ);try{console.log("Attempting to mount Vue app..."),rd.mount("#app"),console.log("Vue app mounted successfully")}catch(e){console.error("Failed to mount Vue app:",e),document.getElementById("app").innerHTML='<p style="color: red;">Error loading application</p>'}export{Kf as A,km as B,gC as C,Pc as D,ZZ as E,Ct as F,uX as G,KU as O,RC as Q,qj as T,To as _,y as a,we as b,me as c,Wo as d,Hn as e,Tt as f,Qt as g,jt as h,Ar as i,qa as j,Ts as k,De as l,Ze as m,Ft as n,eo as o,Xt as p,ge as q,Wh as r,so as s,ye as t,Ms as u,dt as v,Xe as w,hi as x,oi as y,Sl as z};
