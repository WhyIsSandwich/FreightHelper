import{_ as L,c as n,a as t,t as d,b as p,w as _,v as O,d as V,e as M,s as f,n as v,F as z,f as N,g as j,x as I,l as x,m as Q,p as T,q as i}from"./main-B_gwUFM9.js";const U={name:"OrderList",setup(){const y=I(),e=x([]),m=x(!0),s=x(null),w=x(""),b=x("pending"),r=x(""),u=x("asc"),k=async()=>{try{m.value=!0,s.value=null;const o=await y.getAllOrders();e.value=o}catch(o){console.error("Error loading orders:",o),s.value="Failed to load orders"}finally{m.value=!1}},C=Q(()=>{let o=e.value;if(w.value){const c=w.value.toLowerCase();o=o.filter(g=>{var l,a,h;return((l=g.client_name)==null?void 0:l.toLowerCase().includes(c))||((a=g.system_name)==null?void 0:a.toLowerCase().includes(c))||((h=g.order_id)==null?void 0:h.toLowerCase().includes(c))})}return b.value&&(o=o.filter(c=>c.status===b.value)),r.value&&(o=[...o].sort((c,g)=>{let l=c[r.value],a=g[r.value];return l==null&&(l=""),a==null&&(a=""),r.value==="created_at"&&(l=new Date(l),a=new Date(a)),r.value==="order_value"&&(l=parseFloat(l)||0,a=parseFloat(a)||0),u.value==="asc"?l>a?1:l<a?-1:0:l<a?1:l>a?-1:0})),o}),F=o=>{r.value===o?u.value=u.value==="asc"?"desc":"asc":(r.value=o,u.value="asc")},S=o=>{switch(o){case"pending":return"bg-yellow-100 text-yellow-800";case"in-progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},D=o=>o?new Date(o).toLocaleDateString():"Not set",B=o=>o?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o):"$0.00";return T(()=>{k()}),{orders:e,loading:m,error:s,searchQuery:w,statusFilter:b,sortField:r,sortDirection:u,filteredOrders:C,sortBy:F,getStatusClass:S,formatDate:D,formatCurrency:B}}},A={class:"order-list"},q={key:0,class:"flex justify-center items-center h-64"},E={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},P={key:2,class:"space-y-4"},G={class:"bg-white rounded-lg p-4 shadow-sm border"},H={class:"flex flex-col sm:flex-row gap-4"},J={class:"flex-1"},K={class:"sm:w-48"},R={key:0,class:"bg-white rounded-lg shadow-sm border overflow-hidden"},W={class:"overflow-x-auto"},X={class:"min-w-full divide-y divide-gray-200"},Y={class:"bg-gray-50"},Z={class:"flex items-center gap-2"},$={class:"flex items-center gap-2"},ee={class:"flex items-center gap-2"},te={class:"flex items-center gap-2"},se={class:"flex items-center gap-2"},re={class:"bg-white divide-y divide-gray-200"},oe=["onClick"],le={class:"px-6 py-4 whitespace-nowrap"},ae={class:"text-sm font-medium text-gray-900"},ne={class:"text-sm text-gray-500 font-mono"},ie={class:"px-6 py-4 whitespace-nowrap"},de={class:"text-sm text-gray-900"},ue={class:"px-6 py-4 whitespace-nowrap"},ce={class:"text-sm font-semibold text-gray-900"},pe={class:"px-6 py-4 whitespace-nowrap"},xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ge={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},fe=["onClick"],me={key:1,class:"text-center py-12"},we={class:"text-gray-600 mb-4"};function be(y,e,m,s,w,b){return i(),n("div",A,[s.loading?(i(),n("div",q,e[8]||(e[8]=[t("div",{class:"text-gray-600"},"Loading orders...",-1)]))):s.error?(i(),n("div",E,d(s.error),1)):(i(),n("div",P,[p(" Search and Filter Controls "),t("div",G,[t("div",H,[t("div",J,[e[9]||(e[9]=t("label",{for:"search",class:"block text-sm font-medium text-gray-700 mb-2"}," Search Orders ",-1)),_(t("input",{id:"search","onUpdate:modelValue":e[0]||(e[0]=r=>s.searchQuery=r),type:"text",placeholder:"Search by client name, system, order ID...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[O,s.searchQuery]])]),t("div",K,[e[11]||(e[11]=t("label",{for:"statusFilter",class:"block text-sm font-medium text-gray-700 mb-2"}," Filter by Status ",-1)),_(t("select",{id:"statusFilter","onUpdate:modelValue":e[1]||(e[1]=r=>s.statusFilter=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[10]||(e[10]=[M('<option value="" data-v-30580d89>All Statuses</option><option value="pending" data-v-30580d89>Pending</option><option value="in-progress" data-v-30580d89>In Progress</option><option value="completed" data-v-30580d89>Completed</option><option value="cancelled" data-v-30580d89>Cancelled</option>',5)]),512),[[V,s.statusFilter]])])])]),p(" Orders Table "),s.filteredOrders.length>0?(i(),n("div",R,[t("div",W,[t("table",X,[t("thead",Y,[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:e[2]||(e[2]=r=>s.sortBy("client_name"))},[t("div",Z,[e[13]||(e[13]=f(" Client ")),s.sortField==="client_name"?(i(),n("svg",{key:0,class:v(["w-4 h-4",s.sortDirection==="asc"?"rotate-180":""]),fill:"currentColor",viewBox:"0 0 20 20"},e[12]||(e[12]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2)):p("v-if",!0)])]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:e[3]||(e[3]=r=>s.sortBy("system_name"))},[t("div",$,[e[15]||(e[15]=f(" System ")),s.sortField==="system_name"?(i(),n("svg",{key:0,class:v(["w-4 h-4",s.sortDirection==="asc"?"rotate-180":""]),fill:"currentColor",viewBox:"0 0 20 20"},e[14]||(e[14]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2)):p("v-if",!0)])]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:e[4]||(e[4]=r=>s.sortBy("order_value"))},[t("div",ee,[e[17]||(e[17]=f(" Value ")),s.sortField==="order_value"?(i(),n("svg",{key:0,class:v(["w-4 h-4",s.sortDirection==="asc"?"rotate-180":""]),fill:"currentColor",viewBox:"0 0 20 20"},e[16]||(e[16]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2)):p("v-if",!0)])]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:e[5]||(e[5]=r=>s.sortBy("status"))},[t("div",te,[e[19]||(e[19]=f(" Status ")),s.sortField==="status"?(i(),n("svg",{key:0,class:v(["w-4 h-4",s.sortDirection==="asc"?"rotate-180":""]),fill:"currentColor",viewBox:"0 0 20 20"},e[18]||(e[18]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2)):p("v-if",!0)])]),e[22]||(e[22]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Sites ",-1)),e[23]||(e[23]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Jobs ",-1)),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:e[6]||(e[6]=r=>s.sortBy("created_at"))},[t("div",se,[e[21]||(e[21]=f(" Created ")),s.sortField==="created_at"?(i(),n("svg",{key:0,class:v(["w-4 h-4",s.sortDirection==="asc"?"rotate-180":""]),fill:"currentColor",viewBox:"0 0 20 20"},e[20]||(e[20]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2)):p("v-if",!0)])]),e[24]||(e[24]=t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),t("tbody",re,[(i(!0),n(z,null,N(s.filteredOrders,r=>(i(),n("tr",{key:r.order_id,class:"hover:bg-gray-50 cursor-pointer",onClick:u=>y.$router.push(`/order/${r.order_id}`)},[t("td",le,[t("div",ae,d(r.client_name),1),t("div",ne,d(r.order_id.slice(0,8))+"... ",1)]),t("td",ie,[t("div",de,d(r.system_name),1)]),t("td",ue,[t("div",ce,d(s.formatCurrency(r.order_value)),1)]),t("td",pe,[t("span",{class:v(["px-2 py-1 text-xs font-medium rounded-full",s.getStatusClass(r.status)])},d(r.status),3)]),t("td",xe,d(r.sites?r.sites.length:0),1),t("td",ve,d(r.jobOrders?r.jobOrders.length:0),1),t("td",ye,d(s.formatDate(r.created_at)),1),t("td",ge,[t("button",{onClick:j(u=>y.$router.push(`/order/${r.order_id}`),["stop"]),class:"text-blue-600 hover:text-blue-900"}," View ",8,fe)])],8,oe))),128))])])])])):(i(),n("div",me,[e[25]||(e[25]=t("div",{class:"text-gray-500 mb-4"},[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e[26]||(e[26]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No orders found",-1)),t("p",we,d(s.searchQuery||s.statusFilter?"Try adjusting your search or filter criteria.":"Get started by creating your first order."),1),t("button",{onClick:e[7]||(e[7]=r=>y.$router.push("/order/new")),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Create Order ")]))]))])}const _e=L(U,[["render",be],["__scopeId","data-v-30580d89"],["__file","/app/src/js/components/OrderList.vue"]]);export{_e as default};
