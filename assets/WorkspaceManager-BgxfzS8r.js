import{_ as re,r as ne,c as l,a as t,b as c,n as y,w as R,v as ae,d as le,e as z,F as Q,f as O,t as m,g as U,h as ie,u as H,i as W,j as G,k as E,l as p,m as L,o as q,p as K,T as de,Q as ce,q as i}from"./main-B_gwUFM9.js";const ue={__name:"WorkspaceManager",setup(Z,{expose:n}){n();const x=H(),o=W(),h=G(),b=E(),k=p("all"),u=p(null),S=p(!1),r=p(""),g=p(!1),v=p(null),w=p("newest"),C=L(()=>{const e=(h.activeQuotes||[]).map(a=>({...a,type:"quote",value:j(a),createdAt:a.createdAt||new Date().toISOString(),status:A(a)})),s=(b.activeCalculators||[]).map(a=>({...a,type:"transfer",value:a.amount||0,createdAt:a.createdAt||new Date().toISOString(),status:M(a)}));return[...e,...s].sort((a,f)=>{switch(w.value){case"newest":return _(a,f,!0);case"oldest":return _(a,f,!1);case"name":return D(a,f);case"value":return N(a,f);case"type":return F(a,f);default:return _(a,f,!0)}})}),J=L(()=>{let e=C.value;if(k.value!=="all"&&(e=e.filter(s=>s.type===k.value.slice(0,-1))),r.value.trim()){const s=r.value.toLowerCase().trim();e=e.filter(d=>{const a=I(d).toLowerCase(),f=B(d).toLowerCase();return a.includes(s)||f.includes(s)})}return e}),_=(e,s,d=!0)=>{const a=new Date(e.createdAt).getTime(),f=new Date(s.createdAt).getTime();return a!==f?d?f-a:a-f:e.type!==s.type?e.type==="quote"?-1:1:D(e,s)},D=(e,s)=>{const d=I(e).toLowerCase(),a=I(s).toLowerCase();return d.localeCompare(a)},N=(e,s)=>{const d=e.value||0,a=s.value||0;return d!==a?a-d:_(e,s,!0)},F=(e,s)=>e.type!==s.type?e.type==="quote"?-1:1:_(e,s,!0),I=e=>{if(e.type==="quote"){const s=[];return e.orderNumber&&s.push(e.orderNumber),e.commander&&s.push(e.commander),s.length===0&&s.push(e.systemName||"New Quote"),s.join(" - ")}else return e.recipient?`${e.recipient} - ${e.purpose}`:"New Transfer"},B=e=>e.type==="quote"?e.systemName||"No system specified":`Amount: ${P(e.amount||0)}`,j=e=>e.commodities&&e.commodities.length>0?e.commodities.reduce((s,d)=>s+(d.basePrice||0)*(d.quantity||0),0):0,A=e=>e.formattedQuote?"Generated":e.commodities&&e.commodities.length>0?"In Progress":"Draft",M=e=>e.tradingRounds&&e.tradingRounds.length>0?"Calculated":e.amount>0?"In Progress":"Draft",P=e=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e):"$0",X=e=>e?new Date(e).toLocaleDateString():"";q(()=>o.params,e=>{var s,d;if(e.quoteId){const a=(s=h.activeQuotes)==null?void 0:s.find(f=>f.id===e.quoteId);a&&(u.value={...a,type:"quote"})}else if(e.calculatorId){const a=(d=b.activeCalculators)==null?void 0:d.find(f=>f.id===e.calculatorId);a&&(u.value={...a,type:"transfer"})}else u.value=null},{immediate:!0});const Y=e=>{u.value=e,e.type==="quote"?x.push(`/workspace/quote/${e.id}`):e.type==="transfer"&&x.push(`/workspace/transfer/${e.id}`)},$=()=>{const e=h.addQuote({orderNumber:"",commander:"",systemName:"",destination:"",isPlanetarySite:!1,applyPitaFactor:!1,distanceFromSol:0,quoteType:"system",commodities:[],sites:[],formattedQuote:"",fuzzyMatches:[],invalidCommodities:[],createdAt:new Date().toISOString()});u.value={...e,type:"quote"},x.push(`/workspace/quote/${e.id}`)},ee=()=>{const e=b.addCalculator({recipient:"",purpose:"",amounts:["0"],amount:0,cargoSize:0,commodity:"painite",direction:"paying",bringCommodity:0,leaveCommodity:0,tradingRounds:[],totalUnits:0,totalValue:0,error:0,createdAt:new Date().toISOString()});u.value={...e,type:"transfer"},x.push(`/workspace/transfer/${e.id}`)},te=(e,s=null)=>{(s==null?void 0:s.shiftKey)?T(e):(v.value=e,g.value=!0)},T=e=>{var s,d;e.type==="quote"?h.removeQuote(e.id):b.removeCalculator(e.id),((s=u.value)==null?void 0:s.id)===e.id&&((d=u.value)==null?void 0:d.type)===e.type&&(u.value=null,x.push("/workspace"))},oe=()=>{v.value&&(T(v.value),g.value=!1,v.value=null)},se=()=>{g.value=!1,v.value=null};K(()=>{C.value.length>0&&(u.value=C.value[0])}),q(C,e=>{u.value&&!e.find(s=>s.id===u.value.id&&s.type===u.value.type)&&(u.value=e.length>0?e[0]:null)},{deep:!0});const V={router:x,route:o,quoteStore:h,transferStore:b,activeFilter:k,selectedItem:u,isLeftPaneCollapsed:S,searchQuery:r,showDeleteConfirm:g,itemToDelete:v,sortBy:w,allItems:C,filteredItems:J,sortByDate:_,sortByName:D,sortByValue:N,sortByType:F,getItemTitle:I,getItemSubtitle:B,getQuoteValue:j,getQuoteStatus:A,getTransferStatus:M,formatCurrency:P,formatDate:X,selectItem:Y,createNewQuote:$,createNewTransfer:ee,removeItem:te,performDelete:T,confirmDelete:oe,cancelDelete:se,ref:p,computed:L,onMounted:K,watch:q,get useRouter(){return H},get useRoute(){return W},get useQuoteStore(){return G},get useTransferStore(){return E},QuoteGenerator:ce,TransferCalculator:de};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}},fe={class:"workspace-manager"},me={class:"flex h-screen bg-gray-50"},ve={class:"p-4 border-b border-gray-200 bg-gray-50"},ge={class:"flex items-center justify-between mb-4"},ye={class:"flex items-center gap-2"},pe={key:0,class:"text-xl font-semibold text-gray-900"},xe={key:0,class:"flex gap-2"},he={key:0,class:"mb-4"},be={class:"relative"},we={key:1,class:"space-y-3"},_e={class:"flex items-center gap-2"},ke={class:"flex gap-1 bg-gray-100 p-1 rounded-lg"},Ce={class:"flex-1 overflow-y-auto"},Se={key:0,class:"p-2 space-y-1"},Ie=["onClick","title"],De={class:"flex items-center justify-center"},Te={key:0,class:"p-4 text-center text-gray-500"},Qe={class:"text-sm mt-1"},Le={key:1,class:"space-y-1 p-2"},qe=["onClick"],Ne={class:"flex items-start justify-between"},Fe={class:"flex-1 min-w-0"},Be={class:"flex items-center gap-2 mb-1"},je={key:0,class:"text-xs text-gray-500"},Ae={class:"font-medium text-gray-900 truncate"},Me={class:"text-sm text-gray-600 truncate"},Pe={class:"flex items-center gap-4 mt-2 text-xs text-gray-500"},Ve={key:0},Re={key:1},ze={class:"flex items-center gap-1 ml-2"},Oe=["onClick","title"],Ue={class:"flex-1 flex flex-col"},He={key:0,class:"flex-1 flex items-center justify-center bg-gray-50"},We={key:1,class:"flex-1 overflow-y-auto"},Ge={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},Ee={class:"p-6"},Ke={class:"flex items-center mb-4"},Ze={class:"ml-3"},Je={class:"text-lg font-medium text-gray-900"},Xe={class:"mb-6"},Ye={class:"text-sm text-gray-500 mb-2"},$e={class:"bg-gray-50 p-3 rounded-md"},et={class:"text-sm font-medium text-gray-900"},tt={class:"text-xs text-gray-500 mt-1"};function ot(Z,n,x,o,h,b){var u,S;const k=ne("router-view");return i(),l("div",fe,[t("div",me,[c(" Left Pane: List/Grid View "),t("div",{class:y(["bg-white border-r border-gray-200 flex flex-col transition-all duration-300",o.isLeftPaneCollapsed?"w-12":"w-1/3"])},[c(" Header "),t("div",ve,[t("div",ge,[t("div",ye,[t("button",{onClick:n[0]||(n[0]=r=>o.isLeftPaneCollapsed=!o.isLeftPaneCollapsed),class:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded-md transition-colors",title:"Toggle sidebar"},[(i(),l("svg",{class:y(["w-4 h-4 transition-transform",o.isLeftPaneCollapsed?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n[7]||(n[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)]),2))]),o.isLeftPaneCollapsed?c("v-if",!0):(i(),l("h2",pe," Workspace "))]),o.isLeftPaneCollapsed?c("v-if",!0):(i(),l("div",xe,[t("button",{onClick:o.createNewQuote,class:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors"}," + Quote "),t("button",{onClick:o.createNewTransfer,class:"px-3 py-1.5 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 transition-colors"}," + Transfer ")]))]),c(" Search Input "),o.isLeftPaneCollapsed?c("v-if",!0):(i(),l("div",he,[t("div",be,[R(t("input",{"onUpdate:modelValue":n[1]||(n[1]=r=>o.searchQuery=r),type:"text",placeholder:"Search quotes and transfers...",class:"w-full px-3 py-2 pl-10 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[ae,o.searchQuery]]),n[9]||(n[9]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{class:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),o.searchQuery?(i(),l("button",{key:0,onClick:n[2]||(n[2]=r=>o.searchQuery=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},n[8]||(n[8]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):c("v-if",!0)])])),c(" Sort and Filter Controls "),o.isLeftPaneCollapsed?c("v-if",!0):(i(),l("div",we,[c(" Sort Dropdown "),t("div",_e,[n[11]||(n[11]=t("label",{class:"text-sm font-medium text-gray-700"},"Sort by:",-1)),R(t("select",{"onUpdate:modelValue":n[3]||(n[3]=r=>o.sortBy=r),class:"px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n[10]||(n[10]=[z('<option value="newest" data-v-31f6a5bf>Newest First</option><option value="oldest" data-v-31f6a5bf>Oldest First</option><option value="name" data-v-31f6a5bf>Name (A-Z)</option><option value="value" data-v-31f6a5bf>Value (High to Low)</option><option value="type" data-v-31f6a5bf>Type (Quotes First)</option>',5)]),512),[[le,o.sortBy]])]),c(" Filter Tabs "),t("div",ke,[t("button",{onClick:n[4]||(n[4]=r=>o.activeFilter="all"),class:y(["px-3 py-1.5 text-sm rounded-md transition-colors",o.activeFilter==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"])}," All ",2),t("button",{onClick:n[5]||(n[5]=r=>o.activeFilter="quotes"),class:y(["px-3 py-1.5 text-sm rounded-md transition-colors",o.activeFilter==="quotes"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"])}," Quotes ",2),t("button",{onClick:n[6]||(n[6]=r=>o.activeFilter="transfers"),class:y(["px-3 py-1.5 text-sm rounded-md transition-colors",o.activeFilter==="transfers"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"])}," Transfers ",2)])]))]),c(" Items List "),t("div",Ce,[c(" Collapsed State "),o.isLeftPaneCollapsed?(i(),l("div",Se,[(i(!0),l(Q,null,O(o.filteredItems.slice(0,8),r=>{var g,v;return i(),l("div",{key:r.id,onClick:w=>o.selectItem(r),class:y(["p-2 rounded-lg cursor-pointer transition-colors",((g=o.selectedItem)==null?void 0:g.id)===r.id&&((v=o.selectedItem)==null?void 0:v.type)===r.type?"bg-blue-50 border border-blue-200":"bg-gray-50 hover:bg-gray-100"]),title:o.getItemTitle(r)},[t("div",De,[t("span",{class:y(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium",r.type==="quote"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"])},m(r.type==="quote"?"Q":"T"),3)])],10,Ie)}),128))])):(i(),l(Q,{key:1},[c(" Expanded State "),t("div",null,[o.filteredItems.length===0?(i(),l("div",Te,[t("p",null,"No "+m(o.activeFilter==="all"?"items":o.activeFilter)+" found",1),t("p",Qe," Create a new "+m(o.activeFilter==="all"?"quote or transfer":o.activeFilter.slice(0,-1))+" to get started ",1)])):(i(),l("div",Le,[(i(!0),l(Q,null,O(o.filteredItems,r=>{var g,v;return i(),l("div",{key:r.id,onClick:w=>o.selectItem(r),class:y(["p-3 rounded-lg cursor-pointer transition-colors border",((g=o.selectedItem)==null?void 0:g.id)===r.id&&((v=o.selectedItem)==null?void 0:v.type)===r.type?"bg-blue-50 border-blue-200 shadow-sm":"bg-white border-gray-200 hover:bg-gray-50 hover:border-gray-300"])},[t("div",Ne,[t("div",Fe,[t("div",Be,[t("span",{class:y(["px-2 py-0.5 text-xs rounded-full font-medium",r.type==="quote"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"])},m(r.type==="quote"?"Quote":"Transfer"),3),r.status?(i(),l("span",je,m(r.status),1)):c("v-if",!0)]),t("h3",Ae,m(o.getItemTitle(r)),1),t("p",Me,m(o.getItemSubtitle(r)),1),t("div",Pe,[r.value?(i(),l("span",Ve,m(o.formatCurrency(r.value)),1)):c("v-if",!0),r.createdAt?(i(),l("span",Re,m(o.formatDate(r.createdAt)),1)):c("v-if",!0)])]),t("div",ze,[t("button",{onClick:U(w=>o.removeItem(r,w),["stop"]),class:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:`Remove ${r.type} (Shift+click to skip confirmation)`},[...n[12]||(n[12]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Oe)])])],10,qe)}),128))]))])],2112))])],2),c(" Right Pane: Selected Item Details "),t("div",Ue,[o.selectedItem?(i(),l("div",We,[ie(k)])):(i(),l("div",He,n[13]||(n[13]=[z('<div class="text-center" data-v-31f6a5bf><svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-31f6a5bf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-31f6a5bf></path></svg><h3 class="text-lg font-medium text-gray-900 mb-2" data-v-31f6a5bf> Select an item to view details </h3><p class="text-gray-600" data-v-31f6a5bf> Choose a quote or transfer from the list to see its details and make edits. </p></div>',1)])))])]),c(" Delete Confirmation Dialog "),o.showDeleteConfirm?(i(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:U(o.cancelDelete,["self"])},[t("div",Ge,[t("div",Ee,[t("div",Ke,[n[14]||(n[14]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t("div",Ze,[t("h3",Je," Delete "+m(((u=o.itemToDelete)==null?void 0:u.type)==="quote"?"Quote":"Transfer"),1)])]),t("div",Xe,[t("p",Ye," Are you sure you want to delete this "+m((S=o.itemToDelete)==null?void 0:S.type)+"? ",1),t("div",$e,[t("p",et,m(o.getItemTitle(o.itemToDelete)),1),t("p",tt,m(o.getItemSubtitle(o.itemToDelete)),1)]),n[15]||(n[15]=t("p",{class:"text-xs text-gray-400 mt-2"}," 💡 Tip: Hold Shift while clicking the delete button to skip this confirmation. ",-1))]),t("div",{class:"flex justify-end gap-3"},[t("button",{onClick:o.cancelDelete,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Cancel "),t("button",{onClick:o.confirmDelete,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Delete ")])])])])):c("v-if",!0)])}const rt=re(ue,[["render",ot],["__scopeId","data-v-31f6a5bf"],["__file","/app/src/js/components/WorkspaceManager.vue"]]);export{rt as default};
